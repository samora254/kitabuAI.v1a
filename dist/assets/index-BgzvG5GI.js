var nu=Object.defineProperty;var Bo=i=>{throw TypeError(i)};var ru=(i,e,s)=>e in i?nu(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var iu=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var qn=(i,e,s)=>ru(i,typeof e!="symbol"?e+"":e,s),ws=(i,e,s)=>e.has(i)||Bo("Cannot "+s);var At=(i,e,s)=>(ws(i,e,"read from private field"),s?s.call(i):e.get(i)),on=(i,e,s)=>e.has(i)?Bo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,s),ln=(i,e,s,o)=>(ws(i,e,"write to private field"),o?o.call(i,s):e.set(i,s),s),Jt=(i,e,s)=>(ws(i,e,"access private method"),s);var Fr=(i,e,s,o)=>({set _(a){ln(i,e,a,s)},get _(){return At(i,e,o)}});var su=iu((exports,module)=>{function _mergeNamespaces(i,e){for(var s=0;s<e.length;s++){const o=e[s];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in i)){const c=Object.getOwnPropertyDescriptor(o,a);c&&Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var s=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var a=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(s,o,a.get?a:{enumerable:!0,get:function(){return i[o]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r$1=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(i){return i===null||typeof i!="object"?null:(i=z$1&&i[z$1]||i["@@iterator"],typeof i=="function"?i:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$1(i,e,s){this.props=i,this.context=e,this.refs=D$2,this.updater=s||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$1.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(i,e,s){this.props=i,this.context=e,this.refs=D$2,this.updater=s||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$2(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(i,e,s){var o,a={},c=null,d=null;if(e!=null)for(o in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,o)&&!L$1.hasOwnProperty(o)&&(a[o]=e[o]);var h=arguments.length-2;if(h===1)a.children=s;else if(1<h){for(var g=Array(h),j=0;j<h;j++)g[j]=arguments[j+2];a.children=g}if(i&&i.defaultProps)for(o in h=i.defaultProps,h)a[o]===void 0&&(a[o]=h[o]);return{$$typeof:l$1,type:i,key:c,ref:d,props:a,_owner:K$1.current}}function N$1(i,e){return{$$typeof:l$1,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$1(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$1}function escape$1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return e[s]})}var P$1=/\/+/g;function Q$1(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):e.toString(36)}function R$1(i,e,s,o,a){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var d=!1;if(i===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(i.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=i,a=a(d),i=o===""?"."+Q$1(d,0):o,I$1(a)?(s="",i!=null&&(s=i.replace(P$1,"$&/")+"/"),R$1(a,e,s,"",function(j){return j})):a!=null&&(O$1(a)&&(a=N$1(a,s+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+i)),e.push(a)),1;if(d=0,o=o===""?".":o+":",I$1(i))for(var h=0;h<i.length;h++){c=i[h];var g=o+Q$1(c,h);d+=R$1(c,e,s,g,a)}else if(g=A$1(i),typeof g=="function")for(i=g.call(i),h=0;!(c=i.next()).done;)c=c.value,g=o+Q$1(c,h++),d+=R$1(c,e,s,g,a);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$2(i,e,s){if(i==null)return i;var o=[],a=0;return R$1(i,o,"","",function(c){return e.call(s,c,a++)}),o}function T$1(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$1(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(i,e,s){S$2(i,function(){e.apply(this,arguments)},s)},count:function(i){var e=0;return S$2(i,function(){e++}),e},toArray:function(i){return S$2(i,function(e){return e})||[]},only:function(i){if(!O$1(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r$1;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$1;react_production_min.cloneElement=function(i,e,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var o=C$2({},i.props),a=i.key,c=i.ref,d=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$1.current),e.key!==void 0&&(a=""+e.key),i.type&&i.type.defaultProps)var h=i.type.defaultProps;for(g in e)J.call(e,g)&&!L$1.hasOwnProperty(g)&&(o[g]=e[g]===void 0&&h!==void 0?h[g]:e[g])}var g=arguments.length-2;if(g===1)o.children=s;else if(1<g){h=Array(g);for(var j=0;j<g;j++)h[j]=arguments[j+2];o.children=h}return{$$typeof:l$1,type:i.type,key:a,ref:c,props:o,_owner:d}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$1;react_production_min.createFactory=function(i){var e=M$1.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$2,render:i}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(i){return{$$typeof:y,_payload:{_status:-1,_result:i},_init:T$1}};react_production_min.memo=function(i,e){return{$$typeof:x,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$1.transition;V$1.transition={};try{i()}finally{V$1.transition=e}};react_production_min.unstable_act=X$1;react_production_min.useCallback=function(i,e){return U$1.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$1.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$1.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$1.current.useEffect(i,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(i,e,s){return U$1.current.useImperativeHandle(i,e,s)};react_production_min.useInsertionEffect=function(i,e){return U$1.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$1.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$1.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,s){return U$1.current.useReducer(i,e,s)};react_production_min.useRef=function(i){return U$1.current.useRef(i)};react_production_min.useState=function(i){return U$1.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,s){return U$1.current.useSyncExternalStore(i,e,s)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(i,e,s){var o,a={},c=null,d=null;s!==void 0&&(c=""+s),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(o in e)m$1.call(e,o)&&!p$1.hasOwnProperty(o)&&(a[o]=e[o]);if(i&&i.defaultProps)for(o in e=i.defaultProps,e)a[o]===void 0&&(a[o]=e[o]);return{$$typeof:k,type:i,key:c,ref:d,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(Vt,Rt){var vt=Vt.length;Vt.push(Rt);e:for(;0<vt;){var St=vt-1>>>1,Pt=Vt[St];if(0<a(Pt,Rt))Vt[St]=Rt,Vt[vt]=Pt,vt=St;else break e}}function s(Vt){return Vt.length===0?null:Vt[0]}function o(Vt){if(Vt.length===0)return null;var Rt=Vt[0],vt=Vt.pop();if(vt!==Rt){Vt[0]=vt;e:for(var St=0,Pt=Vt.length,pt=Pt>>>1;St<pt;){var bt=2*(St+1)-1,Tt=Vt[bt],Ct=bt+1,kt=Vt[Ct];if(0>a(Tt,vt))Ct<Pt&&0>a(kt,Tt)?(Vt[St]=kt,Vt[Ct]=vt,St=Ct):(Vt[St]=Tt,Vt[bt]=vt,St=bt);else if(Ct<Pt&&0>a(kt,vt))Vt[St]=kt,Vt[Ct]=vt,St=Ct;else break e}}return Rt}function a(Vt,Rt){var vt=Vt.sortIndex-Rt.sortIndex;return vt!==0?vt:Vt.id-Rt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var g=[],j=[],$=1,_=null,et=3,tt=!1,it=!1,ot=!1,at=typeof setTimeout=="function"?setTimeout:null,rt=typeof clearTimeout=="function"?clearTimeout:null,st=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function lt(Vt){for(var Rt=s(j);Rt!==null;){if(Rt.callback===null)o(j);else if(Rt.startTime<=Vt)o(j),Rt.sortIndex=Rt.expirationTime,e(g,Rt);else break;Rt=s(j)}}function mt(Vt){if(ot=!1,lt(Vt),!it)if(s(g)!==null)it=!0,$t(ft);else{var Rt=s(j);Rt!==null&&Bt(mt,Rt.startTime-Vt)}}function ft(Vt,Rt){it=!1,ot&&(ot=!1,rt(ut),ut=-1),tt=!0;var vt=et;try{for(lt(Rt),_=s(g);_!==null&&(!(_.expirationTime>Rt)||Vt&&!ht());){var St=_.callback;if(typeof St=="function"){_.callback=null,et=_.priorityLevel;var Pt=St(_.expirationTime<=Rt);Rt=i.unstable_now(),typeof Pt=="function"?_.callback=Pt:_===s(g)&&o(g),lt(Rt)}else o(g);_=s(g)}if(_!==null)var pt=!0;else{var bt=s(j);bt!==null&&Bt(mt,bt.startTime-Rt),pt=!1}return pt}finally{_=null,et=vt,tt=!1}}var gt=!1,dt=null,ut=-1,ct=5,_t=-1;function ht(){return!(i.unstable_now()-_t<ct)}function Et(){if(dt!==null){var Vt=i.unstable_now();_t=Vt;var Rt=!0;try{Rt=dt(!0,Vt)}finally{Rt?yt():(gt=!1,dt=null)}}else gt=!1}var yt;if(typeof st=="function")yt=function(){st(Et)};else if(typeof MessageChannel<"u"){var Ot=new MessageChannel,Dt=Ot.port2;Ot.port1.onmessage=Et,yt=function(){Dt.postMessage(null)}}else yt=function(){at(Et,0)};function $t(Vt){dt=Vt,gt||(gt=!0,yt())}function Bt(Vt,Rt){ut=at(function(){Vt(i.unstable_now())},Rt)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Vt){Vt.callback=null},i.unstable_continueExecution=function(){it||tt||(it=!0,$t(ft))},i.unstable_forceFrameRate=function(Vt){0>Vt||125<Vt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ct=0<Vt?Math.floor(1e3/Vt):5},i.unstable_getCurrentPriorityLevel=function(){return et},i.unstable_getFirstCallbackNode=function(){return s(g)},i.unstable_next=function(Vt){switch(et){case 1:case 2:case 3:var Rt=3;break;default:Rt=et}var vt=et;et=Rt;try{return Vt()}finally{et=vt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Vt,Rt){switch(Vt){case 1:case 2:case 3:case 4:case 5:break;default:Vt=3}var vt=et;et=Vt;try{return Rt()}finally{et=vt}},i.unstable_scheduleCallback=function(Vt,Rt,vt){var St=i.unstable_now();switch(typeof vt=="object"&&vt!==null?(vt=vt.delay,vt=typeof vt=="number"&&0<vt?St+vt:St):vt=St,Vt){case 1:var Pt=-1;break;case 2:Pt=250;break;case 5:Pt=1073741823;break;case 4:Pt=1e4;break;default:Pt=5e3}return Pt=vt+Pt,Vt={id:$++,callback:Rt,priorityLevel:Vt,startTime:vt,expirationTime:Pt,sortIndex:-1},vt>St?(Vt.sortIndex=vt,e(j,Vt),s(g)===null&&Vt===s(j)&&(ot?(rt(ut),ut=-1):ot=!0,Bt(mt,vt-St))):(Vt.sortIndex=Pt,e(g,Vt),it||tt||(it=!0,$t(ft))),Vt},i.unstable_shouldYield=ht,i.unstable_wrapCallback=function(Vt){var Rt=et;return function(){var vt=et;et=Rt;try{return Vt.apply(this,arguments)}finally{et=vt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(i,e){ha(i,e),ha(i+"Capture",e)}function ha(i,e){for(ea[i]=e,i=0;i<e.length;i++)da.add(e[i])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(i){return ja.call(ma,i)?!0:ja.call(la,i)?!1:ka.test(i)?ma[i]=!0:(la[i]=!0,!1)}function pa(i,e,s,o){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa(i,e,s,o){if(e===null||typeof e>"u"||pa(i,e,s,o))return!0;if(o)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(i,e,s,o,a,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z[i]=new v$1(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z[e]=new v$1(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z[i]=new v$1(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z[i]=new v$1(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z[i]=new v$1(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z[i]=new v$1(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z[i]=new v$1(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z[i]=new v$1(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z[i]=new v$1(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v$1(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra,sa);z[e]=new v$1(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra,sa);z[e]=new v$1(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z[i]=new v$1(i,1,!1,i.toLowerCase(),null,!1,!1)});z.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z[i]=new v$1(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta(i,e,s,o){var a=z.hasOwnProperty(e)?z[e]:null;(a!==null?a.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,s,a,o)&&(s=null),o||a===null?oa(e)&&(s===null?i.removeAttribute(e):i.setAttribute(e,""+s)):a.mustUseProperty?i[a.propertyName]=s===null?a.type===3?!1:"":s:(e=a.attributeName,o=a.attributeNamespace,s===null?i.removeAttribute(e):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,o?i.setAttributeNS(o,e,s):i.setAttribute(e,s))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja&&i[Ja]||i["@@iterator"],typeof i=="function"?i:null)}var A=Object.assign,La;function Ma(i){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na=!1;function Oa(i,e){if(!i||Na)return"";Na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(j){var o=j}Reflect.construct(i,[],e)}else{try{e.call()}catch(j){o=j}i.call(e.prototype)}else{try{throw Error()}catch(j){o=j}i()}}catch(j){if(j&&o&&typeof j.stack=="string"){for(var a=j.stack.split(`
`),c=o.stack.split(`
`),d=a.length-1,h=c.length-1;1<=d&&0<=h&&a[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(a[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||a[d]!==c[h]){var g=`
`+a[d].replace(" at new "," at ");return i.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",i.displayName)),g}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma(i):""}function Pa(i){switch(i.tag){case 5:return Ma(i.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return i=Oa(i.type,!1),i;case 11:return i=Oa(i.type.render,!1),i;case 1:return i=Oa(i.type,!0),i;default:return""}}function Qa(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca:return(i.displayName||"Context")+".Consumer";case Ba:return(i._context.displayName||"Context")+".Provider";case Da:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga:return e=i.displayName||null,e!==null?e:Qa(i.type)||"Memo";case Ha:e=i._payload,i=i._init;try{return Qa(i(e))}catch{}}return null}function Ra(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(i){var e=Ta(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),o=""+i[e];if(!i.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,c=s.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,c.call(this,d)}}),Object.defineProperty(i,e,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va(i){i._valueTracker||(i._valueTracker=Ua(i))}function Wa(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var s=e.getValue(),o="";return i&&(o=Ta(i)?i.checked?"true":"false":i.value),i=o,i!==s?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya(i,e){var s=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za(i,e){var s=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;s=Sa(e.value!=null?e.value:s),i._wrapperState={initialChecked:o,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(i,e){e=e.checked,e!=null&&ta(i,"checked",e,!1)}function bb(i,e){ab(i,e);var s=Sa(e.value),o=e.type;if(s!=null)o==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(o==="submit"||o==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb(i,e.type,s):e.hasOwnProperty("defaultValue")&&cb(i,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db$1(i,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,s||e===i.value||(i.value=e),i.defaultValue=e}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb(i,e,s){(e!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb=Array.isArray;function fb(i,e,s,o){if(i=i.options,e){e={};for(var a=0;a<s.length;a++)e["$"+s[a]]=!0;for(s=0;s<i.length;s++)a=e.hasOwnProperty("$"+i[s].value),i[s].selected!==a&&(i[s].selected=a),a&&o&&(i[s].defaultSelected=!0)}else{for(s=""+Sa(s),e=null,a=0;a<i.length;a++){if(i[a].value===s){i[a].selected=!0,o&&(i[a].defaultSelected=!0);return}e!==null||i[a].disabled||(e=i[a])}e!==null&&(e.selected=!0)}}function gb(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb(i,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p(92));if(eb(s)){if(1<s.length)throw Error(p(93));s=s[0]}e=s}e==null&&(e=""),s=e}i._wrapperState={initialValue:Sa(s)}}function ib(i,e){var s=Sa(e.value),o=Sa(e.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),e.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),o!=null&&(i.defaultValue=""+o)}function jb(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb,nb=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,o,a){MSApp.execUnsafeLocalFunction(function(){return i(e,s,o,a)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob(i,e){if(e){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=e;return}}i.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(i){qb.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb[e]=pb[i]})});function rb(i,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb.hasOwnProperty(i)&&pb[i]?(""+e).trim():e+"px"}function sb(i,e){i=i.style;for(var s in e)if(e.hasOwnProperty(s)){var o=s.indexOf("--")===0,a=rb(s,e[s],o);s==="float"&&(s="cssFloat"),o?i.setProperty(s,a):i[s]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(i,e){if(e){if(tb[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb=null,zb=null,Ab=null;function Bb(i){if(i=Cb(i)){if(typeof yb!="function")throw Error(p(280));var e=i.stateNode;e&&(e=Db(e),yb(i.stateNode,i.type,e))}}function Eb(i){zb?Ab?Ab.push(i):Ab=[i]:zb=i}function Fb(){if(zb){var i=zb,e=Ab;if(Ab=zb=null,Bb(i),e)for(i=0;i<e.length;i++)Bb(e[i])}}function Gb(i,e){return i(e)}function Hb(){}var Ib=!1;function Jb(i,e,s){if(Ib)return i(e,s);Ib=!0;try{return Gb(i,e,s)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(i,e){var s=i.stateNode;if(s===null)return null;var o=Db(s);if(o===null)return null;s=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(i=i.type,o=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!o;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p(231,e,typeof s));return s}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(i,e,s,o,a,c,d,h,g){var j=Array.prototype.slice.call(arguments,3);try{e.apply(s,j)}catch($){this.onError($)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(i){Ob=!0,Pb=i}};function Tb(i,e,s,o,a,c,d,h,g){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(i,e,s,o,a,c,d,h,g){if(Tb.apply(this,arguments),Ob){if(Ob){var j=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=j)}}function Vb(i){var e=i,s=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(s=e.return),i=e.return;while(i)}return e.tag===3?s:null}function Wb(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(i){if(Vb(i)!==i)throw Error(p(188))}function Yb(i){var e=i.alternate;if(!e){if(e=Vb(i),e===null)throw Error(p(188));return e!==i?null:i}for(var s=i,o=e;;){var a=s.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){s=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===s)return Xb(a),i;if(c===o)return Xb(a),e;c=c.sibling}throw Error(p(188))}if(s.return!==o.return)s=a,o=c;else{for(var d=!1,h=a.child;h;){if(h===s){d=!0,s=a,o=c;break}if(h===o){d=!0,o=a,s=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===s){d=!0,s=c,o=a;break}if(h===o){d=!0,o=c,s=a;break}h=h.sibling}if(!d)throw Error(p(189))}}if(s.alternate!==o)throw Error(p(190))}if(s.tag!==3)throw Error(p(188));return s.stateNode.current===s?i:e}function Zb(i){return i=Yb(i),i!==null?$b(i):null}function $b(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b(i);if(e!==null)return e;i=i.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(i){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,i,void 0,(i.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(i){return i>>>=0,i===0?32:31-(pc(i)/qc|0)|0}var rc=64,sc=4194304;function tc(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc(i,e){var s=i.pendingLanes;if(s===0)return 0;var o=0,a=i.suspendedLanes,c=i.pingedLanes,d=s&268435455;if(d!==0){var h=d&~a;h!==0?o=tc(h):(c&=d,c!==0&&(o=tc(c)))}else d=s&~a,d!==0?o=tc(d):c!==0&&(o=tc(c));if(o===0)return 0;if(e!==0&&e!==o&&!(e&a)&&(a=o&-o,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(o&4&&(o|=s&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=o;0<e;)s=31-oc(e),a=1<<s,o|=i[s],e&=~a;return o}function vc(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(i,e){for(var s=i.suspendedLanes,o=i.pingedLanes,a=i.expirationTimes,c=i.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,g=a[d];g===-1?(!(h&s)||h&o)&&(a[d]=vc(h,e)):g<=e&&(i.expiredLanes|=h),c&=~h}}function xc(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc(){var i=rc;return rc<<=1,!(rc&4194240)&&(rc=64),i}function zc(i){for(var e=[],s=0;31>s;s++)e.push(i);return e}function Ac(i,e,s){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc(e),i[e]=s}function Bc(i,e){var s=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var o=i.eventTimes;for(i=i.expirationTimes;0<s;){var a=31-oc(s),c=1<<a;e[a]=0,o[a]=-1,i[a]=-1,s&=~c}}function Cc(i,e){var s=i.entangledLanes|=e;for(i=i.entanglements;s;){var o=31-oc(s),a=1<<o;a&e|i[o]&e&&(i[o]|=e),s&=~a}}var C$1=0;function Dc(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(i,e){switch(i){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(i,e,s,o,a,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:s,eventSystemFlags:o,nativeEvent:c,targetContainers:[a]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),i):(i.eventSystemFlags|=o,e=i.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),i)}function Uc(i,e,s,o,a){switch(e){case"focusin":return Lc=Tc(Lc,i,e,s,o,a),!0;case"dragenter":return Mc=Tc(Mc,i,e,s,o,a),!0;case"mouseover":return Nc=Tc(Nc,i,e,s,o,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,i,e,s,o,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,i,e,s,o,a)),!0}return!1}function Vc(i){var e=Wc(i.target);if(e!==null){var s=Vb(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb(s),e!==null){i.blockedOn=e,Ic(i.priority,function(){Gc(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var s=Yc(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var o=new s.constructor(s.type,s);wb=o,s.target.dispatchEvent(o),wb=null}else return e=Cb(s),e!==null&&Fc(e),i.blockedOn=s,!1;e.shift()}return!0}function Zc(i,e,s){Xc(i)&&s.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(i){function e(a){return ad(a,i)}if(0<Kc.length){ad(Kc[0],i);for(var s=1;s<Kc.length;s++){var o=Kc[s];o.blockedOn===i&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,i),Mc!==null&&ad(Mc,i),Nc!==null&&ad(Nc,i),Oc.forEach(e),Pc.forEach(e),s=0;s<Qc.length;s++)o=Qc[s],o.blockedOn===i&&(o.blockedOn=null);for(;0<Qc.length&&(s=Qc[0],s.blockedOn===null);)Vc(s),s.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(i,e,s,o){var a=C$1,c=cd.transition;cd.transition=null;try{C$1=1,fd(i,e,s,o)}finally{C$1=a,cd.transition=c}}function gd(i,e,s,o){var a=C$1,c=cd.transition;cd.transition=null;try{C$1=4,fd(i,e,s,o)}finally{C$1=a,cd.transition=c}}function fd(i,e,s,o){if(dd){var a=Yc(i,e,s,o);if(a===null)hd(i,e,o,id$2,s),Sc(i,o);else if(Uc(a,i,e,s,o))o.stopPropagation();else if(Sc(i,o),e&4&&-1<Rc.indexOf(i)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(i,e,s,o),c===null&&hd(i,e,o,id$2,s),c===a)break;a=c}a!==null&&o.stopPropagation()}else hd(i,e,o,null,s)}}var id$2=null;function Yc(i,e,s,o){if(id$2=null,i=xb(o),i=Wc(i),i!==null)if(e=Vb(i),e===null)i=null;else if(s=e.tag,s===13){if(i=Wb(e),i!==null)return i;i=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id$2=i,null}function jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var i,e=ld,s=e.length,o,a="value"in kd?kd.value:kd.textContent,c=a.length;for(i=0;i<s&&e[i]===a[i];i++);var d=s-i;for(o=1;o<=d&&e[s-o]===a[c-o];o++);return md=a.slice(i,1<o?1-o:void 0)}function od(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd(){return!0}function qd(){return!1}function rd(i){function e(s,o,a,c,d){this._reactName=s,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in i)i.hasOwnProperty(h)&&(s=i[h],this[h]=s?s(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd&&(yd&&i.type==="mousemove"?(wd=i.screenX-yd.screenX,xd=i.screenY-yd.screenY):xd=wd=0,yd=i),wd)},movementY:function(i){return"movementY"in i?i.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od[i])?!!e[i]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(i){if(i.key){var e=Md[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(i){return i.type==="keypress"?od(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee=" ",fe$1=!1;function ge$1(i,e){switch(i){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie=!1;function je(i,e){switch(i){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe$1=!0,ee);case"textInput":return i=e.data,i===ee&&fe$1?null:i;default:return null}}function ke(i,e){if(ie)return i==="compositionend"||!ae$1&&ge$1(i,e)?(i=nd(),md=ld=kd=null,ie=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le$1[i.type]:e==="textarea"}function ne$1(i,e,s,o){Eb(o),e=oe$1(e,"onChange"),0<e.length&&(s=new td("onChange","change",null,s,o),i.push({event:s,listeners:e}))}var pe$1=null,qe=null;function re$2(i){se(i,0)}function te(i){var e=ue$1(i);if(Wa(e))return i}function ve(i,e){if(i==="change")return e}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(i){if(i.propertyName==="value"&&te(qe)){var e=[];ne$1(e,qe,i,xb(i)),Jb(re$2,e)}}function Ce(i,e,s){i==="focusin"?(Ae(),pe$1=e,qe=s,pe$1.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae()}function De$1(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te(qe)}function Ee$1(i,e){if(i==="click")return te(e)}function Fe(i,e){if(i==="input"||i==="change")return te(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var s=Object.keys(i),o=Object.keys(e);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var a=s[o];if(!ja.call(e,a)||!He(i[a],e[a]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var s=Je(i);i=0;for(var o;s;){if(s.nodeType===3){if(o=i+s.textContent.length,i<=e&&o>=e)return{node:s,offset:e-i};i=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),s=i.focusedElem,o=i.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(o!==null&&Ne(s)){if(e=o.start,i=o.end,i===void 0&&(i=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(i,s.value.length);else if(i=(e=s.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var a=s.textContent.length,c=Math.min(o.start,a);o=o.end===void 0?c:Math.min(o.end,a),!i.extend&&c>o&&(a=o,o=c,c=a),a=Ke(s,c);var d=Ke(s,o);a&&d&&(i.rangeCount!==1||i.anchorNode!==a.node||i.anchorOffset!==a.offset||i.focusNode!==d.node||i.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),i.removeAllRanges(),c>o?(i.addRange(e),i.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),i.addRange(e)))}}for(e=[],i=s;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)i=e[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te$1=!1;function Ue(i,e,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te$1||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie$1(Se,o)||(Se=o,o=oe$1(Re,"onSelect"),0<o.length&&(e=new td("onSelect","select",null,e,s),i.push({event:e,listeners:o}),e.target=Qe)))}function Ve(i,e){var s={};return s[i.toLowerCase()]=e.toLowerCase(),s["Webkit"+i]="webkit"+e,s["Moz"+i]="moz"+e,s}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[i]=e[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,s){var o=i.type||"unknown-event";i.currentTarget=s,Ub(o,e,void 0,i),i.currentTarget=null}function se(i,e){e=(e&4)!==0;for(var s=0;s<i.length;s++){var o=i[s],a=o.event;o=o.listeners;e:{var c=void 0;if(e)for(var d=o.length-1;0<=d;d--){var h=o[d],g=h.instance,j=h.currentTarget;if(h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,j),c=g}else for(d=0;d<o.length;d++){if(h=o[d],g=h.instance,j=h.currentTarget,h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,j),c=g}}}if(Qb)throw i=Rb,Qb=!1,Rb=null,i}function D$1(i,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var o=i+"__bubble";s.has(o)||(pf(e,i,2,!1),s.add(o))}function qf(i,e,s){var o=0;e&&(o|=4),pf(s,i,o,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,s,o){switch(jd(e)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}s=a.bind(null,e,s,i),a=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),o?a!==void 0?i.addEventListener(e,s,{capture:!0,passive:a}):i.addEventListener(e,s,!0):a!==void 0?i.addEventListener(e,s,{passive:a}):i.addEventListener(e,s,!1)}function hd(i,e,s,o,a){var c=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var h=o.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(g=d.tag,g===5||g===6){o=c=d;continue e}h=h.parentNode}}o=o.return}Jb(function(){var j=c,$=xb(s),_=[];e:{var et=df.get(i);if(et!==void 0){var tt=td,it=i;switch(i){case"keypress":if(od(s)===0)break e;case"keydown":case"keyup":tt=Rd;break;case"focusin":it="focus",tt=Fd;break;case"focusout":it="blur",tt=Fd;break;case"beforeblur":case"afterblur":tt=Fd;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Vd;break;case $e:case af:case bf:tt=Hd;break;case cf:tt=Xd;break;case"scroll":tt=vd;break;case"wheel":tt=Zd;break;case"copy":case"cut":case"paste":tt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Td}var ot=(e&4)!==0,at=!ot&&i==="scroll",rt=ot?et!==null?et+"Capture":null:et;ot=[];for(var st=j,lt;st!==null;){lt=st;var mt=lt.stateNode;if(lt.tag===5&&mt!==null&&(lt=mt,rt!==null&&(mt=Kb(st,rt),mt!=null&&ot.push(tf(st,mt,lt)))),at)break;st=st.return}0<ot.length&&(et=new tt(et,it,null,s,$),_.push({event:et,listeners:ot}))}}if(!(e&7)){e:{if(et=i==="mouseover"||i==="pointerover",tt=i==="mouseout"||i==="pointerout",et&&s!==wb&&(it=s.relatedTarget||s.fromElement)&&(Wc(it)||it[uf]))break e;if((tt||et)&&(et=$.window===$?$:(et=$.ownerDocument)?et.defaultView||et.parentWindow:window,tt?(it=s.relatedTarget||s.toElement,tt=j,it=it?Wc(it):null,it!==null&&(at=Vb(it),it!==at||it.tag!==5&&it.tag!==6)&&(it=null)):(tt=null,it=j),tt!==it)){if(ot=Bd,mt="onMouseLeave",rt="onMouseEnter",st="mouse",(i==="pointerout"||i==="pointerover")&&(ot=Td,mt="onPointerLeave",rt="onPointerEnter",st="pointer"),at=tt==null?et:ue$1(tt),lt=it==null?et:ue$1(it),et=new ot(mt,st+"leave",tt,s,$),et.target=at,et.relatedTarget=lt,mt=null,Wc($)===j&&(ot=new ot(rt,st+"enter",it,s,$),ot.target=lt,ot.relatedTarget=at,mt=ot),at=mt,tt&&it)t:{for(ot=tt,rt=it,st=0,lt=ot;lt;lt=vf(lt))st++;for(lt=0,mt=rt;mt;mt=vf(mt))lt++;for(;0<st-lt;)ot=vf(ot),st--;for(;0<lt-st;)rt=vf(rt),lt--;for(;st--;){if(ot===rt||rt!==null&&ot===rt.alternate)break t;ot=vf(ot),rt=vf(rt)}ot=null}else ot=null;tt!==null&&wf(_,et,tt,ot,!1),it!==null&&at!==null&&wf(_,at,it,ot,!0)}}e:{if(et=j?ue$1(j):window,tt=et.nodeName&&et.nodeName.toLowerCase(),tt==="select"||tt==="input"&&et.type==="file")var ft=ve;else if(me$1(et))if(we$1)ft=Fe;else{ft=De$1;var gt=Ce}else(tt=et.nodeName)&&tt.toLowerCase()==="input"&&(et.type==="checkbox"||et.type==="radio")&&(ft=Ee$1);if(ft&&(ft=ft(i,j))){ne$1(_,ft,s,$);break e}gt&&gt(i,et,j),i==="focusout"&&(gt=et._wrapperState)&&gt.controlled&&et.type==="number"&&cb(et,"number",et.value)}switch(gt=j?ue$1(j):window,i){case"focusin":(me$1(gt)||gt.contentEditable==="true")&&(Qe=gt,Re=j,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(_,s,$);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(_,s,$)}var dt;if(ae$1)e:{switch(i){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else ie?ge$1(i,s)&&(ut="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(ut="onCompositionStart");ut&&(de$1&&s.locale!=="ko"&&(ie||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&ie&&(dt=nd()):(kd=$,ld="value"in kd?kd.value:kd.textContent,ie=!0)),gt=oe$1(j,ut),0<gt.length&&(ut=new Ld(ut,i,null,s,$),_.push({event:ut,listeners:gt}),dt?ut.data=dt:(dt=he$1(s),dt!==null&&(ut.data=dt)))),(dt=ce$1?je(i,s):ke(i,s))&&(j=oe$1(j,"onBeforeInput"),0<j.length&&($=new Ld("onBeforeInput","beforeinput",null,s,$),_.push({event:$,listeners:j}),$.data=dt))}se(_,e)})}function tf(i,e,s){return{instance:i,listener:e,currentTarget:s}}function oe$1(i,e){for(var s=e+"Capture",o=[];i!==null;){var a=i,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(i,s),c!=null&&o.unshift(tf(i,c,a)),c=Kb(i,e),c!=null&&o.push(tf(i,c,a))),i=i.return}return o}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,s,o,a){for(var c=e._reactName,d=[];s!==null&&s!==o;){var h=s,g=h.alternate,j=h.stateNode;if(g!==null&&g===o)break;h.tag===5&&j!==null&&(h=j,a?(g=Kb(s,c),g!=null&&d.unshift(tf(s,g,h))):a||(g=Kb(s,c),g!=null&&d.push(tf(s,g,h)))),s=s.return}d.length!==0&&i.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,s){if(e=zf(e),zf(i)!==e&&s)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var s=e,o=0;do{var a=s.nextSibling;if(i.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(o===0){i.removeChild(a),bd(e);return}o--}else s!=="$"&&s!=="$?"&&s!=="$!"||o++;s=a}while(s);bd(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return i;e--}else s==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(i){var e=i[Of];if(e)return e;for(var s=i.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return e}i=s,s=i.parentNode}return null}function Cb(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue$1(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var s=i.type.contextTypes;if(!s)return Vf;var o=i.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in s)a[c]=e[c];return o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E(Wf),E(H)}function ag(i,e,s){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,s)}function bg(i,e,s){var o=i.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return s;o=o.getChildContext();for(var a in o)if(!(a in e))throw Error(p(108,Ra(i)||"Unknown",a));return A({},s,o)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,i),G(Wf,Wf.current),!0}function dg(i,e,s){var o=i.stateNode;if(!o)throw Error(p(169));s?(i=bg(i,e,Xf),o.__reactInternalMemoizedMergedChildContext=i,E(Wf),E(H),G(H,i)):E(Wf),G(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C$1;try{var s=eg;for(C$1=1;i<s.length;i++){var o=s[i];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(i+1)),ac(fc,jg),a}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var o=rg;i=sg;var a=32-oc(o)-1;o&=~(1<<a),s+=1;var c=32-oc(e)+a;if(30<c){var d=a-a%5;c=(o&(1<<d)-1).toString(32),o>>=d,a-=d,rg=1<<32-oc(e)+a|s<<a|o,sg=c+i}else rg=1<<c|s<<a|o,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(i,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=i,e=i.deletions,e===null?(i.deletions=[s],i.flags|=16):e.push(s)}function Cg(i,e){switch(i.tag){case 5:var s=i.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I){var e=yg;if(e){var s=e;if(!Cg(i,e)){if(Dg(i))throw Error(p(418));e=Lf(s.nextSibling);var o=xg;e&&Cg(i,e)?Ag(o,s):(i.flags=i.flags&-4097|2,I=!1,xg=i)}}else{if(Dg(i))throw Error(p(418));i.flags=i.flags&-4097|2,I=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I)return Fg(i),I=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua.ReactCurrentBatchConfig;function Lg(i,e,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p(309));var o=s.stateNode}if(!o)throw Error(p(147,i));var a=o,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var h=a.refs;d===null?delete h[c]:h[c]=d},e._stringRef=c,e)}if(typeof i!="string")throw Error(p(284));if(!s._owner)throw Error(p(290,i))}return i}function Mg(i,e){throw i=Object.prototype.toString.call(e),Error(p(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function Ng(i){var e=i._init;return e(i._payload)}function Og(i){function e(rt,st){if(i){var lt=rt.deletions;lt===null?(rt.deletions=[st],rt.flags|=16):lt.push(st)}}function s(rt,st){if(!i)return null;for(;st!==null;)e(rt,st),st=st.sibling;return null}function o(rt,st){for(rt=new Map;st!==null;)st.key!==null?rt.set(st.key,st):rt.set(st.index,st),st=st.sibling;return rt}function a(rt,st){return rt=Pg(rt,st),rt.index=0,rt.sibling=null,rt}function c(rt,st,lt){return rt.index=lt,i?(lt=rt.alternate,lt!==null?(lt=lt.index,lt<st?(rt.flags|=2,st):lt):(rt.flags|=2,st)):(rt.flags|=1048576,st)}function d(rt){return i&&rt.alternate===null&&(rt.flags|=2),rt}function h(rt,st,lt,mt){return st===null||st.tag!==6?(st=Qg(lt,rt.mode,mt),st.return=rt,st):(st=a(st,lt),st.return=rt,st)}function g(rt,st,lt,mt){var ft=lt.type;return ft===ya?$(rt,st,lt.props.children,mt,lt.key):st!==null&&(st.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===st.type)?(mt=a(st,lt.props),mt.ref=Lg(rt,st,lt),mt.return=rt,mt):(mt=Rg(lt.type,lt.key,lt.props,null,rt.mode,mt),mt.ref=Lg(rt,st,lt),mt.return=rt,mt)}function j(rt,st,lt,mt){return st===null||st.tag!==4||st.stateNode.containerInfo!==lt.containerInfo||st.stateNode.implementation!==lt.implementation?(st=Sg(lt,rt.mode,mt),st.return=rt,st):(st=a(st,lt.children||[]),st.return=rt,st)}function $(rt,st,lt,mt,ft){return st===null||st.tag!==7?(st=Tg(lt,rt.mode,mt,ft),st.return=rt,st):(st=a(st,lt),st.return=rt,st)}function _(rt,st,lt){if(typeof st=="string"&&st!==""||typeof st=="number")return st=Qg(""+st,rt.mode,lt),st.return=rt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case va:return lt=Rg(st.type,st.key,st.props,null,rt.mode,lt),lt.ref=Lg(rt,null,st),lt.return=rt,lt;case wa:return st=Sg(st,rt.mode,lt),st.return=rt,st;case Ha:var mt=st._init;return _(rt,mt(st._payload),lt)}if(eb(st)||Ka(st))return st=Tg(st,rt.mode,lt,null),st.return=rt,st;Mg(rt,st)}return null}function et(rt,st,lt,mt){var ft=st!==null?st.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number")return ft!==null?null:h(rt,st,""+lt,mt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:return lt.key===ft?g(rt,st,lt,mt):null;case wa:return lt.key===ft?j(rt,st,lt,mt):null;case Ha:return ft=lt._init,et(rt,st,ft(lt._payload),mt)}if(eb(lt)||Ka(lt))return ft!==null?null:$(rt,st,lt,mt,null);Mg(rt,lt)}return null}function tt(rt,st,lt,mt,ft){if(typeof mt=="string"&&mt!==""||typeof mt=="number")return rt=rt.get(lt)||null,h(st,rt,""+mt,ft);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case va:return rt=rt.get(mt.key===null?lt:mt.key)||null,g(st,rt,mt,ft);case wa:return rt=rt.get(mt.key===null?lt:mt.key)||null,j(st,rt,mt,ft);case Ha:var gt=mt._init;return tt(rt,st,lt,gt(mt._payload),ft)}if(eb(mt)||Ka(mt))return rt=rt.get(lt)||null,$(st,rt,mt,ft,null);Mg(st,mt)}return null}function it(rt,st,lt,mt){for(var ft=null,gt=null,dt=st,ut=st=0,ct=null;dt!==null&&ut<lt.length;ut++){dt.index>ut?(ct=dt,dt=null):ct=dt.sibling;var _t=et(rt,dt,lt[ut],mt);if(_t===null){dt===null&&(dt=ct);break}i&&dt&&_t.alternate===null&&e(rt,dt),st=c(_t,st,ut),gt===null?ft=_t:gt.sibling=_t,gt=_t,dt=ct}if(ut===lt.length)return s(rt,dt),I&&tg(rt,ut),ft;if(dt===null){for(;ut<lt.length;ut++)dt=_(rt,lt[ut],mt),dt!==null&&(st=c(dt,st,ut),gt===null?ft=dt:gt.sibling=dt,gt=dt);return I&&tg(rt,ut),ft}for(dt=o(rt,dt);ut<lt.length;ut++)ct=tt(dt,rt,ut,lt[ut],mt),ct!==null&&(i&&ct.alternate!==null&&dt.delete(ct.key===null?ut:ct.key),st=c(ct,st,ut),gt===null?ft=ct:gt.sibling=ct,gt=ct);return i&&dt.forEach(function(ht){return e(rt,ht)}),I&&tg(rt,ut),ft}function ot(rt,st,lt,mt){var ft=Ka(lt);if(typeof ft!="function")throw Error(p(150));if(lt=ft.call(lt),lt==null)throw Error(p(151));for(var gt=ft=null,dt=st,ut=st=0,ct=null,_t=lt.next();dt!==null&&!_t.done;ut++,_t=lt.next()){dt.index>ut?(ct=dt,dt=null):ct=dt.sibling;var ht=et(rt,dt,_t.value,mt);if(ht===null){dt===null&&(dt=ct);break}i&&dt&&ht.alternate===null&&e(rt,dt),st=c(ht,st,ut),gt===null?ft=ht:gt.sibling=ht,gt=ht,dt=ct}if(_t.done)return s(rt,dt),I&&tg(rt,ut),ft;if(dt===null){for(;!_t.done;ut++,_t=lt.next())_t=_(rt,_t.value,mt),_t!==null&&(st=c(_t,st,ut),gt===null?ft=_t:gt.sibling=_t,gt=_t);return I&&tg(rt,ut),ft}for(dt=o(rt,dt);!_t.done;ut++,_t=lt.next())_t=tt(dt,rt,ut,_t.value,mt),_t!==null&&(i&&_t.alternate!==null&&dt.delete(_t.key===null?ut:_t.key),st=c(_t,st,ut),gt===null?ft=_t:gt.sibling=_t,gt=_t);return i&&dt.forEach(function(Et){return e(rt,Et)}),I&&tg(rt,ut),ft}function at(rt,st,lt,mt){if(typeof lt=="object"&&lt!==null&&lt.type===ya&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case va:e:{for(var ft=lt.key,gt=st;gt!==null;){if(gt.key===ft){if(ft=lt.type,ft===ya){if(gt.tag===7){s(rt,gt.sibling),st=a(gt,lt.props.children),st.return=rt,rt=st;break e}}else if(gt.elementType===ft||typeof ft=="object"&&ft!==null&&ft.$$typeof===Ha&&Ng(ft)===gt.type){s(rt,gt.sibling),st=a(gt,lt.props),st.ref=Lg(rt,gt,lt),st.return=rt,rt=st;break e}s(rt,gt);break}else e(rt,gt);gt=gt.sibling}lt.type===ya?(st=Tg(lt.props.children,rt.mode,mt,lt.key),st.return=rt,rt=st):(mt=Rg(lt.type,lt.key,lt.props,null,rt.mode,mt),mt.ref=Lg(rt,st,lt),mt.return=rt,rt=mt)}return d(rt);case wa:e:{for(gt=lt.key;st!==null;){if(st.key===gt)if(st.tag===4&&st.stateNode.containerInfo===lt.containerInfo&&st.stateNode.implementation===lt.implementation){s(rt,st.sibling),st=a(st,lt.children||[]),st.return=rt,rt=st;break e}else{s(rt,st);break}else e(rt,st);st=st.sibling}st=Sg(lt,rt.mode,mt),st.return=rt,rt=st}return d(rt);case Ha:return gt=lt._init,at(rt,st,gt(lt._payload),mt)}if(eb(lt))return it(rt,st,lt,mt);if(Ka(lt))return ot(rt,st,lt,mt);Mg(rt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"?(lt=""+lt,st!==null&&st.tag===6?(s(rt,st.sibling),st=a(st,lt),st.return=rt,rt=st):(s(rt,st),st=Qg(lt,rt.mode,mt),st.return=rt,rt=st),d(rt)):s(rt,st)}return at}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(i){var e=Wg.current;E(Wg),i._currentValue=e}function bh(i,e,s){for(;i!==null;){var o=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),i===s)break;i=i.return}}function ch(i,e){Xg=i,Zg=Yg=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(dh=!0),i.firstContext=null)}function eh(i){var e=i._currentValue;if(Zg!==i)if(i={context:i,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=i,Xg.dependencies={lanes:0,firstContext:i}}else Yg=Yg.next=i;return e}var fh=null;function gh(i){fh===null?fh=[i]:fh.push(i)}function hh(i,e,s,o){var a=e.interleaved;return a===null?(s.next=s,gh(e)):(s.next=a.next,a.next=s),e.interleaved=s,ih(i,o)}function ih(i,e){i.lanes|=e;var s=i.alternate;for(s!==null&&(s.lanes|=e),s=i,i=i.return;i!==null;)i.childLanes|=e,s=i.alternate,s!==null&&(s.childLanes|=e),s=i,i=i.return;return s.tag===3?s.stateNode:null}var jh=!1;function kh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mh(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(i,e,s){var o=i.updateQueue;if(o===null)return null;if(o=o.shared,K&2){var a=o.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),o.pending=e,ih(i,s)}return a=o.interleaved,a===null?(e.next=e,gh(o)):(e.next=a.next,a.next=e),o.interleaved=e,ih(i,s)}function oh(i,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var o=e.lanes;o&=i.pendingLanes,s|=o,e.lanes=s,Cc(i,s)}}function ph(i,e){var s=i.updateQueue,o=i.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var a=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var d={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?a=c=d:c=c.next=d,s=s.next}while(s!==null);c===null?a=c=e:c=c.next=e}else a=c=e;s={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=e:i.next=e,s.lastBaseUpdate=e}function qh(i,e,s,o){var a=i.updateQueue;jh=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var g=h,j=g.next;g.next=null,d===null?c=j:d.next=j,d=g;var $=i.alternate;$!==null&&($=$.updateQueue,h=$.lastBaseUpdate,h!==d&&(h===null?$.firstBaseUpdate=j:h.next=j,$.lastBaseUpdate=g))}if(c!==null){var _=a.baseState;d=0,$=j=g=null,h=c;do{var et=h.lane,tt=h.eventTime;if((o&et)===et){$!==null&&($=$.next={eventTime:tt,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var it=i,ot=h;switch(et=e,tt=s,ot.tag){case 1:if(it=ot.payload,typeof it=="function"){_=it.call(tt,_,et);break e}_=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=ot.payload,et=typeof it=="function"?it.call(tt,_,et):it,et==null)break e;_=A({},_,et);break e;case 2:jh=!0}}h.callback!==null&&h.lane!==0&&(i.flags|=64,et=a.effects,et===null?a.effects=[h]:et.push(h))}else tt={eventTime:tt,lane:et,tag:h.tag,payload:h.payload,callback:h.callback,next:null},$===null?(j=$=tt,g=_):$=$.next=tt,d|=et;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;et=h,h=et.next,et.next=null,a.lastBaseUpdate=et,a.shared.pending=null}}while(!0);if($===null&&(g=_),a.baseState=g,a.firstBaseUpdate=j,a.lastBaseUpdate=$,e=a.shared.interleaved,e!==null){a=e;do d|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);rh|=d,i.lanes=d,i.memoizedState=_}}function sh(i,e,s){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var o=i[e],a=o.callback;if(a!==null){if(o.callback=null,o=s,typeof a!="function")throw Error(p(191,a));a.call(o)}}}var th={},uh=Uf(th),vh$1=Uf(th),wh=Uf(th);function xh(i){if(i===th)throw Error(p(174));return i}function yh(i,e){switch(G(wh,e),G(vh$1,i),G(uh,th),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb(e,i)}E(uh),G(uh,e)}function zh(){E(uh),E(vh$1),E(wh)}function Ah(i){xh(wh.current);var e=xh(uh.current),s=lb(e,i.type);e!==s&&(G(vh$1,i),G(uh,s))}function Bh(i){vh$1.current===i&&(E(uh),E(vh$1))}var L=Uf(0);function Ch(i){for(var e=i;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var i=0;i<Dh.length;i++)Dh[i]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(i,e){if(e===null)return!1;for(var s=0;s<e.length&&s<i.length;s++)if(!He(i[s],e[s]))return!1;return!0}function Nh(i,e,s,o,a,c){if(Hh=c,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=i===null||i.memoizedState===null?Oh:Ph,i=s(o,a),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,i=s(o,a)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return i}function Sh(){var i=Kh!==0;return Kh=0,i}function Th(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=i:O=O.next=i,O}function Uh(){if(N===null){var i=M.alternate;i=i!==null?i.memoizedState:null}else i=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=i;else{if(i===null)throw Error(p(310));N=i,i={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=i:O=O.next=i}return O}function Vh(i,e){return typeof e=="function"?e(i):e}function Wh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var o=N,a=o.baseQueue,c=s.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}o.baseQueue=a=c,s.pending=null}if(a!==null){c=a.next,o=o.baseState;var h=d=null,g=null,j=c;do{var $=j.lane;if((Hh&$)===$)g!==null&&(g=g.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),o=j.hasEagerState?j.eagerState:i(o,j.action);else{var _={lane:$,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};g===null?(h=g=_,d=o):g=g.next=_,M.lanes|=$,rh|=$}j=j.next}while(j!==null&&j!==c);g===null?d=o:g.next=h,He(o,e.memoizedState)||(dh=!0),e.memoizedState=o,e.baseState=d,e.baseQueue=g,s.lastRenderedState=o}if(i=s.interleaved,i!==null){a=i;do c=a.lane,M.lanes|=c,rh|=c,a=a.next;while(a!==i)}else a===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Xh(i){var e=Uh(),s=e.queue;if(s===null)throw Error(p(311));s.lastRenderedReducer=i;var o=s.dispatch,a=s.pending,c=e.memoizedState;if(a!==null){s.pending=null;var d=a=a.next;do c=i(c,d.action),d=d.next;while(d!==a);He(c,e.memoizedState)||(dh=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),s.lastRenderedState=c}return[c,o]}function Yh(){}function Zh(i,e){var s=M,o=Uh(),a=e(),c=!He(o.memoizedState,a);if(c&&(o.memoizedState=a,dh=!0),o=o.queue,$h(ai.bind(null,s,o,i),[i]),o.getSnapshot!==e||c||O!==null&&O.memoizedState.tag&1){if(s.flags|=2048,bi(9,ci.bind(null,s,o,a,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(s,e,a)}return a}function di(i,e,s){i.flags|=16384,i={getSnapshot:e,value:s},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[i]):(s=e.stores,s===null?e.stores=[i]:s.push(i))}function ci(i,e,s,o){e.value=s,e.getSnapshot=o,ei(e)&&fi(i)}function ai(i,e,s){return s(function(){ei(e)&&fi(i)})}function ei(i){var e=i.getSnapshot;i=i.value;try{var s=e();return!He(i,s)}catch{return!0}}function fi(i){var e=ih(i,1);e!==null&&gi(e,i,1,-1)}function hi(i){var e=Th();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:i},e.queue=i,i=i.dispatch=ii.bind(null,M,i),[e.memoizedState,i]}function bi(i,e,s,o){return i={tag:i,create:e,destroy:s,deps:o,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=i.next=i):(s=e.lastEffect,s===null?e.lastEffect=i.next=i:(o=s.next,s.next=i,i.next=o,e.lastEffect=i)),i}function ji(){return Uh().memoizedState}function ki(i,e,s,o){var a=Th();M.flags|=i,a.memoizedState=bi(1|e,s,void 0,o===void 0?null:o)}function li(i,e,s,o){var a=Uh();o=o===void 0?null:o;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,o!==null&&Mh(o,d.deps)){a.memoizedState=bi(e,s,c,o);return}}M.flags|=i,a.memoizedState=bi(1|e,s,c,o)}function mi(i,e){return ki(8390656,8,i,e)}function $h(i,e){return li(2048,8,i,e)}function ni(i,e){return li(4,2,i,e)}function oi(i,e){return li(4,4,i,e)}function pi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function qi(i,e,s){return s=s!=null?s.concat([i]):null,li(4,4,pi.bind(null,e,i),s)}function ri(){}function si(i,e){var s=Uh();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(s.memoizedState=[i,e],i)}function ti(i,e){var s=Uh();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(i=i(),s.memoizedState=[i,e],i)}function ui(i,e,s){return Hh&21?(He(s,e)||(s=yc(),M.lanes|=s,rh|=s,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,dh=!0),i.memoizedState=s)}function vi(i,e){var s=C$1;C$1=s!==0&&4>s?s:4,i(!0);var o=Gh.transition;Gh.transition={};try{i(!1),e()}finally{C$1=s,Gh.transition=o}}function wi(){return Uh().memoizedState}function xi(i,e,s){var o=yi(i);if(s={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null},zi(i))Ai(e,s);else if(s=hh(i,e,s,o),s!==null){var a=R();gi(s,i,o,a),Bi(s,e,o)}}function ii(i,e,s){var o=yi(i),a={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null};if(zi(i))Ai(e,a);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,h=c(d,s);if(a.hasEagerState=!0,a.eagerState=h,He(h,d)){var g=e.interleaved;g===null?(a.next=a,gh(e)):(a.next=g.next,g.next=a),e.interleaved=a;return}}catch{}finally{}s=hh(i,e,a,o),s!==null&&(a=R(),gi(s,i,o,a),Bi(s,e,o))}}function zi(i){var e=i.alternate;return i===M||e!==null&&e===M}function Ai(i,e){Jh=Ih=!0;var s=i.pending;s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e}function Bi(i,e,s){if(s&4194240){var o=e.lanes;o&=i.pendingLanes,s|=o,e.lanes=s,Cc(i,s)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(i,e){return Th().memoizedState=[i,e===void 0?null:e],i},useContext:eh,useEffect:mi,useImperativeHandle:function(i,e,s){return s=s!=null?s.concat([i]):null,ki(4194308,4,pi.bind(null,e,i),s)},useLayoutEffect:function(i,e){return ki(4194308,4,i,e)},useInsertionEffect:function(i,e){return ki(4,2,i,e)},useMemo:function(i,e){var s=Th();return e=e===void 0?null:e,i=i(),s.memoizedState=[i,e],i},useReducer:function(i,e,s){var o=Th();return e=s!==void 0?s(e):e,o.memoizedState=o.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},o.queue=i,i=i.dispatch=xi.bind(null,M,i),[o.memoizedState,i]},useRef:function(i){var e=Th();return i={current:i},e.memoizedState=i},useState:hi,useDebugValue:ri,useDeferredValue:function(i){return Th().memoizedState=i},useTransition:function(){var i=hi(!1),e=i[0];return i=vi.bind(null,i[1]),Th().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,s){var o=M,a=Th();if(I){if(s===void 0)throw Error(p(407));s=s()}else{if(s=e(),Q===null)throw Error(p(349));Hh&30||di(o,e,s)}a.memoizedState=s;var c={value:s,getSnapshot:e};return a.queue=c,mi(ai.bind(null,o,c,i),[i]),o.flags|=2048,bi(9,ci.bind(null,o,c,s,e),void 0,null),s},useId:function(){var i=Th(),e=Q.identifierPrefix;if(I){var s=sg,o=rg;s=(o&~(1<<32-oc(o)-1)).toString(32)+s,e=":"+e+"R"+s,s=Kh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Lh++,e=":"+e+"r"+s.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return ui(e,N.memoizedState,i)},useTransition:function(){var i=Wh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(i){var e=Uh();return N===null?e.memoizedState=i:ui(e,N.memoizedState,i)},useTransition:function(){var i=Xh(Vh)[0],e=Uh().memoizedState;return[i,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(i,e){if(i&&i.defaultProps){e=A({},e),i=i.defaultProps;for(var s in i)e[s]===void 0&&(e[s]=i[s]);return e}return e}function Di(i,e,s,o){e=i.memoizedState,s=s(o,e),s=s==null?e:A({},e,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var Ei={isMounted:function(i){return(i=i._reactInternals)?Vb(i)===i:!1},enqueueSetState:function(i,e,s){i=i._reactInternals;var o=R(),a=yi(i),c=mh(o,a);c.payload=e,s!=null&&(c.callback=s),e=nh(i,c,a),e!==null&&(gi(e,i,a,o),oh(e,i,a))},enqueueReplaceState:function(i,e,s){i=i._reactInternals;var o=R(),a=yi(i),c=mh(o,a);c.tag=1,c.payload=e,s!=null&&(c.callback=s),e=nh(i,c,a),e!==null&&(gi(e,i,a,o),oh(e,i,a))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var s=R(),o=yi(i),a=mh(s,o);a.tag=2,e!=null&&(a.callback=e),e=nh(i,a,o),e!==null&&(gi(e,i,o,s),oh(e,i,o))}};function Fi(i,e,s,o,a,c,d){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(o,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie$1(s,o)||!Ie$1(a,c):!0}function Gi(i,e,s){var o=!1,a=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=eh(c):(a=Zf(e)?Xf:H.current,o=e.contextTypes,c=(o=o!=null)?Yf(i,a):Vf),e=new e(s,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,i.stateNode=e,e._reactInternals=i,o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=c),e}function Hi(i,e,s,o){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,o),e.state!==i&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(i,e,s,o){var a=i.stateNode;a.props=s,a.state=i.memoizedState,a.refs={},kh(i);var c=e.contextType;typeof c=="object"&&c!==null?a.context=eh(c):(c=Zf(e)?Xf:H.current,a.context=Yf(i,c)),a.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Di(i,e,c,s),a.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ei.enqueueReplaceState(a,a.state,null),qh(i,s,a,o),a.state=i.memoizedState),typeof a.componentDidMount=="function"&&(i.flags|=4194308)}function Ji(i,e){try{var s="",o=e;do s+=Pa(o),o=o.return;while(o);var a=s}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:a,digest:null}}function Ki(i,e,s){return{value:i,source:null,stack:s??null,digest:e??null}}function Li(i,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(i,e,s){s=mh(-1,s),s.tag=3,s.payload={element:null};var o=e.value;return s.callback=function(){Oi||(Oi=!0,Pi=o),Li(i,e)},s}function Qi(i,e,s){s=mh(-1,s),s.tag=3;var o=i.type.getDerivedStateFromError;if(typeof o=="function"){var a=e.value;s.payload=function(){return o(a)},s.callback=function(){Li(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Li(i,e),typeof o!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),s}function Si(i,e,s){var o=i.pingCache;if(o===null){o=i.pingCache=new Mi;var a=new Set;o.set(e,a)}else a=o.get(e),a===void 0&&(a=new Set,o.set(e,a));a.has(s)||(a.add(s),i=Ti.bind(null,i,e,s),e.then(i,i))}function Ui(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Vi(i,e,s,o,a){return i.mode&1?(i.flags|=65536,i.lanes=a,i):(i===e?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=mh(-1,1),e.tag=2,nh(s,e,1))),s.lanes|=1),i)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(i,e,s,o){e.child=i===null?Vg(e,null,s,o):Ug(e,i.child,s,o)}function Yi(i,e,s,o,a){s=s.render;var c=e.ref;return ch(e,a),o=Nh(i,e,s,o,c,a),s=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,Zi(i,e,a)):(I&&s&&vg(e),e.flags|=1,Xi(i,e,o,a),e.child)}function $i(i,e,s,o,a){if(i===null){var c=s.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=c,bj(i,e,c,o,a)):(i=Rg(s.type,null,o,e,e.mode,a),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&a)){var d=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie$1,s(d,o)&&i.ref===e.ref)return Zi(i,e,a)}return e.flags|=1,i=Pg(c,o),i.ref=e.ref,i.return=e,e.child=i}function bj(i,e,s,o,a){if(i!==null){var c=i.memoizedProps;if(Ie$1(c,o)&&i.ref===e.ref)if(dh=!1,e.pendingProps=o=c,(i.lanes&a)!==0)i.flags&131072&&(dh=!0);else return e.lanes=i.lanes,Zi(i,e,a)}return cj(i,e,s,o,a)}function dj(i,e,s){var o=e.pendingProps,a=o.children,c=i!==null?i.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=s;else{if(!(s&1073741824))return i=c!==null?c.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:s,G(ej,fj),fj|=o}else c!==null?(o=c.baseLanes|s,e.memoizedState=null):o=s,G(ej,fj),fj|=o;return Xi(i,e,a,s),e.child}function gj(i,e){var s=e.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function cj(i,e,s,o,a){var c=Zf(s)?Xf:H.current;return c=Yf(e,c),ch(e,a),s=Nh(i,e,s,o,c,a),o=Sh(),i!==null&&!dh?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,Zi(i,e,a)):(I&&o&&vg(e),e.flags|=1,Xi(i,e,s,a),e.child)}function hj(i,e,s,o,a){if(Zf(s)){var c=!0;cg(e)}else c=!1;if(ch(e,a),e.stateNode===null)ij(i,e),Gi(e,s,o),Ii(e,s,o,a),o=!0;else if(i===null){var d=e.stateNode,h=e.memoizedProps;d.props=h;var g=d.context,j=s.contextType;typeof j=="object"&&j!==null?j=eh(j):(j=Zf(s)?Xf:H.current,j=Yf(e,j));var $=s.getDerivedStateFromProps,_=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function";_||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==o||g!==j)&&Hi(e,d,o,j),jh=!1;var et=e.memoizedState;d.state=et,qh(e,o,d,a),g=e.memoizedState,h!==o||et!==g||Wf.current||jh?(typeof $=="function"&&(Di(e,s,$,o),g=e.memoizedState),(h=jh||Fi(e,s,h,o,et,g,j))?(_||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=g),d.props=o,d.state=g,d.context=j,o=h):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{d=e.stateNode,lh(i,e),h=e.memoizedProps,j=e.type===e.elementType?h:Ci(e.type,h),d.props=j,_=e.pendingProps,et=d.context,g=s.contextType,typeof g=="object"&&g!==null?g=eh(g):(g=Zf(s)?Xf:H.current,g=Yf(e,g));var tt=s.getDerivedStateFromProps;($=typeof tt=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==_||et!==g)&&Hi(e,d,o,g),jh=!1,et=e.memoizedState,d.state=et,qh(e,o,d,a);var it=e.memoizedState;h!==_||et!==it||Wf.current||jh?(typeof tt=="function"&&(Di(e,s,tt,o),it=e.memoizedState),(j=jh||Fi(e,s,j,o,et,it,g)||!1)?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,it,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,it,g)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&et===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&et===i.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=it),d.props=o,d.state=it,d.context=g,o=j):(typeof d.componentDidUpdate!="function"||h===i.memoizedProps&&et===i.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===i.memoizedProps&&et===i.memoizedState||(e.flags|=1024),o=!1)}return jj(i,e,s,o,c,a)}function jj(i,e,s,o,a,c){gj(i,e);var d=(e.flags&128)!==0;if(!o&&!d)return a&&dg(e,s,!1),Zi(i,e,c);o=e.stateNode,Wi.current=e;var h=d&&typeof s.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,i!==null&&d?(e.child=Ug(e,i.child,null,c),e.child=Ug(e,null,h,c)):Xi(i,e,h,c),e.memoizedState=o.state,a&&dg(e,s,!0),e.child}function kj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),yh(i,e.containerInfo)}function lj(i,e,s,o,a){return Ig(),Jg(a),e.flags|=256,Xi(i,e,s,o),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(i){return{baseLanes:i,cachePool:null,transitions:null}}function oj(i,e,s){var o=e.pendingProps,a=L.current,c=!1,d=(e.flags&128)!==0,h;if((h=d)||(h=i!==null&&i.memoizedState===null?!1:(a&2)!==0),h?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(a|=1),G(L,a&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=o.children,i=o.fallback,c?(o=e.mode,c=e.child,d={mode:"hidden",children:d},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,o,0,null),i=Tg(i,o,s,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=nj(s),e.memoizedState=mj,i):qj(e,d));if(a=i.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return rj(i,e,d,o,h,a,s);if(c){c=o.fallback,d=e.mode,a=i.child,h=a.sibling;var g={mode:"hidden",children:o.children};return!(d&1)&&e.child!==a?(o=e.child,o.childLanes=0,o.pendingProps=g,e.deletions=null):(o=Pg(a,g),o.subtreeFlags=a.subtreeFlags&14680064),h!==null?c=Pg(h,c):(c=Tg(c,d,s,null),c.flags|=2),c.return=e,o.return=e,o.sibling=c,e.child=o,o=c,c=e.child,d=i.child.memoizedState,d=d===null?nj(s):{baseLanes:d.baseLanes|s,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=i.childLanes&~s,e.memoizedState=mj,o}return c=i.child,i=c.sibling,o=Pg(c,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=s),o.return=e,o.sibling=null,i!==null&&(s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)),e.child=o,e.memoizedState=null,o}function qj(i,e){return e=pj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function sj(i,e,s,o){return o!==null&&Jg(o),Ug(e,i.child,null,s),i=qj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function rj(i,e,s,o,a,c,d){if(s)return e.flags&256?(e.flags&=-257,o=Ki(Error(p(422))),sj(i,e,d,o)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=o.fallback,a=e.mode,o=pj({mode:"visible",children:o.children},a,0,null),c=Tg(c,a,d,null),c.flags|=2,o.return=e,c.return=e,o.sibling=c,e.child=o,e.mode&1&&Ug(e,i.child,null,d),e.child.memoizedState=nj(d),e.memoizedState=mj,c);if(!(e.mode&1))return sj(i,e,d,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var h=o.dgst;return o=h,c=Error(p(419)),o=Ki(c,o,void 0),sj(i,e,d,o)}if(h=(d&i.childLanes)!==0,dh||h){if(o=Q,o!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,ih(i,a),gi(o,i,a,-1))}return tj(),o=Ki(Error(p(421))),sj(i,e,d,o)}return a.data==="$?"?(e.flags|=128,e.child=i.child,e=uj.bind(null,i),a._reactRetry=e,null):(i=c.treeContext,yg=Lf(a.nextSibling),xg=e,I=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=qj(e,o.children),e.flags|=4096,e)}function vj(i,e,s){i.lanes|=e;var o=i.alternate;o!==null&&(o.lanes|=e),bh(i.return,e,s)}function wj(i,e,s,o,a){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=s,c.tailMode=a)}function xj(i,e,s){var o=e.pendingProps,a=o.revealOrder,c=o.tail;if(Xi(i,e,o.children,s),o=L.current,o&2)o=o&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&vj(i,s,e);else if(i.tag===19)vj(i,s,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}o&=1}if(G(L,o),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(s=e.child,a=null;s!==null;)i=s.alternate,i!==null&&Ch(i)===null&&(a=s),s=s.sibling;s=a,s===null?(a=e.child,e.child=null):(a=s.sibling,s.sibling=null),wj(e,!1,a,s,c);break;case"backwards":for(s=null,a=e.child,e.child=null;a!==null;){if(i=a.alternate,i!==null&&Ch(i)===null){e.child=a;break}i=a.sibling,a.sibling=s,s=a,a=i}wj(e,!0,s,null,c);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Zi(i,e,s){if(i!==null&&(e.dependencies=i.dependencies),rh|=e.lanes,!(s&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p(153));if(e.child!==null){for(i=e.child,s=Pg(i,i.pendingProps),e.child=s,s.return=e;i.sibling!==null;)i=i.sibling,s=s.sibling=Pg(i,i.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(i,e,s){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,a=e.memoizedProps.value;G(Wg,o._currentValue),o._currentValue=a;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):s&e.child.childLanes?oj(i,e,s):(G(L,L.current&1),i=Zi(i,e,s),i!==null?i.sibling:null);G(L,L.current&1);break;case 19:if(o=(s&e.childLanes)!==0,i.flags&128){if(o)return xj(i,e,s);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(L,L.current),o)break;return null;case 22:case 23:return e.lanes=0,dj(i,e,s)}return Zi(i,e,s)}var zj,Aj,Bj,Cj;zj=function(i,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Aj=function(){};Bj=function(i,e,s,o){var a=i.memoizedProps;if(a!==o){i=e.stateNode,xh(uh.current);var c=null;switch(s){case"input":a=Ya(i,a),o=Ya(i,o),c=[];break;case"select":a=A({},a,{value:void 0}),o=A({},o,{value:void 0}),c=[];break;case"textarea":a=gb(i,a),o=gb(i,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(i.onclick=Bf)}ub(s,o);var d;s=null;for(j in a)if(!o.hasOwnProperty(j)&&a.hasOwnProperty(j)&&a[j]!=null)if(j==="style"){var h=a[j];for(d in h)h.hasOwnProperty(d)&&(s||(s={}),s[d]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea.hasOwnProperty(j)?c||(c=[]):(c=c||[]).push(j,null));for(j in o){var g=o[j];if(h=a!=null?a[j]:void 0,o.hasOwnProperty(j)&&g!==h&&(g!=null||h!=null))if(j==="style")if(h){for(d in h)!h.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(s||(s={}),s[d]="");for(d in g)g.hasOwnProperty(d)&&h[d]!==g[d]&&(s||(s={}),s[d]=g[d])}else s||(c||(c=[]),c.push(j,s)),s=g;else j==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(c=c||[]).push(j,g)):j==="children"?typeof g!="string"&&typeof g!="number"||(c=c||[]).push(j,""+g):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(ea.hasOwnProperty(j)?(g!=null&&j==="onScroll"&&D$1("scroll",i),c||h===g||(c=[])):(c=c||[]).push(j,g))}s&&(c=c||[]).push("style",s);var j=c;(e.updateQueue=j)&&(e.flags|=4)}};Cj=function(i,e,s,o){s!==o&&(e.flags|=4)};function Dj(i,e){if(!I)switch(i.tailMode){case"hidden":e=i.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:o.sibling=null}}function S$1(i){var e=i.alternate!==null&&i.alternate.child===i.child,s=0,o=0;if(e)for(var a=i.child;a!==null;)s|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=i,a=a.sibling;else for(a=i.child;a!==null;)s|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=i,a=a.sibling;return i.subtreeFlags|=o,i.childLanes=s,e}function Ej(i,e,s){var o=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return o=e.stateNode,zh(),E(Wf),E(H),Eh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(i,e),S$1(e),null;case 5:Bh(e);var a=xh(wh.current);if(s=e.type,i!==null&&e.stateNode!=null)Bj(i,e,s,o,a),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(p(166));return S$1(e),null}if(i=xh(uh.current),Gg(e)){o=e.stateNode,s=e.type;var c=e.memoizedProps;switch(o[Of]=e,o[Pf]=c,i=(e.mode&1)!==0,s){case"dialog":D$1("cancel",o),D$1("close",o);break;case"iframe":case"object":case"embed":D$1("load",o);break;case"video":case"audio":for(a=0;a<lf.length;a++)D$1(lf[a],o);break;case"source":D$1("error",o);break;case"img":case"image":case"link":D$1("error",o),D$1("load",o);break;case"details":D$1("toggle",o);break;case"input":Za(o,c),D$1("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},D$1("invalid",o);break;case"textarea":hb(o,c),D$1("invalid",o)}ub(s,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?o.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,i),a=["children",h]):typeof h=="number"&&o.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,i),a=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D$1("scroll",o)}switch(s){case"input":Va(o),db$1(o,c,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}o=a,e.updateQueue=o,o!==null&&(e.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=d.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof o.is=="string"?i=d.createElement(s,{is:o.is}):(i=d.createElement(s),s==="select"&&(d=i,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):i=d.createElementNS(i,s),i[Of]=e,i[Pf]=o,zj(i,e,!1,!1),e.stateNode=i;e:{switch(d=vb(s,o),s){case"dialog":D$1("cancel",i),D$1("close",i),a=o;break;case"iframe":case"object":case"embed":D$1("load",i),a=o;break;case"video":case"audio":for(a=0;a<lf.length;a++)D$1(lf[a],i);a=o;break;case"source":D$1("error",i),a=o;break;case"img":case"image":case"link":D$1("error",i),D$1("load",i),a=o;break;case"details":D$1("toggle",i),a=o;break;case"input":Za(i,o),a=Ya(i,o),D$1("invalid",i);break;case"option":a=o;break;case"select":i._wrapperState={wasMultiple:!!o.multiple},a=A({},o,{value:void 0}),D$1("invalid",i);break;case"textarea":hb(i,o),a=gb(i,o),D$1("invalid",i);break;default:a=o}ub(s,a),h=a;for(c in h)if(h.hasOwnProperty(c)){var g=h[c];c==="style"?sb(i,g):c==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&nb(i,g)):c==="children"?typeof g=="string"?(s!=="textarea"||g!=="")&&ob(i,g):typeof g=="number"&&ob(i,""+g):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?g!=null&&c==="onScroll"&&D$1("scroll",i):g!=null&&ta(i,c,g,d))}switch(s){case"input":Va(i),db$1(i,o,!1);break;case"textarea":Va(i),jb(i);break;case"option":o.value!=null&&i.setAttribute("value",""+Sa(o.value));break;case"select":i.multiple=!!o.multiple,c=o.value,c!=null?fb(i,!!o.multiple,c,!1):o.defaultValue!=null&&fb(i,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(i&&e.stateNode!=null)Cj(i,e,i.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(p(166));if(s=xh(wh.current),xh(uh.current),Gg(e)){if(o=e.stateNode,s=e.memoizedProps,o[Of]=e,(c=o.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(o.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,s,(i.mode&1)!==0)}c&&(e.flags|=4)}else o=(s.nodeType===9?s:s.ownerDocument).createTextNode(o),o[Of]=e,e.stateNode=o}return S$1(e),null;case 13:if(E(L),o=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),o!==null&&o.dehydrated!==null){if(i===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$1(e),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(o=o!==null,o!==(i!==null&&i.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(i===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return zh(),Aj(i,e),i===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return ah(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E(L),c=e.memoizedState,c===null)return S$1(e),null;if(o=(e.flags&128)!==0,d=c.rendering,d===null)if(o)Dj(c,!1);else{if(T!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(d=Ch(i),d!==null){for(e.flags|=128,Dj(c,!1),o=d.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=s,s=e.child;s!==null;)c=s,i=o,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,i=d.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G(L,L.current&1|2),e.child}i=i.sibling}c.tail!==null&&B()>Gj&&(e.flags|=128,o=!0,Dj(c,!1),e.lanes=4194304)}else{if(!o)if(i=Ch(d),i!==null){if(e.flags|=128,o=!0,s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S$1(e),null}else 2*B()-c.renderingStartTime>Gj&&s!==1073741824&&(e.flags|=128,o=!0,Dj(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(s=c.last,s!==null?s.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,s=L.current,G(L,o?s&1|2:s&1),e):(S$1(e),null);case 22:case 23:return Hj(),o=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?fj&1073741824&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(i,e){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(o){W(i,e,o)}else s.current=null}function Mj(i,e,s){try{s()}catch(o){W(i,e,o)}}var Nj=!1;function Oj(i,e){if(Cf=dd,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var a=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var d=0,h=-1,g=-1,j=0,$=0,_=i,et=null;t:for(;;){for(var tt;_!==s||a!==0&&_.nodeType!==3||(h=d+a),_!==c||o!==0&&_.nodeType!==3||(g=d+o),_.nodeType===3&&(d+=_.nodeValue.length),(tt=_.firstChild)!==null;)et=_,_=tt;for(;;){if(_===i)break t;if(et===s&&++j===a&&(h=d),et===c&&++$===o&&(g=d),(tt=_.nextSibling)!==null)break;_=et,et=_.parentNode}_=tt}s=h===-1||g===-1?null:{start:h,end:g}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd=!1,V=e;V!==null;)if(e=V,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V=i;else for(;V!==null;){e=V;try{var it=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var ot=it.memoizedProps,at=it.memoizedState,rt=e.stateNode,st=rt.getSnapshotBeforeUpdate(e.elementType===e.type?ot:Ci(e.type,ot),at);rt.__reactInternalSnapshotBeforeUpdate=st}break;case 3:var lt=e.stateNode.containerInfo;lt.nodeType===1?lt.textContent="":lt.nodeType===9&&lt.documentElement&&lt.removeChild(lt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(mt){W(e,e.return,mt)}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}return it=Nj,Nj=!1,it}function Pj(i,e,s){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&i)===i){var c=a.destroy;a.destroy=void 0,c!==void 0&&Mj(e,s,c)}a=a.next}while(a!==o)}}function Qj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&i)===i){var o=s.create;s.destroy=o()}s=s.next}while(s!==e)}}function Rj(i){var e=i.ref;if(e!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof e=="function"?e(i):e.current=i}}function Sj(i){var e=i.alternate;e!==null&&(i.alternate=null,Sj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Tj(i){return i.tag===5||i.tag===3||i.tag===4}function Uj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Tj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Vj(i,e,s){var o=i.tag;if(o===5||o===6)i=i.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(i,e):s.insertBefore(i,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(i,s)):(e=s,e.appendChild(i)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(o!==4&&(i=i.child,i!==null))for(Vj(i,e,s),i=i.sibling;i!==null;)Vj(i,e,s),i=i.sibling}function Wj(i,e,s){var o=i.tag;if(o===5||o===6)i=i.stateNode,e?s.insertBefore(i,e):s.appendChild(i);else if(o!==4&&(i=i.child,i!==null))for(Wj(i,e,s),i=i.sibling;i!==null;)Wj(i,e,s),i=i.sibling}var X=null,Xj=!1;function Yj(i,e,s){for(s=s.child;s!==null;)Zj(i,e,s),s=s.sibling}function Zj(i,e,s){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,s)}catch{}switch(s.tag){case 5:U||Lj(s,e);case 6:var o=X,a=Xj;X=null,Yj(i,e,s),X=o,Xj=a,X!==null&&(Xj?(i=X,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X.removeChild(s.stateNode));break;case 18:X!==null&&(Xj?(i=X,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd(i)):Kf(X,s.stateNode));break;case 4:o=X,a=Xj,X=s.stateNode.containerInfo,Xj=!0,Yj(i,e,s),X=o,Xj=a;break;case 0:case 11:case 14:case 15:if(!U&&(o=s.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(s,e,d),a=a.next}while(a!==o)}Yj(i,e,s);break;case 1:if(!U&&(Lj(s,e),o=s.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=s.memoizedProps,o.state=s.memoizedState,o.componentWillUnmount()}catch(h){W(s,e,h)}Yj(i,e,s);break;case 21:Yj(i,e,s);break;case 22:s.mode&1?(U=(o=U)||s.memoizedState!==null,Yj(i,e,s),U=o):Yj(i,e,s);break;default:Yj(i,e,s)}}function ak(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Kj),e.forEach(function(o){var a=bk.bind(null,i,o);s.has(o)||(s.add(o),o.then(a,a))})}}function ck(i,e){var s=e.deletions;if(s!==null)for(var o=0;o<s.length;o++){var a=s[o];try{var c=i,d=e,h=d;e:for(;h!==null;){switch(h.tag){case 5:X=h.stateNode,Xj=!1;break e;case 3:X=h.stateNode.containerInfo,Xj=!0;break e;case 4:X=h.stateNode.containerInfo,Xj=!0;break e}h=h.return}if(X===null)throw Error(p(160));Zj(c,d,a),X=null,Xj=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(j){W(a,e,j)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,i),e=e.sibling}function dk(i,e){var s=i.alternate,o=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(ck(e,i),ek(i),o&4){try{Pj(3,i,i.return),Qj(3,i)}catch(ot){W(i,i.return,ot)}try{Pj(5,i,i.return)}catch(ot){W(i,i.return,ot)}}break;case 1:ck(e,i),ek(i),o&512&&s!==null&&Lj(s,s.return);break;case 5:if(ck(e,i),ek(i),o&512&&s!==null&&Lj(s,s.return),i.flags&32){var a=i.stateNode;try{ob(a,"")}catch(ot){W(i,i.return,ot)}}if(o&4&&(a=i.stateNode,a!=null)){var c=i.memoizedProps,d=s!==null?s.memoizedProps:c,h=i.type,g=i.updateQueue;if(i.updateQueue=null,g!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(h,d);var j=vb(h,c);for(d=0;d<g.length;d+=2){var $=g[d],_=g[d+1];$==="style"?sb(a,_):$==="dangerouslySetInnerHTML"?nb(a,_):$==="children"?ob(a,_):ta(a,$,_,j)}switch(h){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var et=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var tt=c.value;tt!=null?fb(a,!!c.multiple,tt,!1):et!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(ot){W(i,i.return,ot)}}break;case 6:if(ck(e,i),ek(i),o&4){if(i.stateNode===null)throw Error(p(162));a=i.stateNode,c=i.memoizedProps;try{a.nodeValue=c}catch(ot){W(i,i.return,ot)}}break;case 3:if(ck(e,i),ek(i),o&4&&s!==null&&s.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(ot){W(i,i.return,ot)}break;case 4:ck(e,i),ek(i);break;case 13:ck(e,i),ek(i),a=i.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(fk=B())),o&4&&ak(i);break;case 22:if($=s!==null&&s.memoizedState!==null,i.mode&1?(U=(j=U)||$,ck(e,i),U=j):ck(e,i),ek(i),o&8192){if(j=i.memoizedState!==null,(i.stateNode.isHidden=j)&&!$&&i.mode&1)for(V=i,$=i.child;$!==null;){for(_=V=$;V!==null;){switch(et=V,tt=et.child,et.tag){case 0:case 11:case 14:case 15:Pj(4,et,et.return);break;case 1:Lj(et,et.return);var it=et.stateNode;if(typeof it.componentWillUnmount=="function"){o=et,s=et.return;try{e=o,it.props=e.memoizedProps,it.state=e.memoizedState,it.componentWillUnmount()}catch(ot){W(o,s,ot)}}break;case 5:Lj(et,et.return);break;case 22:if(et.memoizedState!==null){gk(_);continue}}tt!==null?(tt.return=et,V=tt):gk(_)}$=$.sibling}e:for($=null,_=i;;){if(_.tag===5){if($===null){$=_;try{a=_.stateNode,j?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=_.stateNode,g=_.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=rb("display",d))}catch(ot){W(i,i.return,ot)}}}else if(_.tag===6){if($===null)try{_.stateNode.nodeValue=j?"":_.memoizedProps}catch(ot){W(i,i.return,ot)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===i)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;$===_&&($=null),_=_.return}$===_&&($=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:ck(e,i),ek(i),o&4&&ak(i);break;case 21:break;default:ck(e,i),ek(i)}}function ek(i){var e=i.flags;if(e&2){try{e:{for(var s=i.return;s!==null;){if(Tj(s)){var o=s;break e}s=s.return}throw Error(p(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(ob(a,""),o.flags&=-33);var c=Uj(i);Wj(i,c,a);break;case 3:case 4:var d=o.stateNode.containerInfo,h=Uj(i);Vj(i,h,d);break;default:throw Error(p(161))}}catch(g){W(i,i.return,g)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function hk(i,e,s){V=i,ik(i)}function ik(i,e,s){for(var o=(i.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&o){var d=a.memoizedState!==null||Jj;if(!d){var h=a.alternate,g=h!==null&&h.memoizedState!==null||U;h=Jj;var j=U;if(Jj=d,(U=g)&&!j)for(V=a;V!==null;)d=V,g=d.child,d.tag===22&&d.memoizedState!==null?jk(a):g!==null?(g.return=d,V=g):jk(a);for(;c!==null;)V=c,ik(c),c=c.sibling;V=a,Jj=h,U=j}kk(i)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):kk(i)}}function kk(i){for(;V!==null;){var e=V;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!U)if(s===null)o.componentDidMount();else{var a=e.elementType===e.type?s.memoizedProps:Ci(e.type,s.memoizedProps);o.componentDidUpdate(a,s.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&sh(e,c,o);break;case 3:var d=e.updateQueue;if(d!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}sh(e,d,s)}break;case 5:var h=e.stateNode;if(s===null&&e.flags&4){s=h;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&s.focus();break;case"img":g.src&&(s.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var j=e.alternate;if(j!==null){var $=j.memoizedState;if($!==null){var _=$.dehydrated;_!==null&&bd(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(et){W(e,e.return,et)}}if(e===i){V=null;break}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}}function gk(i){for(;V!==null;){var e=V;if(e===i){V=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V=s;break}V=e.return}}function jk(i){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Qj(4,e)}catch(g){W(e,s,g)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var a=e.return;try{o.componentDidMount()}catch(g){W(e,a,g)}}var c=e.return;try{Rj(e)}catch(g){W(e,c,g)}break;case 5:var d=e.return;try{Rj(e)}catch(g){W(e,d,g)}}}catch(g){W(e,e.return,g)}if(e===i){V=null;break}var h=e.sibling;if(h!==null){h.return=e.return,V=h;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok$2=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(i){return i.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(i=C$1,i!==0||(i=window.event,i=i===void 0?16:jd(i.type)),i):1}function gi(i,e,s,o){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(i,s,o),(!(K&2)||i!==Q)&&(i===Q&&(!(K&2)&&(qk|=s),T===4&&Ck(i,Z)),Dk(i,o),s===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(i,e){var s=i.callbackNode;wc(i,e);var o=uc(i,i===Q?Z:0);if(o===0)s!==null&&bc(s),i.callbackNode=null,i.callbackPriority=0;else if(e=o&-o,i.callbackPriority!==e){if(s!=null&&bc(s),e===1)i.tag===0?ig(Ek.bind(null,i)):hg(Ek.bind(null,i)),Jf(function(){!(K&6)&&jg()}),s=null;else{switch(Dc(o)){case 1:s=fc;break;case 4:s=gc;break;case 16:s=hc;break;case 536870912:s=jc;break;default:s=hc}s=Fk(s,Gk.bind(null,i))}i.callbackPriority=e,i.callbackNode=s}}function Gk(i,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var s=i.callbackNode;if(Hk()&&i.callbackNode!==s)return null;var o=uc(i,i===Q?Z:0);if(o===0)return null;if(o&30||o&i.expiredLanes||e)e=Ik(i,o);else{e=o;var a=K;K|=2;var c=Jk();(Q!==i||Z!==e)&&(uk=null,Gj=B()+500,Kk(i,e));do try{Lk();break}catch(h){Mk(i,h)}while(!0);$g(),mk.current=c,K=a,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(a=xc(i),a!==0&&(o=a,e=Nk(i,a))),e===1)throw s=pk,Kk(i,0),Ck(i,o),Dk(i,B()),s;if(e===6)Ck(i,o);else{if(a=i.current.alternate,!(o&30)&&!Ok(a)&&(e=Ik(i,o),e===2&&(c=xc(i),c!==0&&(o=c,e=Nk(i,c))),e===1))throw s=pk,Kk(i,0),Ck(i,o),Dk(i,B()),s;switch(i.finishedWork=a,i.finishedLanes=o,e){case 0:case 1:throw Error(p(345));case 2:Pk(i,tk,uk);break;case 3:if(Ck(i,o),(o&130023424)===o&&(e=fk+500-B(),10<e)){if(uc(i,0)!==0)break;if(a=i.suspendedLanes,(a&o)!==o){R(),i.pingedLanes|=i.suspendedLanes&a;break}i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),e);break}Pk(i,tk,uk);break;case 4:if(Ck(i,o),(o&4194240)===o)break;for(e=i.eventTimes,a=-1;0<o;){var d=31-oc(o);c=1<<d,d=e[d],d>a&&(a=d),o&=~c}if(o=a,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*lk(o/1960))-o,10<o){i.timeoutHandle=Ff(Pk.bind(null,i,tk,uk),o);break}Pk(i,tk,uk);break;case 5:Pk(i,tk,uk);break;default:throw Error(p(329))}}}return Dk(i,B()),i.callbackNode===s?Gk.bind(null,i):null}function Nk(i,e){var s=sk;return i.current.memoizedState.isDehydrated&&(Kk(i,e).flags|=256),i=Ik(i,e),i!==2&&(e=tk,tk=s,e!==null&&Fj(e)),i}function Fj(i){tk===null?tk=i:tk.push.apply(tk,i)}function Ok(i){for(var e=i;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var o=0;o<s.length;o++){var a=s[o],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(i,e){for(e&=~rk,e&=~qk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var s=31-oc(e),o=1<<s;i[s]=-1,e&=~o}}function Ek(i){if(K&6)throw Error(p(327));Hk();var e=uc(i,0);if(!(e&1))return Dk(i,B()),null;var s=Ik(i,e);if(i.tag!==0&&s===2){var o=xc(i);o!==0&&(e=o,s=Nk(i,o))}if(s===1)throw s=pk,Kk(i,0),Ck(i,e),Dk(i,B()),s;if(s===6)throw Error(p(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Pk(i,tk,uk),Dk(i,B()),null}function Qk(i,e){var s=K;K|=1;try{return i(e)}finally{K=s,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(i){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var s=ok$2.transition,o=C$1;try{if(ok$2.transition=null,C$1=1,i)return i()}finally{C$1=o,ok$2.transition=s,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(i,e){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y!==null)for(s=Y.return;s!==null;){var o=s;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}s=s.return}if(Q=i,Y=i=Pg(i.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(s=fh[e],o=s.interleaved,o!==null){s.interleaved=null;var a=o.next,c=s.pending;if(c!==null){var d=c.next;c.next=a,o.next=d}s.pending=o}fh=null}return i}function Mk(i,e){do{var s=Y;try{if($g(),Fh.current=Rh,Ih){for(var o=M.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,s===null||s.return===null){T=1,pk=e,Y=null;break}e:{var c=i,d=s.return,h=s,g=e;if(e=Z,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var j=g,$=h,_=$.tag;if(!($.mode&1)&&(_===0||_===11||_===15)){var et=$.alternate;et?($.updateQueue=et.updateQueue,$.memoizedState=et.memoizedState,$.lanes=et.lanes):($.updateQueue=null,$.memoizedState=null)}var tt=Ui(d);if(tt!==null){tt.flags&=-257,Vi(tt,d,h,c,e),tt.mode&1&&Si(c,j,e),e=tt,g=j;var it=e.updateQueue;if(it===null){var ot=new Set;ot.add(g),e.updateQueue=ot}else it.add(g);break e}else{if(!(e&1)){Si(c,j,e),tj();break e}g=Error(p(426))}}else if(I&&h.mode&1){var at=Ui(d);if(at!==null){!(at.flags&65536)&&(at.flags|=256),Vi(at,d,h,c,e),Jg(Ji(g,h));break e}}c=g=Ji(g,h),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var rt=Ni(c,g,e);ph(c,rt);break e;case 1:h=g;var st=c.type,lt=c.stateNode;if(!(c.flags&128)&&(typeof st.getDerivedStateFromError=="function"||lt!==null&&typeof lt.componentDidCatch=="function"&&(Ri===null||!Ri.has(lt)))){c.flags|=65536,e&=-e,c.lanes|=e;var mt=Qi(c,h,e);ph(c,mt);break e}}c=c.return}while(c!==null)}Sk(s)}catch(ft){e=ft,Y===s&&s!==null&&(Y=s=s.return);continue}break}while(!0)}function Jk(){var i=mk.current;return mk.current=Rh,i===null?Rh:i}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(i,e){var s=K;K|=2;var o=Jk();(Q!==i||Z!==e)&&(uk=null,Kk(i,e));do try{Tk();break}catch(a){Mk(i,a)}while(!0);if($g(),K=s,mk.current=o,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(i){var e=Vk(i.alternate,i,fj);i.memoizedProps=i.pendingProps,e===null?Sk(i):Y=e,nk.current=null}function Sk(i){var e=i;do{var s=e.alternate;if(i=e.return,e.flags&32768){if(s=Ij(s,e),s!==null){s.flags&=32767,Y=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T=6,Y=null;return}}else if(s=Ej(s,e,fj),s!==null){Y=s;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=i}while(e!==null);T===0&&(T=5)}function Pk(i,e,s){var o=C$1,a=ok$2.transition;try{ok$2.transition=null,C$1=1,Wk(i,e,s,o)}finally{ok$2.transition=a,C$1=o}return null}function Wk(i,e,s,o){do Hk();while(wk!==null);if(K&6)throw Error(p(327));s=i.finishedWork;var a=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p(177));i.callbackNode=null,i.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc(i,c),i===Q&&(Y=Q=null,Z=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=ok$2.transition,ok$2.transition=null;var d=C$1;C$1=1;var h=K;K|=4,nk.current=null,Oj(i,s),dk(s,i),Oe(Df),dd=!!Cf,Df=Cf=null,i.current=s,hk(s),dc(),K=h,C$1=d,ok$2.transition=c}else i.current=s;if(vk&&(vk=!1,wk=i,xk=a),c=i.pendingLanes,c===0&&(Ri=null),mc(s.stateNode),Dk(i,B()),e!==null)for(o=i.onRecoverableError,s=0;s<e.length;s++)a=e[s],o(a.value,{componentStack:a.stack,digest:a.digest});if(Oi)throw Oi=!1,i=Pi,Pi=null,i;return xk&1&&i.tag!==0&&Hk(),c=i.pendingLanes,c&1?i===zk?yk++:(yk=0,zk=i):yk=0,jg(),null}function Hk(){if(wk!==null){var i=Dc(xk),e=ok$2.transition,s=C$1;try{if(ok$2.transition=null,C$1=16>i?16:i,wk===null)var o=!1;else{if(i=wk,wk=null,xk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=i.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var h=c.deletions;if(h!==null){for(var g=0;g<h.length;g++){var j=h[g];for(V=j;V!==null;){var $=V;switch($.tag){case 0:case 11:case 15:Pj(8,$,c)}var _=$.child;if(_!==null)_.return=$,V=_;else for(;V!==null;){$=V;var et=$.sibling,tt=$.return;if(Sj($),$===j){V=null;break}if(et!==null){et.return=tt,V=et;break}V=tt}}}var it=c.alternate;if(it!==null){var ot=it.child;if(ot!==null){it.child=null;do{var at=ot.sibling;ot.sibling=null,ot=at}while(ot!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var rt=c.sibling;if(rt!==null){rt.return=c.return,V=rt;break e}V=c.return}}var st=i.current;for(V=st;V!==null;){d=V;var lt=d.child;if(d.subtreeFlags&2064&&lt!==null)lt.return=d,V=lt;else e:for(d=st;V!==null;){if(h=V,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(ft){W(h,h.return,ft)}if(h===d){V=null;break e}var mt=h.sibling;if(mt!==null){mt.return=h.return,V=mt;break e}V=h.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,i)}catch{}o=!0}return o}finally{C$1=s,ok$2.transition=e}}return!1}function Xk(i,e,s){e=Ji(s,e),e=Ni(i,e,1),i=nh(i,e,1),e=R(),i!==null&&(Ac(i,1,e),Dk(i,e))}function W(i,e,s){if(i.tag===3)Xk(i,i,s);else for(;e!==null;){if(e.tag===3){Xk(e,i,s);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){i=Ji(s,i),i=Qi(e,i,1),e=nh(e,i,1),i=R(),e!==null&&(Ac(e,1,i),Dk(e,i));break}}e=e.return}}function Ti(i,e,s){var o=i.pingCache;o!==null&&o.delete(e),e=R(),i.pingedLanes|=i.suspendedLanes&s,Q===i&&(Z&s)===s&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(i,0):rk|=s),Dk(i,e)}function Yk(i,e){e===0&&(i.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var s=R();i=ih(i,e),i!==null&&(Ac(i,e,s),Dk(i,s))}function uj(i){var e=i.memoizedState,s=0;e!==null&&(s=e.retryLane),Yk(i,s)}function bk(i,e){var s=0;switch(i.tag){case 13:var o=i.stateNode,a=i.memoizedState;a!==null&&(s=a.retryLane);break;case 19:o=i.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(e),Yk(i,s)}var Vk;Vk=function(i,e,s){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(i.lanes&s)&&!(e.flags&128))return dh=!1,yj(i,e,s);dh=!!(i.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;ij(i,e),i=e.pendingProps;var a=Yf(e,H.current);ch(e,s),a=Nh(null,e,o,i,a,s);var c=Sh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(o)?(c=!0,cg(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kh(e),a.updater=Ei,e.stateNode=a,a._reactInternals=e,Ii(e,o,i,s),e=jj(null,e,o,!0,c,s)):(e.tag=0,I&&c&&vg(e),Xi(null,e,a,s),e=e.child),e;case 16:o=e.elementType;e:{switch(ij(i,e),i=e.pendingProps,a=o._init,o=a(o._payload),e.type=o,a=e.tag=Zk(o),i=Ci(o,i),a){case 0:e=cj(null,e,o,i,s);break e;case 1:e=hj(null,e,o,i,s);break e;case 11:e=Yi(null,e,o,i,s);break e;case 14:e=$i(null,e,o,Ci(o.type,i),s);break e}throw Error(p(306,o,""))}return e;case 0:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),cj(i,e,o,a,s);case 1:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),hj(i,e,o,a,s);case 3:e:{if(kj(e),i===null)throw Error(p(387));o=e.pendingProps,c=e.memoizedState,a=c.element,lh(i,e),qh(e,o,null,s);var d=e.memoizedState;if(o=d.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Ji(Error(p(423)),e),e=lj(i,e,o,s,a);break e}else if(o!==a){a=Ji(Error(p(424)),e),e=lj(i,e,o,s,a);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,s=Vg(e,null,o,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),o===a){e=Zi(i,e,s);break e}Xi(i,e,o,s)}e=e.child}return e;case 5:return Ah(e),i===null&&Eg(e),o=e.type,a=e.pendingProps,c=i!==null?i.memoizedProps:null,d=a.children,Ef(o,a)?d=null:c!==null&&Ef(o,c)&&(e.flags|=32),gj(i,e),Xi(i,e,d,s),e.child;case 6:return i===null&&Eg(e),null;case 13:return oj(i,e,s);case 4:return yh(e,e.stateNode.containerInfo),o=e.pendingProps,i===null?e.child=Ug(e,null,o,s):Xi(i,e,o,s),e.child;case 11:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),Yi(i,e,o,a,s);case 7:return Xi(i,e,e.pendingProps,s),e.child;case 8:return Xi(i,e,e.pendingProps.children,s),e.child;case 12:return Xi(i,e,e.pendingProps.children,s),e.child;case 10:e:{if(o=e.type._context,a=e.pendingProps,c=e.memoizedProps,d=a.value,G(Wg,o._currentValue),o._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===a.children&&!Wf.current){e=Zi(i,e,s);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var g=h.firstContext;g!==null;){if(g.context===o){if(c.tag===1){g=mh(-1,s&-s),g.tag=2;var j=c.updateQueue;if(j!==null){j=j.shared;var $=j.pending;$===null?g.next=g:(g.next=$.next,$.next=g),j.pending=g}}c.lanes|=s,g=c.alternate,g!==null&&(g.lanes|=s),bh(c.return,s,e),h.lanes|=s;break}g=g.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=s,h=d.alternate,h!==null&&(h.lanes|=s),bh(d,s,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(i,e,a.children,s),e=e.child}return e;case 9:return a=e.type,o=e.pendingProps.children,ch(e,s),a=eh(a),o=o(a),e.flags|=1,Xi(i,e,o,s),e.child;case 14:return o=e.type,a=Ci(o,e.pendingProps),a=Ci(o.type,a),$i(i,e,o,a,s);case 15:return bj(i,e,e.type,e.pendingProps,s);case 17:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),ij(i,e),e.tag=1,Zf(o)?(i=!0,cg(e)):i=!1,ch(e,s),Gi(e,o,a),Ii(e,o,a,s),jj(null,e,o,!0,i,s);case 19:return xj(i,e,s);case 22:return dj(i,e,s)}throw Error(p(156,e.tag))};function Fk(i,e){return ac(i,e)}function $k(i,e,s,o){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,s,o){return new $k(i,e,s,o)}function aj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zk(i){if(typeof i=="function")return aj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da)return 11;if(i===Ga)return 14}return 2}function Pg(i,e){var s=i.alternate;return s===null?(s=Bg(i.tag,e,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=e,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function Rg(i,e,s,o,a,c){var d=2;if(o=i,typeof i=="function")aj(i)&&(d=1);else if(typeof i=="string")d=5;else e:switch(i){case ya:return Tg(s.children,a,c,e);case za:d=8,a|=8;break;case Aa:return i=Bg(12,s,e,a|2),i.elementType=Aa,i.lanes=c,i;case Ea:return i=Bg(13,s,e,a),i.elementType=Ea,i.lanes=c,i;case Fa:return i=Bg(19,s,e,a),i.elementType=Fa,i.lanes=c,i;case Ia:return pj(s,a,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,o=null;break e}throw Error(p(130,i==null?i:typeof i,""))}return e=Bg(d,s,e,a),e.elementType=i,e.type=o,e.lanes=c,e}function Tg(i,e,s,o){return i=Bg(7,i,o,e),i.lanes=s,i}function pj(i,e,s,o){return i=Bg(22,i,o,e),i.elementType=Ia,i.lanes=s,i.stateNode={isHidden:!1},i}function Qg(i,e,s){return i=Bg(6,i,null,e),i.lanes=s,i}function Sg(i,e,s){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=s,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function al(i,e,s,o,a){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function bl(i,e,s,o,a,c,d,h,g){return i=new al(i,e,s,h,g),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:o,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),i}function cl(i,e,s){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:i,containerInfo:e,implementation:s}}function dl(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb(i)!==i||i.tag!==1)throw Error(p(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,e)}return e}function el(i,e,s,o,a,c,d,h,g){return i=bl(s,o,!0,i,a,c,d,h,g),i.context=dl(null),s=i.current,o=R(),a=yi(s),c=mh(o,a),c.callback=e??null,nh(s,c,a),i.current.lanes=a,Ac(i,a,o),Dk(i,o),i}function fl(i,e,s,o){var a=e.current,c=R(),d=yi(a);return s=dl(s),e.context===null?e.context=s:e.pendingContext=s,e=mh(c,d),e.payload={element:i},o=o===void 0?null:o,o!==null&&(e.callback=o),i=nh(a,e,d),i!==null&&(gi(i,a,d,c),oh(i,a,d)),d}function gl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function hl(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<e?s:e}}function il(i,e){hl(i,e),(i=i.alternate)&&hl(i,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(i){console.error(i)};function ll(i){this._internalRoot=i}ml.prototype.render=ll.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(i,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Rk(function(){fl(null,i,null,null)}),e[uf]=null}};function ml(i){this._internalRoot=i}ml.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc();i={blockedOn:null,target:i,priority:e};for(var s=0;s<Qc.length&&e!==0&&e<Qc[s].priority;s++);Qc.splice(s,0,i),s===0&&Vc(i)}};function nl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(i,e,s,o,a){if(a){if(typeof o=="function"){var c=o;o=function(){var j=gl(d);c.call(j)}}var d=el(e,o,i,0,null,!1,!1,"",pl);return i._reactRootContainer=d,i[uf]=d.current,sf(i.nodeType===8?i.parentNode:i),Rk(),d}for(;a=i.lastChild;)i.removeChild(a);if(typeof o=="function"){var h=o;o=function(){var j=gl(g);h.call(j)}}var g=bl(i,0,!1,null,null,!1,!1,"",pl);return i._reactRootContainer=g,i[uf]=g.current,sf(i.nodeType===8?i.parentNode:i),Rk(function(){fl(e,g,s,o)}),g}function rl(i,e,s,o,a){var c=s._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var h=a;a=function(){var g=gl(d);h.call(g)}}fl(e,d,i,a)}else d=ql(s,e,i,a,o);return gl(d)}Ec=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc(e.pendingLanes);s!==0&&(Cc(e,s|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var o=ih(i,1);if(o!==null){var a=R();gi(o,i,1,a)}}),il(i,1)}};Fc=function(i){if(i.tag===13){var e=ih(i,134217728);if(e!==null){var s=R();gi(e,i,134217728,s)}il(i,134217728)}};Gc=function(i){if(i.tag===13){var e=yi(i),s=ih(i,e);if(s!==null){var o=R();gi(s,i,e,o)}il(i,e)}};Hc=function(){return C$1};Ic=function(i,e){var s=C$1;try{return C$1=i,e()}finally{C$1=s}};yb=function(i,e,s){switch(e){case"input":if(bb(i,s),e=s.name,s.type==="radio"&&e!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var o=s[e];if(o!==i&&o.form===i.form){var a=Db(o);if(!a)throw Error(p(90));Wa(o),bb(o,a)}}}break;case"textarea":ib(i,s);break;case"select":e=s.value,e!=null&&fb(i,!!s.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb(i),i===null?null:i.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(i,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(i,e,null,s)};reactDom_production_min.createRoot=function(i,e){if(!nl(i))throw Error(p(299));var s=!1,o="",a=kl;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=bl(i,1,!1,null,null,s,!1,o,a),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ll(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p(188)):(i=Object.keys(i).join(","),Error(p(268,i)));return i=Zb(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Rk(i)};reactDom_production_min.hydrate=function(i,e,s){if(!ol(e))throw Error(p(200));return rl(null,i,e,!0,s)};reactDom_production_min.hydrateRoot=function(i,e,s){if(!nl(i))throw Error(p(405));var o=s!=null&&s.hydratedSources||null,a=!1,c="",d=kl;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(d=s.onRecoverableError)),e=el(e,null,i,1,s??null,a,!1,c,d),i[uf]=e.current,sf(i),o)for(i=0;i<o.length;i++)s=o[i],a=s._getVersion,a=a(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,a]:e.mutableSourceEagerHydrationData.push(s,a);return new ml(e)};reactDom_production_min.render=function(i,e,s){if(!ol(e))throw Error(p(200));return rl(null,i,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!ol(i))throw Error(p(40));return i._reactRootContainer?(Rk(function(){rl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,s,o){if(!ol(s))throw Error(p(200));if(i==null||i._reactInternals===void 0)throw Error(p(38));return rl(i,e,s,!1,o)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,createRoot,m=reactDomExports;createRoot=m.createRoot,m.hydrateRoot;/**
 * @remix-run/router v1.20.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends$3.apply(this,arguments)}var Action;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(i){i===void 0&&(i={});function e(o,a){let{pathname:c,search:d,hash:h}=o.location;return createLocation("",{pathname:c,search:d,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(o,a){return typeof a=="string"?a:createPath(a)}return getUrlBasedHistory(e,s,null,i)}function invariant$2(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function warning$2(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(i,e){return{usr:i.state,key:i.key,idx:e}}function createLocation(i,e,s,o){return s===void 0&&(s=null),_extends$3({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:s,key:e&&e.key||o||createKey()})}function createPath(i){let{pathname:e="/",search:s="",hash:o=""}=i;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function parsePath(i){let e={};if(i){let s=i.indexOf("#");s>=0&&(e.hash=i.substr(s),i=i.substr(0,s));let o=i.indexOf("?");o>=0&&(e.search=i.substr(o),i=i.substr(0,o)),i&&(e.pathname=i)}return e}function getUrlBasedHistory(i,e,s,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:c=!1}=o,d=a.history,h=Action.Pop,g=null,j=$();j==null&&(j=0,d.replaceState(_extends$3({},d.state,{idx:j}),""));function $(){return(d.state||{idx:null}).idx}function _(){h=Action.Pop;let at=$(),rt=at==null?null:at-j;j=at,g&&g({action:h,location:ot.location,delta:rt})}function et(at,rt){h=Action.Push;let st=createLocation(ot.location,at,rt);j=$()+1;let lt=getHistoryState(st,j),mt=ot.createHref(st);try{d.pushState(lt,"",mt)}catch(ft){if(ft instanceof DOMException&&ft.name==="DataCloneError")throw ft;a.location.assign(mt)}c&&g&&g({action:h,location:ot.location,delta:1})}function tt(at,rt){h=Action.Replace;let st=createLocation(ot.location,at,rt);j=$();let lt=getHistoryState(st,j),mt=ot.createHref(st);d.replaceState(lt,"",mt),c&&g&&g({action:h,location:ot.location,delta:0})}function it(at){let rt=a.location.origin!=="null"?a.location.origin:a.location.href,st=typeof at=="string"?at:createPath(at);return st=st.replace(/ $/,"%20"),invariant$2(rt,"No window.location.(origin|href) available to create URL for href: "+st),new URL(st,rt)}let ot={get action(){return h},get location(){return i(a,d)},listen(at){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,_),g=at,()=>{a.removeEventListener(PopStateEventType,_),g=null}},createHref(at){return e(a,at)},createURL:it,encodeLocation(at){let rt=it(at);return{pathname:rt.pathname,search:rt.search,hash:rt.hash}},push:et,replace:tt,go(at){return d.go(at)}};return ot}var ResultType;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(ResultType||(ResultType={}));function matchRoutes(i,e,s){return s===void 0&&(s="/"),matchRoutesImpl(i,e,s,!1)}function matchRoutesImpl(i,e,s,o){let a=typeof e=="string"?parsePath(e):e,c=stripBasename(a.pathname||"/",s);if(c==null)return null;let d=flattenRoutes(i);rankRouteBranches(d);let h=null;for(let g=0;h==null&&g<d.length;++g){let j=decodePath(c);h=matchRouteBranch(d[g],j,o)}return h}function flattenRoutes(i,e,s,o){e===void 0&&(e=[]),s===void 0&&(s=[]),o===void 0&&(o="");let a=(c,d,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};g.relativePath.startsWith("/")&&(invariant$2(g.relativePath.startsWith(o),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(o.length));let j=joinPaths([o,g.relativePath]),$=s.concat(g);c.children&&c.children.length>0&&(invariant$2(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+j+'".')),flattenRoutes(c.children,e,$,j)),!(c.path==null&&!c.index)&&e.push({path:j,score:computeScore(j,c.index),routesMeta:$})};return i.forEach((c,d)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))a(c,d);else for(let g of explodeOptionalSegments(c.path))a(c,d,g)}),e}function explodeOptionalSegments(i){let e=i.split("/");if(e.length===0)return[];let[s,...o]=e,a=s.endsWith("?"),c=s.replace(/\?$/,"");if(o.length===0)return a?[c,""]:[c];let d=explodeOptionalSegments(o.join("/")),h=[];return h.push(...d.map(g=>g===""?c:[c,g].join("/"))),a&&h.push(...d),h.map(g=>i.startsWith("/")&&g===""?"/":g)}function rankRouteBranches(i){i.sort((e,s)=>e.score!==s.score?s.score-e.score:compareIndexes(e.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,e){let s=i.split("/"),o=s.length;return s.some(isSplat)&&(o+=splatPenalty),e&&(o+=indexRouteValue),s.filter(a=>!isSplat(a)).reduce((a,c)=>a+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(i,e){return i.length===e.length&&i.slice(0,-1).every((o,a)=>o===e[a])?i[i.length-1]-e[e.length-1]:0}function matchRouteBranch(i,e,s){let{routesMeta:o}=i,a={},c="/",d=[];for(let h=0;h<o.length;++h){let g=o[h],j=h===o.length-1,$=c==="/"?e:e.slice(c.length)||"/",_=matchPath({path:g.relativePath,caseSensitive:g.caseSensitive,end:j},$),et=g.route;if(!_&&j&&s&&!o[o.length-1].route.index&&(_=matchPath({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},$)),!_)return null;Object.assign(a,_.params),d.push({params:a,pathname:joinPaths([c,_.pathname]),pathnameBase:normalizePathname(joinPaths([c,_.pathnameBase])),route:et}),_.pathnameBase!=="/"&&(c=joinPaths([c,_.pathnameBase]))}return d}function matchPath(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[s,o]=compilePath(i.path,i.caseSensitive,i.end),a=e.match(s);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:o.reduce((j,$,_)=>{let{paramName:et,isOptional:tt}=$;if(et==="*"){let ot=h[_]||"";d=c.slice(0,c.length-ot.length).replace(/(.)\/+$/,"$1")}const it=h[_];return tt&&!it?j[et]=void 0:j[et]=(it||"").replace(/%2F/g,"/"),j},{}),pathname:c,pathnameBase:d,pattern:i}}function compilePath(i,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),warning$2(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,g)=>(o.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),o]}function decodePath(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning$2(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function stripBasename(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,o=i.charAt(s);return o&&o!=="/"?null:i.slice(s)||"/"}function resolvePath(i,e){e===void 0&&(e="/");let{pathname:s,search:o="",hash:a=""}=typeof i=="string"?parsePath(i):i;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,e):e,search:normalizeSearch(o),hash:normalizeHash(a)}}function resolvePathname(i,e){let s=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(i,e,s,o){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(i){return i.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(i,e){let s=getPathContributingMatches(i);return e?s.map((o,a)=>a===s.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function resolveTo(i,e,s,o){o===void 0&&(o=!1);let a;typeof i=="string"?a=parsePath(i):(a=_extends$3({},i),invariant$2(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$2(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$2(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let c=i===""||a.pathname==="",d=c?"/":a.pathname,h;if(d==null)h=s;else{let _=e.length-1;if(!o&&d.startsWith("..")){let et=d.split("/");for(;et[0]==="..";)et.shift(),_-=1;a.pathname=et.join("/")}h=_>=0?e[_]:"/"}let g=resolvePath(a,h),j=d&&d!=="/"&&d.endsWith("/"),$=(c||d===".")&&s.endsWith("/");return!g.pathname.endsWith("/")&&(j||$)&&(g.pathname+="/"),g}const joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(i,e){let{relative:s}=e===void 0?{}:e;useInRouterContext()||invariant$2(!1);let{basename:o,navigator:a}=reactExports.useContext(NavigationContext),{hash:c,pathname:d,search:h}=useResolvedPath(i,{relative:s}),g=d;return o!=="/"&&(g=d==="/"?o:joinPaths([o,d])),a.createHref({pathname:g,search:h,hash:c})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$2(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$2(i){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(i)}function useNavigate(){let{isDataRoute:i}=reactExports.useContext(RouteContext);return i?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$2(!1);let i=reactExports.useContext(DataRouterContext),{basename:e,future:s,navigator:o}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=JSON.stringify(getResolveToMatches(a,s.v7_relativeSplatPath)),h=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{h.current=!0}),reactExports.useCallback(function(j,$){if($===void 0&&($={}),!h.current)return;if(typeof j=="number"){o.go(j);return}let _=resolveTo(j,JSON.parse(d),c,$.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:joinPaths([e,_.pathname])),($.replace?o.replace:o.push)(_,$.state,$)},[e,o,d,c,i])}function useParams(){let{matches:i}=reactExports.useContext(RouteContext),e=i[i.length-1];return e?e.params:{}}function useResolvedPath(i,e){let{relative:s}=e===void 0?{}:e,{future:o}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:c}=useLocation(),d=JSON.stringify(getResolveToMatches(a,o.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(i,JSON.parse(d),c,s==="path"),[i,d,c,s])}function useRoutes(i,e){return useRoutesImpl(i,e)}function useRoutesImpl(i,e,s,o){useInRouterContext()||invariant$2(!1);let{navigator:a}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),d=c[c.length-1],h=d?d.params:{};d&&d.pathname;let g=d?d.pathnameBase:"/";d&&d.route;let j=useLocation(),$;if(e){var _;let at=typeof e=="string"?parsePath(e):e;g==="/"||(_=at.pathname)!=null&&_.startsWith(g)||invariant$2(!1),$=at}else $=j;let et=$.pathname||"/",tt=et;if(g!=="/"){let at=g.replace(/^\//,"").split("/");tt="/"+et.replace(/^\//,"").split("/").slice(at.length).join("/")}let it=matchRoutes(i,{pathname:tt}),ot=_renderMatches(it&&it.map(at=>Object.assign({},at,{params:Object.assign({},h,at.params),pathname:joinPaths([g,a.encodeLocation?a.encodeLocation(at.pathname).pathname:at.pathname]),pathnameBase:at.pathnameBase==="/"?g:joinPaths([g,a.encodeLocation?a.encodeLocation(at.pathnameBase).pathname:at.pathnameBase])})),c,s,o);return e&&ot?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},$),navigationType:Action.Pop}},ot):ot}function DefaultErrorComponent(){let i=useRouteError(),e=isRouteErrorResponse(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),s=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),s?reactExports.createElement("pre",{style:a},s):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(i){let{routeContext:e,match:s,children:o}=i,a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},o)}function _renderMatches(i,e,s,o){var a;if(e===void 0&&(e=[]),s===void 0&&(s=null),o===void 0&&(o=null),i==null){var c;if(!s)return null;if(s.errors)i=s.matches;else if((c=o)!=null&&c.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)i=s.matches;else return null}let d=i,h=(a=s)==null?void 0:a.errors;if(h!=null){let $=d.findIndex(_=>_.route.id&&(h==null?void 0:h[_.route.id])!==void 0);$>=0||invariant$2(!1),d=d.slice(0,Math.min(d.length,$+1))}let g=!1,j=-1;if(s&&o&&o.v7_partialHydration)for(let $=0;$<d.length;$++){let _=d[$];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(j=$),_.route.id){let{loaderData:et,errors:tt}=s,it=_.route.loader&&et[_.route.id]===void 0&&(!tt||tt[_.route.id]===void 0);if(_.route.lazy||it){g=!0,j>=0?d=d.slice(0,j+1):d=[d[0]];break}}}return d.reduceRight(($,_,et)=>{let tt,it=!1,ot=null,at=null;s&&(tt=h&&_.route.id?h[_.route.id]:void 0,ot=_.route.errorElement||defaultErrorElement,g&&(j<0&&et===0?(it=!0,at=null):j===et&&(it=!0,at=_.route.hydrateFallbackElement||null)));let rt=e.concat(d.slice(0,et+1)),st=()=>{let lt;return tt?lt=ot:it?lt=at:_.route.Component?lt=reactExports.createElement(_.route.Component,null):_.route.element?lt=_.route.element:lt=$,reactExports.createElement(RenderedRoute,{match:_,routeContext:{outlet:$,matches:rt,isDataRoute:s!=null},children:lt})};return s&&(_.route.ErrorBoundary||_.route.errorElement||et===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:ot,error:tt,children:st(),routeContext:{outlet:null,matches:rt,isDataRoute:!0}}):st()},null)}var DataRouterHook$1=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(DataRouterHook$1||{}),DataRouterStateHook$1=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(DataRouterStateHook$1||{});function useDataRouterContext(i){let e=reactExports.useContext(DataRouterContext);return e||invariant$2(!1),e}function useDataRouterState(i){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$2(!1),e}function useRouteContext(i){let e=reactExports.useContext(RouteContext);return e||invariant$2(!1),e}function useCurrentRouteId(i){let e=useRouteContext(),s=e.matches[e.matches.length-1];return s.route.id||invariant$2(!1),s.route.id}function useRouteError(){var i;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),o=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(i=s.errors)==null?void 0:i[o]}function useNavigateStable(){let{router:i}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$2(()=>{s.current=!0}),reactExports.useCallback(function(a,c){c===void 0&&(c={}),s.current&&(typeof a=="number"?i.navigate(a):i.navigate(a,_extends$2({fromRouteId:e},c)))},[i,e])}function Navigate(i){let{to:e,replace:s,state:o,relative:a}=i;useInRouterContext()||invariant$2(!1);let{future:c,static:d}=reactExports.useContext(NavigationContext),{matches:h}=reactExports.useContext(RouteContext),{pathname:g}=useLocation(),j=useNavigate(),$=resolveTo(e,getResolveToMatches(h,c.v7_relativeSplatPath),g,a==="path"),_=JSON.stringify($);return reactExports.useEffect(()=>j(JSON.parse(_),{replace:s,state:o,relative:a}),[j,_,a,s,o]),null}function Route(i){invariant$2(!1)}function Router(i){let{basename:e="/",children:s=null,location:o,navigationType:a=Action.Pop,navigator:c,static:d=!1,future:h}=i;useInRouterContext()&&invariant$2(!1);let g=e.replace(/^\/*/,"/"),j=reactExports.useMemo(()=>({basename:g,navigator:c,static:d,future:_extends$2({v7_relativeSplatPath:!1},h)}),[g,h,c,d]);typeof o=="string"&&(o=parsePath(o));let{pathname:$="/",search:_="",hash:et="",state:tt=null,key:it="default"}=o,ot=reactExports.useMemo(()=>{let at=stripBasename($,g);return at==null?null:{location:{pathname:at,search:_,hash:et,state:tt,key:it},navigationType:a}},[g,$,_,et,tt,it,a]);return ot==null?null:reactExports.createElement(NavigationContext.Provider,{value:j},reactExports.createElement(LocationContext.Provider,{children:s,value:ot}))}function Routes(i){let{children:e,location:s}=i;return useRoutes(createRoutesFromChildren(e),s)}new Promise(()=>{});function createRoutesFromChildren(i,e){e===void 0&&(e=[]);let s=[];return reactExports.Children.forEach(i,(o,a)=>{if(!reactExports.isValidElement(o))return;let c=[...e,a];if(o.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(o.props.children,c));return}o.type!==Route&&invariant$2(!1),!o.props.index||!o.props.children||invariant$2(!1);let d={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=createRoutesFromChildren(o.props.children,c)),s.push(d)}),s}/**
 * React Router DOM v6.27.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose(i,e){if(i==null)return{};var s={},o=Object.keys(i),a,c;for(c=0;c<o.length;c++)a=o[c],!(e.indexOf(a)>=0)&&(s[a]=i[a]);return s}function isModifiedEvent(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function shouldProcessLinkClick(i,e){return i.button===0&&(!e||e==="_self")&&!isModifiedEvent(i)}const _excluded=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(i){let{basename:e,children:s,future:o,window:a}=i,c=reactExports.useRef();c.current==null&&(c.current=createBrowserHistory({window:a,v5Compat:!0}));let d=c.current,[h,g]=reactExports.useState({action:d.action,location:d.location}),{v7_startTransition:j}=o||{},$=reactExports.useCallback(_=>{j&&startTransitionImpl?startTransitionImpl(()=>g(_)):g(_)},[g,j]);return reactExports.useLayoutEffect(()=>d.listen($),[d,$]),reactExports.createElement(Router,{basename:e,children:s,location:h.location,navigationType:h.action,navigator:d,future:o})}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,s){let{onClick:o,relative:a,reloadDocument:c,replace:d,state:h,target:g,to:j,preventScrollReset:$,viewTransition:_}=e,et=_objectWithoutPropertiesLoose(e,_excluded),{basename:tt}=reactExports.useContext(NavigationContext),it,ot=!1;if(typeof j=="string"&&ABSOLUTE_URL_REGEX.test(j)&&(it=j,isBrowser$2))try{let lt=new URL(window.location.href),mt=j.startsWith("//")?new URL(lt.protocol+j):new URL(j),ft=stripBasename(mt.pathname,tt);mt.origin===lt.origin&&ft!=null?j=ft+mt.search+mt.hash:ot=!0}catch{}let at=useHref(j,{relative:a}),rt=useLinkClickHandler(j,{replace:d,state:h,target:g,preventScrollReset:$,relative:a,viewTransition:_});function st(lt){o&&o(lt),lt.defaultPrevented||rt(lt)}return reactExports.createElement("a",_extends$1({},et,{href:it||at,onClick:ot||c?o:st,ref:s,target:g}))});var DataRouterHook;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(i,e){let{target:s,replace:o,state:a,preventScrollReset:c,relative:d,viewTransition:h}=e===void 0?{}:e,g=useNavigate(),j=useLocation(),$=useResolvedPath(i,{relative:d});return reactExports.useCallback(_=>{if(shouldProcessLinkClick(_,s)){_.preventDefault();let et=o!==void 0?o:createPath(j)===createPath($);g(i,{replace:et,state:a,preventScrollReset:c,relative:d,viewTransition:h})}},[j,g,$,o,a,s,i,c,d,h])}var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(i){const e=[];let s=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);a<128?e[s++]=a:a<2048?(e[s++]=a>>6|192,e[s++]=a&63|128):(a&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++o)&1023),e[s++]=a>>18|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128,e[s++]=a&63|128):(e[s++]=a>>12|224,e[s++]=a>>6&63|128,e[s++]=a&63|128)}return e},byteArrayToString=function(i){const e=[];let s=0,o=0;for(;s<i.length;){const a=i[s++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[s++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[s++],d=i[s++],h=i[s++],g=((a&7)<<18|(c&63)<<12|(d&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(g>>10)),e[o++]=String.fromCharCode(56320+(g&1023))}else{const c=i[s++],d=i[s++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<i.length;a+=3){const c=i[a],d=a+1<i.length,h=d?i[a+1]:0,g=a+2<i.length,j=g?i[a+2]:0,$=c>>2,_=(c&3)<<4|h>>4;let et=(h&15)<<2|j>>6,tt=j&63;g||(tt=64,d||(et=64)),o.push(s[$],s[_],s[et],s[tt])}return o.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(stringToByteArray$1(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):byteArrayToString(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<i.length;){const c=s[i.charAt(a++)],h=a<i.length?s[i.charAt(a)]:0;++a;const j=a<i.length?s[i.charAt(a)]:64;++a;const _=a<i.length?s[i.charAt(a)]:64;if(++a,c==null||h==null||j==null||_==null)throw new DecodeBase64StringError;const et=c<<2|h>>4;if(o.push(et),j!==64){const tt=h<<4&240|j>>2;if(o.push(tt),_!==64){const it=j<<6&192|_;o.push(it)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(i){const e=stringToByteArray$1(i);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(i){return base64Encode(i).replace(/\./g,"")},base64Decode=function(i){try{return base64.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const i=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&base64Decode(i[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},getDefaultEmulatorHost=i=>{var e,s;return(s=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[i]},getDefaultEmulatorHostnameAndPort=i=>{const e=getDefaultEmulatorHost(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),o]:[e.substring(0,s),o]},getDefaultAppConfig=()=>{var i;return(i=getDefaults())===null||i===void 0?void 0:i.config},getExperimentalSetting=i=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,o)=>{s?this.reject(s):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},o=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[base64urlEncodeWithoutPadding(JSON.stringify(s)),base64urlEncodeWithoutPadding(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode$1(){var i;const e=(i=getDefaults())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const i=getUA();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function isSafari(){return!isNode$1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((i,e)=>{try{let s=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(o),i(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,s,o){super(s),this.code=e,this.customData=o,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,s,o){this.service=e,this.serviceName=s,this.errors=o}create(e,...s){const o=s[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?replaceTemplate(c,o):"Error",h=`${this.serviceName}: ${d} (${a}).`;return new FirebaseError(a,h,o)}}function replaceTemplate(i,e){return i.replace(PATTERN,(s,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function deepEqual(i,e){if(i===e)return!0;const s=Object.keys(i),o=Object.keys(e);for(const a of s){if(!o.includes(a))return!1;const c=i[a],d=e[a];if(isObject$3(c)&&isObject$3(d)){if(!deepEqual(c,d))return!1}else if(c!==d)return!1}for(const a of o)if(!s.includes(a))return!1;return!0}function isObject$3(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(i){const e=[];for(const[s,o]of Object.entries(i))Array.isArray(o)?o.forEach(a=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function querystringDecode(i){const e={};return i.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[a,c]=o.split("=");e[decodeURIComponent(a)]=decodeURIComponent(c)}}),e}function extractQuerystring(i){const e=i.indexOf("?");if(!e)return"";const s=i.indexOf("#",e);return i.substring(e,s>0?s:void 0)}function createSubscribe(i,e){const s=new ObserverProxy(i,e);return s.subscribe.bind(s)}class ObserverProxy{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,o){let a;if(e===void 0&&s===void 0&&o===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?a=e:a={next:e,error:s,complete:o},a.next===void 0&&(a.next=noop$1),a.error===void 0&&(a.error=noop$1),a.complete===void 0&&(a.complete=noop$1);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(i,e){if(typeof i!="object"||i===null)return!1;for(const s of e)if(s in i&&typeof i[s]=="function")return!0;return!1}function noop$1(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(i){return i&&i._delegate?i._delegate:i}class Component{constructor(e,s,o){this.name=e,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const o=new Deferred;if(this.instancesDeferred.set(s,o),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const o=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:s});for(const[c,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);o===h&&d.resolve(a)}return a}onInit(e,s){var o;const a=this.normalizeInstanceIdentifier(s),c=(o=this.onInitCallbacks.get(a))!==null&&o!==void 0?o:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,s){const o=this.onInitCallbacks.get(s);if(o)for(const a of o)try{a(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:s}),this.instances.set(e,o),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(i){return i===DEFAULT_ENTRY_NAME$1?void 0:i}function isComponentEager(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Provider(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(i,e,...s)=>{if(e<i.logLevel)return;const o=new Date().toISOString(),a=ConsoleMethod[e];if(a)console[a](`[${o}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(i,e)=>e.some(s=>i instanceof s);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(i){const e=new Promise((s,o)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{s(wrap$2(i.result)),a()},d=()=>{o(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(s=>{s instanceof IDBCursor&&cursorRequestMap.set(s,i)}).catch(()=>{}),reverseTransformCache.set(e,i),e}function cacheDonePromiseForTransaction(i){if(transactionDoneMap.has(i))return;const e=new Promise((s,o)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{s(),a()},d=()=>{o(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});transactionDoneMap.set(i,e)}let idbProxyTraps={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(i);if(e==="objectStoreNames")return i.objectStoreNames||transactionStoreNamesMap.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wrap$2(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function replaceTraps(i){idbProxyTraps=i(idbProxyTraps)}function wrapFunction(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const o=i.call(unwrap(this),e,...s);return transactionStoreNamesMap.set(o,e.sort?e.sort():[e]),wrap$2(o)}:getCursorAdvanceMethods().includes(i)?function(...e){return i.apply(unwrap(this),e),wrap$2(cursorRequestMap.get(this))}:function(...e){return wrap$2(i.apply(unwrap(this),e))}}function transformCachableValue(i){return typeof i=="function"?wrapFunction(i):(i instanceof IDBTransaction&&cacheDonePromiseForTransaction(i),instanceOfAny(i,getIdbProxyableTypes())?new Proxy(i,idbProxyTraps):i)}function wrap$2(i){if(i instanceof IDBRequest)return promisifyRequest(i);if(transformCache.has(i))return transformCache.get(i);const e=transformCachableValue(i);return e!==i&&(transformCache.set(i,e),reverseTransformCache.set(e,i)),e}const unwrap=i=>reverseTransformCache.get(i);function openDB(i,e,{blocked:s,upgrade:o,blocking:a,terminated:c}={}){const d=indexedDB.open(i,e),h=wrap$2(d);return o&&d.addEventListener("upgradeneeded",g=>{o(wrap$2(d.result),g.oldVersion,g.newVersion,wrap$2(d.transaction),g)}),s&&d.addEventListener("blocked",g=>s(g.oldVersion,g.newVersion,g)),h.then(g=>{c&&g.addEventListener("close",()=>c()),a&&g.addEventListener("versionchange",j=>a(j.oldVersion,j.newVersion,j))}).catch(()=>{}),h}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const s=e.replace(/FromIndex$/,""),o=e!==s,a=writeMethods.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(a||readMethods.includes(s)))return;const c=async function(d,...h){const g=this.transaction(d,a?"readwrite":"readonly");let j=g.store;return o&&(j=j.index(h.shift())),(await Promise.all([j[s](...h),a&&g.done]))[0]};return cachedMethods.set(e,c),c}replaceTraps(i=>({...i,get:(e,s,o)=>getMethod(e,s)||i.get(e,s,o),has:(e,s)=>!!getMethod(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(isVersionServiceProvider(s)){const o=s.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(s=>s).join(" ")}}function isVersionServiceProvider(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const name$q="@firebase/app",version$1$1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3="@firebase/firestore",name$2$1="@firebase/vertexai-preview",name$1$1="@firebase/firestore-compat",name$r="firebase",version$2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(i,e){try{i.container.addComponent(e)}catch(s){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function _registerComponent(i){const e=i.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,i);for(const s of _apps.values())_addComponent(s,i);for(const s of _serverApps.values())_addComponent(s,i);return!0}function _getProvider(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}function _isFirebaseServerApp(i){return i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,s,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const o=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},e),a=o.name;if(typeof a!="string"||!a)throw ERROR_FACTORY.create("bad-app-name",{appName:String(a)});if(s||(s=getDefaultAppConfig()),!s)throw ERROR_FACTORY.create("no-options");const c=_apps.get(a);if(c){if(deepEqual(s,c.options)&&deepEqual(o,c.config))return c;throw ERROR_FACTORY.create("duplicate-app",{appName:a})}const d=new ComponentContainer(a);for(const g of _components.values())d.addComponent(g);const h=new FirebaseAppImpl(s,o,d);return _apps.set(a,h),h}function getApp(i=DEFAULT_ENTRY_NAME){const e=_apps.get(i);if(!e&&i===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:i});return e}function registerVersion(i,e,s){var o;let a=(o=PLATFORM_LOG_STRING[i])!==null&&o!==void 0?o:i;s&&(a+=`-${s}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const h=[`Unable to register library "${a}" with version "${e}":`];c&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&h.push("and"),d&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(h.join(" "));return}_registerComponent(new Component(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(STORE_NAME)}catch(s){console.warn(s)}}}}).catch(i=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:i.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(i){try{const s=(await getDbPromise()).transaction(STORE_NAME),o=await s.objectStore(STORE_NAME).get(computeKey(i));return await s.done,o}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const s=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});logger.warn(s.message)}}}async function writeHeartbeatsToIndexedDB(i,e){try{const o=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await o.objectStore(STORE_NAME).put(e,computeKey(i)),await o.done}catch(s){if(s instanceof FirebaseError)logger.warn(s.message);else{const o=ERROR_FACTORY.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});logger.warn(o.message)}}}function computeKey(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(s),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=getUTCDateString();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const h=new Date(d.date).valueOf();return Date.now()-h<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache))}catch(o){logger.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=getUTCDateString(),{heartbeatsToSend:o,unsentEntries:a}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),c=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(s){return logger.warn(s),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(i,e=MAX_HEADER_BYTES){const s=[];let o=i.slice();for(const a of i){const c=s.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),countBytes(s)>e){c.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),countBytes(s)>e){s.pop();break}o=o.slice(1)}return{heartbeatsToSend:s,unsentEntries:o}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await readHeartbeatsFromIndexedDB(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function countBytes(i){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(i){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,i),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest$2(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(s[o[a]]=i[o[a]]);return s}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(i,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${i}`,...e)}function _logError(i,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(i,...e){throw createErrorInternal(i,...e)}function _createError(i,...e){return createErrorInternal(i,...e)}function _errorWithCustomMessage(i,e,s){const o=Object.assign(Object.assign({},prodErrorMap()),{[e]:s});return new ErrorFactory("auth","Firebase",o).create(e,{appName:i.name})}function _serverAppCurrentUserOperationNotSupportedError(i){return _errorWithCustomMessage(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(i,...e){if(typeof i!="string"){const s=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=i.name),i._errorFactory.create(s,...o)}return _DEFAULT_AUTH_ERROR_FACTORY.create(i,...e)}function _assert(i,e,...s){if(!i)throw createErrorInternal(e,...s)}function debugFail(i){const e="INTERNAL ASSERTION FAILED: "+i;throw _logError(e),new Error(e)}function debugAssert(i,e){i||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,s){this.shortDelay=e,this.longDelay=s,debugAssert(s>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(i,e){debugAssert(i.emulator,"Emulator should always be set here");const{url:s}=i.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,s,o){this.fetchImpl=e,s&&(this.headersImpl=s),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function _performApiRequest(i,e,s,o,a={}){return _performFetchWithErrorHandling(i,a,async()=>{let c={},d={};o&&(e==="GET"?d=o:c={body:JSON.stringify(o)});const h=querystring(Object.assign({key:i.config.apiKey},d)).slice(1),g=await i._getAdditionalHeaders();g["Content-Type"]="application/json",i.languageCode&&(g["X-Firebase-Locale"]=i.languageCode);const j=Object.assign({method:e,headers:g},c);return isCloudflareWorker()||(j.referrerPolicy="no-referrer"),FetchProvider.fetch()(_getFinalTarget(i,i.config.apiHost,s,h),j)})}async function _performFetchWithErrorHandling(i,e,s){i._canInitEmulator=!1;const o=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const a=new NetworkTimeout(i),c=await Promise.race([s(),a.promise]);a.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw _makeTaggedError(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const h=c.ok?d.errorMessage:d.error.message,[g,j]=h.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(i,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw _makeTaggedError(i,"email-already-in-use",d);if(g==="USER_DISABLED")throw _makeTaggedError(i,"user-disabled",d);const $=o[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(j)throw _errorWithCustomMessage(i,$,j);_fail(i,$)}}catch(a){if(a instanceof FirebaseError)throw a;_fail(i,"network-request-failed",{message:String(a)})}}async function _performSignInRequest(i,e,s,o,a={}){const c=await _performApiRequest(i,e,s,o,a);return"mfaPendingCredential"in c&&_fail(i,"multi-factor-auth-required",{_serverResponse:c}),c}function _getFinalTarget(i,e,s,o){const a=`${e}${s}?${o}`;return i.config.emulator?_emulatorUrl(i.config,a):`${i.config.apiScheme}://${a}`}function _parseEnforcementState(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,o)=>{this.timer=setTimeout(()=>o(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(i,e,s){const o={appName:i.name};s.email&&(o.email=s.email),s.phoneNumber&&(o.phoneNumber=s.phoneNumber);const a=_createError(i,e,o);return a.customData._tokenResponse=s,a}function isEnterprise(i){return i!==void 0&&i.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return _parseEnforcementState(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function getRecaptchaConfig(i,e){return _performApiRequest(i,"GET","/v2/recaptchaConfig",_addTidIfNecessary(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(i,e){return _performApiRequest(i,"POST","/v1/accounts:delete",e)}async function getAccountInfo(i,e){return _performApiRequest(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(i,e=!1){const s=getModularInstance(i),o=await s.getIdToken(e),a=_parseToken(o);_assert(a&&a.exp&&a.auth_time&&a.iat,s.auth,"internal-error");const c=typeof a.firebase=="object"?a.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:a,token:o,authTime:utcTimestampToDateString(secondsStringToMilliseconds(a.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(a.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(a.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function secondsStringToMilliseconds(i){return Number(i)*1e3}function _parseToken(i){const[e,s,o]=i.split(".");if(e===void 0||s===void 0||o===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const a=base64Decode(s);return a?JSON.parse(a):(_logError("Failed to decode base64 JWT payload"),null)}catch(a){return _logError("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function _tokenExpiresIn(i){const e=_parseToken(i);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(i,e,s=!1){if(s)return e;try{return await e}catch(o){throw o instanceof FirebaseError&&isUserInvalidated(o)&&i.auth.currentUser===i&&await i.auth.signOut(),o}}function isUserInvalidated({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const o=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),o}else{this.errorBackoff=3e4;const a=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(i){var e;const s=i.auth,o=await i.getIdToken(),a=await _logoutIfInvalidated(i,getAccountInfo(s,{idToken:o}));_assert(a==null?void 0:a.users.length,s,"internal-error");const c=a.users[0];i._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(c.providerUserInfo):[],h=mergeProviderData(i.providerData,d),g=i.isAnonymous,j=!(i.email&&c.passwordHash)&&!(h!=null&&h.length),$=g?j:!1,_={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new UserMetadata(c.createdAt,c.lastLoginAt),isAnonymous:$};Object.assign(i,_)}async function reload(i){const e=getModularInstance(i);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(i,e){return[...i.filter(o=>!e.some(a=>a.providerId===o.providerId)),...e]}function extractProviderData(i){return i.map(e=>{var{providerId:s}=e,o=__rest$2(e,["providerId"]);return{providerId:s,uid:o.rawId||"",displayName:o.displayName||null,email:o.email||null,phoneNumber:o.phoneNumber||null,photoURL:o.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(i,e){const s=await _performFetchWithErrorHandling(i,{},async()=>{const o=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:c}=i.config,d=_getFinalTarget(i,a,"/v1/token",`key=${c}`),h=await i._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(d,{method:"POST",headers:h,body:o})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function revokeToken(i,e){return _performApiRequest(i,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const s=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:o,refreshToken:a,expiresIn:c}=await requestStsToken(e,s);this.updateTokensAndExpiration(o,a,Number(c))}updateTokensAndExpiration(e,s,o){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,s){const{refreshToken:o,accessToken:a,expirationTime:c}=s,d=new StsTokenManager;return o&&(_assert(typeof o=="string","internal-error",{appName:e}),d.refreshToken=o),a&&(_assert(typeof a=="string","internal-error",{appName:e}),d.accessToken=a),c&&(_assert(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(i,e){_assert(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:s,auth:o,stsTokenManager:a}=e,c=__rest$2(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=o,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new UserMetadata(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const s=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),s&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var o,a,c,d,h,g,j,$;const _=(o=s.displayName)!==null&&o!==void 0?o:void 0,et=(a=s.email)!==null&&a!==void 0?a:void 0,tt=(c=s.phoneNumber)!==null&&c!==void 0?c:void 0,it=(d=s.photoURL)!==null&&d!==void 0?d:void 0,ot=(h=s.tenantId)!==null&&h!==void 0?h:void 0,at=(g=s._redirectEventId)!==null&&g!==void 0?g:void 0,rt=(j=s.createdAt)!==null&&j!==void 0?j:void 0,st=($=s.lastLoginAt)!==null&&$!==void 0?$:void 0,{uid:lt,emailVerified:mt,isAnonymous:ft,providerData:gt,stsTokenManager:dt}=s;_assert(lt&&dt,e,"internal-error");const ut=StsTokenManager.fromJSON(this.name,dt);_assert(typeof lt=="string",e,"internal-error"),assertStringOrUndefined(_,e.name),assertStringOrUndefined(et,e.name),_assert(typeof mt=="boolean",e,"internal-error"),_assert(typeof ft=="boolean",e,"internal-error"),assertStringOrUndefined(tt,e.name),assertStringOrUndefined(it,e.name),assertStringOrUndefined(ot,e.name),assertStringOrUndefined(at,e.name),assertStringOrUndefined(rt,e.name),assertStringOrUndefined(st,e.name);const ct=new UserImpl({uid:lt,auth:e,email:et,emailVerified:mt,displayName:_,isAnonymous:ft,photoURL:it,phoneNumber:tt,tenantId:ot,stsTokenManager:ut,createdAt:rt,lastLoginAt:st});return gt&&Array.isArray(gt)&&(ct.providerData=gt.map(_t=>Object.assign({},_t))),at&&(ct._redirectEventId=at),ct}static async _fromIdTokenResponse(e,s,o=!1){const a=new StsTokenManager;a.updateFromServerResponse(s);const c=new UserImpl({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o});return await _reloadWithoutSaving(c),c}static async _fromGetAccountInfoResponse(e,s,o){const a=s.users[0];_assert(a.localId!==void 0,"internal-error");const c=a.providerUserInfo!==void 0?extractProviderData(a.providerUserInfo):[],d=!(a.email&&a.passwordHash)&&!(c!=null&&c.length),h=new StsTokenManager;h.updateFromIdToken(o);const g=new UserImpl({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:d}),j={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new UserMetadata(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(c!=null&&c.length)};return Object.assign(g,j),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(i){debugAssert(i instanceof Function,"Expected a class definition");let e=instanceCache.get(i);return e?(debugAssert(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,instanceCache.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(i,e,s){return`firebase:${i}:${e}:${s}`}class PersistenceUserManager{constructor(e,s,o){this.persistence=e,this.auth=s,this.userKey=o;const{config:a,name:c}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,a.apiKey,c),this.fullPersistenceKey=_persistenceKeyName("persistence",a.apiKey,c),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?UserImpl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,o="authUser"){if(!s.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,o);const a=(await Promise.all(s.map(async j=>{if(await j._isAvailable())return j}))).filter(j=>j);let c=a[0]||_getInstance(inMemoryPersistence);const d=_persistenceKeyName(o,e.config.apiKey,e.name);let h=null;for(const j of s)try{const $=await j._get(d);if($){const _=UserImpl._fromJSON(e,$);j!==c&&(h=_),c=j;break}}catch{}const g=a.filter(j=>j._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new PersistenceUserManager(c,e,o):(c=g[0],h&&await c._set(d,h.toJSON()),await Promise.all(s.map(async j=>{if(j!==c)try{await j._remove(d)}catch{}})),new PersistenceUserManager(c,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=i.match(s);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function _isFirefox(i=getUA()){return/firefox\//i.test(i)}function _isSafari(i=getUA()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(i=getUA()){return/crios\//i.test(i)}function _isIEMobile(i=getUA()){return/iemobile/i.test(i)}function _isAndroid(i=getUA()){return/android/i.test(i)}function _isBlackBerry(i=getUA()){return/blackberry/i.test(i)}function _isWebOS(i=getUA()){return/webos/i.test(i)}function _isIOS(i=getUA()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function _isIOSStandalone(i=getUA()){var e;return _isIOS(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(i=getUA()){return _isIOS(i)||_isAndroid(i)||_isWebOS(i)||_isBlackBerry(i)||/windows phone/i.test(i)||_isIEMobile(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(i,e=[]){let s;switch(i){case"Browser":s=_getBrowserName(getUA());break;case"Worker":s=`${_getBrowserName(getUA())}-${i}`;break;default:s=i}const o=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${SDK_VERSION}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const o=c=>new Promise((d,h)=>{try{const g=e(c);d(g)}catch(g){h(g)}});o.onAbort=s,this.queue.push(o);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const o of this.queue)await o(e),o.onAbort&&s.push(o.onAbort)}catch(o){s.reverse();for(const a of s)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(i,e={}){return _performApiRequest(i,"GET","/v2/passwordPolicy",_addTidIfNecessary(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var s,o,a,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=d.minPasswordLength)!==null&&s!==void 0?s:MINIMUM_MIN_PASSWORD_LENGTH,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(o=e.allowedNonAlphanumericCharacters)===null||o===void 0?void 0:o.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,o,a,c,d,h;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(s=g.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),g.isValid&&(g.isValid=(o=g.meetsMaxPasswordLength)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(a=g.containsLowercaseLetter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(c=g.containsUppercaseLetter)!==null&&c!==void 0?c:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(h=g.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),g}validatePasswordLengthOptions(e,s){const o=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;o&&(s.meetsMinPasswordLength=e.length>=o),a&&(s.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let o;for(let a=0;a<e.length;a++)o=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(s,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,s,o,a,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,s,o,a){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=o,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=_getInstance(s)),this._initializationPromise=this.queue(async()=>{var o,a;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await getAccountInfo(this,{idToken:e}),o=await UserImpl._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(o)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(_isFirebaseServerApp(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const o=await this.assertedPersistence.getCurrentUser();let a=o,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,h=a==null?void 0:a._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===h)&&(g!=null&&g.user)&&(a=g.user,c=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(a)}catch(d){a=o,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const s=e?getModularInstance(e):null;return s&&_assert(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),s=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,s,o){return this.registerStateListener(this.authStateSubscription,e,s,o)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,o){return this.registerStateListener(this.idTokenSubscription,e,s,o)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(o.tenantId=this.tenantId),await revokeToken(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const o=await this.getOrInitRedirectPersistenceManager(s);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&_getInstance(e)||this._popupRedirectResolver;_assert(s,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,o;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((o=this.redirectUser)===null||o===void 0?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const o=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==o&&(this.lastNotifiedUid=o,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,o,a){if(this._deleted)return()=>{};const c=typeof s=="function"?s:s.next.bind(s);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(h,this,"internal-error"),h.then(()=>{d||c(this.currentUser)}),typeof s=="function"){const g=e.addObserver(s,o,a);return()=>{d=!0,g()}}else{const g=e.addObserver(s);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const o=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());o&&(s["X-Firebase-Client"]=o);const a=await this._getAppCheckToken();return a&&(s["X-Firebase-AppCheck"]=a),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&_logWarn(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function _castAuth(i){return getModularInstance(i)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(s=>this.observer=s)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(i){externalJSProvider=i}function _loadJS(i){return externalJSProvider.loadJS(i)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(i){return`__${i}${Math.floor(Math.random()*1e6)}`}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",s=!1){async function o(c){if(!s){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(d,h)=>{getRecaptchaConfig(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const j=new RecaptchaConfig(g);return c.tenantId==null?c._agentRecaptchaConfig=j:c._tenantRecaptchaConfigs[c.tenantId]=j,d(j.siteKey)}}).catch(g=>{h(g)})})}function a(c,d,h){const g=window.grecaptcha;isEnterprise(g)?g.enterprise.ready(()=>{g.enterprise.execute(c,{action:e}).then(j=>{d(j)}).catch(()=>{d(FAKE_TOKEN)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((c,d)=>{o(this.auth).then(h=>{if(!s&&isEnterprise(window.grecaptcha))a(h,c,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=_recaptchaEnterpriseScriptUrl();g.length!==0&&(g+=h),_loadJS(g).then(()=>{a(h,c,d)}).catch(j=>{d(j)})}}).catch(h=>{d(h)})})}}async function injectRecaptchaFields(i,e,s,o=!1){const a=new RecaptchaEnterpriseVerifier(i);let c;try{c=await a.verify(s)}catch{c=await a.verify(s,!0)}const d=Object.assign({},e);return o?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function handleRecaptchaFlow(i,e,s,o){var a;if(!((a=i._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await injectRecaptchaFields(i,e,s,s==="getOobCode");return o(i,c)}else return o(i,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await injectRecaptchaFields(i,e,s,s==="getOobCode");return o(i,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(i,e){const s=_getProvider(i,"auth");if(s.isInitialized()){const a=s.getImmediate(),c=s.getOptions();if(deepEqual(c,e??{}))return a;_fail(a,"already-initialized")}return s.initialize({options:e})}function _initializeAuthInstance(i,e){const s=(e==null?void 0:e.persistence)||[],o=(Array.isArray(s)?s:[s]).map(_getInstance);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function connectAuthEmulator(i,e,s){const o=_castAuth(i);_assert(o._canInitEmulator,o,"emulator-config-failed"),_assert(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const a=!1,c=extractProtocol(e),{host:d,port:h}=extractHostAndPort(e),g=h===null?"":`:${h}`;o.config.emulator={url:`${c}//${d}${g}/`},o.settings.appVerificationDisabledForTesting=!0,o.emulatorConfig=Object.freeze({host:d,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:a})}),emitEmulatorWarning()}function extractProtocol(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function extractHostAndPort(i){const e=extractProtocol(i),s=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!s)return{host:"",port:null};const o=s[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(o);if(a){const c=a[1];return{host:c,port:parsePort(o.substr(c.length+1))}}else{const[c,d]=o.split(":");return{host:c,port:parsePort(d)}}}function parsePort(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function emitEmulatorWarning(){function i(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,s){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function updateEmailPassword(i,e){return _performApiRequest(i,"POST","/v1/accounts:update",e)}async function linkEmailPassword(i,e){return _performApiRequest(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(i,e){return _performSignInRequest(i,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(i,e){return _performSignInRequest(i,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(i,e))}async function signInWithEmailLinkForLinking(i,e){return _performSignInRequest(i,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,s,o,a=null){super("password",o),this._email=e,this._password=s,this._tenantId=a}static _fromEmailAndPassword(e,s){return new EmailAuthCredential(e,s,"password")}static _fromEmailAndCode(e,s,o=null){return new EmailAuthCredential(e,s,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,s,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const o={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,o,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:s,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(i,e){return _performSignInRequest(i,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):_fail("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:a}=s,c=__rest$2(s,["providerId","signInMethod"]);if(!o||!a)return null;const d=new OAuthCredential(o,a);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const s=this.buildRequest();return signInWithIdp(e,s)}_linkToIdToken(e,s){const o=this.buildRequest();return o.idToken=s,signInWithIdp(e,o)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,signInWithIdp(e,s)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=querystring(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(i){const e=querystringDecode(extractQuerystring(i)).link,s=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,o=querystringDecode(extractQuerystring(i)).deep_link_id;return(o?querystringDecode(extractQuerystring(o)).link:null)||o||s||e||i}class ActionCodeURL{constructor(e){var s,o,a,c,d,h;const g=querystringDecode(extractQuerystring(e)),j=(s=g.apiKey)!==null&&s!==void 0?s:null,$=(o=g.oobCode)!==null&&o!==void 0?o:null,_=parseMode((a=g.mode)!==null&&a!==void 0?a:null);_assert(j&&$&&_,"argument-error"),this.apiKey=j,this.operation=_,this.code=$,this.continueUrl=(c=g.continueUrl)!==null&&c!==void 0?c:null,this.languageCode=(d=g.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(h=g.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const s=parseDeepLink(e);try{return new ActionCodeURL(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,s){return EmailAuthCredential._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const o=ActionCodeURL.parseLink(s);return _assert(o,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,o.code,o.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:o}=e;if(!s&&!o)return null;try{return GoogleAuthProvider.credential(s,o)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,s){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:o}=e;if(!s||!o)return null;try{return TwitterAuthProvider.credential(s,o)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(i,e){return _performSignInRequest(i,"POST","/v1/accounts:signUp",_addTidIfNecessary(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,o,a=!1){const c=await UserImpl._fromIdTokenResponse(e,o,a),d=providerIdForResponse(o);return new UserCredentialImpl({user:c,providerId:d,_tokenResponse:o,operationType:s})}static async _forOperation(e,s,o){await e._updateTokensIfNecessary(o,!0);const a=providerIdForResponse(o);return new UserCredentialImpl({user:e,providerId:a,_tokenResponse:o,operationType:s})}}function providerIdForResponse(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,s,o,a){var c;super(s.code,s.message),this.operationType=o,this.user=a,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:s.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,s,o,a){return new MultiFactorError(e,s,o,a)}}function _processCredentialSavingMfaContextIfNecessary(i,e,s,o){return(e==="reauthenticate"?s._getReauthenticationResolver(i):s._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(i,c,e,o):c})}async function _link$1(i,e,s=!1){const o=await _logoutIfInvalidated(i,e._linkToIdToken(i.auth,await i.getIdToken()),s);return UserCredentialImpl._forOperation(i,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(i,e,s=!1){const{auth:o}=i;if(_isFirebaseServerApp(o.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(o));const a="reauthenticate";try{const c=await _logoutIfInvalidated(i,_processCredentialSavingMfaContextIfNecessary(o,a,e,i),s);_assert(c.idToken,o,"internal-error");const d=_parseToken(c.idToken);_assert(d,o,"internal-error");const{sub:h}=d;return _assert(i.uid===h,o,"user-mismatch"),UserCredentialImpl._forOperation(i,a,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&_fail(o,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(i,e,s=!1){if(_isFirebaseServerApp(i.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(i));const o="signIn",a=await _processCredentialSavingMfaContextIfNecessary(i,o,e),c=await UserCredentialImpl._fromIdTokenResponse(i,o,a);return s||await i._updateCurrentUser(c.user),c}async function signInWithCredential(i,e){return _signInWithCredential(_castAuth(i),e)}async function reauthenticateWithCredential(i,e){return _reauthenticate(getModularInstance(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(i){const e=_castAuth(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function createUserWithEmailAndPassword(i,e,s){if(_isFirebaseServerApp(i.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(i));const o=_castAuth(i),d=await handleRecaptchaFlow(o,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(i),g}),h=await UserCredentialImpl._fromIdTokenResponse(o,"signIn",d);return await o._updateCurrentUser(h.user),h}function signInWithEmailAndPassword(i,e,s){return _isFirebaseServerApp(i.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(i)):signInWithCredential(getModularInstance(i),EmailAuthProvider.credential(e,s)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(i),o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile$1(i,e){return _performApiRequest(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile(i,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const o=getModularInstance(i),c={idToken:await o.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},d=await _logoutIfInvalidated(o,updateProfile$1(o.auth,c));o.displayName=d.displayName||null,o.photoURL=d.photoUrl||null;const h=o.providerData.find(({providerId:g})=>g==="password");h&&(h.displayName=o.displayName,h.photoURL=o.photoURL),await o._updateTokensIfNecessary(d)}function updateEmail(i,e){const s=getModularInstance(i);return _isFirebaseServerApp(s.auth.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(s.auth)):updateEmailOrPassword(s,e,null)}function updatePassword(i,e){return updateEmailOrPassword(getModularInstance(i),null,e)}async function updateEmailOrPassword(i,e,s){const{auth:o}=i,c={idToken:await i.getIdToken(),returnSecureToken:!0};e&&(c.email=e),s&&(c.password=s);const d=await _logoutIfInvalidated(i,updateEmailPassword(o,c));await i._updateTokensIfNecessary(d,!0)}function onIdTokenChanged(i,e,s,o){return getModularInstance(i).onIdTokenChanged(e,s,o)}function beforeAuthStateChanged(i,e,s){return getModularInstance(i).beforeAuthStateChanged(e,s)}function onAuthStateChanged(i,e,s,o){return getModularInstance(i).onAuthStateChanged(e,s,o)}function signOut(i){return getModularInstance(i).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const o=this.storage.getItem(s),a=this.localCache[s];o!==a&&e(s,a,o)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((d,h,g)=>{this.notifyListeners(d,g)});return}const o=e.key;s?this.detachListener():this.stopPolling();const a=()=>{const d=this.storage.getItem(o);!s&&this.localCache[o]===d||this.notifyListeners(o,d)},c=this.storage.getItem(o);_isIE10()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,IE10_LOCAL_STORAGE_SYNC_DELAY):a()}notifyListeners(e,s){this.localCache[e]=s;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:o}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(a=>a.isListeningto(e));if(s)return s;const o=new Receiver(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:o,eventType:a,data:c}=s.data,d=this.handlersMap[a];if(!(d!=null&&d.size))return;s.ports[0].postMessage({status:"ack",eventId:o,eventType:a});const h=Array.from(d).map(async j=>j(s.origin,c)),g=await _allSettled(h);s.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:g})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(i="",e=10){let s="";for(let o=0;o<e;o++)s+=Math.floor(Math.random()*10);return i+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,o=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,d;return new Promise((h,g)=>{const j=_generateEventId("",20);a.port1.start();const $=setTimeout(()=>{g(new Error("unsupported_event"))},o);d={messageChannel:a,onMessage(_){const et=_;if(et.data.eventId===j)switch(et.data.status){case"ack":clearTimeout($),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),h(et.data.response);break;default:clearTimeout($),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),a.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:j,data:s},[a.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(i){_window().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function getObjectStore(i,e){return i.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const i=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(i).toPromise()}function _openDatabase(){const i=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,s)=>{i.addEventListener("error",()=>{s(i.error)}),i.addEventListener("upgradeneeded",()=>{const o=i.result;try{o.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(a){s(a)}}),i.addEventListener("success",async()=>{const o=i.result;o.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(o):(o.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(i,e,s){const o=getObjectStore(i,!0).put({[DB_DATA_KEYPATH]:e,value:s});return new DBPromise(o).toPromise()}async function getObject(i,e){const s=getObjectStore(i,!1).get(e),o=await new DBPromise(s).toPromise();return o===void 0?null:o.value}function _deleteObject(i,e){const s=getObjectStore(i,!0).delete(e);return new DBPromise(s).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let s=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(s++>_TRANSACTION_RETRY_COUNT)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const o=await this.sender._send("ping",{},800);o&&!((e=o[0])===null||e===void 0)&&e.fulfilled&&!((s=o[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(o=>_putObject(o,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(o=>getObject(o,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>_deleteObject(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const c=getObjectStore(a,!1).getAll();return new DBPromise(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],o=new Set;if(e.length!==0)for(const{fbase_key:a,value:c}of e)o.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(c)&&(this.notifyListeners(a,c),s.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!o.has(a)&&(this.notifyListeners(a,null),s.push(a));return s}notifyListeners(e,s){this.localCache[e]=s;const o=this.listeners[e];if(o)for(const a of Array.from(o))a(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(i,e){return e?_getInstance(e):(_assert(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,s){return signInWithIdp(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function _signIn(i){return _signInWithCredential(i.auth,new IdpCredential(i),i.bypassAuthState)}function _reauth(i){const{auth:e,user:s}=i;return _assert(s,e,"internal-error"),_reauthenticate(s,new IdpCredential(i),i.bypassAuthState)}async function _link(i){const{auth:e,user:s}=i;return _assert(s,e,"internal-error"),_link$1(s,new IdpCredential(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,s,o,a,c=!1){this.auth=e,this.resolver=o,this.user=a,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:o,postBody:a,tenantId:c,error:d,type:h}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:s,sessionId:o,tenantId:c||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(g))}catch(j){this.reject(j)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,s,o,a,c){super(e,s,a,c),this.provider=o,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,o;if(!((o=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||o===void 0)&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,s,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,o),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const o=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(s){e=()=>Promise.reject(s)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(i,e){const s=pendingRedirectKey(e),o=resolverPersistence(i);if(!await o._isAvailable())return!1;const a=await o._get(s)==="true";return await o._remove(s),a}function _overrideRedirectResult(i,e){redirectOutcomeMap.set(i._key(),e)}function resolverPersistence(i){return _getInstance(i._redirectPersistence)}function pendingRedirectKey(i){return _persistenceKeyName(PENDING_REDIRECT_KEY,i.config.apiKey,i.name)}async function _getRedirectResult(i,e,s=!1){if(_isFirebaseServerApp(i.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(i));const o=_castAuth(i),a=_withDefaultResolver(o,e),d=await new RedirectAction(o,a,s).execute();return d&&!s&&(delete d.user._redirectEventId,await o._persistUserIfCurrent(d.user),await o._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(s=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var o;if(e.error&&!isNullRedirectEvent(e)){const a=((o=e.error.code)===null||o===void 0?void 0:o.split("auth/")[1])||"internal-error";s.onError(_createError(this.auth,a))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const o=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function isRedirectEvent(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(i,e={}){return _performApiRequest(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(i){if(i.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(i);for(const s of e)try{if(matchDomain(s))return}catch{}_fail(i,"unauthorized-domain")}function matchDomain(i){const e=_getCurrentUrl(),{protocol:s,hostname:o}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&o===""?s==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&d.hostname===o}if(!HTTP_REGEX.test(s))return!1;if(IP_ADDRESS_REGEX.test(i))return o===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const i=_window().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let s=0;s<i.CP.length;s++)i.CP[s]=null}}function loadGapi(i){return new Promise((e,s)=>{var o,a,c;function d(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),s(_createError(i,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((a=(o=_window().gapi)===null||o===void 0?void 0:o.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((c=_window().gapi)===null||c===void 0)&&c.load)d();else{const h=_generateCallbackName("iframefcb");return _window()[h]=()=>{gapi.load?d():s(_createError(i,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${h}`).catch(g=>s(g))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(i){return cachedGApiLoader=cachedGApiLoader||loadGapi(i),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(i){const e=i.config;_assert(e.authDomain,i,"auth-domain-config-required");const s=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${i.config.authDomain}/${IFRAME_PATH}`,o={apiKey:e.apiKey,appName:i.name,v:SDK_VERSION},a=EID_FROM_APIHOST.get(i.config.apiHost);a&&(o.eid=a);const c=i._getFrameworks();return c.length&&(o.fw=c.join(",")),`${s}?${querystring(o).slice(1)}`}async function _openIframe(i){const e=await _loadGapi(i),s=_window().gapi;return _assert(s,i,"internal-error"),e.open({where:document.body,url:getIframeUrl(i),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},o=>new Promise(async(a,c)=>{await o.restyle({setHideOnLeave:!1});const d=_createError(i,"network-request-failed"),h=_window().setTimeout(()=>{c(d)},PING_TIMEOUT.get());function g(){_window().clearTimeout(h),a(o)}o.ping(g).then(g,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(i,e,s,o=DEFAULT_WIDTH,a=DEFAULT_HEIGHT){const c=Math.max((window.screen.availHeight-a)/2,0).toString(),d=Math.max((window.screen.availWidth-o)/2,0).toString();let h="";const g=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:o.toString(),height:a.toString(),top:c,left:d}),j=getUA().toLowerCase();s&&(h=_isChromeIOS(j)?TARGET_BLANK:s),_isFirefox(j)&&(e=e||FIREFOX_EMPTY_URL,g.scrollbars="yes");const $=Object.entries(g).reduce((et,[tt,it])=>`${et}${tt}=${it},`,"");if(_isIOSStandalone(j)&&h!=="_self")return openAsNewWindowIOS(e||"",h),new AuthPopup(null);const _=window.open(e||"",h,$);_assert(_,i,"popup-blocked");try{_.focus()}catch{}return new AuthPopup(_)}function openAsNewWindowIOS(i,e){const s=document.createElement("a");s.href=i,s.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(i,e,s,o,a,c){_assert(i.config.authDomain,i,"auth-domain-config-required"),_assert(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:s,redirectUrl:o,v:SDK_VERSION,eventId:a};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",isEmpty$1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[$,_]of Object.entries({}))d[$]=_}if(e instanceof BaseOAuthProvider){const $=e.getScopes().filter(_=>_!=="");$.length>0&&(d.scopes=$.join(","))}i.tenantId&&(d.tid=i.tenantId);const h=d;for(const $ of Object.keys(h))h[$]===void 0&&delete h[$];const g=await i._getAppCheckToken(),j=g?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(g)}`:"";return`${getHandlerBase(i)}?${querystring(h).slice(1)}${j}`}function getHandlerBase({config:i}){return i.emulator?_emulatorUrl(i,EMULATOR_WIDGET_PATH):`https://${i.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,s,o,a){var c;debugAssert((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await _getRedirectUrl(e,s,o,_getCurrentUrl(),a);return _open(e,d,_generateEventId())}async _openRedirect(e,s,o,a){await this._originValidation(e);const c=await _getRedirectUrl(e,s,o,_getCurrentUrl(),a);return _setWindowLocation(c),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:a,promise:c}=this.eventManagers[s];return a?Promise.resolve(a):(debugAssert(c,"If manager is not set, promise should be"),c)}const o=this.initAndGetManager(e);return this.eventManagers[s]={promise:o},o.catch(()=>{delete this.eventManagers[s]}),o}async initAndGetManager(e){const s=await _openIframe(e),o=new AuthEventManager(e);return s.register("authEvent",a=>(_assert(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:o.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=s,o}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},a=>{var c;const d=(c=a==null?void 0:a[0])===null||c===void 0?void 0:c[WEB_STORAGE_SUPPORT_KEY];d!==void 0&&s(!!d),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=_validateOrigin(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$2="@firebase/auth",version$1="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(i){_registerComponent(new Component("auth",(e,{options:s})=>{const o=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=o.options;_assert(d&&!d.includes(":"),"invalid-api-key",{appName:o.name});const g={apiKey:d,authDomain:h,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(i)},j=new AuthImpl(o,a,c,g);return _initializeAuthInstance(j,s),j},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,o)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const s=_castAuth(e.getProvider("auth").getImmediate());return(o=>new AuthInterop(o))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$2,version$1,getVersionForPlatform(i)),registerVersion(name$2,version$1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=i=>async e=>{const s=e&&await e.getIdTokenResult(),o=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(o&&o>authIdTokenMaxAge)return;const a=s==null?void 0:s.token;lastPostedIdToken!==a&&(lastPostedIdToken=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function getAuth(i=getApp()){const e=_getProvider(i,"auth");if(e.isInitialized())return e.getImmediate();const s=initializeAuth(i,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),o=getExperimentalSetting("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(o,location.origin);if(location.origin===c.origin){const d=mintCookieFactory(c.toString());beforeAuthStateChanged(s,d,()=>d(s.currentUser)),onIdTokenChanged(s,h=>d(h))}}const a=getDefaultEmulatorHost("auth");return a&&connectAuthEmulator(s,`http://${a}`),s}function getScriptParentElement(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(i){return new Promise((e,s)=>{const o=document.createElement("script");o.setAttribute("src",i),o.onload=e,o.onerror=a=>{const c=_createError("internal-error");c.customData=a,s(c)},o.type="text/javascript",o.charset="UTF-8",getScriptParentElement().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name$1="firebase",version="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version,"app");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(dt,ut){function ct(){}ct.prototype=ut.prototype,dt.D=ut.prototype,dt.prototype=new ct,dt.prototype.constructor=dt,dt.C=function(_t,ht,Et){for(var yt=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)yt[Ot-2]=arguments[Ot];return ut.prototype[ht].apply(_t,yt)}}function s(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,s),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(dt,ut,ct){ct||(ct=0);var _t=Array(16);if(typeof ut=="string")for(var ht=0;16>ht;++ht)_t[ht]=ut.charCodeAt(ct++)|ut.charCodeAt(ct++)<<8|ut.charCodeAt(ct++)<<16|ut.charCodeAt(ct++)<<24;else for(ht=0;16>ht;++ht)_t[ht]=ut[ct++]|ut[ct++]<<8|ut[ct++]<<16|ut[ct++]<<24;ut=dt.g[0],ct=dt.g[1],ht=dt.g[2];var Et=dt.g[3],yt=ut+(Et^ct&(ht^Et))+_t[0]+3614090360&4294967295;ut=ct+(yt<<7&4294967295|yt>>>25),yt=Et+(ht^ut&(ct^ht))+_t[1]+3905402710&4294967295,Et=ut+(yt<<12&4294967295|yt>>>20),yt=ht+(ct^Et&(ut^ct))+_t[2]+606105819&4294967295,ht=Et+(yt<<17&4294967295|yt>>>15),yt=ct+(ut^ht&(Et^ut))+_t[3]+3250441966&4294967295,ct=ht+(yt<<22&4294967295|yt>>>10),yt=ut+(Et^ct&(ht^Et))+_t[4]+4118548399&4294967295,ut=ct+(yt<<7&4294967295|yt>>>25),yt=Et+(ht^ut&(ct^ht))+_t[5]+1200080426&4294967295,Et=ut+(yt<<12&4294967295|yt>>>20),yt=ht+(ct^Et&(ut^ct))+_t[6]+2821735955&4294967295,ht=Et+(yt<<17&4294967295|yt>>>15),yt=ct+(ut^ht&(Et^ut))+_t[7]+4249261313&4294967295,ct=ht+(yt<<22&4294967295|yt>>>10),yt=ut+(Et^ct&(ht^Et))+_t[8]+1770035416&4294967295,ut=ct+(yt<<7&4294967295|yt>>>25),yt=Et+(ht^ut&(ct^ht))+_t[9]+2336552879&4294967295,Et=ut+(yt<<12&4294967295|yt>>>20),yt=ht+(ct^Et&(ut^ct))+_t[10]+4294925233&4294967295,ht=Et+(yt<<17&4294967295|yt>>>15),yt=ct+(ut^ht&(Et^ut))+_t[11]+2304563134&4294967295,ct=ht+(yt<<22&4294967295|yt>>>10),yt=ut+(Et^ct&(ht^Et))+_t[12]+1804603682&4294967295,ut=ct+(yt<<7&4294967295|yt>>>25),yt=Et+(ht^ut&(ct^ht))+_t[13]+4254626195&4294967295,Et=ut+(yt<<12&4294967295|yt>>>20),yt=ht+(ct^Et&(ut^ct))+_t[14]+2792965006&4294967295,ht=Et+(yt<<17&4294967295|yt>>>15),yt=ct+(ut^ht&(Et^ut))+_t[15]+1236535329&4294967295,ct=ht+(yt<<22&4294967295|yt>>>10),yt=ut+(ht^Et&(ct^ht))+_t[1]+4129170786&4294967295,ut=ct+(yt<<5&4294967295|yt>>>27),yt=Et+(ct^ht&(ut^ct))+_t[6]+3225465664&4294967295,Et=ut+(yt<<9&4294967295|yt>>>23),yt=ht+(ut^ct&(Et^ut))+_t[11]+643717713&4294967295,ht=Et+(yt<<14&4294967295|yt>>>18),yt=ct+(Et^ut&(ht^Et))+_t[0]+3921069994&4294967295,ct=ht+(yt<<20&4294967295|yt>>>12),yt=ut+(ht^Et&(ct^ht))+_t[5]+3593408605&4294967295,ut=ct+(yt<<5&4294967295|yt>>>27),yt=Et+(ct^ht&(ut^ct))+_t[10]+38016083&4294967295,Et=ut+(yt<<9&4294967295|yt>>>23),yt=ht+(ut^ct&(Et^ut))+_t[15]+3634488961&4294967295,ht=Et+(yt<<14&4294967295|yt>>>18),yt=ct+(Et^ut&(ht^Et))+_t[4]+3889429448&4294967295,ct=ht+(yt<<20&4294967295|yt>>>12),yt=ut+(ht^Et&(ct^ht))+_t[9]+568446438&4294967295,ut=ct+(yt<<5&4294967295|yt>>>27),yt=Et+(ct^ht&(ut^ct))+_t[14]+3275163606&4294967295,Et=ut+(yt<<9&4294967295|yt>>>23),yt=ht+(ut^ct&(Et^ut))+_t[3]+4107603335&4294967295,ht=Et+(yt<<14&4294967295|yt>>>18),yt=ct+(Et^ut&(ht^Et))+_t[8]+1163531501&4294967295,ct=ht+(yt<<20&4294967295|yt>>>12),yt=ut+(ht^Et&(ct^ht))+_t[13]+2850285829&4294967295,ut=ct+(yt<<5&4294967295|yt>>>27),yt=Et+(ct^ht&(ut^ct))+_t[2]+4243563512&4294967295,Et=ut+(yt<<9&4294967295|yt>>>23),yt=ht+(ut^ct&(Et^ut))+_t[7]+1735328473&4294967295,ht=Et+(yt<<14&4294967295|yt>>>18),yt=ct+(Et^ut&(ht^Et))+_t[12]+2368359562&4294967295,ct=ht+(yt<<20&4294967295|yt>>>12),yt=ut+(ct^ht^Et)+_t[5]+4294588738&4294967295,ut=ct+(yt<<4&4294967295|yt>>>28),yt=Et+(ut^ct^ht)+_t[8]+2272392833&4294967295,Et=ut+(yt<<11&4294967295|yt>>>21),yt=ht+(Et^ut^ct)+_t[11]+1839030562&4294967295,ht=Et+(yt<<16&4294967295|yt>>>16),yt=ct+(ht^Et^ut)+_t[14]+4259657740&4294967295,ct=ht+(yt<<23&4294967295|yt>>>9),yt=ut+(ct^ht^Et)+_t[1]+2763975236&4294967295,ut=ct+(yt<<4&4294967295|yt>>>28),yt=Et+(ut^ct^ht)+_t[4]+1272893353&4294967295,Et=ut+(yt<<11&4294967295|yt>>>21),yt=ht+(Et^ut^ct)+_t[7]+4139469664&4294967295,ht=Et+(yt<<16&4294967295|yt>>>16),yt=ct+(ht^Et^ut)+_t[10]+3200236656&4294967295,ct=ht+(yt<<23&4294967295|yt>>>9),yt=ut+(ct^ht^Et)+_t[13]+681279174&4294967295,ut=ct+(yt<<4&4294967295|yt>>>28),yt=Et+(ut^ct^ht)+_t[0]+3936430074&4294967295,Et=ut+(yt<<11&4294967295|yt>>>21),yt=ht+(Et^ut^ct)+_t[3]+3572445317&4294967295,ht=Et+(yt<<16&4294967295|yt>>>16),yt=ct+(ht^Et^ut)+_t[6]+76029189&4294967295,ct=ht+(yt<<23&4294967295|yt>>>9),yt=ut+(ct^ht^Et)+_t[9]+3654602809&4294967295,ut=ct+(yt<<4&4294967295|yt>>>28),yt=Et+(ut^ct^ht)+_t[12]+3873151461&4294967295,Et=ut+(yt<<11&4294967295|yt>>>21),yt=ht+(Et^ut^ct)+_t[15]+530742520&4294967295,ht=Et+(yt<<16&4294967295|yt>>>16),yt=ct+(ht^Et^ut)+_t[2]+3299628645&4294967295,ct=ht+(yt<<23&4294967295|yt>>>9),yt=ut+(ht^(ct|~Et))+_t[0]+4096336452&4294967295,ut=ct+(yt<<6&4294967295|yt>>>26),yt=Et+(ct^(ut|~ht))+_t[7]+1126891415&4294967295,Et=ut+(yt<<10&4294967295|yt>>>22),yt=ht+(ut^(Et|~ct))+_t[14]+2878612391&4294967295,ht=Et+(yt<<15&4294967295|yt>>>17),yt=ct+(Et^(ht|~ut))+_t[5]+4237533241&4294967295,ct=ht+(yt<<21&4294967295|yt>>>11),yt=ut+(ht^(ct|~Et))+_t[12]+1700485571&4294967295,ut=ct+(yt<<6&4294967295|yt>>>26),yt=Et+(ct^(ut|~ht))+_t[3]+2399980690&4294967295,Et=ut+(yt<<10&4294967295|yt>>>22),yt=ht+(ut^(Et|~ct))+_t[10]+4293915773&4294967295,ht=Et+(yt<<15&4294967295|yt>>>17),yt=ct+(Et^(ht|~ut))+_t[1]+2240044497&4294967295,ct=ht+(yt<<21&4294967295|yt>>>11),yt=ut+(ht^(ct|~Et))+_t[8]+1873313359&4294967295,ut=ct+(yt<<6&4294967295|yt>>>26),yt=Et+(ct^(ut|~ht))+_t[15]+4264355552&4294967295,Et=ut+(yt<<10&4294967295|yt>>>22),yt=ht+(ut^(Et|~ct))+_t[6]+2734768916&4294967295,ht=Et+(yt<<15&4294967295|yt>>>17),yt=ct+(Et^(ht|~ut))+_t[13]+1309151649&4294967295,ct=ht+(yt<<21&4294967295|yt>>>11),yt=ut+(ht^(ct|~Et))+_t[4]+4149444226&4294967295,ut=ct+(yt<<6&4294967295|yt>>>26),yt=Et+(ct^(ut|~ht))+_t[11]+3174756917&4294967295,Et=ut+(yt<<10&4294967295|yt>>>22),yt=ht+(ut^(Et|~ct))+_t[2]+718787259&4294967295,ht=Et+(yt<<15&4294967295|yt>>>17),yt=ct+(Et^(ht|~ut))+_t[9]+3951481745&4294967295,dt.g[0]=dt.g[0]+ut&4294967295,dt.g[1]=dt.g[1]+(ht+(yt<<21&4294967295|yt>>>11))&4294967295,dt.g[2]=dt.g[2]+ht&4294967295,dt.g[3]=dt.g[3]+Et&4294967295}o.prototype.u=function(dt,ut){ut===void 0&&(ut=dt.length);for(var ct=ut-this.blockSize,_t=this.B,ht=this.h,Et=0;Et<ut;){if(ht==0)for(;Et<=ct;)a(this,dt,Et),Et+=this.blockSize;if(typeof dt=="string"){for(;Et<ut;)if(_t[ht++]=dt.charCodeAt(Et++),ht==this.blockSize){a(this,_t),ht=0;break}}else for(;Et<ut;)if(_t[ht++]=dt[Et++],ht==this.blockSize){a(this,_t),ht=0;break}}this.h=ht,this.o+=ut},o.prototype.v=function(){var dt=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);dt[0]=128;for(var ut=1;ut<dt.length-8;++ut)dt[ut]=0;var ct=8*this.o;for(ut=dt.length-8;ut<dt.length;++ut)dt[ut]=ct&255,ct/=256;for(this.u(dt),dt=Array(16),ut=ct=0;4>ut;++ut)for(var _t=0;32>_t;_t+=8)dt[ct++]=this.g[ut]>>>_t&255;return dt};function c(dt,ut){var ct=h;return Object.prototype.hasOwnProperty.call(ct,dt)?ct[dt]:ct[dt]=ut(dt)}function d(dt,ut){this.h=ut;for(var ct=[],_t=!0,ht=dt.length-1;0<=ht;ht--){var Et=dt[ht]|0;_t&&Et==ut||(ct[ht]=Et,_t=!1)}this.g=ct}var h={};function g(dt){return-128<=dt&&128>dt?c(dt,function(ut){return new d([ut|0],0>ut?-1:0)}):new d([dt|0],0>dt?-1:0)}function j(dt){if(isNaN(dt)||!isFinite(dt))return _;if(0>dt)return at(j(-dt));for(var ut=[],ct=1,_t=0;dt>=ct;_t++)ut[_t]=dt/ct|0,ct*=4294967296;return new d(ut,0)}function $(dt,ut){if(dt.length==0)throw Error("number format error: empty string");if(ut=ut||10,2>ut||36<ut)throw Error("radix out of range: "+ut);if(dt.charAt(0)=="-")return at($(dt.substring(1),ut));if(0<=dt.indexOf("-"))throw Error('number format error: interior "-" character');for(var ct=j(Math.pow(ut,8)),_t=_,ht=0;ht<dt.length;ht+=8){var Et=Math.min(8,dt.length-ht),yt=parseInt(dt.substring(ht,ht+Et),ut);8>Et?(Et=j(Math.pow(ut,Et)),_t=_t.j(Et).add(j(yt))):(_t=_t.j(ct),_t=_t.add(j(yt)))}return _t}var _=g(0),et=g(1),tt=g(16777216);i=d.prototype,i.m=function(){if(ot(this))return-at(this).m();for(var dt=0,ut=1,ct=0;ct<this.g.length;ct++){var _t=this.i(ct);dt+=(0<=_t?_t:4294967296+_t)*ut,ut*=4294967296}return dt},i.toString=function(dt){if(dt=dt||10,2>dt||36<dt)throw Error("radix out of range: "+dt);if(it(this))return"0";if(ot(this))return"-"+at(this).toString(dt);for(var ut=j(Math.pow(dt,6)),ct=this,_t="";;){var ht=mt(ct,ut).g;ct=rt(ct,ht.j(ut));var Et=((0<ct.g.length?ct.g[0]:ct.h)>>>0).toString(dt);if(ct=ht,it(ct))return Et+_t;for(;6>Et.length;)Et="0"+Et;_t=Et+_t}},i.i=function(dt){return 0>dt?0:dt<this.g.length?this.g[dt]:this.h};function it(dt){if(dt.h!=0)return!1;for(var ut=0;ut<dt.g.length;ut++)if(dt.g[ut]!=0)return!1;return!0}function ot(dt){return dt.h==-1}i.l=function(dt){return dt=rt(this,dt),ot(dt)?-1:it(dt)?0:1};function at(dt){for(var ut=dt.g.length,ct=[],_t=0;_t<ut;_t++)ct[_t]=~dt.g[_t];return new d(ct,~dt.h).add(et)}i.abs=function(){return ot(this)?at(this):this},i.add=function(dt){for(var ut=Math.max(this.g.length,dt.g.length),ct=[],_t=0,ht=0;ht<=ut;ht++){var Et=_t+(this.i(ht)&65535)+(dt.i(ht)&65535),yt=(Et>>>16)+(this.i(ht)>>>16)+(dt.i(ht)>>>16);_t=yt>>>16,Et&=65535,yt&=65535,ct[ht]=yt<<16|Et}return new d(ct,ct[ct.length-1]&-2147483648?-1:0)};function rt(dt,ut){return dt.add(at(ut))}i.j=function(dt){if(it(this)||it(dt))return _;if(ot(this))return ot(dt)?at(this).j(at(dt)):at(at(this).j(dt));if(ot(dt))return at(this.j(at(dt)));if(0>this.l(tt)&&0>dt.l(tt))return j(this.m()*dt.m());for(var ut=this.g.length+dt.g.length,ct=[],_t=0;_t<2*ut;_t++)ct[_t]=0;for(_t=0;_t<this.g.length;_t++)for(var ht=0;ht<dt.g.length;ht++){var Et=this.i(_t)>>>16,yt=this.i(_t)&65535,Ot=dt.i(ht)>>>16,Dt=dt.i(ht)&65535;ct[2*_t+2*ht]+=yt*Dt,st(ct,2*_t+2*ht),ct[2*_t+2*ht+1]+=Et*Dt,st(ct,2*_t+2*ht+1),ct[2*_t+2*ht+1]+=yt*Ot,st(ct,2*_t+2*ht+1),ct[2*_t+2*ht+2]+=Et*Ot,st(ct,2*_t+2*ht+2)}for(_t=0;_t<ut;_t++)ct[_t]=ct[2*_t+1]<<16|ct[2*_t];for(_t=ut;_t<2*ut;_t++)ct[_t]=0;return new d(ct,0)};function st(dt,ut){for(;(dt[ut]&65535)!=dt[ut];)dt[ut+1]+=dt[ut]>>>16,dt[ut]&=65535,ut++}function lt(dt,ut){this.g=dt,this.h=ut}function mt(dt,ut){if(it(ut))throw Error("division by zero");if(it(dt))return new lt(_,_);if(ot(dt))return ut=mt(at(dt),ut),new lt(at(ut.g),at(ut.h));if(ot(ut))return ut=mt(dt,at(ut)),new lt(at(ut.g),ut.h);if(30<dt.g.length){if(ot(dt)||ot(ut))throw Error("slowDivide_ only works with positive integers.");for(var ct=et,_t=ut;0>=_t.l(dt);)ct=ft(ct),_t=ft(_t);var ht=gt(ct,1),Et=gt(_t,1);for(_t=gt(_t,2),ct=gt(ct,2);!it(_t);){var yt=Et.add(_t);0>=yt.l(dt)&&(ht=ht.add(ct),Et=yt),_t=gt(_t,1),ct=gt(ct,1)}return ut=rt(dt,ht.j(ut)),new lt(ht,ut)}for(ht=_;0<=dt.l(ut);){for(ct=Math.max(1,Math.floor(dt.m()/ut.m())),_t=Math.ceil(Math.log(ct)/Math.LN2),_t=48>=_t?1:Math.pow(2,_t-48),Et=j(ct),yt=Et.j(ut);ot(yt)||0<yt.l(dt);)ct-=_t,Et=j(ct),yt=Et.j(ut);it(Et)&&(Et=et),ht=ht.add(Et),dt=rt(dt,yt)}return new lt(ht,dt)}i.A=function(dt){return mt(this,dt).h},i.and=function(dt){for(var ut=Math.max(this.g.length,dt.g.length),ct=[],_t=0;_t<ut;_t++)ct[_t]=this.i(_t)&dt.i(_t);return new d(ct,this.h&dt.h)},i.or=function(dt){for(var ut=Math.max(this.g.length,dt.g.length),ct=[],_t=0;_t<ut;_t++)ct[_t]=this.i(_t)|dt.i(_t);return new d(ct,this.h|dt.h)},i.xor=function(dt){for(var ut=Math.max(this.g.length,dt.g.length),ct=[],_t=0;_t<ut;_t++)ct[_t]=this.i(_t)^dt.i(_t);return new d(ct,this.h^dt.h)};function ft(dt){for(var ut=dt.g.length+1,ct=[],_t=0;_t<ut;_t++)ct[_t]=dt.i(_t)<<1|dt.i(_t-1)>>>31;return new d(ct,dt.h)}function gt(dt,ut){var ct=ut>>5;ut%=32;for(var _t=dt.g.length-ct,ht=[],Et=0;Et<_t;Et++)ht[Et]=0<ut?dt.i(Et+ct)>>>ut|dt.i(Et+ct+1)<<32-ut:dt.i(Et+ct);return new d(ht,dt.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Md5=o,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=j,d.fromString=$,Integer=d}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(nt,xt,wt){return nt==Array.prototype||nt==Object.prototype||(nt[xt]=wt.value),nt};function s(nt){nt=[typeof globalThis=="object"&&globalThis,nt,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var xt=0;xt<nt.length;++xt){var wt=nt[xt];if(wt&&wt.Math==Math)return wt}throw Error("Cannot find global object")}var o=s(this);function a(nt,xt){if(xt)e:{var wt=o;nt=nt.split(".");for(var Ft=0;Ft<nt.length-1;Ft++){var un=nt[Ft];if(!(un in wt))break e;wt=wt[un]}nt=nt[nt.length-1],Ft=wt[nt],xt=xt(Ft),xt!=Ft&&xt!=null&&e(wt,nt,{configurable:!0,writable:!0,value:xt})}}function c(nt,xt){nt instanceof String&&(nt+="");var wt=0,Ft=!1,un={next:function(){if(!Ft&&wt<nt.length){var vn=wt++;return{value:xt(vn,nt[vn]),done:!1}}return Ft=!0,{done:!0,value:void 0}}};return un[Symbol.iterator]=function(){return un},un}a("Array.prototype.values",function(nt){return nt||function(){return c(this,function(xt,wt){return wt})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},h=this||self;function g(nt){var xt=typeof nt;return xt=xt!="object"?xt:nt?Array.isArray(nt)?"array":xt:"null",xt=="array"||xt=="object"&&typeof nt.length=="number"}function j(nt){var xt=typeof nt;return xt=="object"&&nt!=null||xt=="function"}function $(nt,xt,wt){return nt.call.apply(nt.bind,arguments)}function _(nt,xt,wt){if(!nt)throw Error();if(2<arguments.length){var Ft=Array.prototype.slice.call(arguments,2);return function(){var un=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(un,Ft),nt.apply(xt,un)}}return function(){return nt.apply(xt,arguments)}}function et(nt,xt,wt){return et=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$:_,et.apply(null,arguments)}function tt(nt,xt){var wt=Array.prototype.slice.call(arguments,1);return function(){var Ft=wt.slice();return Ft.push.apply(Ft,arguments),nt.apply(this,Ft)}}function it(nt,xt){function wt(){}wt.prototype=xt.prototype,nt.aa=xt.prototype,nt.prototype=new wt,nt.prototype.constructor=nt,nt.Qb=function(Ft,un,vn){for(var kn=Array(arguments.length-2),Kn=2;Kn<arguments.length;Kn++)kn[Kn-2]=arguments[Kn];return xt.prototype[un].apply(Ft,kn)}}function ot(nt){const xt=nt.length;if(0<xt){const wt=Array(xt);for(let Ft=0;Ft<xt;Ft++)wt[Ft]=nt[Ft];return wt}return[]}function at(nt,xt){for(let wt=1;wt<arguments.length;wt++){const Ft=arguments[wt];if(g(Ft)){const un=nt.length||0,vn=Ft.length||0;nt.length=un+vn;for(let kn=0;kn<vn;kn++)nt[un+kn]=Ft[kn]}else nt.push(Ft)}}class rt{constructor(xt,wt){this.i=xt,this.j=wt,this.h=0,this.g=null}get(){let xt;return 0<this.h?(this.h--,xt=this.g,this.g=xt.next,xt.next=null):xt=this.i(),xt}}function st(nt){return/^[\s\xa0]*$/.test(nt)}function lt(){var nt=h.navigator;return nt&&(nt=nt.userAgent)?nt:""}function mt(nt){return mt[" "](nt),nt}mt[" "]=function(){};var ft=lt().indexOf("Gecko")!=-1&&!(lt().toLowerCase().indexOf("webkit")!=-1&&lt().indexOf("Edge")==-1)&&!(lt().indexOf("Trident")!=-1||lt().indexOf("MSIE")!=-1)&&lt().indexOf("Edge")==-1;function gt(nt,xt,wt){for(const Ft in nt)xt.call(wt,nt[Ft],Ft,nt)}function dt(nt,xt){for(const wt in nt)xt.call(void 0,nt[wt],wt,nt)}function ut(nt){const xt={};for(const wt in nt)xt[wt]=nt[wt];return xt}const ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _t(nt,xt){let wt,Ft;for(let un=1;un<arguments.length;un++){Ft=arguments[un];for(wt in Ft)nt[wt]=Ft[wt];for(let vn=0;vn<ct.length;vn++)wt=ct[vn],Object.prototype.hasOwnProperty.call(Ft,wt)&&(nt[wt]=Ft[wt])}}function ht(nt){var xt=1;nt=nt.split(":");const wt=[];for(;0<xt&&nt.length;)wt.push(nt.shift()),xt--;return nt.length&&wt.push(nt.join(":")),wt}function Et(nt){h.setTimeout(()=>{throw nt},0)}function yt(){var nt=Rt;let xt=null;return nt.g&&(xt=nt.g,nt.g=nt.g.next,nt.g||(nt.h=null),xt.next=null),xt}class Ot{constructor(){this.h=this.g=null}add(xt,wt){const Ft=Dt.get();Ft.set(xt,wt),this.h?this.h.next=Ft:this.g=Ft,this.h=Ft}}var Dt=new rt(()=>new $t,nt=>nt.reset());class $t{constructor(){this.next=this.g=this.h=null}set(xt,wt){this.h=xt,this.g=wt,this.next=null}reset(){this.next=this.g=this.h=null}}let Bt,Vt=!1,Rt=new Ot,vt=()=>{const nt=h.Promise.resolve(void 0);Bt=()=>{nt.then(St)}};var St=()=>{for(var nt;nt=yt();){try{nt.h.call(nt.g)}catch(wt){Et(wt)}var xt=Dt;xt.j(nt),100>xt.h&&(xt.h++,nt.next=xt.g,xt.g=nt)}Vt=!1};function Pt(){this.s=this.s,this.C=this.C}Pt.prototype.s=!1,Pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(nt,xt){this.type=nt,this.g=this.target=xt,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var bt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var nt=!1,xt=Object.defineProperty({},"passive",{get:function(){nt=!0}});try{const wt=()=>{};h.addEventListener("test",wt,xt),h.removeEventListener("test",wt,xt)}catch{}return nt}();function Tt(nt,xt){if(pt.call(this,nt?nt.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,nt){var wt=this.type=nt.type,Ft=nt.changedTouches&&nt.changedTouches.length?nt.changedTouches[0]:null;if(this.target=nt.target||nt.srcElement,this.g=xt,xt=nt.relatedTarget){if(ft){e:{try{mt(xt.nodeName);var un=!0;break e}catch{}un=!1}un||(xt=null)}}else wt=="mouseover"?xt=nt.fromElement:wt=="mouseout"&&(xt=nt.toElement);this.relatedTarget=xt,Ft?(this.clientX=Ft.clientX!==void 0?Ft.clientX:Ft.pageX,this.clientY=Ft.clientY!==void 0?Ft.clientY:Ft.pageY,this.screenX=Ft.screenX||0,this.screenY=Ft.screenY||0):(this.clientX=nt.clientX!==void 0?nt.clientX:nt.pageX,this.clientY=nt.clientY!==void 0?nt.clientY:nt.pageY,this.screenX=nt.screenX||0,this.screenY=nt.screenY||0),this.button=nt.button,this.key=nt.key||"",this.ctrlKey=nt.ctrlKey,this.altKey=nt.altKey,this.shiftKey=nt.shiftKey,this.metaKey=nt.metaKey,this.pointerId=nt.pointerId||0,this.pointerType=typeof nt.pointerType=="string"?nt.pointerType:Ct[nt.pointerType]||"",this.state=nt.state,this.i=nt,nt.defaultPrevented&&Tt.aa.h.call(this)}}it(Tt,pt);var Ct={2:"touch",3:"pen",4:"mouse"};Tt.prototype.h=function(){Tt.aa.h.call(this);var nt=this.i;nt.preventDefault?nt.preventDefault():nt.returnValue=!1};var kt="closure_listenable_"+(1e6*Math.random()|0),Mt=0;function zt(nt,xt,wt,Ft,un){this.listener=nt,this.proxy=null,this.src=xt,this.type=wt,this.capture=!!Ft,this.ha=un,this.key=++Mt,this.da=this.fa=!1}function Kt(nt){nt.da=!0,nt.listener=null,nt.proxy=null,nt.src=null,nt.ha=null}function Yt(nt){this.src=nt,this.g={},this.h=0}Yt.prototype.add=function(nt,xt,wt,Ft,un){var vn=nt.toString();nt=this.g[vn],nt||(nt=this.g[vn]=[],this.h++);var kn=cn(nt,xt,Ft,un);return-1<kn?(xt=nt[kn],wt||(xt.fa=!1)):(xt=new zt(xt,this.src,vn,!!Ft,un),xt.fa=wt,nt.push(xt)),xt};function rn(nt,xt){var wt=xt.type;if(wt in nt.g){var Ft=nt.g[wt],un=Array.prototype.indexOf.call(Ft,xt,void 0),vn;(vn=0<=un)&&Array.prototype.splice.call(Ft,un,1),vn&&(Kt(xt),nt.g[wt].length==0&&(delete nt.g[wt],nt.h--))}}function cn(nt,xt,wt,Ft){for(var un=0;un<nt.length;++un){var vn=nt[un];if(!vn.da&&vn.listener==xt&&vn.capture==!!wt&&vn.ha==Ft)return un}return-1}var sn="closure_lm_"+(1e6*Math.random()|0),dn={};function Ht(nt,xt,wt,Ft,un){if(Array.isArray(xt)){for(var vn=0;vn<xt.length;vn++)Ht(nt,xt[vn],wt,Ft,un);return null}return wt=Qt(wt),nt&&nt[kt]?nt.K(xt,wt,j(Ft)?!!Ft.capture:!!Ft,un):Xt(nt,xt,wt,!1,Ft,un)}function Xt(nt,xt,wt,Ft,un,vn){if(!xt)throw Error("Invalid event type");var kn=j(un)?!!un.capture:!!un,Kn=yn(nt);if(Kn||(nt[sn]=Kn=new Yt(nt)),wt=Kn.add(xt,wt,Ft,kn,vn),wt.proxy)return wt;if(Ft=It(),wt.proxy=Ft,Ft.src=nt,Ft.listener=wt,nt.addEventListener)bt||(un=kn),un===void 0&&(un=!1),nt.addEventListener(xt.toString(),Ft,un);else if(nt.attachEvent)nt.attachEvent(tn(xt.toString()),Ft);else if(nt.addListener&&nt.removeListener)nt.addListener(Ft);else throw Error("addEventListener and attachEvent are unavailable.");return wt}function It(){function nt(wt){return xt.call(nt.src,nt.listener,wt)}const xt=fn;return nt}function Nt(nt,xt,wt,Ft,un){if(Array.isArray(xt))for(var vn=0;vn<xt.length;vn++)Nt(nt,xt[vn],wt,Ft,un);else Ft=j(Ft)?!!Ft.capture:!!Ft,wt=Qt(wt),nt&&nt[kt]?(nt=nt.i,xt=String(xt).toString(),xt in nt.g&&(vn=nt.g[xt],wt=cn(vn,wt,Ft,un),-1<wt&&(Kt(vn[wt]),Array.prototype.splice.call(vn,wt,1),vn.length==0&&(delete nt.g[xt],nt.h--)))):nt&&(nt=yn(nt))&&(xt=nt.g[xt.toString()],nt=-1,xt&&(nt=cn(xt,wt,Ft,un)),(wt=-1<nt?xt[nt]:null)&&Gt(wt))}function Gt(nt){if(typeof nt!="number"&&nt&&!nt.da){var xt=nt.src;if(xt&&xt[kt])rn(xt.i,nt);else{var wt=nt.type,Ft=nt.proxy;xt.removeEventListener?xt.removeEventListener(wt,Ft,nt.capture):xt.detachEvent?xt.detachEvent(tn(wt),Ft):xt.addListener&&xt.removeListener&&xt.removeListener(Ft),(wt=yn(xt))?(rn(wt,nt),wt.h==0&&(wt.src=null,xt[sn]=null)):Kt(nt)}}}function tn(nt){return nt in dn?dn[nt]:dn[nt]="on"+nt}function fn(nt,xt){if(nt.da)nt=!0;else{xt=new Tt(xt,this);var wt=nt.listener,Ft=nt.ha||nt.src;nt.fa&&Gt(nt),nt=wt.call(Ft,xt)}return nt}function yn(nt){return nt=nt[sn],nt instanceof Yt?nt:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qt(nt){return typeof nt=="function"?nt:(nt[gn]||(nt[gn]=function(xt){return nt.handleEvent(xt)}),nt[gn])}function Wt(){Pt.call(this),this.i=new Yt(this),this.M=this,this.F=null}it(Wt,Pt),Wt.prototype[kt]=!0,Wt.prototype.removeEventListener=function(nt,xt,wt,Ft){Nt(this,nt,xt,wt,Ft)};function Zt(nt,xt){var wt,Ft=nt.F;if(Ft)for(wt=[];Ft;Ft=Ft.F)wt.push(Ft);if(nt=nt.M,Ft=xt.type||xt,typeof xt=="string")xt=new pt(xt,nt);else if(xt instanceof pt)xt.target=xt.target||nt;else{var un=xt;xt=new pt(Ft,nt),_t(xt,un)}if(un=!0,wt)for(var vn=wt.length-1;0<=vn;vn--){var kn=xt.g=wt[vn];un=xn(kn,Ft,!0,xt)&&un}if(kn=xt.g=nt,un=xn(kn,Ft,!0,xt)&&un,un=xn(kn,Ft,!1,xt)&&un,wt)for(vn=0;vn<wt.length;vn++)kn=xt.g=wt[vn],un=xn(kn,Ft,!1,xt)&&un}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var nt=this.i,xt;for(xt in nt.g){for(var wt=nt.g[xt],Ft=0;Ft<wt.length;Ft++)Kt(wt[Ft]);delete nt.g[xt],nt.h--}}this.F=null},Wt.prototype.K=function(nt,xt,wt,Ft){return this.i.add(String(nt),xt,!1,wt,Ft)},Wt.prototype.L=function(nt,xt,wt,Ft){return this.i.add(String(nt),xt,!0,wt,Ft)};function xn(nt,xt,wt,Ft){if(xt=nt.i.g[String(xt)],!xt)return!0;xt=xt.concat();for(var un=!0,vn=0;vn<xt.length;++vn){var kn=xt[vn];if(kn&&!kn.da&&kn.capture==wt){var Kn=kn.listener,Zn=kn.ha||kn.src;kn.fa&&rn(nt.i,kn),un=Kn.call(Zn,Ft)!==!1&&un}}return un&&!Ft.defaultPrevented}function An(nt,xt,wt){if(typeof nt=="function")wt&&(nt=et(nt,wt));else if(nt&&typeof nt.handleEvent=="function")nt=et(nt.handleEvent,nt);else throw Error("Invalid listener argument");return 2147483647<Number(xt)?-1:h.setTimeout(nt,xt||0)}function Cn(nt){nt.g=An(()=>{nt.g=null,nt.i&&(nt.i=!1,Cn(nt))},nt.l);const xt=nt.h;nt.h=null,nt.m.apply(null,xt)}class Sn extends Pt{constructor(xt,wt){super(),this.m=xt,this.l=wt,this.h=null,this.i=!1,this.g=null}j(xt){this.h=arguments,this.g?this.i=!0:Cn(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(nt){Pt.call(this),this.h=nt,this.g={}}it(Pn,Pt);var Vn=[];function Bn(nt){gt(nt.g,function(xt,wt){this.g.hasOwnProperty(wt)&&Gt(xt)},nt),nt.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),Bn(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var mn=h.JSON.stringify,en=h.JSON.parse,nn=class{stringify(nt){return h.JSON.stringify(nt,void 0)}parse(nt){return h.JSON.parse(nt,void 0)}};function Tn(){}Tn.prototype.h=null;function zn(nt){return nt.h||(nt.h=nt.i())}function Un(){}var Ut={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pn(){pt.call(this,"d")}it(pn,pt);function bn(){pt.call(this,"c")}it(bn,pt);var In={},Fn=null;function Rn(){return Fn=Fn||new Wt}In.La="serverreachability";function jt(nt){pt.call(this,In.La,nt)}it(jt,pt);function Lt(nt){const xt=Rn();Zt(xt,new jt(xt))}In.STAT_EVENT="statevent";function qt(nt,xt){pt.call(this,In.STAT_EVENT,nt),this.stat=xt}it(qt,pt);function an(nt){const xt=Rn();Zt(xt,new qt(xt,nt))}In.Ma="timingevent";function hn(nt,xt){pt.call(this,In.Ma,nt),this.size=xt}it(hn,pt);function _n(nt,xt){if(typeof nt!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){nt()},xt)}function En(){this.g=!0}En.prototype.xa=function(){this.g=!1};function On(nt,xt,wt,Ft,un,vn){nt.info(function(){if(nt.g)if(vn)for(var kn="",Kn=vn.split("&"),Zn=0;Zn<Kn.length;Zn++){var Hn=Kn[Zn].split("=");if(1<Hn.length){var er=Hn[0];Hn=Hn[1];var tr=er.split("_");kn=2<=tr.length&&tr[1]=="type"?kn+(er+"="+Hn+"&"):kn+(er+"=redacted&")}}else kn=null;else kn=vn;return"XMLHTTP REQ ("+Ft+") [attempt "+un+"]: "+xt+`
`+wt+`
`+kn})}function Mn(nt,xt,wt,Ft,un,vn,kn){nt.info(function(){return"XMLHTTP RESP ("+Ft+") [ attempt "+un+"]: "+xt+`
`+wt+`
`+vn+" "+kn})}function wn(nt,xt,wt,Ft){nt.info(function(){return"XMLHTTP TEXT ("+xt+"): "+Dn(nt,wt)+(Ft?" "+Ft:"")})}function jn(nt,xt){nt.info(function(){return"TIMEOUT: "+xt})}En.prototype.info=function(){};function Dn(nt,xt){if(!nt.g)return xt;if(!xt)return null;try{var wt=JSON.parse(xt);if(wt){for(nt=0;nt<wt.length;nt++)if(Array.isArray(wt[nt])){var Ft=wt[nt];if(!(2>Ft.length)){var un=Ft[1];if(Array.isArray(un)&&!(1>un.length)){var vn=un[0];if(vn!="noop"&&vn!="stop"&&vn!="close")for(var kn=1;kn<un.length;kn++)un[kn]=""}}}}return mn(wt)}catch{return xt}}var Ln={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Wn(){}it(Wn,Tn),Wn.prototype.g=function(){return new XMLHttpRequest},Wn.prototype.i=function(){return{}},$n=new Wn;function Gn(nt,xt,wt,Ft){this.j=nt,this.i=xt,this.l=wt,this.R=Ft||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Jn}function Jn(){this.i=null,this.g="",this.h=!1}var Xn={},nr={};function ir(nt,xt,wt){nt.L=1,nt.v=qr(lr(xt)),nt.m=wt,nt.P=!0,or(nt,null)}function or(nt,xt){nt.F=Date.now(),Wr(nt),nt.A=lr(nt.v);var wt=nt.A,Ft=nt.R;Array.isArray(Ft)||(Ft=[String(Ft)]),yo(wt.i,"t",Ft),nt.C=0,wt=nt.j.J,nt.h=new Jn,nt.g=Fo(nt.j,wt?xt:null,!nt.m),0<nt.O&&(nt.M=new Sn(et(nt.Y,nt,nt.g),nt.O)),xt=nt.U,wt=nt.g,Ft=nt.ca;var un="readystatechange";Array.isArray(un)||(un&&(Vn[0]=un.toString()),un=Vn);for(var vn=0;vn<un.length;vn++){var kn=Ht(wt,un[vn],Ft||xt.handleEvent,!1,xt.h||xt);if(!kn)break;xt.g[kn.key]=kn}xt=nt.H?ut(nt.H):{},nt.m?(nt.u||(nt.u="POST"),xt["Content-Type"]="application/x-www-form-urlencoded",nt.g.ea(nt.A,nt.u,nt.m,xt)):(nt.u="GET",nt.g.ea(nt.A,nt.u,null,xt)),Lt(),On(nt.i,nt.u,nt.A,nt.l,nt.R,nt.m)}Gn.prototype.ca=function(nt){nt=nt.target;const xt=this.M;xt&&cr(nt)==3?xt.j():this.Y(nt)},Gn.prototype.Y=function(nt){try{if(nt==this.g)e:{const tr=cr(this.g);var xt=this.g.Ba();const xr=this.g.Z();if(!(3>tr)&&(tr!=3||this.g&&(this.h.h||this.g.oa()||So(this.g)))){this.J||tr!=4||xt==7||(xt==8||0>=xr?Lt(3):Lt(2)),ms(this);var wt=this.g.Z();this.X=wt;t:if(Pr(this)){var Ft=So(this.g);nt="";var un=Ft.length,vn=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Rr(this);var kn="";break t}this.h.i=new h.TextDecoder}for(xt=0;xt<un;xt++)this.h.h=!0,nt+=this.h.i.decode(Ft[xt],{stream:!(vn&&xt==un-1)});Ft.length=0,this.h.g+=nt,this.C=0,kn=this.h.g}else kn=this.g.oa();if(this.o=wt==200,Mn(this.i,this.u,this.A,this.l,this.R,tr,wt),this.o){if(this.T&&!this.K){t:{if(this.g){var Kn,Zn=this.g;if((Kn=Zn.g?Zn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!st(Kn)){var Hn=Kn;break t}}Hn=null}if(wt=Hn)wn(this.i,this.l,wt,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gs(this,wt);else{this.o=!1,this.s=3,an(12),pr(this),Rr(this);break e}}if(this.P){wt=!0;let ar;for(;!this.J&&this.C<kn.length;)if(ar=Fl(this,kn),ar==nr){tr==4&&(this.s=4,an(14),wt=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==Xn){this.s=4,an(15),wn(this.i,this.l,kn,"[Invalid Chunk]"),wt=!1;break}else wn(this.i,this.l,ar,null),gs(this,ar);if(Pr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tr!=4||kn.length!=0||this.h.h||(this.s=1,an(16),wt=!1),this.o=this.o&&wt,!wt)wn(this.i,this.l,kn,"[Invalid Chunked Response]"),pr(this),Rr(this);else if(0<kn.length&&!this.W){this.W=!0;var er=this.j;er.g==this&&er.ba&&!er.M&&(er.j.info("Great, no buffering proxy detected. Bytes received: "+kn.length),As(er),er.M=!0,an(11))}}else wn(this.i,this.l,kn,null),gs(this,kn);tr==4&&pr(this),this.o&&!this.J&&(tr==4?Mo(this.j,this):(this.o=!1,Wr(this)))}else eu(this.g),wt==400&&0<kn.indexOf("Unknown SID")?(this.s=3,an(12)):(this.s=0,an(13)),pr(this),Rr(this)}}}catch{}finally{}};function Pr(nt){return nt.g?nt.u=="GET"&&nt.L!=2&&nt.j.Ca:!1}function Fl(nt,xt){var wt=nt.C,Ft=xt.indexOf(`
`,wt);return Ft==-1?nr:(wt=Number(xt.substring(wt,Ft)),isNaN(wt)?Xn:(Ft+=1,Ft+wt>xt.length?nr:(xt=xt.slice(Ft,Ft+wt),nt.C=Ft+wt,xt)))}Gn.prototype.cancel=function(){this.J=!0,pr(this)};function Wr(nt){nt.S=Date.now()+nt.I,so(nt,nt.I)}function so(nt,xt){if(nt.B!=null)throw Error("WatchDog timer not null");nt.B=_n(et(nt.ba,nt),xt)}function ms(nt){nt.B&&(h.clearTimeout(nt.B),nt.B=null)}Gn.prototype.ba=function(){this.B=null;const nt=Date.now();0<=nt-this.S?(jn(this.i,this.A),this.L!=2&&(Lt(),an(17)),pr(this),this.s=2,Rr(this)):so(this,this.S-nt)};function Rr(nt){nt.j.G==0||nt.J||Mo(nt.j,nt)}function pr(nt){ms(nt);var xt=nt.M;xt&&typeof xt.ma=="function"&&xt.ma(),nt.M=null,Bn(nt.U),nt.g&&(xt=nt.g,nt.g=null,xt.abort(),xt.ma())}function gs(nt,xt){try{var wt=nt.j;if(wt.G!=0&&(wt.g==nt||_s(wt.h,nt))){if(!nt.K&&_s(wt.h,nt)&&wt.G==3){try{var Ft=wt.Da.g.parse(xt)}catch{Ft=null}if(Array.isArray(Ft)&&Ft.length==3){var un=Ft;if(un[0]==0){e:if(!wt.u){if(wt.g)if(wt.g.F+3e3<nt.F)Zr(wt),Qr(wt);else break e;xs(wt),an(18)}}else wt.za=un[1],0<wt.za-wt.T&&37500>un[2]&&wt.F&&wt.v==0&&!wt.C&&(wt.C=_n(et(wt.Za,wt),6e3));if(1>=lo(wt.h)&&wt.ca){try{wt.ca()}catch{}wt.ca=void 0}}else gr(wt,11)}else if((nt.K||wt.g==nt)&&Zr(wt),!st(xt))for(un=wt.Da.g.parse(xt),xt=0;xt<un.length;xt++){let Hn=un[xt];if(wt.T=Hn[0],Hn=Hn[1],wt.G==2)if(Hn[0]=="c"){wt.K=Hn[1],wt.ia=Hn[2];const er=Hn[3];er!=null&&(wt.la=er,wt.j.info("VER="+wt.la));const tr=Hn[4];tr!=null&&(wt.Aa=tr,wt.j.info("SVER="+wt.Aa));const xr=Hn[5];xr!=null&&typeof xr=="number"&&0<xr&&(Ft=1.5*xr,wt.L=Ft,wt.j.info("backChannelRequestTimeoutMs_="+Ft)),Ft=wt;const ar=nt.g;if(ar){const es=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(es){var vn=Ft.h;vn.g||es.indexOf("spdy")==-1&&es.indexOf("quic")==-1&&es.indexOf("h2")==-1||(vn.j=vn.l,vn.g=new Set,vn.h&&(ys(vn,vn.h),vn.h=null))}if(Ft.D){const bs=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;bs&&(Ft.ya=bs,Yn(Ft.I,Ft.D,bs))}}wt.G=3,wt.l&&wt.l.ua(),wt.ba&&(wt.R=Date.now()-nt.F,wt.j.info("Handshake RTT: "+wt.R+"ms")),Ft=wt;var kn=nt;if(Ft.qa=Lo(Ft,Ft.J?Ft.ia:null,Ft.W),kn.K){co(Ft.h,kn);var Kn=kn,Zn=Ft.L;Zn&&(Kn.I=Zn),Kn.B&&(ms(Kn),Wr(Kn)),Ft.g=kn}else Co(Ft);0<wt.i.length&&Jr(wt)}else Hn[0]!="stop"&&Hn[0]!="close"||gr(wt,7);else wt.G==3&&(Hn[0]=="stop"||Hn[0]=="close"?Hn[0]=="stop"?gr(wt,7):Es(wt):Hn[0]!="noop"&&wt.l&&wt.l.ta(Hn),wt.v=0)}}Lt(4)}catch{}}var Vl=class{constructor(nt,xt){this.g=nt,this.map=xt}};function oo(nt){this.l=nt||10,h.PerformanceNavigationTiming?(nt=h.performance.getEntriesByType("navigation"),nt=0<nt.length&&(nt[0].nextHopProtocol=="hq"||nt[0].nextHopProtocol=="h2")):nt=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=nt?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ao(nt){return nt.h?!0:nt.g?nt.g.size>=nt.j:!1}function lo(nt){return nt.h?1:nt.g?nt.g.size:0}function _s(nt,xt){return nt.h?nt.h==xt:nt.g?nt.g.has(xt):!1}function ys(nt,xt){nt.g?nt.g.add(xt):nt.h=xt}function co(nt,xt){nt.h&&nt.h==xt?nt.h=null:nt.g&&nt.g.has(xt)&&nt.g.delete(xt)}oo.prototype.cancel=function(){if(this.i=uo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const nt of this.g.values())nt.cancel();this.g.clear()}};function uo(nt){if(nt.h!=null)return nt.i.concat(nt.h.D);if(nt.g!=null&&nt.g.size!==0){let xt=nt.i;for(const wt of nt.g.values())xt=xt.concat(wt.D);return xt}return ot(nt.i)}function Nl(nt){if(nt.V&&typeof nt.V=="function")return nt.V();if(typeof Map<"u"&&nt instanceof Map||typeof Set<"u"&&nt instanceof Set)return Array.from(nt.values());if(typeof nt=="string")return nt.split("");if(g(nt)){for(var xt=[],wt=nt.length,Ft=0;Ft<wt;Ft++)xt.push(nt[Ft]);return xt}xt=[],wt=0;for(Ft in nt)xt[wt++]=nt[Ft];return xt}function Bl(nt){if(nt.na&&typeof nt.na=="function")return nt.na();if(!nt.V||typeof nt.V!="function"){if(typeof Map<"u"&&nt instanceof Map)return Array.from(nt.keys());if(!(typeof Set<"u"&&nt instanceof Set)){if(g(nt)||typeof nt=="string"){var xt=[];nt=nt.length;for(var wt=0;wt<nt;wt++)xt.push(wt);return xt}xt=[],wt=0;for(const Ft in nt)xt[wt++]=Ft;return xt}}}function ho(nt,xt){if(nt.forEach&&typeof nt.forEach=="function")nt.forEach(xt,void 0);else if(g(nt)||typeof nt=="string")Array.prototype.forEach.call(nt,xt,void 0);else for(var wt=Bl(nt),Ft=Nl(nt),un=Ft.length,vn=0;vn<un;vn++)xt.call(void 0,Ft[vn],wt&&wt[vn],nt)}var fo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $l(nt,xt){if(nt){nt=nt.split("&");for(var wt=0;wt<nt.length;wt++){var Ft=nt[wt].indexOf("="),un=null;if(0<=Ft){var vn=nt[wt].substring(0,Ft);un=nt[wt].substring(Ft+1)}else vn=nt[wt];xt(vn,un?decodeURIComponent(un.replace(/\+/g," ")):"")}}}function mr(nt){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,nt instanceof mr){this.h=nt.h,Gr(this,nt.j),this.o=nt.o,this.g=nt.g,Hr(this,nt.s),this.l=nt.l;var xt=nt.i,wt=new kr;wt.i=xt.i,xt.g&&(wt.g=new Map(xt.g),wt.h=xt.h),po(this,wt),this.m=nt.m}else nt&&(xt=String(nt).match(fo))?(this.h=!1,Gr(this,xt[1]||"",!0),this.o=Ir(xt[2]||""),this.g=Ir(xt[3]||"",!0),Hr(this,xt[4]),this.l=Ir(xt[5]||"",!0),po(this,xt[6]||"",!0),this.m=Ir(xt[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}mr.prototype.toString=function(){var nt=[],xt=this.j;xt&&nt.push(Cr(xt,mo,!0),":");var wt=this.g;return(wt||xt=="file")&&(nt.push("//"),(xt=this.o)&&nt.push(Cr(xt,mo,!0),"@"),nt.push(encodeURIComponent(String(wt)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),wt=this.s,wt!=null&&nt.push(":",String(wt))),(wt=this.l)&&(this.g&&wt.charAt(0)!="/"&&nt.push("/"),nt.push(Cr(wt,wt.charAt(0)=="/"?Wl:zl,!0))),(wt=this.i.toString())&&nt.push("?",wt),(wt=this.m)&&nt.push("#",Cr(wt,Hl)),nt.join("")};function lr(nt){return new mr(nt)}function Gr(nt,xt,wt){nt.j=wt?Ir(xt,!0):xt,nt.j&&(nt.j=nt.j.replace(/:$/,""))}function Hr(nt,xt){if(xt){if(xt=Number(xt),isNaN(xt)||0>xt)throw Error("Bad port number "+xt);nt.s=xt}else nt.s=null}function po(nt,xt,wt){xt instanceof kr?(nt.i=xt,Kl(nt.i,nt.h)):(wt||(xt=Cr(xt,Gl)),nt.i=new kr(xt,nt.h))}function Yn(nt,xt,wt){nt.i.set(xt,wt)}function qr(nt){return Yn(nt,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),nt}function Ir(nt,xt){return nt?xt?decodeURI(nt.replace(/%25/g,"%2525")):decodeURIComponent(nt):""}function Cr(nt,xt,wt){return typeof nt=="string"?(nt=encodeURI(nt).replace(xt,Ul),wt&&(nt=nt.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),nt):null}function Ul(nt){return nt=nt.charCodeAt(0),"%"+(nt>>4&15).toString(16)+(nt&15).toString(16)}var mo=/[#\/\?@]/g,zl=/[#\?:]/g,Wl=/[#\?]/g,Gl=/[#\?@]/g,Hl=/#/g;function kr(nt,xt){this.h=this.g=null,this.i=nt||null,this.j=!!xt}function hr(nt){nt.g||(nt.g=new Map,nt.h=0,nt.i&&$l(nt.i,function(xt,wt){nt.add(decodeURIComponent(xt.replace(/\+/g," ")),wt)}))}i=kr.prototype,i.add=function(nt,xt){hr(this),this.i=null,nt=vr(this,nt);var wt=this.g.get(nt);return wt||this.g.set(nt,wt=[]),wt.push(xt),this.h+=1,this};function go(nt,xt){hr(nt),xt=vr(nt,xt),nt.g.has(xt)&&(nt.i=null,nt.h-=nt.g.get(xt).length,nt.g.delete(xt))}function _o(nt,xt){return hr(nt),xt=vr(nt,xt),nt.g.has(xt)}i.forEach=function(nt,xt){hr(this),this.g.forEach(function(wt,Ft){wt.forEach(function(un){nt.call(xt,un,Ft,this)},this)},this)},i.na=function(){hr(this);const nt=Array.from(this.g.values()),xt=Array.from(this.g.keys()),wt=[];for(let Ft=0;Ft<xt.length;Ft++){const un=nt[Ft];for(let vn=0;vn<un.length;vn++)wt.push(xt[Ft])}return wt},i.V=function(nt){hr(this);let xt=[];if(typeof nt=="string")_o(this,nt)&&(xt=xt.concat(this.g.get(vr(this,nt))));else{nt=Array.from(this.g.values());for(let wt=0;wt<nt.length;wt++)xt=xt.concat(nt[wt])}return xt},i.set=function(nt,xt){return hr(this),this.i=null,nt=vr(this,nt),_o(this,nt)&&(this.h-=this.g.get(nt).length),this.g.set(nt,[xt]),this.h+=1,this},i.get=function(nt,xt){return nt?(nt=this.V(nt),0<nt.length?String(nt[0]):xt):xt};function yo(nt,xt,wt){go(nt,xt),0<wt.length&&(nt.i=null,nt.g.set(vr(nt,xt),ot(wt)),nt.h+=wt.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const nt=[],xt=Array.from(this.g.keys());for(var wt=0;wt<xt.length;wt++){var Ft=xt[wt];const vn=encodeURIComponent(String(Ft)),kn=this.V(Ft);for(Ft=0;Ft<kn.length;Ft++){var un=vn;kn[Ft]!==""&&(un+="="+encodeURIComponent(String(kn[Ft]))),nt.push(un)}}return this.i=nt.join("&")};function vr(nt,xt){return xt=String(xt),nt.j&&(xt=xt.toLowerCase()),xt}function Kl(nt,xt){xt&&!nt.j&&(hr(nt),nt.i=null,nt.g.forEach(function(wt,Ft){var un=Ft.toLowerCase();Ft!=un&&(go(this,Ft),yo(this,un,wt))},nt)),nt.j=xt}function Xl(nt,xt){const wt=new En;if(h.Image){const Ft=new Image;Ft.onload=tt(fr,wt,"TestLoadImage: loaded",!0,xt,Ft),Ft.onerror=tt(fr,wt,"TestLoadImage: error",!1,xt,Ft),Ft.onabort=tt(fr,wt,"TestLoadImage: abort",!1,xt,Ft),Ft.ontimeout=tt(fr,wt,"TestLoadImage: timeout",!1,xt,Ft),h.setTimeout(function(){Ft.ontimeout&&Ft.ontimeout()},1e4),Ft.src=nt}else xt(!1)}function Yl(nt,xt){const wt=new En,Ft=new AbortController,un=setTimeout(()=>{Ft.abort(),fr(wt,"TestPingServer: timeout",!1,xt)},1e4);fetch(nt,{signal:Ft.signal}).then(vn=>{clearTimeout(un),vn.ok?fr(wt,"TestPingServer: ok",!0,xt):fr(wt,"TestPingServer: server error",!1,xt)}).catch(()=>{clearTimeout(un),fr(wt,"TestPingServer: error",!1,xt)})}function fr(nt,xt,wt,Ft,un){try{un&&(un.onload=null,un.onerror=null,un.onabort=null,un.ontimeout=null),Ft(wt)}catch{}}function Ql(){this.g=new nn}function Jl(nt,xt,wt){const Ft=wt||"";try{ho(nt,function(un,vn){let kn=un;j(un)&&(kn=mn(un)),xt.push(Ft+vn+"="+encodeURIComponent(kn))})}catch(un){throw xt.push(Ft+"type="+encodeURIComponent("_badmap")),un}}function Kr(nt){this.l=nt.Ub||null,this.j=nt.eb||!1}it(Kr,Tn),Kr.prototype.g=function(){return new Xr(this.l,this.j)},Kr.prototype.i=function(nt){return function(){return nt}}({});function Xr(nt,xt){Wt.call(this),this.D=nt,this.o=xt,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}it(Xr,Wt),i=Xr.prototype,i.open=function(nt,xt){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=nt,this.A=xt,this.readyState=1,Dr(this)},i.send=function(nt){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const xt={headers:this.u,method:this.B,credentials:this.m,cache:void 0};nt&&(xt.body=nt),(this.D||h).fetch(new Request(this.A,xt)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},i.Sa=function(nt){if(this.g&&(this.l=nt,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=nt.headers,this.readyState=2,Dr(this)),this.g&&(this.readyState=3,Dr(this),this.g)))if(this.responseType==="arraybuffer")nt.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in nt){if(this.j=nt.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vo(this)}else nt.text().then(this.Ra.bind(this),this.ga.bind(this))};function vo(nt){nt.j.read().then(nt.Pa.bind(nt)).catch(nt.ga.bind(nt))}i.Pa=function(nt){if(this.g){if(this.o&&nt.value)this.response.push(nt.value);else if(!this.o){var xt=nt.value?nt.value:new Uint8Array(0);(xt=this.v.decode(xt,{stream:!nt.done}))&&(this.response=this.responseText+=xt)}nt.done?Mr(this):Dr(this),this.readyState==3&&vo(this)}},i.Ra=function(nt){this.g&&(this.response=this.responseText=nt,Mr(this))},i.Qa=function(nt){this.g&&(this.response=nt,Mr(this))},i.ga=function(){this.g&&Mr(this)};function Mr(nt){nt.readyState=4,nt.l=null,nt.j=null,nt.v=null,Dr(nt)}i.setRequestHeader=function(nt,xt){this.u.append(nt,xt)},i.getResponseHeader=function(nt){return this.h&&this.h.get(nt.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const nt=[],xt=this.h.entries();for(var wt=xt.next();!wt.done;)wt=wt.value,nt.push(wt[0]+": "+wt[1]),wt=xt.next();return nt.join(`\r
`)};function Dr(nt){nt.onreadystatechange&&nt.onreadystatechange.call(nt)}Object.defineProperty(Xr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(nt){this.m=nt?"include":"same-origin"}});function Eo(nt){let xt="";return gt(nt,function(wt,Ft){xt+=Ft,xt+=":",xt+=wt,xt+=`\r
`}),xt}function vs(nt,xt,wt){e:{for(Ft in wt){var Ft=!1;break e}Ft=!0}Ft||(wt=Eo(wt),typeof nt=="string"?wt!=null&&encodeURIComponent(String(wt)):Yn(nt,xt,wt))}function Qn(nt){Wt.call(this),this.headers=new Map,this.o=nt||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}it(Qn,Wt);var Zl=/^https?$/i,_c=["POST","PUT"];i=Qn.prototype,i.Ha=function(nt){this.J=nt},i.ea=function(nt,xt,wt,Ft){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+nt);xt=xt?xt.toUpperCase():"GET",this.D=nt,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?zn(this.o):zn($n),this.g.onreadystatechange=et(this.Ea,this);try{this.B=!0,this.g.open(xt,String(nt),!0),this.B=!1}catch(vn){xo(this,vn);return}if(nt=wt||"",wt=new Map(this.headers),Ft)if(Object.getPrototypeOf(Ft)===Object.prototype)for(var un in Ft)wt.set(un,Ft[un]);else if(typeof Ft.keys=="function"&&typeof Ft.get=="function")for(const vn of Ft.keys())wt.set(vn,Ft.get(vn));else throw Error("Unknown input type for opt_headers: "+String(Ft));Ft=Array.from(wt.keys()).find(vn=>vn.toLowerCase()=="content-type"),un=h.FormData&&nt instanceof h.FormData,!(0<=Array.prototype.indexOf.call(_c,xt,void 0))||Ft||un||wt.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vn,kn]of wt)this.g.setRequestHeader(vn,kn);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wo(this),this.u=!0,this.g.send(nt),this.u=!1}catch(vn){xo(this,vn)}};function xo(nt,xt){nt.h=!1,nt.g&&(nt.j=!0,nt.g.abort(),nt.j=!1),nt.l=xt,nt.m=5,Ao(nt),Yr(nt)}function Ao(nt){nt.A||(nt.A=!0,Zt(nt,"complete"),Zt(nt,"error"))}i.abort=function(nt){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=nt||7,Zt(this,"complete"),Zt(this,"abort"),Yr(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),Qn.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?bo(this):this.bb())},i.bb=function(){bo(this)};function bo(nt){if(nt.h&&typeof d<"u"&&(!nt.v[1]||cr(nt)!=4||nt.Z()!=2)){if(nt.u&&cr(nt)==4)An(nt.Ea,0,nt);else if(Zt(nt,"readystatechange"),cr(nt)==4){nt.h=!1;try{const kn=nt.Z();e:switch(kn){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var xt=!0;break e;default:xt=!1}var wt;if(!(wt=xt)){var Ft;if(Ft=kn===0){var un=String(nt.D).match(fo)[1]||null;!un&&h.self&&h.self.location&&(un=h.self.location.protocol.slice(0,-1)),Ft=!Zl.test(un?un.toLowerCase():"")}wt=Ft}if(wt)Zt(nt,"complete"),Zt(nt,"success");else{nt.m=6;try{var vn=2<cr(nt)?nt.g.statusText:""}catch{vn=""}nt.l=vn+" ["+nt.Z()+"]",Ao(nt)}}finally{Yr(nt)}}}}function Yr(nt,xt){if(nt.g){wo(nt);const wt=nt.g,Ft=nt.v[0]?()=>{}:null;nt.g=null,nt.v=null,xt||Zt(nt,"ready");try{wt.onreadystatechange=Ft}catch{}}}function wo(nt){nt.I&&(h.clearTimeout(nt.I),nt.I=null)}i.isActive=function(){return!!this.g};function cr(nt){return nt.g?nt.g.readyState:0}i.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(nt){if(this.g){var xt=this.g.responseText;return nt&&xt.indexOf(nt)==0&&(xt=xt.substring(nt.length)),en(xt)}};function So(nt){try{if(!nt.g)return null;if("response"in nt.g)return nt.g.response;switch(nt.H){case"":case"text":return nt.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in nt.g)return nt.g.mozResponseArrayBuffer}return null}catch{return null}}function eu(nt){const xt={};nt=(nt.g&&2<=cr(nt)&&nt.g.getAllResponseHeaders()||"").split(`\r
`);for(let Ft=0;Ft<nt.length;Ft++){if(st(nt[Ft]))continue;var wt=ht(nt[Ft]);const un=wt[0];if(wt=wt[1],typeof wt!="string")continue;wt=wt.trim();const vn=xt[un]||[];xt[un]=vn,vn.push(wt)}dt(xt,function(Ft){return Ft.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Or(nt,xt,wt){return wt&&wt.internalChannelParams&&wt.internalChannelParams[nt]||xt}function To(nt){this.Aa=0,this.i=[],this.j=new En,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Or("failFast",!1,nt),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Or("baseRetryDelayMs",5e3,nt),this.cb=Or("retryDelaySeedMs",1e4,nt),this.Wa=Or("forwardChannelMaxRetries",2,nt),this.wa=Or("forwardChannelRequestTimeoutMs",2e4,nt),this.pa=nt&&nt.xmlHttpFactory||void 0,this.Xa=nt&&nt.Tb||void 0,this.Ca=nt&&nt.useFetchStreams||!1,this.L=void 0,this.J=nt&&nt.supportsCrossDomainXhr||!1,this.K="",this.h=new oo(nt&&nt.concurrentRequestLimit),this.Da=new Ql,this.P=nt&&nt.fastHandshake||!1,this.O=nt&&nt.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=nt&&nt.Rb||!1,nt&&nt.xa&&this.j.xa(),nt&&nt.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&nt&&nt.detectBufferingProxy||!1,this.ja=void 0,nt&&nt.longPollingTimeout&&0<nt.longPollingTimeout&&(this.ja=nt.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=To.prototype,i.la=8,i.G=1,i.connect=function(nt,xt,wt,Ft){an(0),this.W=nt,this.H=xt||{},wt&&Ft!==void 0&&(this.H.OSID=wt,this.H.OAID=Ft),this.F=this.X,this.I=Lo(this,null,this.W),Jr(this)};function Es(nt){if(Po(nt),nt.G==3){var xt=nt.U++,wt=lr(nt.I);if(Yn(wt,"SID",nt.K),Yn(wt,"RID",xt),Yn(wt,"TYPE","terminate"),Lr(nt,wt),xt=new Gn(nt,nt.j,xt),xt.L=2,xt.v=qr(lr(wt)),wt=!1,h.navigator&&h.navigator.sendBeacon)try{wt=h.navigator.sendBeacon(xt.v.toString(),"")}catch{}!wt&&h.Image&&(new Image().src=xt.v,wt=!0),wt||(xt.g=Fo(xt.j,null),xt.g.ea(xt.v)),xt.F=Date.now(),Wr(xt)}Oo(nt)}function Qr(nt){nt.g&&(As(nt),nt.g.cancel(),nt.g=null)}function Po(nt){Qr(nt),nt.u&&(h.clearTimeout(nt.u),nt.u=null),Zr(nt),nt.h.cancel(),nt.s&&(typeof nt.s=="number"&&h.clearTimeout(nt.s),nt.s=null)}function Jr(nt){if(!ao(nt.h)&&!nt.s){nt.s=!0;var xt=nt.Ga;Bt||vt(),Vt||(Bt(),Vt=!0),Rt.add(xt,nt),nt.B=0}}function tu(nt,xt){return lo(nt.h)>=nt.h.j-(nt.s?1:0)?!1:nt.s?(nt.i=xt.D.concat(nt.i),!0):nt.G==1||nt.G==2||nt.B>=(nt.Va?0:nt.Wa)?!1:(nt.s=_n(et(nt.Ga,nt,xt),Do(nt,nt.B)),nt.B++,!0)}i.Ga=function(nt){if(this.s)if(this.s=null,this.G==1){if(!nt){this.U=Math.floor(1e5*Math.random()),nt=this.U++;const un=new Gn(this,this.j,nt);let vn=this.o;if(this.S&&(vn?(vn=ut(vn),_t(vn,this.S)):vn=this.S),this.m!==null||this.O||(un.H=vn,vn=null),this.P)e:{for(var xt=0,wt=0;wt<this.i.length;wt++){t:{var Ft=this.i[wt];if("__data__"in Ft.map&&(Ft=Ft.map.__data__,typeof Ft=="string")){Ft=Ft.length;break t}Ft=void 0}if(Ft===void 0)break;if(xt+=Ft,4096<xt){xt=wt;break e}if(xt===4096||wt===this.i.length-1){xt=wt+1;break e}}xt=1e3}else xt=1e3;xt=Io(this,un,xt),wt=lr(this.I),Yn(wt,"RID",nt),Yn(wt,"CVER",22),this.D&&Yn(wt,"X-HTTP-Session-Id",this.D),Lr(this,wt),vn&&(this.O?xt="headers="+encodeURIComponent(String(Eo(vn)))+"&"+xt:this.m&&vs(wt,this.m,vn)),ys(this.h,un),this.Ua&&Yn(wt,"TYPE","init"),this.P?(Yn(wt,"$req",xt),Yn(wt,"SID","null"),un.T=!0,ir(un,wt,null)):ir(un,wt,xt),this.G=2}}else this.G==3&&(nt?Ro(this,nt):this.i.length==0||ao(this.h)||Ro(this))};function Ro(nt,xt){var wt;xt?wt=xt.l:wt=nt.U++;const Ft=lr(nt.I);Yn(Ft,"SID",nt.K),Yn(Ft,"RID",wt),Yn(Ft,"AID",nt.T),Lr(nt,Ft),nt.m&&nt.o&&vs(Ft,nt.m,nt.o),wt=new Gn(nt,nt.j,wt,nt.B+1),nt.m===null&&(wt.H=nt.o),xt&&(nt.i=xt.D.concat(nt.i)),xt=Io(nt,wt,1e3),wt.I=Math.round(.5*nt.wa)+Math.round(.5*nt.wa*Math.random()),ys(nt.h,wt),ir(wt,Ft,xt)}function Lr(nt,xt){nt.H&&gt(nt.H,function(wt,Ft){Yn(xt,Ft,wt)}),nt.l&&ho({},function(wt,Ft){Yn(xt,Ft,wt)})}function Io(nt,xt,wt){wt=Math.min(nt.i.length,wt);var Ft=nt.l?et(nt.l.Na,nt.l,nt):null;e:{var un=nt.i;let vn=-1;for(;;){const kn=["count="+wt];vn==-1?0<wt?(vn=un[0].g,kn.push("ofs="+vn)):vn=0:kn.push("ofs="+vn);let Kn=!0;for(let Zn=0;Zn<wt;Zn++){let Hn=un[Zn].g;const er=un[Zn].map;if(Hn-=vn,0>Hn)vn=Math.max(0,un[Zn].g-100),Kn=!1;else try{Jl(er,kn,"req"+Hn+"_")}catch{Ft&&Ft(er)}}if(Kn){Ft=kn.join("&");break e}}}return nt=nt.i.splice(0,wt),xt.D=nt,Ft}function Co(nt){if(!nt.g&&!nt.u){nt.Y=1;var xt=nt.Fa;Bt||vt(),Vt||(Bt(),Vt=!0),Rt.add(xt,nt),nt.v=0}}function xs(nt){return nt.g||nt.u||3<=nt.v?!1:(nt.Y++,nt.u=_n(et(nt.Fa,nt),Do(nt,nt.v)),nt.v++,!0)}i.Fa=function(){if(this.u=null,ko(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var nt=2*this.R;this.j.info("BP detection timer enabled: "+nt),this.A=_n(et(this.ab,this),nt)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,an(10),Qr(this),ko(this))};function As(nt){nt.A!=null&&(h.clearTimeout(nt.A),nt.A=null)}function ko(nt){nt.g=new Gn(nt,nt.j,"rpc",nt.Y),nt.m===null&&(nt.g.H=nt.o),nt.g.O=0;var xt=lr(nt.qa);Yn(xt,"RID","rpc"),Yn(xt,"SID",nt.K),Yn(xt,"AID",nt.T),Yn(xt,"CI",nt.F?"0":"1"),!nt.F&&nt.ja&&Yn(xt,"TO",nt.ja),Yn(xt,"TYPE","xmlhttp"),Lr(nt,xt),nt.m&&nt.o&&vs(xt,nt.m,nt.o),nt.L&&(nt.g.I=nt.L);var wt=nt.g;nt=nt.ia,wt.L=1,wt.v=qr(lr(xt)),wt.m=null,wt.P=!0,or(wt,nt)}i.Za=function(){this.C!=null&&(this.C=null,Qr(this),xs(this),an(19))};function Zr(nt){nt.C!=null&&(h.clearTimeout(nt.C),nt.C=null)}function Mo(nt,xt){var wt=null;if(nt.g==xt){Zr(nt),As(nt),nt.g=null;var Ft=2}else if(_s(nt.h,xt))wt=xt.D,co(nt.h,xt),Ft=1;else return;if(nt.G!=0){if(xt.o)if(Ft==1){wt=xt.m?xt.m.length:0,xt=Date.now()-xt.F;var un=nt.B;Ft=Rn(),Zt(Ft,new hn(Ft,wt)),Jr(nt)}else Co(nt);else if(un=xt.s,un==3||un==0&&0<xt.X||!(Ft==1&&tu(nt,xt)||Ft==2&&xs(nt)))switch(wt&&0<wt.length&&(xt=nt.h,xt.i=xt.i.concat(wt)),un){case 1:gr(nt,5);break;case 4:gr(nt,10);break;case 3:gr(nt,6);break;default:gr(nt,2)}}}function Do(nt,xt){let wt=nt.Ta+Math.floor(Math.random()*nt.cb);return nt.isActive()||(wt*=2),wt*xt}function gr(nt,xt){if(nt.j.info("Error code "+xt),xt==2){var wt=et(nt.fb,nt),Ft=nt.Xa;const un=!Ft;Ft=new mr(Ft||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Gr(Ft,"https"),qr(Ft),un?Xl(Ft.toString(),wt):Yl(Ft.toString(),wt)}else an(2);nt.G=0,nt.l&&nt.l.sa(xt),Oo(nt),Po(nt)}i.fb=function(nt){nt?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function Oo(nt){if(nt.G=0,nt.ka=[],nt.l){const xt=uo(nt.h);(xt.length!=0||nt.i.length!=0)&&(at(nt.ka,xt),at(nt.ka,nt.i),nt.h.i.length=0,ot(nt.i),nt.i.length=0),nt.l.ra()}}function Lo(nt,xt,wt){var Ft=wt instanceof mr?lr(wt):new mr(wt);if(Ft.g!="")xt&&(Ft.g=xt+"."+Ft.g),Hr(Ft,Ft.s);else{var un=h.location;Ft=un.protocol,xt=xt?xt+"."+un.hostname:un.hostname,un=+un.port;var vn=new mr(null);Ft&&Gr(vn,Ft),xt&&(vn.g=xt),un&&Hr(vn,un),wt&&(vn.l=wt),Ft=vn}return wt=nt.D,xt=nt.ya,wt&&xt&&Yn(Ft,wt,xt),Yn(Ft,"VER",nt.la),Lr(nt,Ft),Ft}function Fo(nt,xt,wt){if(xt&&!nt.J)throw Error("Can't create secondary domain capable XhrIo object.");return xt=nt.Ca&&!nt.pa?new Qn(new Kr({eb:wt})):new Qn(nt.pa),xt.Ha(nt.J),xt}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vo(){}i=Vo.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function _i(){}_i.prototype.g=function(nt,xt){return new rr(nt,xt)};function rr(nt,xt){Wt.call(this),this.g=new To(xt),this.l=nt,this.h=xt&&xt.messageUrlParams||null,nt=xt&&xt.messageHeaders||null,xt&&xt.clientProtocolHeaderRequired&&(nt?nt["X-Client-Protocol"]="webchannel":nt={"X-Client-Protocol":"webchannel"}),this.g.o=nt,nt=xt&&xt.initMessageHeaders||null,xt&&xt.messageContentType&&(nt?nt["X-WebChannel-Content-Type"]=xt.messageContentType:nt={"X-WebChannel-Content-Type":xt.messageContentType}),xt&&xt.va&&(nt?nt["X-WebChannel-Client-Profile"]=xt.va:nt={"X-WebChannel-Client-Profile":xt.va}),this.g.S=nt,(nt=xt&&xt.Sb)&&!st(nt)&&(this.g.m=nt),this.v=xt&&xt.supportsCrossDomainXhr||!1,this.u=xt&&xt.sendRawJson||!1,(xt=xt&&xt.httpSessionIdParam)&&!st(xt)&&(this.g.D=xt,nt=this.h,nt!==null&&xt in nt&&(nt=this.h,xt in nt&&delete nt[xt])),this.j=new Er(this)}it(rr,Wt),rr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rr.prototype.close=function(){Es(this.g)},rr.prototype.o=function(nt){var xt=this.g;if(typeof nt=="string"){var wt={};wt.__data__=nt,nt=wt}else this.u&&(wt={},wt.__data__=mn(nt),nt=wt);xt.i.push(new Vl(xt.Ya++,nt)),xt.G==3&&Jr(xt)},rr.prototype.N=function(){this.g.l=null,delete this.j,Es(this.g),delete this.g,rr.aa.N.call(this)};function No(nt){pn.call(this),nt.__headers__&&(this.headers=nt.__headers__,this.statusCode=nt.__status__,delete nt.__headers__,delete nt.__status__);var xt=nt.__sm__;if(xt){e:{for(const wt in xt){nt=wt;break e}nt=void 0}(this.i=nt)&&(nt=this.i,xt=xt!==null&&nt in xt?xt[nt]:void 0),this.data=xt}else this.data=nt}it(No,pn);function jo(){bn.call(this),this.status=1}it(jo,bn);function Er(nt){this.g=nt}it(Er,Vo),Er.prototype.ua=function(){Zt(this.g,"a")},Er.prototype.ta=function(nt){Zt(this.g,new No(nt))},Er.prototype.sa=function(nt){Zt(this.g,new jo)},Er.prototype.ra=function(){Zt(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,rr.prototype.send=rr.prototype.o,rr.prototype.open=rr.prototype.m,rr.prototype.close=rr.prototype.close,createWebChannelTransport=function(){return new _i},getStatEventTarget=function(){return Rn()},Event$1=In,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ln.NO_ERROR=0,Ln.TIMEOUT=8,Ln.HTTP_ERROR=6,ErrorCode=Ln,Nn.COMPLETE="complete",EventType=Nn,Un.EventType=Ut,Ut.OPEN="a",Ut.CLOSE="b",Ut.ERROR="c",Ut.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,WebChannel=Un,Qn.prototype.listenOnce=Qn.prototype.L,Qn.prototype.getLastError=Qn.prototype.Ka,Qn.prototype.getLastErrorCode=Qn.prototype.Ba,Qn.prototype.getStatus=Qn.prototype.Z,Qn.prototype.getResponseJson=Qn.prototype.Oa,Qn.prototype.getResponseText=Qn.prototype.oa,Qn.prototype.send=Qn.prototype.ea,Qn.prototype.setWithCredentials=Qn.prototype.Ha,XhrIo=Qn}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const w="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return b.logLevel}function __PRIVATE_logDebug(i,...e){if(b.logLevel<=LogLevel.DEBUG){const s=e.map(__PRIVATE_argToString);b.debug(`Firestore (${S}): ${i}`,...s)}}function __PRIVATE_logError(i,...e){if(b.logLevel<=LogLevel.ERROR){const s=e.map(__PRIVATE_argToString);b.error(`Firestore (${S}): ${i}`,...s)}}function __PRIVATE_logWarn(i,...e){if(b.logLevel<=LogLevel.WARN){const s=e.map(__PRIVATE_argToString);b.warn(`Firestore (${S}): ${i}`,...s)}}function __PRIVATE_argToString(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(i="Unexpected state"){const e=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: `+i;throw __PRIVATE_logError(e),new Error(e)}function __PRIVATE_hardAssert(i,e){i||fail()}function __PRIVATE_debugCast(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){__PRIVATE_hardAssert(this.o===void 0);let o=this.i;const a=g=>this.i!==o?(o=this.i,s(g)):Promise.resolve();let c=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new __PRIVATE_Deferred,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const g=c;e.enqueueRetryable(async()=>{await g.promise,await a(this.currentUser)})},h=g=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(g=>h(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?h(g):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new __PRIVATE_Deferred)}},0),d()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(o=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(__PRIVATE_hardAssert(typeof o.accessToken=="string"),new __PRIVATE_OAuthToken(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string"),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,s,o){this.l=e,this.h=s,this.P=o,this.type="FirstParty",this.user=User.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,s,o){this.l=e,this.h=s,this.P=o}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){__PRIVATE_hardAssert(this.o===void 0);const o=c=>{c.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?s(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const a=c=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(__PRIVATE_hardAssert(typeof s.token=="string"),this.R=s.token,new AppCheckToken(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let o=0;o<i;o++)s[o]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const a=__PRIVATE_randomBytes(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<s&&(o+=e.charAt(a[c]%e.length))}return o}}function __PRIVATE_primitiveComparator(i,e){return i<e?-1:i>e?1:0}function __PRIVATE_arrayEquals(i,e,s){return i.length===e.length&&i.every((o,a)=>s(o,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Timestamp{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*s));return new Timestamp(s,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{constructor(e){this.timestamp=e}static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BasePath{constructor(e,s,o){s===void 0?s=0:s>e.length&&fail(),o===void 0?o=e.length-s:o>e.length-s&&fail(),this.segments=e,this.offset=s,this.len=o}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(o=>{s.push(o)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,o=this.limit();s<o;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const o=Math.min(e.length,s.length);for(let a=0;a<o;a++){const c=e.get(a),d=s.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class ResourcePath extends BasePath{construct(e,s,o){return new ResourcePath(e,s,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const o of e){if(o.indexOf("//")>=0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);s.push(...o.split("/").filter(a=>a.length>0))}return new ResourcePath(s)}static emptyPath(){return new ResourcePath([])}}const v=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,s,o){return new FieldPath$1(e,s,o)}static isValidIdentifier(e){return v.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new FieldPath$1(["__name__"])}static fromServerFormat(e){const s=[];let o="",a=0;const c=()=>{if(o.length===0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(o),o=""};let d=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new FirestoreError(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new FirestoreError(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=g,a+=2}else h==="`"?(d=!d,a++):h!=="."||d?(o+=h,a++):(c(),a++)}if(c(),d)throw new FirestoreError(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(s)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return ResourcePath.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}function __PRIVATE_newIndexOffsetSuccessorFromReadTime(i,e){const s=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,a=SnapshotVersion.fromTimestamp(o===1e9?new Timestamp(s+1,0):new Timestamp(s,o));return new IndexOffset(a,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(i){return new IndexOffset(i.readTime,i.key,-1)}class IndexOffset{constructor(e,s,o){this.readTime=e,this.documentKey=s,this.largestBatchId=o}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),-1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),-1)}}function __PRIVATE_indexOffsetComparator(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=DocumentKey.comparator(i.documentKey,e.documentKey),s!==0?s:__PRIVATE_primitiveComparator(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(i){if(i.code!==D.FAILED_PRECONDITION||i.message!==C)throw i;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&fail(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(s,c).next(o,a)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof PersistencePromise?s:PersistencePromise.resolve(s)}catch(s){return PersistencePromise.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):PersistencePromise.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):PersistencePromise.reject(s)}static resolve(e){return new PersistencePromise((s,o)=>{s(e)})}static reject(e){return new PersistencePromise((s,o)=>{o(e)})}static waitFor(e){return new PersistencePromise((s,o)=>{let a=0,c=0,d=!1;e.forEach(h=>{++a,h.next(()=>{++c,d&&c===a&&s()},g=>o(g))}),d=!0,c===a&&s()})}static or(e){let s=PersistencePromise.resolve(!1);for(const o of e)s=s.next(a=>a?PersistencePromise.resolve(a):o());return s}static forEach(e,s){const o=[];return e.forEach((a,c)=>{o.push(s.call(this,a,c))}),this.waitFor(o)}static mapArray(e,s){return new PersistencePromise((o,a)=>{const c=e.length,d=new Array(c);let h=0;for(let g=0;g<c;g++){const j=g;s(e[j]).next($=>{d[j]=$,++h,h===c&&o(d)},$=>a($))}})}static doWhile(e,s){return new PersistencePromise((o,a)=>{const c=()=>{e()===!0?s().next(()=>{c()},a):o()};c()})}}function __PRIVATE_getAndroidVersion(i){const e=i.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function __PRIVATE_isIndexedDbTransactionError(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=o=>this.ie(o),this.se=o=>s.writeSequenceNumber(o))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}__PRIVATE_ListenSequence.oe=-1;function __PRIVATE_isNullOrUndefined(i){return i==null}function __PRIVATE_isNegativeZero(i){return i===0&&1/i==-1/0}function isSafeInteger(i){return typeof i=="number"&&Number.isInteger(i)&&!__PRIVATE_isNegativeZero(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function forEach(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function isEmpty(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,s){this.comparator=e,this.root=s||LLRBNode.EMPTY}insert(e,s){return new SortedMap(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return s.value;o<0?s=s.left:o>0&&(s=s.right)}return null}indexOf(e){let s=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return s+o.left.size;a<0?o=o.left:(s+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,o)=>(e(s,o),!1))}toString(){const e=[];return this.inorderTraversal((s,o)=>(e.push(`${s}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,s,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=s?o(e.key,s):1,s&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,s,o,a,c){this.key=e,this.value=s,this.color=o??LLRBNode.RED,this.left=a??LLRBNode.EMPTY,this.right=c??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,o,a,c){return new LLRBNode(e??this.key,s??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,s,o),null):c===0?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(e,s,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let o,a=this;if(s(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),s(e,a.key)===0){if(a.right.isEmpty())return LLRBNode.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fail();const e=this.left.check();if(e!==this.right.check())throw fail();return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail()}get value(){throw fail()}get color(){throw fail()}get left(){throw fail()}get right(){throw fail()}copy(e,s,o,a,c){return this}insert(e,s,o){return new LLRBNode(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,o)=>(e(s),!1))}forEachInRange(e,s){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;s(a.key)}}forEachWhile(e,s){let o;for(o=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(o=>{s=s.add(o)}),s}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const s=this.data.getIterator(),o=e.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new SortedSet(this.comparator);return s.data=e,s}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let s=new SortedSet(FieldPath$1.comparator);for(const o of this.fields)s=s.add(o);for(const o of e)s=s.add(o);return new FieldMask(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(s,o)=>s.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+c):c}}(e);return new ByteString(s)}static fromUint8Array(e){const s=function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c}(e);return new ByteString(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(i){if(__PRIVATE_hardAssert(!!i),typeof i=="string"){let e=0;const s=ne.exec(i);if(__PRIVATE_hardAssert(!!s),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(i.seconds),nanos:__PRIVATE_normalizeNumber(i.nanos)}}function __PRIVATE_normalizeNumber(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function __PRIVATE_normalizeByteString(i){return typeof i=="string"?ByteString.fromBase64String(i):ByteString.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isServerTimestamp(i){var e,s;return((s=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function __PRIVATE_getPreviousValue(i){const e=i.mapValue.fields.__previous_value__;return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(i){const e=__PRIVATE_normalizeTimestamp(i.mapValue.fields.__local_write_time__.timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,s,o,a,c,d,h,g,j){this.databaseId=e,this.appId=s,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=h,this.longPollingOptions=g,this.useFetchStreams=j}}class DatabaseId{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re$1={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function __PRIVATE_typeOrder(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?__PRIVATE_isServerTimestamp(i)?4:__PRIVATE_isMaxValue(i)?9007199254740991:__PRIVATE_isVectorValue(i)?10:11:fail()}function __PRIVATE_valueEquals(i,e){if(i===e)return!0;const s=__PRIVATE_typeOrder(i);if(s!==__PRIVATE_typeOrder(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(i).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=__PRIVATE_normalizeTimestamp(a.timestampValue),h=__PRIVATE_normalizeTimestamp(c.timestampValue);return d.seconds===h.seconds&&d.nanos===h.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return __PRIVATE_normalizeByteString(a.bytesValue).isEqual(__PRIVATE_normalizeByteString(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return __PRIVATE_normalizeNumber(a.geoPointValue.latitude)===__PRIVATE_normalizeNumber(c.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(a.geoPointValue.longitude)===__PRIVATE_normalizeNumber(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return __PRIVATE_normalizeNumber(a.integerValue)===__PRIVATE_normalizeNumber(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=__PRIVATE_normalizeNumber(a.doubleValue),h=__PRIVATE_normalizeNumber(c.doubleValue);return d===h?__PRIVATE_isNegativeZero(d)===__PRIVATE_isNegativeZero(h):isNaN(d)&&isNaN(h)}return!1}(i,e);case 9:return __PRIVATE_arrayEquals(i.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(a,c){const d=a.mapValue.fields||{},h=c.mapValue.fields||{};if(__PRIVATE_objectSize(d)!==__PRIVATE_objectSize(h))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(h[g]===void 0||!__PRIVATE_valueEquals(d[g],h[g])))return!1;return!0}(i,e);default:return fail()}}function __PRIVATE_arrayValueContains(i,e){return(i.values||[]).find(s=>__PRIVATE_valueEquals(s,e))!==void 0}function __PRIVATE_valueCompare(i,e){if(i===e)return 0;const s=__PRIVATE_typeOrder(i),o=__PRIVATE_typeOrder(e);if(s!==o)return __PRIVATE_primitiveComparator(s,o);switch(s){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(i.booleanValue,e.booleanValue);case 2:return function(c,d){const h=__PRIVATE_normalizeNumber(c.integerValue||c.doubleValue),g=__PRIVATE_normalizeNumber(d.integerValue||d.doubleValue);return h<g?-1:h>g?1:h===g?0:isNaN(h)?isNaN(g)?0:-1:1}(i,e);case 3:return __PRIVATE_compareTimestamps(i.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(i),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_primitiveComparator(i.stringValue,e.stringValue);case 6:return function(c,d){const h=__PRIVATE_normalizeByteString(c),g=__PRIVATE_normalizeByteString(d);return h.compareTo(g)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const h=c.split("/"),g=d.split("/");for(let j=0;j<h.length&&j<g.length;j++){const $=__PRIVATE_primitiveComparator(h[j],g[j]);if($!==0)return $}return __PRIVATE_primitiveComparator(h.length,g.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const h=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.latitude),__PRIVATE_normalizeNumber(d.latitude));return h!==0?h:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.longitude),__PRIVATE_normalizeNumber(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(i.arrayValue,e.arrayValue);case 10:return function(c,d){var h,g,j,$;const _=c.fields||{},et=d.fields||{},tt=(h=_.value)===null||h===void 0?void 0:h.arrayValue,it=(g=et.value)===null||g===void 0?void 0:g.arrayValue,ot=__PRIVATE_primitiveComparator(((j=tt==null?void 0:tt.values)===null||j===void 0?void 0:j.length)||0,(($=it==null?void 0:it.values)===null||$===void 0?void 0:$.length)||0);return ot!==0?ot:__PRIVATE_compareArrays(tt,it)}(i.mapValue,e.mapValue);case 11:return function(c,d){if(c===re$1.mapValue&&d===re$1.mapValue)return 0;if(c===re$1.mapValue)return 1;if(d===re$1.mapValue)return-1;const h=c.fields||{},g=Object.keys(h),j=d.fields||{},$=Object.keys(j);g.sort(),$.sort();for(let _=0;_<g.length&&_<$.length;++_){const et=__PRIVATE_primitiveComparator(g[_],$[_]);if(et!==0)return et;const tt=__PRIVATE_valueCompare(h[g[_]],j[$[_]]);if(tt!==0)return tt}return __PRIVATE_primitiveComparator(g.length,$.length)}(i.mapValue,e.mapValue);default:throw fail()}}function __PRIVATE_compareTimestamps(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return __PRIVATE_primitiveComparator(i,e);const s=__PRIVATE_normalizeTimestamp(i),o=__PRIVATE_normalizeTimestamp(e),a=__PRIVATE_primitiveComparator(s.seconds,o.seconds);return a!==0?a:__PRIVATE_primitiveComparator(s.nanos,o.nanos)}function __PRIVATE_compareArrays(i,e){const s=i.values||[],o=e.values||[];for(let a=0;a<s.length&&a<o.length;++a){const c=__PRIVATE_valueCompare(s[a],o[a]);if(c)return c}return __PRIVATE_primitiveComparator(s.length,o.length)}function canonicalId(i){return __PRIVATE_canonifyValue(i)}function __PRIVATE_canonifyValue(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const o=__PRIVATE_normalizeTimestamp(s);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(s){return __PRIVATE_normalizeByteString(s).toBase64()}(i.bytesValue):"referenceValue"in i?function(s){return DocumentKey.fromName(s).toString()}(i.referenceValue):"geoPointValue"in i?function(s){return`geo(${s.latitude},${s.longitude})`}(i.geoPointValue):"arrayValue"in i?function(s){let o="[",a=!0;for(const c of s.values||[])a?a=!1:o+=",",o+=__PRIVATE_canonifyValue(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(s){const o=Object.keys(s.fields||{}).sort();let a="{",c=!0;for(const d of o)c?c=!1:a+=",",a+=`${d}:${__PRIVATE_canonifyValue(s.fields[d])}`;return a+"}"}(i.mapValue):fail()}function isInteger(i){return!!i&&"integerValue"in i}function isArray$1(i){return!!i&&"arrayValue"in i}function __PRIVATE_isNullValue(i){return!!i&&"nullValue"in i}function __PRIVATE_isNanValue(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function __PRIVATE_isMapValue(i){return!!i&&"mapValue"in i}function __PRIVATE_isVectorValue(i){var e,s;return((s=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function __PRIVATE_deepClone(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return forEach(i.mapValue.fields,(s,o)=>e.mapValue.fields[s]=__PRIVATE_deepClone(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=__PRIVATE_deepClone(i.arrayValue.values[s]);return e}return Object.assign({},i)}function __PRIVATE_isMaxValue(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let o=0;o<e.length-1;++o)if(s=(s.mapValue.fields||{})[e.get(o)],!__PRIVATE_isMapValue(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(s)}setAll(e){let s=FieldPath$1.emptyPath(),o={},a=[];e.forEach((d,h)=>{if(!s.isImmediateParentOf(h)){const g=this.getFieldsMap(s);this.applyChanges(g,o,a),o={},a=[],s=h.popLast()}d?o[h.lastSegment()]=__PRIVATE_deepClone(d):a.push(h.lastSegment())});const c=this.getFieldsMap(s);this.applyChanges(c,o,a)}delete(e){const s=this.field(e.popLast());__PRIVATE_isMapValue(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=s.mapValue.fields[e.get(o)];__PRIVATE_isMapValue(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[e.get(o)]=a),s=a}return s.mapValue.fields}applyChanges(e,s,o){forEach(s,(a,c)=>e[a]=c);for(const a of o)delete e[a]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(i){const e=[];return forEach(i.fields,(s,o)=>{const a=new FieldPath$1([s]);if(__PRIVATE_isMapValue(o)){const c=__PRIVATE_extractFieldMask(o.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,s,o,a,c,d,h){this.key=e,this.documentType=s,this.version=o,this.readTime=a,this.createTime=c,this.data=d,this.documentState=h}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,s,o,a){return new MutableDocument(e,1,s,SnapshotVersion.min(),o,a,0)}static newNoDocument(e,s){return new MutableDocument(e,2,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,s){return new MutableDocument(e,3,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,s){this.position=e,this.inclusive=s}}function __PRIVATE_boundCompareToDocument(i,e,s){let o=0;for(let a=0;a<i.position.length;a++){const c=e[a],d=i.position[a];if(c.field.isKeyField()?o=DocumentKey.comparator(DocumentKey.fromName(d.referenceValue),s.key):o=__PRIVATE_valueCompare(d,s.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function __PRIVATE_boundEquals(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!__PRIVATE_valueEquals(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,s="asc"){this.field=e,this.dir=s}}function __PRIVATE_orderByEquals(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,s,o){super(),this.field=e,this.op=s,this.value=o}static create(e,s,o){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,o):new __PRIVATE_KeyFieldFilter(e,s,o):s==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,o):s==="in"?new __PRIVATE_InFilter(e,o):s==="not-in"?new __PRIVATE_NotInFilter(e,o):s==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,o):new FieldFilter(e,s,o)}static createKeyFieldInFilter(e,s,o){return s==="in"?new __PRIVATE_KeyFieldInFilter(e,o):new __PRIVATE_KeyFieldNotInFilter(e,o)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value)):s!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(s)&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new CompositeFilter(e,s)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(i){return i.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(i){return __PRIVATE_compositeFilterIsFlat(i)&&__PRIVATE_compositeFilterIsConjunction(i)}function __PRIVATE_compositeFilterIsFlat(i){for(const e of i.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(i){if(i instanceof FieldFilter)return i.field.canonicalString()+i.op.toString()+canonicalId(i.value);if(__PRIVATE_compositeFilterIsFlatConjunction(i))return i.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=i.filters.map(s=>__PRIVATE_canonifyFilter(s)).join(",");return`${i.op}(${e})`}}function __PRIVATE_filterEquals(i,e){return i instanceof FieldFilter?function(o,a){return a instanceof FieldFilter&&o.op===a.op&&o.field.isEqual(a.field)&&__PRIVATE_valueEquals(o.value,a.value)}(i,e):i instanceof CompositeFilter?function(o,a){return a instanceof CompositeFilter&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce((c,d,h)=>c&&__PRIVATE_filterEquals(d,a.filters[h]),!0):!1}(i,e):void fail()}function __PRIVATE_stringifyFilter(i){return i instanceof FieldFilter?function(s){return`${s.field.canonicalString()} ${s.op} ${canonicalId(s.value)}`}(i):i instanceof CompositeFilter?function(s){return s.op.toString()+" {"+s.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(i):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,s,o){super(e,s,o),this.key=DocumentKey.fromName(o.referenceValue)}matches(e){const s=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(s)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,s){super(e,"in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(i,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(o=>DocumentKey.fromName(o.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return isArray$1(s)&&__PRIVATE_arrayValueContains(s.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!isArray$1(s)||!s.arrayValue.values)&&s.arrayValue.values.some(o=>__PRIVATE_arrayValueContains(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,s=null,o=[],a=[],c=null,d=null,h=null){this.path=e,this.collectionGroup=s,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=d,this.endAt=h,this.ue=null}}function __PRIVATE_newTarget(i,e=null,s=[],o=[],a=null,c=null,d=null){return new __PRIVATE_TargetImpl(i,e,s,o,a,c,d)}function __PRIVATE_canonifyTarget(i){const e=__PRIVATE_debugCast(i);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(o=>__PRIVATE_canonifyFilter(o)).join(","),s+="|ob:",s+=e.orderBy.map(o=>function(c){return c.field.canonicalString()+c.dir}(o)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(o=>canonicalId(o)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(o=>canonicalId(o)).join(",")),e.ue=s}return e.ue}function __PRIVATE_targetEquals(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!__PRIVATE_orderByEquals(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!__PRIVATE_filterEquals(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(i.startAt,e.startAt)&&__PRIVATE_boundEquals(i.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(i){return DocumentKey.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,s=null,o=[],a=[],c=null,d="F",h=null,g=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=d,this.startAt=h,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(i,e,s,o,a,c,d,h){return new __PRIVATE_QueryImpl(i,e,s,o,a,c,d,h)}function __PRIVATE_newQueryForPath(i){return new __PRIVATE_QueryImpl(i)}function __PRIVATE_queryMatchesAllDocuments(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(i){return i.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(i){const e=__PRIVATE_debugCast(i);if(e.ce===null){e.ce=[];const s=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),s.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let h=new SortedSet(FieldPath$1.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(j=>{j.isInequality()&&(h=h.add(j.field))})}),h})(e).forEach(c=>{s.has(c.canonicalString())||c.isKeyField()||e.ce.push(new OrderBy(c,o))}),s.has(FieldPath$1.keyField().canonicalString())||e.ce.push(new OrderBy(FieldPath$1.keyField(),o))}return e.ce}function __PRIVATE_queryToTarget(i){const e=__PRIVATE_debugCast(i);return e.le||(e.le=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(i))),e.le}function __PRIVATE__queryToTarget(i,e){if(i.limitType==="F")return __PRIVATE_newTarget(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new OrderBy(a.field,c)});const s=i.endAt?new Bound(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Bound(i.startAt.position,i.startAt.inclusive):null;return __PRIVATE_newTarget(i.path,i.collectionGroup,e,i.filters,i.limit,s,o)}}function __PRIVATE_queryWithLimit(i,e,s){return new __PRIVATE_QueryImpl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function __PRIVATE_queryEquals(i,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(i),__PRIVATE_queryToTarget(e))&&i.limitType===e.limitType}function __PRIVATE_canonifyQuery(i){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(i))}|lt:${i.limitType}`}function __PRIVATE_stringifyQuery(i){return`Query(target=${function(s){let o=s.path.canonicalString();return s.collectionGroup!==null&&(o+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(o+=`, filters: [${s.filters.map(a=>__PRIVATE_stringifyFilter(a)).join(", ")}]`),__PRIVATE_isNullOrUndefined(s.limit)||(o+=", limit: "+s.limit),s.orderBy.length>0&&(o+=`, orderBy: [${s.orderBy.map(a=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(a)).join(", ")}]`),s.startAt&&(o+=", startAt: ",o+=s.startAt.inclusive?"b:":"a:",o+=s.startAt.position.map(a=>canonicalId(a)).join(",")),s.endAt&&(o+=", endAt: ",o+=s.endAt.inclusive?"a:":"b:",o+=s.endAt.position.map(a=>canonicalId(a)).join(",")),`Target(${o})`}(__PRIVATE_queryToTarget(i))}; limitType=${i.limitType})`}function __PRIVATE_queryMatches(i,e){return e.isFoundDocument()&&function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):DocumentKey.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,a){for(const c of __PRIVATE_queryNormalizedOrderBy(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(o,a){return!(o.startAt&&!function(d,h,g){const j=__PRIVATE_boundCompareToDocument(d,h,g);return d.inclusive?j<=0:j<0}(o.startAt,__PRIVATE_queryNormalizedOrderBy(o),a)||o.endAt&&!function(d,h,g){const j=__PRIVATE_boundCompareToDocument(d,h,g);return d.inclusive?j>=0:j>0}(o.endAt,__PRIVATE_queryNormalizedOrderBy(o),a))}(i,e)}function __PRIVATE_queryCollectionGroup(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function __PRIVATE_newQueryComparator(i){return(e,s)=>{let o=!1;for(const a of __PRIVATE_queryNormalizedOrderBy(i)){const c=__PRIVATE_compareDocs(a,e,s);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(i,e,s){const o=i.field.isKeyField()?DocumentKey.comparator(e.key,s.key):function(c,d,h){const g=d.data.field(c),j=h.data.field(c);return g!==null&&j!==null?__PRIVATE_valueCompare(g,j):fail()}(i.field,e,s);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return fail()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,s){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,s]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,s]);a.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[s]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(s,o)=>{for(const[a,c]of o)e(a,c)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return oe}const _e=new SortedMap(DocumentKey.comparator);function documentMap(...i){let e=_e;for(const s of i)e=e.insert(s.key,s);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(i){let e=_e;return i.forEach((s,o)=>e=e.insert(s,o.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(i=>i.toString(),(i,e)=>i.isEqual(e))}const ae=new SortedMap(DocumentKey.comparator),ue=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...i){let e=ue;for(const s of i)e=e.add(s);return e}const ce=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return ce}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(i){return{integerValue:""+i}}function toNumber(i,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(i,e,s){return i instanceof __PRIVATE_ServerTimestampTransform?function(a,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&__PRIVATE_isServerTimestamp(c)&&(c=__PRIVATE_getPreviousValue(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(s,e):i instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(i,e):i instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(i,e):function(a,c){const d=__PRIVATE_computeTransformOperationBaseValue(a,c),h=asNumber$1(d)+asNumber$1(a.Pe);return isInteger(d)&&isInteger(a.Pe)?__PRIVATE_toInteger(h):__PRIVATE_toDouble(a.serializer,h)}(i,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(i,e,s){return i instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(i,e):i instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(i,e):s}function __PRIVATE_computeTransformOperationBaseValue(i,e){return i instanceof __PRIVATE_NumericIncrementTransformOperation?function(o){return isInteger(o)||function(c){return!!c&&"doubleValue"in c}(o)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(i,e){const s=__PRIVATE_coercedFieldValuesArray(e);for(const o of i.elements)s.some(a=>__PRIVATE_valueEquals(a,o))||s.push(o);return{arrayValue:{values:s}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(i,e){let s=__PRIVATE_coercedFieldValuesArray(e);for(const o of i.elements)s=s.filter(a=>!__PRIVATE_valueEquals(a,o));return{arrayValue:{values:s}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function asNumber$1(i){return __PRIVATE_normalizeNumber(i.integerValue||i.doubleValue)}function __PRIVATE_coercedFieldValuesArray(i){return isArray$1(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(i,e){return i.field.isEqual(e.field)&&function(o,a){return o instanceof __PRIVATE_ArrayUnionTransformOperation&&a instanceof __PRIVATE_ArrayUnionTransformOperation||o instanceof __PRIVATE_ArrayRemoveTransformOperation&&a instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(o.elements,a.elements,__PRIVATE_valueEquals):o instanceof __PRIVATE_NumericIncrementTransformOperation&&a instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(o.Pe,a.Pe):o instanceof __PRIVATE_ServerTimestampTransform&&a instanceof __PRIVATE_ServerTimestampTransform}(i.transform,e.transform)}class MutationResult{constructor(e,s){this.version=e,this.transformResults=s}}class Precondition{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new __PRIVATE_DeleteMutation(i.key,Precondition.none()):new __PRIVATE_SetMutation(i.key,i.data,Precondition.none());{const s=i.data,o=ObjectValue.empty();let a=new SortedSet(FieldPath$1.comparator);for(let c of e.fields)if(!a.has(c)){let d=s.field(c);d===null&&c.length>1&&(c=c.popLast(),d=s.field(c)),d===null?o.delete(c):o.set(c,d),a=a.add(c)}return new __PRIVATE_PatchMutation(i.key,o,new FieldMask(a.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(i,e,s){i instanceof __PRIVATE_SetMutation?function(a,c,d){const h=a.value.clone(),g=__PRIVATE_serverTransformResults(a.fieldTransforms,c,d.transformResults);h.setAll(g),c.convertToFoundDocument(d.version,h).setHasCommittedMutations()}(i,e,s):i instanceof __PRIVATE_PatchMutation?function(a,c,d){if(!__PRIVATE_preconditionIsValidForDocument(a.precondition,c))return void c.convertToUnknownDocument(d.version);const h=__PRIVATE_serverTransformResults(a.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(__PRIVATE_getPatch(a)),g.setAll(h),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(i,e,s):function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,s)}function __PRIVATE_mutationApplyToLocalView(i,e,s,o){return i instanceof __PRIVATE_SetMutation?function(c,d,h,g){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,d))return h;const j=c.value.clone(),$=__PRIVATE_localTransformResults(c.fieldTransforms,g,d);return j.setAll($),d.convertToFoundDocument(d.version,j).setHasLocalMutations(),null}(i,e,s,o):i instanceof __PRIVATE_PatchMutation?function(c,d,h,g){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,d))return h;const j=__PRIVATE_localTransformResults(c.fieldTransforms,g,d),$=d.data;return $.setAll(__PRIVATE_getPatch(c)),$.setAll(j),d.convertToFoundDocument(d.version,$).setHasLocalMutations(),h===null?null:h.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(_=>_.field))}(i,e,s,o):function(c,d,h){return __PRIVATE_preconditionIsValidForDocument(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):h}(i,e,s)}function __PRIVATE_mutationExtractBaseValue(i,e){let s=null;for(const o of i.fieldTransforms){const a=e.data.field(o.field),c=__PRIVATE_computeTransformOperationBaseValue(o.transform,a||null);c!=null&&(s===null&&(s=ObjectValue.empty()),s.set(o.field,c))}return s||null}function __PRIVATE_mutationEquals(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&__PRIVATE_arrayEquals(o,a,(c,d)=>__PRIVATE_fieldTransformEquals(c,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,s,o,a=[]){super(),this.key=e,this.value=s,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,s,o,a,c=[]){super(),this.key=e,this.data=s,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(i){const e=new Map;return i.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const o=i.data.field(s);e.set(s,o)}}),e}function __PRIVATE_serverTransformResults(i,e,s){const o=new Map;__PRIVATE_hardAssert(i.length===s.length);for(let a=0;a<s.length;a++){const c=i[a],d=c.transform,h=e.data.field(c.field);o.set(c.field,__PRIVATE_applyTransformOperationToRemoteDocument(d,h,s[a]))}return o}function __PRIVATE_localTransformResults(i,e,s){const o=new Map;for(const a of i){const c=a.transform,d=s.data.field(a.field);o.set(a.field,__PRIVATE_applyTransformOperationToLocalView(c,d,e))}return o}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,s,o,a){this.batchId=e,this.localWriteTime=s,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,s){const o=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(c,e,o[a])}}applyToLocalView(e,s){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const o=__PRIVATE_newMutationMap();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let h=this.applyToLocalView(d,c.mutatedFields);h=s.has(a.key)?null:h;const g=__PRIVATE_calculateOverlayMutation(d,h);g!==null&&o.set(a.key,g),d.isValidDocument()||d.convertToNoDocument(SnapshotVersion.min())}),o}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(s,o)=>__PRIVATE_mutationEquals(s,o))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(s,o)=>__PRIVATE_mutationEquals(s,o))}}class MutationBatchResult{constructor(e,s,o,a){this.batch=e,this.commitVersion=s,this.mutationResults=o,this.docVersions=a}static from(e,s,o){__PRIVATE_hardAssert(e.mutations.length===o.length);let a=function(){return ae}();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,o[d].version);return new MutationBatchResult(e,s,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le,he;function __PRIVATE_isPermanentError(i){switch(i){default:return fail();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function __PRIVATE_mapCodeFromRpcCode(i){if(i===void 0)return __PRIVATE_logError("GRPC error has no .code"),D.UNKNOWN;switch(i){case le.OK:return D.OK;case le.CANCELLED:return D.CANCELLED;case le.UNKNOWN:return D.UNKNOWN;case le.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case le.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case le.INTERNAL:return D.INTERNAL;case le.UNAVAILABLE:return D.UNAVAILABLE;case le.UNAUTHENTICATED:return D.UNAUTHENTICATED;case le.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case le.NOT_FOUND:return D.NOT_FOUND;case le.ALREADY_EXISTS:return D.ALREADY_EXISTS;case le.PERMISSION_DENIED:return D.PERMISSION_DENIED;case le.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case le.ABORTED:return D.ABORTED;case le.OUT_OF_RANGE:return D.OUT_OF_RANGE;case le.UNIMPLEMENTED:return D.UNIMPLEMENTED;case le.DATA_LOSS:return D.DATA_LOSS;default:return fail()}}(he=le||(le={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(i){const e=__PRIVATE_newTextEncoder().encode(i),s=new Md5;return s.update(e),new Uint8Array(s.digest())}function __PRIVATE_get64BitUints(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Integer([s,o],0),new Integer([a,c],0)]}class BloomFilter{constructor(e,s,o){if(this.bitmap=e,this.padding=s,this.hashCount=o,s<0||s>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${s}`);if(o<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length===0&&s!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=Integer.fromNumber(this.Ie)}Ee(e,s,o){let a=e.add(s.multiply(Integer.fromNumber(o)));return a.compare(Ie)===1&&(a=new Integer([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const d=this.Ee(o,a,c);if(!this.de(d))return!1}return!0}static create(e,s,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new BloomFilter(c,a,s);return o.forEach(h=>d.insert(h)),d}insert(e){if(this.Ie===0)return;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const d=this.Ee(o,a,c);this.Ae(d)}}Ae(e){const s=Math.floor(e/8),o=e%8;this.bitmap[s]|=1<<o}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,s,o,a,c){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,s,o){const a=new Map;return a.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,s,o)),new RemoteEvent(SnapshotVersion.min(),a,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,s,o,a,c){this.resumeToken=e,this.current=s,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,s,o){return new TargetChange(o,s,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,s,o,a){this.Re=e,this.removedTargetIds=s,this.key=o,this.Ve=a}}class __PRIVATE_ExistenceFilterChange{constructor(e,s){this.targetId=e,this.me=s}}class __PRIVATE_WatchTargetChange{constructor(e,s,o=ByteString.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=s,this.resumeToken=o,this.cause=a}}class __PRIVATE_TargetState{constructor(){this.fe=0,this.ge=__PRIVATE_snapshotChangesMap(),this.pe=ByteString.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:s=s.add(a);break;case 1:o=o.add(a);break;default:fail()}}),new TargetChange(this.pe,this.ye,e,s,o)}Ce(){this.we=!1,this.ge=__PRIVATE_snapshotChangesMap()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,__PRIVATE_hardAssert(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Le=e,this.Be=new Map,this.ke=__PRIVATE_mutableDocumentMap(),this.qe=__PRIVATE_documentTargetMap(),this.Qe=new SortedMap(__PRIVATE_primitiveComparator)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,s=>{const o=this.Ge(s);switch(e.state){case 0:this.ze(s)&&o.De(e.resumeToken);break;case 1:o.Oe(),o.Se||o.Ce(),o.De(e.resumeToken);break;case 2:o.Oe(),o.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(o.Ne(),o.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),o.De(e.resumeToken));break;default:fail()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach((o,a)=>{this.ze(a)&&s(a)})}He(e){const s=e.targetId,o=e.me.count,a=this.Je(s);if(a){const c=a.target;if(__PRIVATE_targetIsDocumentTarget(c))if(o===0){const d=new DocumentKey(c.path);this.Ue(s,d,MutableDocument.newNoDocument(d,SnapshotVersion.min()))}else __PRIVATE_hardAssert(o===1);else{const d=this.Ye(s);if(d!==o){const h=this.Ze(e),g=h?this.Xe(h,e,d):1;if(g!==0){this.je(s);const j=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,j)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=s;let d,h;try{d=__PRIVATE_normalizeByteString(o).toUint8Array()}catch(g){if(g instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{h=new BloomFilter(d,a,c)}catch(g){return __PRIVATE_logWarn(g instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return h.Ie===0?null:h}Xe(e,s,o){return s.me.count===o-this.nt(e,s.targetId)?0:2}nt(e,s){const o=this.Le.getRemoteKeysForTarget(s);let a=0;return o.forEach(c=>{const d=this.Le.tt(),h=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(h)||(this.Ue(s,c,null),a++)}),a}rt(e){const s=new Map;this.Be.forEach((c,d)=>{const h=this.Je(d);if(h){if(c.current&&__PRIVATE_targetIsDocumentTarget(h.target)){const g=new DocumentKey(h.target.path);this.ke.get(g)!==null||this.it(d,g)||this.Ue(d,g,MutableDocument.newNoDocument(g,e))}c.be&&(s.set(d,c.ve()),c.Ce())}});let o=__PRIVATE_documentKeySet();this.qe.forEach((c,d)=>{let h=!0;d.forEachWhile(g=>{const j=this.Je(g);return!j||j.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(o=o.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(e));const a=new RemoteEvent(e,s,this.Qe,this.ke,o);return this.ke=__PRIVATE_mutableDocumentMap(),this.qe=__PRIVATE_documentTargetMap(),this.Qe=new SortedMap(__PRIVATE_primitiveComparator),a}$e(e,s){if(!this.ze(e))return;const o=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,o),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,o){if(!this.ze(e))return;const a=this.Ge(e);this.it(e,s)?a.Fe(s,1):a.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),o&&(this.ke=this.ke.insert(s,o))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new __PRIVATE_TargetState,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new __PRIVATE_TargetState),this.Le.getRemoteKeysForTarget(e).forEach(s=>{this.Ue(e,s,null)})}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const Te={asc:"ASCENDING",desc:"DESCENDING"},Ee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},de={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function __PRIVATE_toInt32Proto(i,e){return i.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(i,e){return toTimestamp(i,e.toTimestamp())}function __PRIVATE_fromVersion(i){return __PRIVATE_hardAssert(!!i),SnapshotVersion.fromTimestamp(function(s){const o=__PRIVATE_normalizeTimestamp(s);return new Timestamp(o.seconds,o.nanos)}(i))}function __PRIVATE_toResourceName(i,e){return __PRIVATE_toResourcePath(i,e).canonicalString()}function __PRIVATE_toResourcePath(i,e){const s=function(a){return new ResourcePath(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?s:s.child(e)}function __PRIVATE_fromResourceName(i){const e=ResourcePath.fromString(i);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e)),e}function __PRIVATE_toName(i,e){return __PRIVATE_toResourceName(i.databaseId,e.path)}function fromName(i,e){const s=__PRIVATE_fromResourceName(e);if(s.get(1)!==i.databaseId.projectId)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(s))}function __PRIVATE_toQueryPath(i,e){return __PRIVATE_toResourceName(i.databaseId,e)}function __PRIVATE_fromQueryPath(i){const e=__PRIVATE_fromResourceName(i);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(i){return new ResourcePath(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(i){return __PRIVATE_hardAssert(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function __PRIVATE_toMutationDocument(i,e,s){return{name:__PRIVATE_toName(i,e),fields:s.value.mapValue.fields}}function __PRIVATE_fromWatchChange(i,e){let s;if("targetChange"in e){e.targetChange;const o=function(j){return j==="NO_CHANGE"?0:j==="ADD"?1:j==="REMOVE"?2:j==="CURRENT"?3:j==="RESET"?4:fail()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(j,$){return j.useProto3Json?(__PRIVATE_hardAssert($===void 0||typeof $=="string"),ByteString.fromBase64String($||"")):(__PRIVATE_hardAssert($===void 0||$ instanceof Buffer||$ instanceof Uint8Array),ByteString.fromUint8Array($||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,h=d&&function(j){const $=j.code===void 0?D.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(j.code);return new FirestoreError($,j.message||"")}(d);s=new __PRIVATE_WatchTargetChange(o,a,c,h||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=fromName(i,o.document.name),c=__PRIVATE_fromVersion(o.document.updateTime),d=o.document.createTime?__PRIVATE_fromVersion(o.document.createTime):SnapshotVersion.min(),h=new ObjectValue({mapValue:{fields:o.document.fields}}),g=MutableDocument.newFoundDocument(a,c,d,h),j=o.targetIds||[],$=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange(j,$,g.key,g)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=fromName(i,o.document),c=o.readTime?__PRIVATE_fromVersion(o.readTime):SnapshotVersion.min(),d=MutableDocument.newNoDocument(a,c),h=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],h,d.key,d)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=fromName(i,o.document),c=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],c,a,null)}else{if(!("filter"in e))return fail();{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,d=new ExistenceFilter(a,c),h=o.targetId;s=new __PRIVATE_ExistenceFilterChange(h,d)}}return s}function toMutation(i,e){let s;if(e instanceof __PRIVATE_SetMutation)s={update:__PRIVATE_toMutationDocument(i,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)s={delete:__PRIVATE_toName(i,e.key)};else if(e instanceof __PRIVATE_PatchMutation)s={update:__PRIVATE_toMutationDocument(i,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail();s={verify:__PRIVATE_toName(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(o=>function(c,d){const h=d.transform;if(h instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:d.field.canonicalString(),increment:h.Pe};throw fail()}(0,o))),e.precondition.isNone||(s.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:fail()}(i,e.precondition)),s}function __PRIVATE_fromWriteResults(i,e){return i&&i.length>0?(__PRIVATE_hardAssert(e!==void 0),i.map(s=>function(a,c){let d=a.updateTime?__PRIVATE_fromVersion(a.updateTime):__PRIVATE_fromVersion(c);return d.isEqual(SnapshotVersion.min())&&(d=__PRIVATE_fromVersion(c)),new MutationResult(d,a.transformResults||[])}(s,e))):[]}function __PRIVATE_toDocumentsTarget(i,e){return{documents:[__PRIVATE_toQueryPath(i,e.path)]}}function __PRIVATE_toQueryTarget(i,e){const s={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),s.structuredQuery.from=[{collectionId:o.lastSegment()}]),s.parent=__PRIVATE_toQueryPath(i,a);const c=function(j){if(j.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(j,"and"))}(e.filters);c&&(s.structuredQuery.where=c);const d=function(j){if(j.length!==0)return j.map($=>function(et){return{field:__PRIVATE_toFieldPathReference(et.field),direction:__PRIVATE_toDirection(et.dir)}}($))}(e.orderBy);d&&(s.structuredQuery.orderBy=d);const h=__PRIVATE_toInt32Proto(i,e.limit);return h!==null&&(s.structuredQuery.limit=h),e.startAt&&(s.structuredQuery.startAt=function(j){return{before:j.inclusive,values:j.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(j){return{before:!j.inclusive,values:j.position}}(e.endAt)),{_t:s,parent:a}}function __PRIVATE_convertQueryTargetToQuery(i){let e=__PRIVATE_fromQueryPath(i.parent);const s=i.structuredQuery,o=s.from?s.from.length:0;let a=null;if(o>0){__PRIVATE_hardAssert(o===1);const $=s.from[0];$.allDescendants?a=$.collectionId:e=e.child($.collectionId)}let c=[];s.where&&(c=function(_){const et=__PRIVATE_fromFilter(_);return et instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(et)?et.getFilters():[et]}(s.where));let d=[];s.orderBy&&(d=function(_){return _.map(et=>function(it){return new OrderBy(__PRIVATE_fromFieldPathReference(it.field),function(at){switch(at){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(it.direction))}(et))}(s.orderBy));let h=null;s.limit&&(h=function(_){let et;return et=typeof _=="object"?_.value:_,__PRIVATE_isNullOrUndefined(et)?null:et}(s.limit));let g=null;s.startAt&&(g=function(_){const et=!!_.before,tt=_.values||[];return new Bound(tt,et)}(s.startAt));let j=null;return s.endAt&&(j=function(_){const et=!_.before,tt=_.values||[];return new Bound(tt,et)}(s.endAt)),__PRIVATE_newQuery(e,a,d,c,h,"F",g,j)}function __PRIVATE_toListenRequestLabels(i,e){const s=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function __PRIVATE_fromFilter(i){return i.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const o=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(d,"!=",{nullValue:"NULL_VALUE"});default:return fail()}}(i):i.fieldFilter!==void 0?function(s){return FieldFilter.create(__PRIVATE_fromFieldPathReference(s.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fail()}}(s.fieldFilter.op),s.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(s){return CompositeFilter.create(s.compositeFilter.filters.map(o=>__PRIVATE_fromFilter(o)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fail()}}(s.compositeFilter.op))}(i):fail()}function __PRIVATE_toDirection(i){return Te[i]}function __PRIVATE_toOperatorName(i){return Ee[i]}function __PRIVATE_toCompositeOperatorName(i){return de[i]}function __PRIVATE_toFieldPathReference(i){return{fieldPath:i.canonicalString()}}function __PRIVATE_fromFieldPathReference(i){return FieldPath$1.fromServerFormat(i.fieldPath)}function __PRIVATE_toFilter(i){return i instanceof FieldFilter?function(s){if(s.op==="=="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:__PRIVATE_toOperatorName(s.op),value:s.value}}}(i):i instanceof CompositeFilter?function(s){const o=s.getFilters().map(a=>__PRIVATE_toFilter(a));return o.length===1?o[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(s.op),filters:o}}}(i):fail()}function __PRIVATE_toDocumentMask(i){const e=[];return i.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,s,o,a,c=SnapshotVersion.min(),d=SnapshotVersion.min(),h=ByteString.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=s,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=h,this.expectedCount=g}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.ct=e}}function __PRIVATE_fromBundledQuery(i){const e=__PRIVATE_convertQueryTargetToQuery({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.un=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,s){return this.un.add(s),PersistencePromise.resolve()}getCollectionParents(e,s){return PersistencePromise.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return PersistencePromise.resolve()}deleteFieldIndex(e,s){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,s){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,s){return PersistencePromise.resolve(null)}getIndexType(e,s){return PersistencePromise.resolve(0)}getFieldIndexes(e,s){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,s){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,s){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,s,o){return PersistencePromise.resolve()}updateIndexEntries(e,s){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s]||new SortedSet(ResourcePath.comparator),c=!a.has(o);return this.index[s]=a.add(o),c}has(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s];return a&&a.has(o)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new __PRIVATE_TargetIdGenerator(0)}static kn(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const o=this.changes.get(s);return o!==void 0?PersistencePromise.resolve(o):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,s,o,a){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,s){let o=null;return this.documentOverlayCache.getOverlay(e,s).next(a=>(o=a,this.remoteDocumentCache.getEntry(e,s))).next(a=>(o!==null&&__PRIVATE_mutationApplyToLocalView(o.mutation,a,FieldMask.empty(),Timestamp.now()),a))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(o=>this.getLocalViewOfDocuments(e,o,__PRIVATE_documentKeySet()).next(()=>o))}getLocalViewOfDocuments(e,s,o=__PRIVATE_documentKeySet()){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,s).next(()=>this.computeViews(e,s,a,o).next(c=>{let d=documentMap();return c.forEach((h,g)=>{d=d.insert(h,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,s){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,s).next(()=>this.computeViews(e,s,o,__PRIVATE_documentKeySet()))}populateOverlays(e,s,o){const a=[];return o.forEach(c=>{s.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,h)=>{s.set(d,h)})})}computeViews(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const d=__PRIVATE_newDocumentKeyMap(),h=function(){return __PRIVATE_newDocumentKeyMap()}();return s.forEach((g,j)=>{const $=o.get(j.key);a.has(j.key)&&($===void 0||$.mutation instanceof __PRIVATE_PatchMutation)?c=c.insert(j.key,j):$!==void 0?(d.set(j.key,$.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView($.mutation,j,$.mutation.getFieldMask(),Timestamp.now())):d.set(j.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,c).next(g=>(g.forEach((j,$)=>d.set(j,$)),s.forEach((j,$)=>{var _;return h.set(j,new OverlayedDocument($,(_=d.get(j))!==null&&_!==void 0?_:null))}),h))}recalculateAndSaveOverlays(e,s){const o=__PRIVATE_newDocumentKeyMap();let a=new SortedMap((d,h)=>d-h),c=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(d=>{for(const h of d)h.keys().forEach(g=>{const j=s.get(g);if(j===null)return;let $=o.get(g)||FieldMask.empty();$=h.applyToLocalView(j,$),o.set(g,$);const _=(a.get(h.batchId)||__PRIVATE_documentKeySet()).add(g);a=a.insert(h.batchId,_)})}).next(()=>{const d=[],h=a.getReverseIterator();for(;h.hasNext();){const g=h.getNext(),j=g.key,$=g.value,_=__PRIVATE_newMutationMap();$.forEach(et=>{if(!c.has(et)){const tt=__PRIVATE_calculateOverlayMutation(s.get(et),o.get(et));tt!==null&&_.set(et,tt),c=c.add(et)}}),d.push(this.documentOverlayCache.saveOverlays(e,j,_))}return PersistencePromise.waitFor(d)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,s,o,a){return function(d){return DocumentKey.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):__PRIVATE_isCollectionGroupQuery(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,o,a):this.getDocumentsMatchingCollectionQuery(e,s,o,a)}getNextDocuments(e,s,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,o,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,o.largestBatchId,a-c.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let h=-1,g=c;return d.next(j=>PersistencePromise.forEach(j,($,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),c.get($)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,$).next(et=>{g=g.insert($,et)}))).next(()=>this.populateOverlays(e,j,c)).next(()=>this.computeViews(e,g,j,__PRIVATE_documentKeySet())).next($=>({batchId:h,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap($)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new DocumentKey(s)).next(o=>{let a=documentMap();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a})}getDocumentsMatchingCollectionGroupQuery(e,s,o,a){const c=s.collectionGroup;let d=documentMap();return this.indexManager.getCollectionParents(e,c).next(h=>PersistencePromise.forEach(h,g=>{const j=function(_,et){return new __PRIVATE_QueryImpl(et,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(s,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,j,o,a).next($=>{$.forEach((_,et)=>{d=d.insert(_,et)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,s,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,o.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,o,c,a))).next(d=>{c.forEach((g,j)=>{const $=j.getKey();d.get($)===null&&(d=d.insert($,MutableDocument.newInvalidDocument($)))});let h=documentMap();return d.forEach((g,j)=>{const $=c.get(g);$!==void 0&&__PRIVATE_mutationApplyToLocalView($.mutation,j,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(s,j)&&(h=h.insert(g,j))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return PersistencePromise.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,function(a){return{id:a.id,version:a.version,createTime:__PRIVATE_fromVersion(a.createTime)}}(s)),PersistencePromise.resolve()}getNamedQuery(e,s){return PersistencePromise.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,function(a){return{name:a.name,query:__PRIVATE_fromBundledQuery(a.bundledQuery),readTime:__PRIVATE_fromVersion(a.readTime)}}(s)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.Ir=new Map}getOverlay(e,s){return PersistencePromise.resolve(this.overlays.get(s))}getOverlays(e,s){const o=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(s,a=>this.getOverlay(e,a).next(c=>{c!==null&&o.set(a,c)})).next(()=>o)}saveOverlays(e,s,o){return o.forEach((a,c)=>{this.ht(e,s,c)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,s,o){const a=this.Ir.get(o);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Ir.delete(o)),PersistencePromise.resolve()}getOverlaysForCollection(e,s,o){const a=__PRIVATE_newOverlayMap(),c=s.length+1,d=new DocumentKey(s.child("")),h=this.overlays.getIteratorFrom(d);for(;h.hasNext();){const g=h.getNext().value,j=g.getKey();if(!s.isPrefixOf(j.path))break;j.path.length===c&&g.largestBatchId>o&&a.set(g.getKey(),g)}return PersistencePromise.resolve(a)}getOverlaysForCollectionGroup(e,s,o,a){let c=new SortedMap((j,$)=>j-$);const d=this.overlays.getIterator();for(;d.hasNext();){const j=d.getNext().value;if(j.getKey().getCollectionGroup()===s&&j.largestBatchId>o){let $=c.get(j.largestBatchId);$===null&&($=__PRIVATE_newOverlayMap(),c=c.insert(j.largestBatchId,$)),$.set(j.getKey(),j)}}const h=__PRIVATE_newOverlayMap(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((j,$)=>h.set(j,$)),!(h.size()>=a)););return PersistencePromise.resolve(h)}ht(e,s,o){const a=this.overlays.get(o.key);if(a!==null){const d=this.Ir.get(a.largestBatchId).delete(o.key);this.Ir.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(o.key,new Overlay(s,o));let c=this.Ir.get(s);c===void 0&&(c=__PRIVATE_documentKeySet(),this.Ir.set(s,c)),this.Ir.set(s,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Tr=new SortedSet(__PRIVATE_DocReference.Er),this.dr=new SortedSet(__PRIVATE_DocReference.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const o=new __PRIVATE_DocReference(e,s);this.Tr=this.Tr.add(o),this.dr=this.dr.add(o)}Rr(e,s){e.forEach(o=>this.addReference(o,s))}removeReference(e,s){this.Vr(new __PRIVATE_DocReference(e,s))}mr(e,s){e.forEach(o=>this.removeReference(o,s))}gr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1),c=[];return this.dr.forEachInRange([o,a],d=>{this.Vr(d),c.push(d.key)}),c}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1);let c=__PRIVATE_documentKeySet();return this.dr.forEachInRange([o,a],d=>{c=c.add(d.key)}),c}containsKey(e){const s=new __PRIVATE_DocReference(e,0),o=this.Tr.firstAfterOrEqual(s);return o!==null&&e.isEqual(o.key)}}class __PRIVATE_DocReference{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return DocumentKey.comparator(e.key,s.key)||__PRIVATE_primitiveComparator(e.wr,s.wr)}static Ar(e,s){return __PRIVATE_primitiveComparator(e.wr,s.wr)||DocumentKey.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new SortedSet(__PRIVATE_DocReference.Er)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,o,a){const c=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new MutationBatch(c,s,o,a);this.mutationQueue.push(d);for(const h of a)this.br=this.br.add(new __PRIVATE_DocReference(h.key,c)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return PersistencePromise.resolve(d)}lookupMutationBatch(e,s){return PersistencePromise.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const o=s+1,a=this.vr(o),c=a<0?0:a;return PersistencePromise.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=new __PRIVATE_DocReference(s,Number.POSITIVE_INFINITY),c=[];return this.br.forEachInRange([o,a],d=>{const h=this.Dr(d.wr);c.push(h)}),PersistencePromise.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,s){let o=new SortedSet(__PRIVATE_primitiveComparator);return s.forEach(a=>{const c=new __PRIVATE_DocReference(a,0),d=new __PRIVATE_DocReference(a,Number.POSITIVE_INFINITY);this.br.forEachInRange([c,d],h=>{o=o.add(h.wr)})}),PersistencePromise.resolve(this.Cr(o))}getAllMutationBatchesAffectingQuery(e,s){const o=s.path,a=o.length+1;let c=o;DocumentKey.isDocumentKey(c)||(c=c.child(""));const d=new __PRIVATE_DocReference(new DocumentKey(c),0);let h=new SortedSet(__PRIVATE_primitiveComparator);return this.br.forEachWhile(g=>{const j=g.key.path;return!!o.isPrefixOf(j)&&(j.length===a&&(h=h.add(g.wr)),!0)},d),PersistencePromise.resolve(this.Cr(h))}Cr(e){const s=[];return e.forEach(o=>{const a=this.Dr(o);a!==null&&s.push(a)}),s}removeMutationBatch(e,s){__PRIVATE_hardAssert(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let o=this.br;return PersistencePromise.forEach(s.mutations,a=>{const c=new __PRIVATE_DocReference(a.key,s.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.br=o})}On(e){}containsKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=this.br.firstAfterOrEqual(o);return PersistencePromise.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.Mr=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const o=s.key,a=this.docs.get(o),c=a?a.size:0,d=this.Mr(s);return this.docs=this.docs.insert(o,{document:s.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const o=this.docs.get(s);return PersistencePromise.resolve(o?o.document.mutableCopy():MutableDocument.newInvalidDocument(s))}getEntries(e,s){let o=__PRIVATE_mutableDocumentMap();return s.forEach(a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():MutableDocument.newInvalidDocument(a))}),PersistencePromise.resolve(o)}getDocumentsMatchingQuery(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const d=s.path,h=new DocumentKey(d.child("")),g=this.docs.getIteratorFrom(h);for(;g.hasNext();){const{key:j,value:{document:$}}=g.getNext();if(!d.isPrefixOf(j.path))break;j.path.length>d.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument($),o)<=0||(a.has($.key)||__PRIVATE_queryMatches(s,$))&&(c=c.insert($.key,$.mutableCopy()))}return PersistencePromise.resolve(c)}getAllFromCollectionGroup(e,s,o,a){fail()}Or(e,s){return PersistencePromise.forEach(this.docs,o=>s(o))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach((o,a)=>{a.isValidDocument()?s.push(this.cr.addEntry(e,a)):this.cr.removeEntry(o)}),PersistencePromise.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.Nr=new ObjectMap(s=>__PRIVATE_canonifyTarget(s),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.Lr=0,this.Br=new __PRIVATE_ReferenceSet,this.targetCount=0,this.kr=__PRIVATE_TargetIdGenerator.Bn()}forEachTarget(e,s){return this.Nr.forEach((o,a)=>s(a)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,s,o){return o&&(this.lastRemoteSnapshotVersion=o),s>this.Lr&&(this.Lr=s),PersistencePromise.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new __PRIVATE_TargetIdGenerator(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,s){return this.Kn(s),PersistencePromise.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,s,o){let a=0;const c=[];return this.Nr.forEach((d,h)=>{h.sequenceNumber<=s&&o.get(h.targetId)===null&&(this.Nr.delete(d),c.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),PersistencePromise.waitFor(c).next(()=>a)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,s){const o=this.Nr.get(s)||null;return PersistencePromise.resolve(o)}addMatchingKeys(e,s,o){return this.Br.Rr(s,o),PersistencePromise.resolve()}removeMatchingKeys(e,s,o){this.Br.mr(s,o);const a=this.persistence.referenceDelegate,c=[];return a&&s.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),PersistencePromise.waitFor(c)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,s){const o=this.Br.yr(s);return PersistencePromise.resolve(o)}containsKey(e,s){return PersistencePromise.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,s){this.qr={},this.overlays={},this.Qr=new __PRIVATE_ListenSequence(0),this.Kr=!1,this.Kr=!0,this.$r=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Ur=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(a){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(a)}(o=>this.referenceDelegate.Wr(o)),this.serializer=new __PRIVATE_LocalSerializer(s),this.Gr=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let o=this.qr[e.toKey()];return o||(o=new __PRIVATE_MemoryMutationQueue(s,this.referenceDelegate),this.qr[e.toKey()]=o),o}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,o){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const a=new __PRIVATE_MemoryTransaction(this.Qr.next());return this.referenceDelegate.zr(),o(a).next(c=>this.referenceDelegate.jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Hr(e,s){return PersistencePromise.or(Object.values(this.qr).map(o=>()=>o.containsKey(e,s)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Jr=new __PRIVATE_ReferenceSet,this.Yr=null}static Zr(e){return new __PRIVATE_MemoryEagerDelegate(e)}get Xr(){if(this.Yr)return this.Yr;throw fail()}addReference(e,s,o){return this.Jr.addReference(o,s),this.Xr.delete(o.toString()),PersistencePromise.resolve()}removeReference(e,s,o){return this.Jr.removeReference(o,s),this.Xr.add(o.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),PersistencePromise.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach(a=>this.Xr.add(a.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,s.targetId).next(a=>{a.forEach(c=>this.Xr.add(c.toString()))}).next(()=>o.removeTargetData(e,s))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.Xr,o=>{const a=DocumentKey.fromPath(o);return this.ei(e,a).next(c=>{c||s.removeEntry(a,SnapshotVersion.min())})}).next(()=>(this.Yr=null,s.apply(e)))}updateLimboDocument(e,s){return this.ei(e,s).next(o=>{o?this.Xr.delete(s.toString()):this.Xr.add(s.toString())})}Wr(e){return 0}ei(e,s){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,s,o,a){this.targetId=e,this.fromCache=s,this.$i=o,this.Ui=a}static Wi(e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();for(const c of s.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new __PRIVATE_LocalViewChanges(e,s.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,o,a){const c={result:null};return this.Yi(e,s).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.Zi(e,s,a,o).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new QueryContext;return this.Xi(e,s,d).next(h=>{if(c.result=h,this.zi)return this.es(e,s,d,h.size)})}).next(()=>c.result)}es(e,s,o,a){return o.documentReadCount<this.ji?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(s),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.Hi*a?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(s))):PersistencePromise.resolve())}Yi(e,s){if(__PRIVATE_queryMatchesAllDocuments(s))return PersistencePromise.resolve(null);let o=__PRIVATE_queryToTarget(s);return this.indexManager.getIndexType(e,o).next(a=>a===0?null:(s.limit!==null&&a===1&&(s=__PRIVATE_queryWithLimit(s,null,"F"),o=__PRIVATE_queryToTarget(s)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const d=__PRIVATE_documentKeySet(...c);return this.Ji.getDocuments(e,d).next(h=>this.indexManager.getMinOffset(e,o).next(g=>{const j=this.ts(s,h);return this.ns(s,j,d,g.readTime)?this.Yi(e,__PRIVATE_queryWithLimit(s,null,"F")):this.rs(e,j,s,g)}))})))}Zi(e,s,o,a){return __PRIVATE_queryMatchesAllDocuments(s)||a.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.Ji.getDocuments(e,o).next(c=>{const d=this.ts(s,c);return this.ns(s,d,o,a)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),__PRIVATE_stringifyQuery(s)),this.rs(e,d,s,__PRIVATE_newIndexOffsetSuccessorFromReadTime(a,-1)).next(h=>h))})}ts(e,s){let o=new SortedSet(__PRIVATE_newQueryComparator(e));return s.forEach((a,c)=>{__PRIVATE_queryMatches(e,c)&&(o=o.add(c))}),o}ns(e,s,o,a){if(e.limit===null)return!1;if(o.size!==s.size)return!0;const c=e.limitType==="F"?s.last():s.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Xi(e,s,o){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(s)),this.Ji.getDocumentsMatchingQuery(e,s,IndexOffset.min(),o)}rs(e,s,o,a){return this.Ji.getDocumentsMatchingQuery(e,o,a).next(c=>(s.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalStoreImpl{constructor(e,s,o,a){this.persistence=e,this.ss=s,this.serializer=a,this.os=new SortedMap(__PRIVATE_primitiveComparator),this._s=new ObjectMap(c=>__PRIVATE_canonifyTarget(c),__PRIVATE_targetEquals),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(o)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.os))}}function __PRIVATE_newLocalStore(i,e,s,o){return new __PRIVATE_LocalStoreImpl(i,e,s,o)}async function __PRIVATE_localStoreHandleUserChange(i,e){const s=__PRIVATE_debugCast(i);return await s.persistence.runTransaction("Handle user change","readonly",o=>{let a;return s.mutationQueue.getAllMutationBatches(o).next(c=>(a=c,s.ls(e),s.mutationQueue.getAllMutationBatches(o))).next(c=>{const d=[],h=[];let g=__PRIVATE_documentKeySet();for(const j of a){d.push(j.batchId);for(const $ of j.mutations)g=g.add($.key)}for(const j of c){h.push(j.batchId);for(const $ of j.mutations)g=g.add($.key)}return s.localDocuments.getDocuments(o,g).next(j=>({hs:j,removedBatchIds:d,addedBatchIds:h}))})})}function __PRIVATE_localStoreAcknowledgeBatch(i,e){const s=__PRIVATE_debugCast(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const a=e.batch.keys(),c=s.cs.newChangeBuffer({trackRemovals:!0});return function(h,g,j,$){const _=j.batch,et=_.keys();let tt=PersistencePromise.resolve();return et.forEach(it=>{tt=tt.next(()=>$.getEntry(g,it)).next(ot=>{const at=j.docVersions.get(it);__PRIVATE_hardAssert(at!==null),ot.version.compareTo(at)<0&&(_.applyToRemoteDocument(ot,j),ot.isValidDocument()&&(ot.setReadTime(j.commitVersion),$.addEntry(ot)))})}),tt.next(()=>h.mutationQueue.removeMutationBatch(g,_))}(s,o,e,c).next(()=>c.apply(o)).next(()=>s.mutationQueue.performConsistencyCheck(o)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(h){let g=__PRIVATE_documentKeySet();for(let j=0;j<h.mutationResults.length;++j)h.mutationResults[j].transformResults.length>0&&(g=g.add(h.batch.mutations[j].key));return g}(e))).next(()=>s.localDocuments.getDocuments(o,a))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(i){const e=__PRIVATE_debugCast(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Ur.getLastRemoteSnapshotVersion(s))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(i,e){const s=__PRIVATE_debugCast(i),o=e.snapshotVersion;let a=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=s.cs.newChangeBuffer({trackRemovals:!0});a=s.os;const h=[];e.targetChanges.forEach(($,_)=>{const et=a.get(_);if(!et)return;h.push(s.Ur.removeMatchingKeys(c,$.removedDocuments,_).next(()=>s.Ur.addMatchingKeys(c,$.addedDocuments,_)));let tt=et.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(_)!==null?tt=tt.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):$.resumeToken.approximateByteSize()>0&&(tt=tt.withResumeToken($.resumeToken,o)),a=a.insert(_,tt),function(ot,at,rt){return ot.resumeToken.approximateByteSize()===0||at.snapshotVersion.toMicroseconds()-ot.snapshotVersion.toMicroseconds()>=3e8?!0:rt.addedDocuments.size+rt.modifiedDocuments.size+rt.removedDocuments.size>0}(et,tt,$)&&h.push(s.Ur.updateTargetData(c,tt))});let g=__PRIVATE_mutableDocumentMap(),j=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach($=>{e.resolvedLimboDocuments.has($)&&h.push(s.persistence.referenceDelegate.updateLimboDocument(c,$))}),h.push(__PRIVATE_populateDocumentChangeBuffer(c,d,e.documentUpdates).next($=>{g=$.Ps,j=$.Is})),!o.isEqual(SnapshotVersion.min())){const $=s.Ur.getLastRemoteSnapshotVersion(c).next(_=>s.Ur.setTargetsMetadata(c,c.currentSequenceNumber,o));h.push($)}return PersistencePromise.waitFor(h).next(()=>d.apply(c)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,g,j)).next(()=>g)}).then(c=>(s.os=a,c))}function __PRIVATE_populateDocumentChangeBuffer(i,e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return s.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let d=__PRIVATE_mutableDocumentMap();return s.forEach((h,g)=>{const j=c.get(h);g.isFoundDocument()!==j.isFoundDocument()&&(a=a.add(h)),g.isNoDocument()&&g.version.isEqual(SnapshotVersion.min())?(e.removeEntry(h,g.readTime),d=d.insert(h,g)):!j.isValidDocument()||g.version.compareTo(j.version)>0||g.version.compareTo(j.version)===0&&j.hasPendingWrites?(e.addEntry(g),d=d.insert(h,g)):__PRIVATE_logDebug("LocalStore","Ignoring outdated watch update for ",h,". Current version:",j.version," Watch version:",g.version)}),{Ps:d,Is:a}})}function __PRIVATE_localStoreGetNextMutationBatch(i,e){const s=__PRIVATE_debugCast(i);return s.persistence.runTransaction("Get next mutation batch","readonly",o=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function __PRIVATE_localStoreAllocateTarget(i,e){const s=__PRIVATE_debugCast(i);return s.persistence.runTransaction("Allocate target","readwrite",o=>{let a;return s.Ur.getTargetData(o,e).next(c=>c?(a=c,PersistencePromise.resolve(a)):s.Ur.allocateTargetId(o).next(d=>(a=new TargetData(e,d,"TargetPurposeListen",o.currentSequenceNumber),s.Ur.addTargetData(o,a).next(()=>a))))}).then(o=>{const a=s.os.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.os=s.os.insert(o.targetId,o),s._s.set(e,o.targetId)),o})}async function __PRIVATE_localStoreReleaseTarget(i,e,s){const o=__PRIVATE_debugCast(i),a=o.os.get(e),c=s?"readwrite":"readwrite-primary";try{s||await o.persistence.runTransaction("Release target",c,d=>o.persistence.referenceDelegate.removeTarget(d,a))}catch(d){if(!__PRIVATE_isIndexedDbTransactionError(d))throw d;__PRIVATE_logDebug("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}o.os=o.os.remove(e),o._s.delete(a.target)}function __PRIVATE_localStoreExecuteQuery(i,e,s){const o=__PRIVATE_debugCast(i);let a=SnapshotVersion.min(),c=__PRIVATE_documentKeySet();return o.persistence.runTransaction("Execute query","readwrite",d=>function(g,j,$){const _=__PRIVATE_debugCast(g),et=_._s.get($);return et!==void 0?PersistencePromise.resolve(_.os.get(et)):_.Ur.getTargetData(j,$)}(o,d,__PRIVATE_queryToTarget(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,o.Ur.getMatchingKeysForTargetId(d,h.targetId).next(g=>{c=g})}).next(()=>o.ss.getDocumentsMatchingQuery(d,e,s?a:SnapshotVersion.min(),s?c:__PRIVATE_documentKeySet())).next(h=>(__PRIVATE_setMaxReadTime(o,__PRIVATE_queryCollectionGroup(e),h),{documents:h,Ts:c})))}function __PRIVATE_setMaxReadTime(i,e,s){let o=i.us.get(e)||SnapshotVersion.min();s.forEach((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.us.set(e,o)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.so=new __PRIVATE_LocalClientState,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,o){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,o){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,s,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let me=null;function __PRIVATE_generateUniqueDebugId(){return me===null?me=function(){return 268435456+Math.round(2147483648*Math.random())}():me++,"0x"+me.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge="WebChannelConnection";class __PRIVATE_WebChannelConnection extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const o=s.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Do=o+"://"+s.host,this.vo=`projects/${a}/databases/${c}`,this.Co=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get Fo(){return!1}Mo(s,o,a,c,d){const h=__PRIVATE_generateUniqueDebugId(),g=this.xo(s,o.toUriEncodedString());__PRIVATE_logDebug("RestConnection",`Sending RPC '${s}' ${h}:`,g,a);const j={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(j,c,d),this.No(s,g,j,a).then($=>(__PRIVATE_logDebug("RestConnection",`Received RPC '${s}' ${h}: `,$),$),$=>{throw __PRIVATE_logWarn("RestConnection",`RPC '${s}' ${h} failed with error: `,$,"url: ",g,"request:",a),$})}Lo(s,o,a,c,d,h){return this.Mo(s,o,a,c,d)}Oo(s,o,a){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+S}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,d)=>s[d]=c),a&&a.headers.forEach((c,d)=>s[d]=c)}xo(s,o){const a=fe[s];return`${this.Do}/v1/${o}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,o,a){const c=__PRIVATE_generateUniqueDebugId();return new Promise((d,h)=>{const g=new XhrIo;g.setWithCredentials(!0),g.listenOnce(EventType.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case ErrorCode.NO_ERROR:const $=g.getResponseJson();__PRIVATE_logDebug(ge,`XHR for RPC '${e}' ${c} received:`,JSON.stringify($)),d($);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(ge,`RPC '${e}' ${c} timed out`),h(new FirestoreError(D.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const _=g.getStatus();if(__PRIVATE_logDebug(ge,`RPC '${e}' ${c} failed with status:`,_,"response text:",g.getResponseText()),_>0){let et=g.getResponseJson();Array.isArray(et)&&(et=et[0]);const tt=et==null?void 0:et.error;if(tt&&tt.status&&tt.message){const it=function(at){const rt=at.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(rt)>=0?rt:D.UNKNOWN}(tt.status);h(new FirestoreError(it,tt.message))}else h(new FirestoreError(D.UNKNOWN,"Server responded with status "+g.getStatus()))}else h(new FirestoreError(D.UNAVAILABLE,"Connection failed."));break;default:fail()}}finally{__PRIVATE_logDebug(ge,`RPC '${e}' ${c} completed.`)}});const j=JSON.stringify(a);__PRIVATE_logDebug(ge,`RPC '${e}' ${c} sending request:`,a),g.send(s,"POST",j,o,15)})}Bo(e,s,o){const a=__PRIVATE_generateUniqueDebugId(),c=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=createWebChannelTransport(),h=getStatEventTarget(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},j=this.longPollingOptions.timeoutSeconds;j!==void 0&&(g.longPollingTimeout=Math.round(1e3*j)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,s,o),g.encodeInitMessageHeaders=!0;const $=c.join("");__PRIVATE_logDebug(ge,`Creating RPC '${e}' stream ${a}: ${$}`,g);const _=d.createWebChannel($,g);let et=!1,tt=!1;const it=new __PRIVATE_StreamBridge({Io:at=>{tt?__PRIVATE_logDebug(ge,`Not sending because RPC '${e}' stream ${a} is closed:`,at):(et||(__PRIVATE_logDebug(ge,`Opening RPC '${e}' stream ${a} transport.`),_.open(),et=!0),__PRIVATE_logDebug(ge,`RPC '${e}' stream ${a} sending:`,at),_.send(at))},To:()=>_.close()}),ot=(at,rt,st)=>{at.listen(rt,lt=>{try{st(lt)}catch(mt){setTimeout(()=>{throw mt},0)}})};return ot(_,WebChannel.EventType.OPEN,()=>{tt||(__PRIVATE_logDebug(ge,`RPC '${e}' stream ${a} transport opened.`),it.yo())}),ot(_,WebChannel.EventType.CLOSE,()=>{tt||(tt=!0,__PRIVATE_logDebug(ge,`RPC '${e}' stream ${a} transport closed`),it.So())}),ot(_,WebChannel.EventType.ERROR,at=>{tt||(tt=!0,__PRIVATE_logWarn(ge,`RPC '${e}' stream ${a} transport errored:`,at),it.So(new FirestoreError(D.UNAVAILABLE,"The operation could not be completed")))}),ot(_,WebChannel.EventType.MESSAGE,at=>{var rt;if(!tt){const st=at.data[0];__PRIVATE_hardAssert(!!st);const lt=st,mt=lt.error||((rt=lt[0])===null||rt===void 0?void 0:rt.error);if(mt){__PRIVATE_logDebug(ge,`RPC '${e}' stream ${a} received error:`,mt);const ft=mt.status;let gt=function(ct){const _t=le[ct];if(_t!==void 0)return __PRIVATE_mapCodeFromRpcCode(_t)}(ft),dt=mt.message;gt===void 0&&(gt=D.INTERNAL,dt="Unknown error status: "+ft+" with message "+mt.message),tt=!0,it.So(new FirestoreError(gt,dt)),_.close()}else __PRIVATE_logDebug(ge,`RPC '${e}' stream ${a} received:`,st),it.bo(st)}}),ot(h,Event$1.STAT_EVENT,at=>{at.stat===Stat.PROXY?__PRIVATE_logDebug(ge,`RPC '${e}' stream ${a} detected buffering proxy`):at.stat===Stat.NOPROXY&&__PRIVATE_logDebug(ge,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{it.wo()},0),it}}function getDocument$1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(i){return new JsonProtoSerializer(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,s,o=1e3,a=1.5,c=6e4){this.ui=e,this.timerId=s,this.ko=o,this.qo=a,this.Qo=c,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),o=Math.max(0,Date.now()-this.Uo),a=Math.max(0,s-o);a>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${o} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,a,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_PersistentStream{constructor(e,s,o,a,c,d,h,g){this.ui=e,this.Ho=o,this.Jo=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=h,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new __PRIVATE_ExponentialBackoff(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===D.RESOURCE_EXHAUSTED?(__PRIVATE_logError(s.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,a])=>{this.Yo===s&&this.P_(o,a)},o=>{e(()=>{const a=new FirestoreError(D.UNKNOWN,"Fetching auth token failed: "+o.message);return this.I_(a)})})}P_(e,s){const o=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo(()=>{o(()=>this.listener.Eo())}),this.stream.Ro(()=>{o(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(a=>{o(()=>this.I_(a))}),this.stream.onMessage(a=>{o(()=>++this.e_==1?this.E_(a):this.onNext(a))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return __PRIVATE_logDebug("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget(()=>this.Yo===e?s():(__PRIVATE_logDebug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,o,a,d),this.serializer=c}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=__PRIVATE_fromWatchChange(this.serializer,e),o=function(c){if(!("targetChange"in c))return SnapshotVersion.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?SnapshotVersion.min():d.readTime?__PRIVATE_fromVersion(d.readTime):SnapshotVersion.min()}(e);return this.listener.d_(s,o)}A_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.addTarget=function(c,d){let h;const g=d.target;if(h=__PRIVATE_targetIsDocumentTarget(g)?{documents:__PRIVATE_toDocumentsTarget(c,g)}:{query:__PRIVATE_toQueryTarget(c,g)._t},h.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){h.resumeToken=__PRIVATE_toBytes(c,d.resumeToken);const j=__PRIVATE_toInt32Proto(c,d.expectedCount);j!==null&&(h.expectedCount=j)}else if(d.snapshotVersion.compareTo(SnapshotVersion.min())>0){h.readTime=toTimestamp(c,d.snapshotVersion.toTimestamp());const j=__PRIVATE_toInt32Proto(c,d.expectedCount);j!==null&&(h.expectedCount=j)}return h}(this.serializer,e);const o=__PRIVATE_toListenRequestLabels(this.serializer,e);o&&(s.labels=o),this.a_(s)}R_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.removeTarget=e,this.a_(s)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,o,a,d),this.serializer=c}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return __PRIVATE_hardAssert(!!e.streamToken),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),o=__PRIVATE_fromVersion(e.commitTime);return this.listener.g_(o,s)}p_(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map(o=>toMutation(this.serializer,o))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DatastoreImpl extends class{}{constructor(e,s,o,a){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=o,this.serializer=a,this.y_=!1}w_(){if(this.y_)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,o,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Mo(e,__PRIVATE_toResourcePath(s,o),a,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new FirestoreError(D.UNKNOWN,c.toString())})}Lo(e,s,o,a,c){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,h])=>this.connection.Lo(e,__PRIVATE_toResourcePath(s,o),a,d,h,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new FirestoreError(D.UNKNOWN,d.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(__PRIVATE_logError(s),this.D_=!1):__PRIVATE_logDebug("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_RemoteStoreImpl{constructor(e,s,o,a,c){this.localStore=e,this.datastore=s,this.asyncQueue=o,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=c,this.k_._o(d=>{o.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug("RemoteStore","Restarting streams for network reachability change."),await async function(g){const j=__PRIVATE_debugCast(g);j.L_.add(4),await __PRIVATE_disableNetworkInternal(j),j.q_.set("Unknown"),j.L_.delete(4),await __PRIVATE_enableNetworkInternal(j)}(this))})}),this.q_=new __PRIVATE_OnlineStateTracker(o,a)}}async function __PRIVATE_enableNetworkInternal(i){if(__PRIVATE_canUseNetwork(i))for(const e of i.B_)await e(!0)}async function __PRIVATE_disableNetworkInternal(i){for(const e of i.B_)await e(!1)}function __PRIVATE_remoteStoreListen(i,e){const s=__PRIVATE_debugCast(i);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(s)?__PRIVATE_startWatchStream(s):__PRIVATE_ensureWatchStream(s).r_()&&__PRIVATE_sendWatchRequest(s,e))}function __PRIVATE_remoteStoreUnlisten(i,e){const s=__PRIVATE_debugCast(i),o=__PRIVATE_ensureWatchStream(s);s.N_.delete(e),o.r_()&&__PRIVATE_sendUnwatchRequest(s,e),s.N_.size===0&&(o.r_()?o.o_():__PRIVATE_canUseNetwork(s)&&s.q_.set("Unknown"))}function __PRIVATE_sendWatchRequest(i,e){if(i.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}__PRIVATE_ensureWatchStream(i).A_(e)}function __PRIVATE_sendUnwatchRequest(i,e){i.Q_.xe(e),__PRIVATE_ensureWatchStream(i).R_(e)}function __PRIVATE_startWatchStream(i){i.Q_=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>i.N_.get(e)||null,tt:()=>i.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(i).start(),i.q_.v_()}function __PRIVATE_shouldStartWatchStream(i){return __PRIVATE_canUseNetwork(i)&&!__PRIVATE_ensureWatchStream(i).n_()&&i.N_.size>0}function __PRIVATE_canUseNetwork(i){return __PRIVATE_debugCast(i).L_.size===0}function __PRIVATE_cleanUpWatchStreamState(i){i.Q_=void 0}async function __PRIVATE_onWatchStreamConnected(i){i.q_.set("Online")}async function __PRIVATE_onWatchStreamOpen(i){i.N_.forEach((e,s)=>{__PRIVATE_sendWatchRequest(i,e)})}async function __PRIVATE_onWatchStreamClose(i,e){__PRIVATE_cleanUpWatchStreamState(i),__PRIVATE_shouldStartWatchStream(i)?(i.q_.M_(e),__PRIVATE_startWatchStream(i)):i.q_.set("Unknown")}async function __PRIVATE_onWatchStreamChange(i,e,s){if(i.q_.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(a,c){const d=c.cause;for(const h of c.targetIds)a.N_.has(h)&&(await a.remoteSyncer.rejectListen(h,d),a.N_.delete(h),a.Q_.removeTarget(h))}(i,e)}catch(o){__PRIVATE_logDebug("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),await __PRIVATE_disableNetworkUntilRecovery(i,o)}else if(e instanceof __PRIVATE_DocumentWatchChange?i.Q_.Ke(e):e instanceof __PRIVATE_ExistenceFilterChange?i.Q_.He(e):i.Q_.We(e),!s.isEqual(SnapshotVersion.min()))try{const o=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(i.localStore);s.compareTo(o)>=0&&await function(c,d){const h=c.Q_.rt(d);return h.targetChanges.forEach((g,j)=>{if(g.resumeToken.approximateByteSize()>0){const $=c.N_.get(j);$&&c.N_.set(j,$.withResumeToken(g.resumeToken,d))}}),h.targetMismatches.forEach((g,j)=>{const $=c.N_.get(g);if(!$)return;c.N_.set(g,$.withResumeToken(ByteString.EMPTY_BYTE_STRING,$.snapshotVersion)),__PRIVATE_sendUnwatchRequest(c,g);const _=new TargetData($.target,g,j,$.sequenceNumber);__PRIVATE_sendWatchRequest(c,_)}),c.remoteSyncer.applyRemoteEvent(h)}(i,s)}catch(o){__PRIVATE_logDebug("RemoteStore","Failed to raise snapshot:",o),await __PRIVATE_disableNetworkUntilRecovery(i,o)}}async function __PRIVATE_disableNetworkUntilRecovery(i,e,s){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;i.L_.add(1),await __PRIVATE_disableNetworkInternal(i),i.q_.set("Offline"),s||(s=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug("RemoteStore","Retrying IndexedDB access"),await s(),i.L_.delete(1),await __PRIVATE_enableNetworkInternal(i)})}function __PRIVATE_executeWithRecovery(i,e){return e().catch(s=>__PRIVATE_disableNetworkUntilRecovery(i,s,e))}async function __PRIVATE_fillWritePipeline(i){const e=__PRIVATE_debugCast(i),s=__PRIVATE_ensureWriteStream(e);let o=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const a=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,o);if(a===null){e.O_.length===0&&s.o_();break}o=a.batchId,__PRIVATE_addToWritePipeline(e,a)}catch(a){await __PRIVATE_disableNetworkUntilRecovery(e,a)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(i){return __PRIVATE_canUseNetwork(i)&&i.O_.length<10}function __PRIVATE_addToWritePipeline(i,e){i.O_.push(e);const s=__PRIVATE_ensureWriteStream(i);s.r_()&&s.V_&&s.m_(e.mutations)}function __PRIVATE_shouldStartWriteStream(i){return __PRIVATE_canUseNetwork(i)&&!__PRIVATE_ensureWriteStream(i).n_()&&i.O_.length>0}function __PRIVATE_startWriteStream(i){__PRIVATE_ensureWriteStream(i).start()}async function __PRIVATE_onWriteStreamOpen(i){__PRIVATE_ensureWriteStream(i).p_()}async function __PRIVATE_onWriteHandshakeComplete(i){const e=__PRIVATE_ensureWriteStream(i);for(const s of i.O_)e.m_(s.mutations)}async function __PRIVATE_onMutationResult(i,e,s){const o=i.O_.shift(),a=MutationBatchResult.from(o,e,s);await __PRIVATE_executeWithRecovery(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await __PRIVATE_fillWritePipeline(i)}async function __PRIVATE_onWriteStreamClose(i,e){e&&__PRIVATE_ensureWriteStream(i).V_&&await async function(o,a){if(function(d){return __PRIVATE_isPermanentError(d)&&d!==D.ABORTED}(a.code)){const c=o.O_.shift();__PRIVATE_ensureWriteStream(o).s_(),await __PRIVATE_executeWithRecovery(o,()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a)),await __PRIVATE_fillWritePipeline(o)}}(i,e),__PRIVATE_shouldStartWriteStream(i)&&__PRIVATE_startWriteStream(i)}async function __PRIVATE_remoteStoreHandleCredentialChange(i,e){const s=__PRIVATE_debugCast(i);s.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("RemoteStore","RemoteStore received new credentials");const o=__PRIVATE_canUseNetwork(s);s.L_.add(3),await __PRIVATE_disableNetworkInternal(s),o&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await __PRIVATE_enableNetworkInternal(s)}async function __PRIVATE_remoteStoreApplyPrimaryState(i,e){const s=__PRIVATE_debugCast(i);e?(s.L_.delete(2),await __PRIVATE_enableNetworkInternal(s)):e||(s.L_.add(2),await __PRIVATE_disableNetworkInternal(s),s.q_.set("Unknown"))}function __PRIVATE_ensureWatchStream(i){return i.K_||(i.K_=function(s,o,a){const c=__PRIVATE_debugCast(s);return c.w_(),new __PRIVATE_PersistentListenStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Eo:__PRIVATE_onWatchStreamConnected.bind(null,i),Ro:__PRIVATE_onWatchStreamOpen.bind(null,i),mo:__PRIVATE_onWatchStreamClose.bind(null,i),d_:__PRIVATE_onWatchStreamChange.bind(null,i)}),i.B_.push(async e=>{e?(i.K_.s_(),__PRIVATE_shouldStartWatchStream(i)?__PRIVATE_startWatchStream(i):i.q_.set("Unknown")):(await i.K_.stop(),__PRIVATE_cleanUpWatchStreamState(i))})),i.K_}function __PRIVATE_ensureWriteStream(i){return i.U_||(i.U_=function(s,o,a){const c=__PRIVATE_debugCast(s);return c.w_(),new __PRIVATE_PersistentWriteStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Eo:()=>Promise.resolve(),Ro:__PRIVATE_onWriteStreamOpen.bind(null,i),mo:__PRIVATE_onWriteStreamClose.bind(null,i),f_:__PRIVATE_onWriteHandshakeComplete.bind(null,i),g_:__PRIVATE_onMutationResult.bind(null,i)}),i.B_.push(async e=>{e?(i.U_.s_(),await __PRIVATE_fillWritePipeline(i)):(await i.U_.stop(),i.O_.length>0&&(__PRIVATE_logDebug("RemoteStore",`Stopping write stream with ${i.O_.length} pending writes`),i.O_=[]))})),i.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,s,o,a,c){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,o,a,c){const d=Date.now()+o,h=new DelayedOperation(e,s,d,a,c);return h.start(o),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(i,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${i}`),__PRIVATE_isIndexedDbTransactionError(i))return new FirestoreError(D.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{constructor(e){this.comparator=e?(s,o)=>e(s,o)||DocumentKey.comparator(s.key,o.key):(s,o)=>DocumentKey.comparator(s.key,o.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}static emptySet(e){return new DocumentSet(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,o)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const o=new DocumentSet;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=s,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.W_=new SortedMap(DocumentKey.comparator)}track(e){const s=e.doc.key,o=this.W_.get(s);o?e.type!==0&&o.type===3?this.W_=this.W_.insert(s,e):e.type===3&&o.type!==1?this.W_=this.W_.insert(s,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.W_=this.W_.remove(s):e.type===1&&o.type===2?this.W_=this.W_.insert(s,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):fail():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal((s,o)=>{e.push(o)}),e}}class ViewSnapshot{constructor(e,s,o,a,c,d,h,g,j){this.query=e,this.docs=s,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=h,this.excludesMetadataChanges=g,this.hasCachedResults=j}static fromInitialDocuments(e,s,o,a,c){const d=[];return s.forEach(h=>{d.push({type:0,doc:h})}),new ViewSnapshot(e,s,DocumentSet.emptySet(s),d,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,o=e.docChanges;if(s.length!==o.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==o[a].type||!s[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,o){const a=__PRIVATE_debugCast(s),c=a.queries;a.queries=__PRIVATE_newQueriesObjectMap(),c.forEach((d,h)=>{for(const g of h.j_)g.onError(o)})})(this,new FirestoreError(D.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(i=>__PRIVATE_canonifyQuery(i),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(i,e){const s=__PRIVATE_debugCast(i);let o=3;const a=e.query;let c=s.queries.get(a);c?!c.H_()&&e.J_()&&(o=2):(c=new __PRIVATE_QueryListenersInfo,o=e.J_()?0:1);try{switch(o){case 0:c.z_=await s.onListen(a,!0);break;case 1:c.z_=await s.onListen(a,!1);break;case 2:await s.onFirstRemoteStoreListen(a)}}catch(d){const h=__PRIVATE_wrapInUserErrorIfRecoverable(d,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(h)}s.queries.set(a,c),c.j_.push(e),e.Z_(s.onlineState),c.z_&&e.X_(c.z_)&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}async function __PRIVATE_eventManagerUnlisten(i,e){const s=__PRIVATE_debugCast(i),o=e.query;let a=3;const c=s.queries.get(o);if(c){const d=c.j_.indexOf(e);d>=0&&(c.j_.splice(d,1),c.j_.length===0?a=e.J_()?0:1:!c.H_()&&e.J_()&&(a=2))}switch(a){case 0:return s.queries.delete(o),s.onUnlisten(o,!0);case 1:return s.queries.delete(o),s.onUnlisten(o,!1);case 2:return s.onLastRemoteStoreUnlisten(o);default:return}}function __PRIVATE_eventManagerOnWatchChange(i,e){const s=__PRIVATE_debugCast(i);let o=!1;for(const a of e){const c=a.query,d=s.queries.get(c);if(d){for(const h of d.j_)h.X_(a)&&(o=!0);d.z_=a}}o&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}function __PRIVATE_eventManagerOnWatchError(i,e,s){const o=__PRIVATE_debugCast(i),a=o.queries.get(e);if(a)for(const c of a.j_)c.onError(s);o.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(i){i.Y_.forEach(e=>{e.next()})}var pe,ye;(ye=pe||(pe={})).ea="default",ye.Cache="cache";class __PRIVATE_QueryListener{constructor(e,s,o){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=o||{}}X_(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const o=s!=="Offline";return(!this.options._a||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==pe.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Aa=__PRIVATE_newQueryComparator(e),this.Ra=new DocumentSet(this.Aa)}get Va(){return this.Ta}ma(e,s){const o=s?s.fa:new __PRIVATE_DocumentChangeSet,a=s?s.Ra:this.Ra;let c=s?s.mutatedKeys:this.mutatedKeys,d=a,h=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,j=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(($,_)=>{const et=a.get($),tt=__PRIVATE_queryMatches(this.query,_)?_:null,it=!!et&&this.mutatedKeys.has(et.key),ot=!!tt&&(tt.hasLocalMutations||this.mutatedKeys.has(tt.key)&&tt.hasCommittedMutations);let at=!1;et&&tt?et.data.isEqual(tt.data)?it!==ot&&(o.track({type:3,doc:tt}),at=!0):this.ga(et,tt)||(o.track({type:2,doc:tt}),at=!0,(g&&this.Aa(tt,g)>0||j&&this.Aa(tt,j)<0)&&(h=!0)):!et&&tt?(o.track({type:0,doc:tt}),at=!0):et&&!tt&&(o.track({type:1,doc:et}),at=!0,(g||j)&&(h=!0)),at&&(tt?(d=d.add(tt),c=ot?c.add($):c.delete($)):(d=d.delete($),c=c.delete($)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const $=this.query.limitType==="F"?d.last():d.first();d=d.delete($.key),c=c.delete($.key),o.track({type:1,doc:$})}return{Ra:d,fa:o,ns:h,mutatedKeys:c}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,o,a){const c=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(($,_)=>function(tt,it){const ot=at=>{switch(at){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail()}};return ot(tt)-ot(it)}($.type,_.type)||this.Aa($.doc,_.doc)),this.pa(o),a=a!=null&&a;const h=s&&!a?this.ya():[],g=this.da.size===0&&this.current&&!a?1:0,j=g!==this.Ea;return this.Ea=g,d.length!==0||j?{snapshot:new ViewSnapshot(this.query,e.Ra,c,d,e.mutatedKeys,g===0,j,!1,!!o&&o.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(s=>this.Ta=this.Ta.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ta=this.Ta.delete(s)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=__PRIVATE_documentKeySet(),this.Ra.forEach(o=>{this.Sa(o.key)&&(this.da=this.da.add(o.key))});const s=[];return e.forEach(o=>{this.da.has(o)||s.push(new __PRIVATE_RemovedLimboDocument(o))}),this.da.forEach(o=>{e.has(o)||s.push(new __PRIVATE_AddedLimboDocument(o))}),s}ba(e){this.Ta=e.Ts,this.da=__PRIVATE_documentKeySet();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return ViewSnapshot.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class __PRIVATE_QueryView{constructor(e,s,o){this.query=e,this.targetId=s,this.view=o}}class LimboResolution{constructor(e){this.key=e,this.va=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,s,o,a,c,d){this.localStore=e,this.remoteStore=s,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new ObjectMap(h=>__PRIVATE_canonifyQuery(h),__PRIVATE_queryEquals),this.Ma=new Map,this.xa=new Set,this.Oa=new SortedMap(DocumentKey.comparator),this.Na=new Map,this.La=new __PRIVATE_ReferenceSet,this.Ba={},this.ka=new Map,this.qa=__PRIVATE_TargetIdGenerator.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function __PRIVATE_syncEngineListen(i,e,s=!0){const o=__PRIVATE_ensureWatchCallbacks(i);let a;const c=o.Fa.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Da()):a=await __PRIVATE_allocateTargetAndMaybeListen(o,e,s,!0),a}async function __PRIVATE_triggerRemoteStoreListen(i,e){const s=__PRIVATE_ensureWatchCallbacks(i);await __PRIVATE_allocateTargetAndMaybeListen(s,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(i,e,s,o){const a=await __PRIVATE_localStoreAllocateTarget(i.localStore,__PRIVATE_queryToTarget(e)),c=a.targetId,d=i.sharedClientState.addLocalQueryTarget(c,s);let h;return o&&(h=await __PRIVATE_initializeViewAndComputeSnapshot(i,e,c,d==="current",a.resumeToken)),i.isPrimaryClient&&s&&__PRIVATE_remoteStoreListen(i.remoteStore,a),h}async function __PRIVATE_initializeViewAndComputeSnapshot(i,e,s,o,a){i.Ka=(_,et,tt)=>async function(ot,at,rt,st){let lt=at.view.ma(rt);lt.ns&&(lt=await __PRIVATE_localStoreExecuteQuery(ot.localStore,at.query,!1).then(({documents:dt})=>at.view.ma(dt,lt)));const mt=st&&st.targetChanges.get(at.targetId),ft=st&&st.targetMismatches.get(at.targetId)!=null,gt=at.view.applyChanges(lt,ot.isPrimaryClient,mt,ft);return __PRIVATE_updateTrackedLimbos(ot,at.targetId,gt.wa),gt.snapshot}(i,_,et,tt);const c=await __PRIVATE_localStoreExecuteQuery(i.localStore,e,!0),d=new __PRIVATE_View(e,c.Ts),h=d.ma(c.documents),g=TargetChange.createSynthesizedTargetChangeForCurrentChange(s,o&&i.onlineState!=="Offline",a),j=d.applyChanges(h,i.isPrimaryClient,g);__PRIVATE_updateTrackedLimbos(i,s,j.wa);const $=new __PRIVATE_QueryView(e,s,d);return i.Fa.set(e,$),i.Ma.has(s)?i.Ma.get(s).push(e):i.Ma.set(s,[e]),j.snapshot}async function __PRIVATE_syncEngineUnlisten(i,e,s){const o=__PRIVATE_debugCast(i),a=o.Fa.get(e),c=o.Ma.get(a.targetId);if(c.length>1)return o.Ma.set(a.targetId,c.filter(d=>!__PRIVATE_queryEquals(d,e))),void o.Fa.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||await __PRIVATE_localStoreReleaseTarget(o.localStore,a.targetId,!1).then(()=>{o.sharedClientState.clearQueryState(a.targetId),s&&__PRIVATE_remoteStoreUnlisten(o.remoteStore,a.targetId),__PRIVATE_removeAndCleanupTarget(o,a.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(o,a.targetId),await __PRIVATE_localStoreReleaseTarget(o.localStore,a.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(i,e){const s=__PRIVATE_debugCast(i),o=s.Fa.get(e),a=s.Ma.get(o.targetId);s.isPrimaryClient&&a.length===1&&(s.sharedClientState.removeLocalQueryTarget(o.targetId),__PRIVATE_remoteStoreUnlisten(s.remoteStore,o.targetId))}async function __PRIVATE_syncEngineWrite(i,e,s){const o=__PRIVATE_syncEngineEnsureWriteCallbacks(i);try{const a=await function(d,h){const g=__PRIVATE_debugCast(d),j=Timestamp.now(),$=h.reduce((tt,it)=>tt.add(it.key),__PRIVATE_documentKeySet());let _,et;return g.persistence.runTransaction("Locally write mutations","readwrite",tt=>{let it=__PRIVATE_mutableDocumentMap(),ot=__PRIVATE_documentKeySet();return g.cs.getEntries(tt,$).next(at=>{it=at,it.forEach((rt,st)=>{st.isValidDocument()||(ot=ot.add(rt))})}).next(()=>g.localDocuments.getOverlayedDocuments(tt,it)).next(at=>{_=at;const rt=[];for(const st of h){const lt=__PRIVATE_mutationExtractBaseValue(st,_.get(st.key).overlayedDocument);lt!=null&&rt.push(new __PRIVATE_PatchMutation(st.key,lt,__PRIVATE_extractFieldMask(lt.value.mapValue),Precondition.exists(!0)))}return g.mutationQueue.addMutationBatch(tt,j,rt,h)}).next(at=>{et=at;const rt=at.applyToLocalDocumentSet(_,ot);return g.documentOverlayCache.saveOverlays(tt,at.batchId,rt)})}).then(()=>({batchId:et.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(_)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),function(d,h,g){let j=d.Ba[d.currentUser.toKey()];j||(j=new SortedMap(__PRIVATE_primitiveComparator)),j=j.insert(h,g),d.Ba[d.currentUser.toKey()]=j}(o,a.batchId,s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a.changes),await __PRIVATE_fillWritePipeline(o.remoteStore)}catch(a){const c=__PRIVATE_wrapInUserErrorIfRecoverable(a,"Failed to persist write");s.reject(c)}}async function __PRIVATE_syncEngineApplyRemoteEvent(i,e){const s=__PRIVATE_debugCast(i);try{const o=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(s.localStore,e);e.targetChanges.forEach((a,c)=>{const d=s.Na.get(c);d&&(__PRIVATE_hardAssert(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.va=!0:a.modifiedDocuments.size>0?__PRIVATE_hardAssert(d.va):a.removedDocuments.size>0&&(__PRIVATE_hardAssert(d.va),d.va=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o,e)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}function __PRIVATE_syncEngineApplyOnlineStateChange(i,e,s){const o=__PRIVATE_debugCast(i);if(o.isPrimaryClient&&s===0||!o.isPrimaryClient&&s===1){const a=[];o.Fa.forEach((c,d)=>{const h=d.view.Z_(e);h.snapshot&&a.push(h.snapshot)}),function(d,h){const g=__PRIVATE_debugCast(d);g.onlineState=h;let j=!1;g.queries.forEach(($,_)=>{for(const et of _.j_)et.Z_(h)&&(j=!0)}),j&&__PRIVATE_raiseSnapshotsInSyncEvent(g)}(o.eventManager,e),a.length&&o.Ca.d_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(i,e,s){const o=__PRIVATE_debugCast(i);o.sharedClientState.updateQueryState(e,"rejected",s);const a=o.Na.get(e),c=a&&a.key;if(c){let d=new SortedMap(DocumentKey.comparator);d=d.insert(c,MutableDocument.newNoDocument(c,SnapshotVersion.min()));const h=__PRIVATE_documentKeySet().add(c),g=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),d,h);await __PRIVATE_syncEngineApplyRemoteEvent(o,g),o.Oa=o.Oa.remove(c),o.Na.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(o)}else await __PRIVATE_localStoreReleaseTarget(o.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(o,e,s)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(i,e){const s=__PRIVATE_debugCast(i),o=e.batch.batchId;try{const a=await __PRIVATE_localStoreAcknowledgeBatch(s.localStore,e);__PRIVATE_processUserCallback(s,o,null),__PRIVATE_triggerPendingWritesCallbacks(s,o),s.sharedClientState.updateMutationState(o,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}async function __PRIVATE_syncEngineRejectFailedWrite(i,e,s){const o=__PRIVATE_debugCast(i);try{const a=await function(d,h){const g=__PRIVATE_debugCast(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let $;return g.mutationQueue.lookupMutationBatch(j,h).next(_=>(__PRIVATE_hardAssert(_!==null),$=_.keys(),g.mutationQueue.removeMutationBatch(j,_))).next(()=>g.mutationQueue.performConsistencyCheck(j)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(j,$,h)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,$)).next(()=>g.localDocuments.getDocuments(j,$))})}(o.localStore,e);__PRIVATE_processUserCallback(o,e,s),__PRIVATE_triggerPendingWritesCallbacks(o,e),o.sharedClientState.updateMutationState(e,"rejected",s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_triggerPendingWritesCallbacks(i,e){(i.ka.get(e)||[]).forEach(s=>{s.resolve()}),i.ka.delete(e)}function __PRIVATE_processUserCallback(i,e,s){const o=__PRIVATE_debugCast(i);let a=o.Ba[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(s?c.reject(s):c.resolve(),a=a.remove(e)),o.Ba[o.currentUser.toKey()]=a}}function __PRIVATE_removeAndCleanupTarget(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Ma.get(e))i.Fa.delete(o),s&&i.Ca.$a(o,s);i.Ma.delete(e),i.isPrimaryClient&&i.La.gr(e).forEach(o=>{i.La.containsKey(o)||__PRIVATE_removeLimboTarget(i,o)})}function __PRIVATE_removeLimboTarget(i,e){i.xa.delete(e.path.canonicalString());const s=i.Oa.get(e);s!==null&&(__PRIVATE_remoteStoreUnlisten(i.remoteStore,s),i.Oa=i.Oa.remove(e),i.Na.delete(s),__PRIVATE_pumpEnqueuedLimboResolutions(i))}function __PRIVATE_updateTrackedLimbos(i,e,s){for(const o of s)o instanceof __PRIVATE_AddedLimboDocument?(i.La.addReference(o.key,e),__PRIVATE_trackLimboChange(i,o)):o instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug("SyncEngine","Document no longer in limbo: "+o.key),i.La.removeReference(o.key,e),i.La.containsKey(o.key)||__PRIVATE_removeLimboTarget(i,o.key)):fail()}function __PRIVATE_trackLimboChange(i,e){const s=e.key,o=s.path.canonicalString();i.Oa.get(s)||i.xa.has(o)||(__PRIVATE_logDebug("SyncEngine","New document in limbo: "+s),i.xa.add(o),__PRIVATE_pumpEnqueuedLimboResolutions(i))}function __PRIVATE_pumpEnqueuedLimboResolutions(i){for(;i.xa.size>0&&i.Oa.size<i.maxConcurrentLimboResolutions;){const e=i.xa.values().next().value;i.xa.delete(e);const s=new DocumentKey(ResourcePath.fromString(e)),o=i.qa.next();i.Na.set(o,new LimboResolution(s)),i.Oa=i.Oa.insert(s,o),__PRIVATE_remoteStoreListen(i.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(s.path)),o,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.oe))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(i,e,s){const o=__PRIVATE_debugCast(i),a=[],c=[],d=[];o.Fa.isEmpty()||(o.Fa.forEach((h,g)=>{d.push(o.Ka(g,e,s).then(j=>{var $;if((j||s)&&o.isPrimaryClient){const _=j?!j.fromCache:($=s==null?void 0:s.targetChanges.get(g.targetId))===null||$===void 0?void 0:$.current;o.sharedClientState.updateQueryState(g.targetId,_?"current":"not-current")}if(j){a.push(j);const _=__PRIVATE_LocalViewChanges.Wi(g.targetId,j);c.push(_)}}))}),await Promise.all(d),o.Ca.d_(a),await async function(g,j){const $=__PRIVATE_debugCast(g);try{await $.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>PersistencePromise.forEach(j,et=>PersistencePromise.forEach(et.$i,tt=>$.persistence.referenceDelegate.addReference(_,et.targetId,tt)).next(()=>PersistencePromise.forEach(et.Ui,tt=>$.persistence.referenceDelegate.removeReference(_,et.targetId,tt)))))}catch(_){if(!__PRIVATE_isIndexedDbTransactionError(_))throw _;__PRIVATE_logDebug("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of j){const et=_.targetId;if(!_.fromCache){const tt=$.os.get(et),it=tt.snapshotVersion,ot=tt.withLastLimboFreeSnapshotVersion(it);$.os=$.os.insert(et,ot)}}}(o.localStore,c))}async function __PRIVATE_syncEngineHandleCredentialChange(i,e){const s=__PRIVATE_debugCast(i);if(!s.currentUser.isEqual(e)){__PRIVATE_logDebug("SyncEngine","User change. New user:",e.toKey());const o=await __PRIVATE_localStoreHandleUserChange(s.localStore,e);s.currentUser=e,function(c,d){c.ka.forEach(h=>{h.forEach(g=>{g.reject(new FirestoreError(D.CANCELLED,d))})}),c.ka.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o.hs)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(i,e){const s=__PRIVATE_debugCast(i),o=s.Na.get(e);if(o&&o.va)return __PRIVATE_documentKeySet().add(o.key);{let a=__PRIVATE_documentKeySet();const c=s.Ma.get(e);if(!c)return a;for(const d of c){const h=s.Fa.get(d);a=a.unionWith(h.view.Va)}return a}}function __PRIVATE_ensureWatchCallbacks(i){const e=__PRIVATE_debugCast(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Ca.d_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Ca.$a=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(i){const e=__PRIVATE_debugCast(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Ga(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Zr,this.serializer)}Wa(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class OnlineComponentProvider{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const s=__PRIVATE_newSerializer(e.databaseInfo.databaseId),o=function(c){return new __PRIVATE_WebChannelConnection(c)}(e.databaseInfo);return function(c,d,h,g){return new __PRIVATE_DatastoreImpl(c,d,h,g)}(e.authCredentials,e.appCheckCredentials,o,s)}createRemoteStore(e){return function(o,a,c,d,h){return new __PRIVATE_RemoteStoreImpl(o,a,c,d,h)}(this.localStore,this.datastore,e.asyncQueue,s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,0),function(){return __PRIVATE_BrowserConnectivityMonitor.D()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,s){return function(a,c,d,h,g,j,$){const _=new __PRIVATE_SyncEngineImpl(a,c,d,h,g,j);return $&&(_.Qa=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(a){const c=__PRIVATE_debugCast(a);__PRIVATE_logDebug("RemoteStore","RemoteStore shutting down."),c.L_.add(5),await __PRIVATE_disableNetworkInternal(c),c.k_.shutdown(),c.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreClient{constructor(e,s,o,a,c){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=o,this.databaseInfo=a,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,async d=>{__PRIVATE_logDebug("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(o,d=>(__PRIVATE_logDebug("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const o=__PRIVATE_wrapInUserErrorIfRecoverable(s,"Failed to shutdown persistence");e.reject(o)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(i,e){i.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("FirestoreClient","Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let o=s.initialUser;i.setCredentialChangeListener(async a=>{o.isEqual(a)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,a),o=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(i,e){i.asyncQueue.verifyOperationInProgress();const s=await __PRIVATE_ensureOfflineComponents(i);__PRIVATE_logDebug("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener(o=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,a)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a)),i._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){__PRIVATE_logDebug("FirestoreClient","Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(a){return a.name==="FirebaseError"?a.code===D.FAILED_PRECONDITION||a.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(s))throw s;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+s),await __PRIVATE_setOfflineComponentProvider(i,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug("FirestoreClient","Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(i,new __PRIVATE_MemoryOfflineComponentProvider);return i._offlineComponents}async function __PRIVATE_ensureOnlineComponents(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(__PRIVATE_logDebug("FirestoreClient","Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(i,i._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug("FirestoreClient","Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(i,new OnlineComponentProvider))),i._onlineComponents}function __PRIVATE_getSyncEngine(i){return __PRIVATE_ensureOnlineComponents(i).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(i){const e=await __PRIVATE_ensureOnlineComponents(i),s=e.eventManager;return s.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),s.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),s}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(i,e,s={}){const o=new __PRIVATE_Deferred;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,h,g,j){const $=new __PRIVATE_AsyncObserver({next:et=>{$.Za(),d.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(c,_));const tt=et.docs.has(h);!tt&&et.fromCache?j.reject(new FirestoreError(D.UNAVAILABLE,"Failed to get document because the client is offline.")):tt&&et.fromCache&&g&&g.source==="server"?j.reject(new FirestoreError(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(et)},error:et=>j.reject(et)}),_=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(h.path),$,{includeMetadataChanges:!0,_a:!0});return __PRIVATE_eventManagerListen(c,_)}(await __PRIVATE_getEventManager(i),i.asyncQueue,e,s,o)),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(i,e,s){if(!s)throw new FirestoreError(D.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(i,e,s,o){if(e===!0&&o===!0)throw new FirestoreError(D.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function __PRIVATE_validateDocumentPath(i){if(!DocumentKey.isDocumentKey(i))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function __PRIVATE_validateCollectionPath(i){if(DocumentKey.isDocumentKey(i))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function __PRIVATE_valueDescription(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(o){return o.constructor?o.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":fail()}function __PRIVATE_cast(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new FirestoreError(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=__PRIVATE_valueDescription(i);throw new FirestoreError(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreSettingsImpl{constructor(e){var s,o;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new FirestoreError(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(o,a){return o.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,s,o,a){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),e.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(o.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new FirestoreError(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const o=we.get(s);o&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),we.delete(s),o.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(i,e,s,o={}){var a;const c=(i=__PRIVATE_cast(i,Firestore$1))._getSettings(),d=`${e}:${s}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),o.mockUserToken){let h,g;if(typeof o.mockUserToken=="string")h=o.mockUserToken,g=User.MOCK_USER;else{h=createMockUserToken(o.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const j=o.mockUserToken.sub||o.mockUserToken.user_id;if(!j)throw new FirestoreError(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new User(j)}i._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(h,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,s,o){this.converter=s,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,s,o){this.converter=s,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}}class CollectionReference extends Query{constructor(e,s,o){super(e,s,__PRIVATE_newQueryForPath(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(i,e,...s){if(i=getModularInstance(i),__PRIVATE_validateNonEmptyArgument("collection","path",e),i instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateCollectionPath(o),new CollectionReference(i,null,o)}{if(!(i instanceof DocumentReference||i instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateCollectionPath(o),new CollectionReference(i.firestore,null,o)}}function doc(i,e,...s){if(i=getModularInstance(i),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),i instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateDocumentPath(o),new DocumentReference(i,null,new DocumentKey(o))}{if(!(i instanceof DocumentReference||i instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateDocumentPath(o),new DocumentReference(i.firestore,i instanceof CollectionReference?i.converter:null,new DocumentKey(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.Vu=()=>{const o=getDocument$1();o&&__PRIVATE_logDebug("AsyncQueue","Visibility state changed to "+o.visibilityState),this.t_.jo()},this.mu=e;const s=getDocument$1();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=getDocument$1();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const s=new __PRIVATE_Deferred;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const s=this.mu.then(()=>(this.du=!0,e().catch(o=>{this.Eu=o,this.du=!1;const a=function(d){let h=d.message||"";return d.stack&&(h=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),h}(o);throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",a),o}).then(o=>(this.du=!1,o))));return this.mu=s,s}enqueueAfterDelay(e,s,o){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const a=DelayedOperation.createAndSchedule(this,e,s,o,c=>this.yu(c));return this.Tu.push(a),a}fu(){this.Eu&&fail()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((s,o)=>s.targetTimeMs-o.targetTimeMs);for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}class Firestore extends Firestore$1{constructor(e,s,o,a){super(e,s,o,a),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(i,e){const s=typeof i=="object"?i:getApp(),o=typeof i=="string"?i:"(default)",a=_getProvider(s,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=getDefaultEmulatorHostnameAndPort("firestore");c&&connectFirestoreEmulator(a,...c)}return a}function ensureFirestoreConfigured(i){if(i._terminated)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||__PRIVATE_configureFirestore(i),i._firestoreClient}function __PRIVATE_configureFirestore(i){var e,s,o;const a=i._freezeSettings(),c=function(h,g,j,$){return new DatabaseInfo(h,g,j,$.host,$.ssl,$.experimentalForceLongPolling,$.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions($.experimentalLongPollingOptions),$.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((s=a.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((o=a.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new FirestoreClient(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(h){const g=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(g),_online:g}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(s){throw new FirestoreError(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new FirestoreError(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be=/^__.*__$/;class ParsedSetData{constructor(e,s,o){this.data=e,this.fieldMask=s,this.fieldTransforms=o}toMutation(e,s){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,s,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,s,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,s,o){this.data=e,this.fieldMask=s,this.fieldTransforms=o}toMutation(e,s){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function __PRIVATE_isWrite(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail()}}class __PRIVATE_ParseContextImpl{constructor(e,s,o,a,c,d){this.settings=e,this.databaseId=s,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.vu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const o=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Fu({path:o,xu:!1});return a.Ou(e),a}Nu(e){var s;const o=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Fu({path:o,xu:!1});return a.vu(),a}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(__PRIVATE_isWrite(this.Cu)&&be.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,s,o){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=o||__PRIVATE_newSerializer(e)}Qu(e,s,o,a=!1){return new __PRIVATE_ParseContextImpl({Cu:e,methodName:s,qu:o,path:FieldPath$1.emptyPath(),xu:!1,ku:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(i){const e=i._freezeSettings(),s=__PRIVATE_newSerializer(i._databaseId);return new __PRIVATE_UserDataReader(i._databaseId,!!e.ignoreUndefinedProperties,s)}function __PRIVATE_parseSetData(i,e,s,o,a,c={}){const d=i.Qu(c.merge||c.mergeFields?2:0,e,s,a);__PRIVATE_validatePlainObject("Data must be an object, but it was:",d,o);const h=__PRIVATE_parseObject(o,d);let g,j;if(c.merge)g=new FieldMask(d.fieldMask),j=d.fieldTransforms;else if(c.mergeFields){const $=[];for(const _ of c.mergeFields){const et=__PRIVATE_fieldPathFromArgument$1(e,_,s);if(!d.contains(et))throw new FirestoreError(D.INVALID_ARGUMENT,`Field '${et}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains($,et)||$.push(et)}g=new FieldMask($),j=d.fieldTransforms.filter(_=>g.covers(_.field))}else g=null,j=d.fieldTransforms;return new ParsedSetData(new ObjectValue(h),g,j)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_parseUpdateData(i,e,s,o){const a=i.Qu(1,e,s);__PRIVATE_validatePlainObject("Data must be an object, but it was:",a,o);const c=[],d=ObjectValue.empty();forEach(o,(g,j)=>{const $=__PRIVATE_fieldPathFromDotSeparatedString(e,g,s);j=getModularInstance(j);const _=a.Nu($);if(j instanceof __PRIVATE_DeleteFieldValueImpl)c.push($);else{const et=__PRIVATE_parseData(j,_);et!=null&&(c.push($),d.set($,et))}});const h=new FieldMask(c);return new ParsedUpdateData(d,h,a.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(i,e,s,o,a,c){const d=i.Qu(1,e,s),h=[__PRIVATE_fieldPathFromArgument$1(e,o,s)],g=[a];if(c.length%2!=0)throw new FirestoreError(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let et=0;et<c.length;et+=2)h.push(__PRIVATE_fieldPathFromArgument$1(e,c[et])),g.push(c[et+1]);const j=[],$=ObjectValue.empty();for(let et=h.length-1;et>=0;--et)if(!__PRIVATE_fieldMaskContains(j,h[et])){const tt=h[et];let it=g[et];it=getModularInstance(it);const ot=d.Nu(tt);if(it instanceof __PRIVATE_DeleteFieldValueImpl)j.push(tt);else{const at=__PRIVATE_parseData(it,ot);at!=null&&(j.push(tt),$.set(tt,at))}}const _=new FieldMask(j);return new ParsedUpdateData($,_,d.fieldTransforms)}function __PRIVATE_parseData(i,e){if(__PRIVATE_looksLikeJsonObject(i=getModularInstance(i)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,i),__PRIVATE_parseObject(i,e);if(i instanceof FieldValue)return function(o,a){if(!__PRIVATE_isWrite(a.Cu))throw a.Bu(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Bu(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(o,a){const c=[];let d=0;for(const h of o){let g=__PRIVATE_parseData(h,a.Lu(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}}(i,e)}return function(o,a){if((o=getModularInstance(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return toNumber(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=Timestamp.fromDate(o);return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof Timestamp){const c=new Timestamp(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof GeoPoint)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(a.serializer,o._byteString)};if(o instanceof DocumentReference){const c=a.databaseId,d=o.firestore._databaseId;if(!d.isEqual(c))throw a.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:__PRIVATE_toResourceName(o.firestore._databaseId||a.databaseId,o._key.path)}}if(o instanceof VectorValue)return function(d,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(g=>{if(typeof g!="number")throw h.Bu("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(h.serializer,g)})}}}}}}(o,a);throw a.Bu(`Unsupported field value: ${__PRIVATE_valueDescription(o)}`)}(i,e)}function __PRIVATE_parseObject(i,e){const s={};return isEmpty(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(i,(o,a)=>{const c=__PRIVATE_parseData(a,e.Mu(o));c!=null&&(s[o]=c)}),{mapValue:{fields:s}}}function __PRIVATE_looksLikeJsonObject(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Timestamp||i instanceof GeoPoint||i instanceof Bytes||i instanceof DocumentReference||i instanceof FieldValue||i instanceof VectorValue)}function __PRIVATE_validatePlainObject(i,e,s){if(!__PRIVATE_looksLikeJsonObject(s)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(s)){const o=__PRIVATE_valueDescription(s);throw o==="an object"?e.Bu(i+" a custom object"):e.Bu(i+" "+o)}}function __PRIVATE_fieldPathFromArgument$1(i,e,s){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(i,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",i,!1,void 0,s)}const De=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(i,e,s){if(e.search(De)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function __PRIVATE_createError(i,e,s,o,a){const c=o&&!o.isEmpty(),d=a!==void 0;let h=`Function ${e}() called with invalid data`;s&&(h+=" (via `toFirestore()`)"),h+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${o}`),d&&(g+=` in document ${a}`),g+=")"),new FirestoreError(D.INVALID_ARGUMENT,h+i+g)}function __PRIVATE_fieldMaskContains(i,e){return i.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,s,o,a,c){this._firestore=e,this._userDataWriter=s,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(i,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(i,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}class AbstractUserDataWriter{convertValue(e,s="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw fail()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const o={};return forEach(e,(a,c)=>{o[a]=this.convertValue(c,s)}),o}convertVectorValue(e){var s,o,a;const c=(a=(o=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||o===void 0?void 0:o.values)===null||a===void 0?void 0:a.map(d=>__PRIVATE_normalizeNumber(d.doubleValue));return new VectorValue(c)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,s){return(e.values||[]).map(o=>this.convertValue(o,s))}convertServerTimestamp(e,s){switch(s){case"previous":const o=__PRIVATE_getPreviousValue(e);return o==null?null:this.convertValue(o,s);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const s=__PRIVATE_normalizeTimestamp(e);return new Timestamp(s.seconds,s.nanos)}convertDocumentKey(e,s){const o=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(o));const a=new DatabaseId(o.get(1),o.get(3)),c=new DocumentKey(o.popFirst(5));return a.isEqual(s)||__PRIVATE_logError(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(i,e,s){let o;return o=i?i.toFirestore(e):e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,s,o,a,c,d){super(e,s,o,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const o=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,s.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(i){i=__PRIVATE_cast(i,DocumentReference);const e=__PRIVATE_cast(i.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),i._key).then(s=>__PRIVATE_convertToDocSnapshot(e,i,s))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,s)}}function setDoc(i,e,s){i=__PRIVATE_cast(i,DocumentReference);const o=__PRIVATE_cast(i.firestore,Firestore),a=__PRIVATE_applyFirestoreDataConverter(i.converter,e);return executeWrite(o,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(o),"setDoc",i._key,a,i.converter!==null,s).toMutation(i._key,Precondition.none())])}function updateDoc(i,e,s,...o){i=__PRIVATE_cast(i,DocumentReference);const a=__PRIVATE_cast(i.firestore,Firestore),c=__PRIVATE_newUserDataReader(a);let d;return d=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(c,"updateDoc",i._key,e,s,o):__PRIVATE_parseUpdateData(c,"updateDoc",i._key,e),executeWrite(a,[d.toMutation(i._key,Precondition.exists(!0))])}function executeWrite(i,e){return function(o,a){const c=new __PRIVATE_Deferred;return o.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(o),a,c)),c.promise}(ensureFirestoreConfigured(i),e)}function __PRIVATE_convertToDocSnapshot(i,e,s){const o=s.docs.get(e._key),a=new __PRIVATE_ExpUserDataWriter(i);return new DocumentSnapshot(i,a,e._key,o,new SnapshotMetadata(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(a){S=a})(SDK_VERSION),_registerComponent(new Component("firestore",(o,{instanceIdentifier:a,options:c})=>{const d=o.getProvider("app").getImmediate(),h=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(o.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(o.getProvider("app-check-internal")),function(j,$){if(!Object.prototype.hasOwnProperty.apply(j.options,["projectId"]))throw new FirestoreError(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(j.options.projectId,$)}(d,a),d);return c=Object.assign({useFetchStreams:s},c),h._setSettings(c),h},"PUBLIC").setMultipleInstances(!0)),registerVersion(w,"4.7.3",e),registerVersion(w,"4.7.3","esm2017")})();const firebaseConfig={apiKey:"AIzaSyDh2ZM3zIVKjuTGJsc-aCpfpqkLXQWTkWI",authDomain:"kitabuai.firebaseapp.com",projectId:"kitabuai",storageBucket:"kitabuai.appspot.com",messagingSenderId:"313416624091",appId:"1:313416624091:web:92b01a1cae4ee5f6ad69fe",measurementId:"G-SH4V2YLNPJ"},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app);collection(db,"quizQuestions");function r(i){var e,s,o="";if(typeof i=="string"||typeof i=="number")o+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(e=0;e<a;e++)i[e]&&(s=r(i[e]))&&(o&&(o+=" "),o+=s)}else for(s in i)i[s]&&(o&&(o+=" "),o+=s);return o}function clsx(){for(var i,e,s=0,o="",a=arguments.length;s<a;s++)(i=arguments[s])&&(e=r(i))&&(o&&(o+=" "),o+=e);return o}const Arrow=({direction:i,className:e})=>jsxRuntimeExports.jsx("span",{className:clsx("text-2xl font-bold leading-none select-none",e),children:i==="left"?"":""}),BackButton=({className:i="",customPath:e})=>{const s=useNavigate(),o=()=>{s(e||-1)};return jsxRuntimeExports.jsx("button",{onClick:o,className:`text-gray-600 hover:text-gray-800 transition-colors ${i}`,"aria-label":"Go back",children:jsxRuntimeExports.jsx(Arrow,{direction:"left"})})},SignIn=()=>{const i=useNavigate(),[e,s]=reactExports.useState({email:"",password:""}),[o,a]=reactExports.useState(""),c=h=>{s(g=>({...g,[h.target.name]:h.target.value}))},d=async h=>{h.preventDefault(),a("");try{await signInWithEmailAndPassword(auth,e.email,e.password),i("/home")}catch(g){a(g instanceof Error?g.message:"An error occurred")}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-[#FDF8FF] flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative",children:[jsxRuntimeExports.jsx(BackButton,{className:"absolute top-8 left-8 text-gray-600"}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-black",children:"KITABU"}),jsxRuntimeExports.jsx("span",{className:"text-green-500",children:".AI"})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome Back!"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Sign in to continue your learning journey"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:d,className:"space-y-6",children:[o&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",placeholder:"you@example.com",value:e.email,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-1",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),jsxRuntimeExports.jsx(Link,{to:"/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot password?"})]}),jsxRuntimeExports.jsx("input",{type:"password",name:"password",placeholder:"Enter your password",value:e.password,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full bg-black text-white py-3 rounded-lg font-medium hover:bg-gray-800 transition-colors",children:"Sign In"}),jsxRuntimeExports.jsxs("div",{className:"relative my-6",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-gray-300"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center text-sm",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-white text-gray-500",children:"OR CONTINUE WITH"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx("button",{type:"button",className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Google"}),jsxRuntimeExports.jsx("button",{type:"button",className:"flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Facebook"})]}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Don't have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/signup",className:"text-blue-600 hover:underline",children:"Sign up"})]})]})]})})},SignUp=()=>{const i=useNavigate(),[e,s]=reactExports.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",gender:"",grade:"8"}),[o,a]=reactExports.useState(""),c=h=>{s(g=>({...g,[h.target.name]:h.target.value}))},d=async h=>{if(h.preventDefault(),a(""),e.password!==e.confirmPassword){a("Passwords do not match");return}try{const g=await createUserWithEmailAndPassword(auth,e.email,e.password);await setDoc(doc(db,"users",g.user.uid),{firstName:e.firstName,lastName:e.lastName,email:e.email,phoneNumber:e.phoneNumber,gender:e.gender,grade:e.grade,createdAt:new Date().toISOString()}),i("/home")}catch(g){a(g instanceof Error?g.message:"An error occurred")}};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-[#FDF8FF] flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md relative",children:[jsxRuntimeExports.jsx(BackButton,{className:"absolute top-8 left-8 text-gray-600"}),jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-black",children:"KITABU"}),jsxRuntimeExports.jsx("span",{className:"text-green-500",children:".AI"})]}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Your AI Learning Partner"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Create your account and start your personalized learning journey"})]}),jsxRuntimeExports.jsxs("form",{onSubmit:d,className:"space-y-6",children:[o&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm text-center",children:o}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),jsxRuntimeExports.jsx("input",{type:"text",name:"firstName",placeholder:"Enter your first name",value:e.firstName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),jsxRuntimeExports.jsx("input",{type:"text",name:"lastName",placeholder:"Enter your last name",value:e.lastName,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",placeholder:"you@example.com",value:e.email,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),jsxRuntimeExports.jsx("input",{type:"tel",name:"phoneNumber",placeholder:"Your phone number",value:e.phoneNumber,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),jsxRuntimeExports.jsx("input",{type:"password",name:"password",placeholder:"Create a secure password",value:e.password,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),jsxRuntimeExports.jsx("input",{type:"password",name:"confirmPassword",placeholder:"Repeat your password",value:e.confirmPassword,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-4",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"gender",value:"male",checked:e.gender==="male",onChange:c,className:"mr-2"}),jsxRuntimeExports.jsx("span",{children:"Male"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"gender",value:"female",checked:e.gender==="female",onChange:c,className:"mr-2"}),jsxRuntimeExports.jsx("span",{children:"Female"})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"radio",name:"gender",value:"prefer-not-to-say",checked:e.gender==="prefer-not-to-say",onChange:c,className:"mr-2"}),jsxRuntimeExports.jsx("span",{children:"Prefer not to say"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade"}),jsxRuntimeExports.jsx("select",{name:"grade",value:e.grade,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:jsxRuntimeExports.jsx("option",{value:"8",children:"GRADE 8"})})]}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full bg-black text-white py-3 rounded-md font-medium hover:bg-gray-800 transition-colors",children:"Start Learning Now"}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-gray-600 mt-4",children:["Already have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/signin",className:"text-blue-600 hover:underline",children:"Sign in"})]})]})]})})},MotionConfigContext=reactExports.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"}),MotionContext=reactExports.createContext({}),PresenceContext=reactExports.createContext(null),isBrowser$1=typeof document<"u",useIsomorphicLayoutEffect$1=isBrowser$1?reactExports.useLayoutEffect:reactExports.useEffect,LazyContext=reactExports.createContext({strict:!1}),camelToDash=i=>i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId);function useVisualElement(i,e,s,o){const{visualElement:a}=reactExports.useContext(MotionContext),c=reactExports.useContext(LazyContext),d=reactExports.useContext(PresenceContext),h=reactExports.useContext(MotionConfigContext).reducedMotion,g=reactExports.useRef();o=o||c.renderer,!g.current&&o&&(g.current=o(i,{visualState:e,parent:a,props:s,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:h}));const j=g.current;reactExports.useInsertionEffect(()=>{j&&j.update(s,d)});const $=reactExports.useRef(!!(s[optimizedAppearDataAttribute]&&!window.HandoffComplete));return useIsomorphicLayoutEffect$1(()=>{j&&(j.render(),$.current&&j.animationState&&j.animationState.animateChanges())}),reactExports.useEffect(()=>{j&&(j.updateFeatures(),!$.current&&j.animationState&&j.animationState.animateChanges(),$.current&&($.current=!1,window.HandoffComplete=!0))}),j}function isRefObject(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function useMotionRef(i,e,s){return reactExports.useCallback(o=>{o&&i.mount&&i.mount(o),e&&(o?e.mount(o):e.unmount()),s&&(typeof s=="function"?s(o):isRefObject(s)&&(s.current=o))},[e])}function isVariantLabel(i){return typeof i=="string"||Array.isArray(i)}function isAnimationControls(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(i){return isAnimationControls(i.animate)||variantProps.some(e=>isVariantLabel(i[e]))}function isVariantNode(i){return!!(isControllingVariants(i)||i.variants)}function getCurrentTreeVariants(i,e){if(isControllingVariants(i)){const{initial:s,animate:o}=i;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(o)?o:void 0}}return i.inherit!==!1?e:{}}function useCreateMotionContext(i){const{initial:e,animate:s}=getCurrentTreeVariants(i,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:s}),[variantLabelsAsDependency(e),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(i){return Array.isArray(i)?i.join(" "):i}const featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const i in featureProps)featureDefinitions[i]={isEnabled:e=>featureProps[i].some(s=>!!e[s])};function loadFeatures(i){for(const e in i)featureDefinitions[e]={...featureDefinitions[e],...i[e]}}const LayoutGroupContext=reactExports.createContext({}),SwitchLayoutGroupContext=reactExports.createContext({}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function createMotionComponent({preloadedFeatures:i,createVisualElement:e,useRender:s,useVisualState:o,Component:a}){i&&loadFeatures(i);function c(h,g){let j;const $={...reactExports.useContext(MotionConfigContext),...h,layoutId:useLayoutId(h)},{isStatic:_}=$,et=useCreateMotionContext(h),tt=o(h,_);if(!_&&isBrowser$1){et.visualElement=useVisualElement(a,tt,$,e);const it=reactExports.useContext(SwitchLayoutGroupContext),ot=reactExports.useContext(LazyContext).strict;et.visualElement&&(j=et.visualElement.loadFeatures($,ot,i,it))}return reactExports.createElement(MotionContext.Provider,{value:et},j&&et.visualElement?reactExports.createElement(j,{visualElement:et.visualElement,...$}):null,s(a,h,useMotionRef(tt,et.visualElement,g),tt,_,et.visualElement))}const d=reactExports.forwardRef(c);return d[motionComponentSymbol]=a,d}function useLayoutId({layoutId:i}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&i!==void 0?e+"-"+i:i}function createMotionProxy(i){function e(o,a={}){return createMotionComponent(i(o,a))}if(typeof Proxy>"u")return e;const s=new Map;return new Proxy(e,{get:(o,a)=>(s.has(a)||s.set(a,e(a)),s.get(a))})}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(i){return typeof i!="string"||i.includes("-")?!1:!!(lowercaseSVGElements.indexOf(i)>-1||/[A-Z]/.test(i))}const scaleCorrectors={};function addScaleCorrector(i){Object.assign(scaleCorrectors,i)}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder);function isForcedMotionValue(i,{layout:e,layoutId:s}){return transformProps.has(i)||i.startsWith("origin")||(e||s!==void 0)&&(!!scaleCorrectors[i]||i==="opacity")}const isMotionValue=i=>!!(i&&i.getVelocity),translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(i,{enableHardwareAcceleration:e=!0,allowTransformNone:s=!0},o,a){let c="";for(let d=0;d<numTransforms;d++){const h=transformPropOrder[d];if(i[h]!==void 0){const g=translateAlias[h]||h;c+=`${g}(${i[h]}) `}}return e&&!i.z&&(c+="translateZ(0)"),c=c.trim(),a?c=a(i,o?"":c):s&&o&&(c="none"),c}const checkStringStartsWith=i=>e=>typeof e=="string"&&e.startsWith(i),isCSSVariableName=checkStringStartsWith("--"),isCSSVariableToken=checkStringStartsWith("var(--"),cssVariableRegex=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,getValueAsType=(i,e)=>e&&typeof i=="number"?e.transform(i):i,clamp=(i,e,s)=>Math.min(Math.max(s,i),e),number$1={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},alpha={...number$1,transform:i=>clamp(0,1,i)},scale={...number$1,default:1},sanitize=i=>Math.round(i*1e5)/1e5,floatRegex=/(-)?([\d]*\.?[\d])+/g,colorRegex=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,singleColorRegex=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function isString$1(i){return typeof i=="string"}const createUnitType=i=>({test:e=>isString$1(e)&&e.endsWith(i)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${i}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:i=>percent.parse(i)/100,transform:i=>percent.transform(i*100)},int={...number$1,transform:Math.round},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,size:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int};function buildHTMLStyles(i,e,s,o){const{style:a,vars:c,transform:d,transformOrigin:h}=i;let g=!1,j=!1,$=!0;for(const _ in e){const et=e[_];if(isCSSVariableName(_)){c[_]=et;continue}const tt=numberValueTypes[_],it=getValueAsType(et,tt);if(transformProps.has(_)){if(g=!0,d[_]=it,!$)continue;et!==(tt.default||0)&&($=!1)}else _.startsWith("origin")?(j=!0,h[_]=it):a[_]=it}if(e.transform||(g||o?a.transform=buildTransform(i.transform,s,$,o):a.transform&&(a.transform="none")),j){const{originX:_="50%",originY:et="50%",originZ:tt=0}=h;a.transformOrigin=`${_} ${et} ${tt}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(i,e,s){for(const o in e)!isMotionValue(e[o])&&!isForcedMotionValue(o,s)&&(i[o]=e[o])}function useInitialMotionValues({transformTemplate:i},e,s){return reactExports.useMemo(()=>{const o=createHtmlRenderState();return buildHTMLStyles(o,e,{enableHardwareAcceleration:!s},i),Object.assign({},o.vars,o.style)},[e])}function useStyle(i,e,s){const o=i.style||{},a={};return copyRawValuesOnly(a,o,i),Object.assign(a,useInitialMotionValues(i,e,s)),i.transformValues?i.transformValues(a):a}function useHTMLProps(i,e,s){const o={},a=useStyle(i,e,s);return i.drag&&i.dragListener!==!1&&(o.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(o.tabIndex=0),o.style=a,o}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||validMotionProps.has(i)}let shouldForward=i=>!isValidMotionProp(i);function loadExternalIsValidProp(i){i&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):i(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(i,e,s){const o={};for(const a in i)a==="values"&&typeof i.values=="object"||(shouldForward(a)||s===!0&&isValidMotionProp(a)||!e&&!isValidMotionProp(a)||i.draggable&&a.startsWith("onDrag"))&&(o[a]=i[a]);return o}function calcOrigin$1(i,e,s){return typeof i=="string"?i:px.transform(e+s*i)}function calcSVGTransformOrigin(i,e,s){const o=calcOrigin$1(e,i.x,i.width),a=calcOrigin$1(s,i.y,i.height);return`${o} ${a}`}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(i,e,s=1,o=0,a=!0){i.pathLength=1;const c=a?dashKeys:camelKeys;i[c.offset]=px.transform(-o);const d=px.transform(e),h=px.transform(s);i[c.array]=`${d} ${h}`}function buildSVGAttrs(i,{attrX:e,attrY:s,attrScale:o,originX:a,originY:c,pathLength:d,pathSpacing:h=1,pathOffset:g=0,...j},$,_,et){if(buildHTMLStyles(i,j,$,et),_){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:tt,style:it,dimensions:ot}=i;tt.transform&&(ot&&(it.transform=tt.transform),delete tt.transform),ot&&(a!==void 0||c!==void 0||it.transform)&&(it.transformOrigin=calcSVGTransformOrigin(ot,a!==void 0?a:.5,c!==void 0?c:.5)),e!==void 0&&(tt.x=e),s!==void 0&&(tt.y=s),o!==void 0&&(tt.scale=o),d!==void 0&&buildSVGPath(tt,d,h,g,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=i=>typeof i=="string"&&i.toLowerCase()==="svg";function useSVGProps(i,e,s,o){const a=reactExports.useMemo(()=>{const c=createSvgRenderState();return buildSVGAttrs(c,e,{enableHardwareAcceleration:!1},isSVGTag(o),i.transformTemplate),{...c.attrs,style:{...c.style}}},[e]);if(i.style){const c={};copyRawValuesOnly(c,i.style,i),a.style={...c,...a.style}}return a}function createUseRender(i=!1){return(s,o,a,{latestValues:c},d)=>{const g=(isSVGComponent(s)?useSVGProps:useHTMLProps)(o,c,d,s),$={...filterProps(o,typeof s=="string",i),...g,ref:a},{children:_}=o,et=reactExports.useMemo(()=>isMotionValue(_)?_.get():_,[_]);return reactExports.createElement(s,{...$,children:et})}}function renderHTML(i,{style:e,vars:s},o,a){Object.assign(i.style,e,a&&a.getProjectionStyles(o));for(const c in s)i.style.setProperty(c,s[c])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(i,e,s,o){renderHTML(i,e,void 0,o);for(const a in e.attrs)i.setAttribute(camelCaseAttributes.has(a)?a:camelToDash(a),e.attrs[a])}function scrapeMotionValuesFromProps$1(i,e){const{style:s}=i,o={};for(const a in s)(isMotionValue(s[a])||e.style&&isMotionValue(e.style[a])||isForcedMotionValue(a,i))&&(o[a]=s[a]);return o}function scrapeMotionValuesFromProps(i,e){const s=scrapeMotionValuesFromProps$1(i,e);for(const o in i)if(isMotionValue(i[o])||isMotionValue(e[o])){const a=transformPropOrder.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;s[a]=i[o]}return s}function resolveVariantFromProps(i,e,s,o={},a={}){return typeof e=="function"&&(e=e(s!==void 0?s:i.custom,o,a)),typeof e=="string"&&(e=i.variants&&i.variants[e]),typeof e=="function"&&(e=e(s!==void 0?s:i.custom,o,a)),e}function useConstant(i){const e=reactExports.useRef(null);return e.current===null&&(e.current=i()),e.current}const isKeyframesTarget=i=>Array.isArray(i),isCustomValue=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),resolveFinalValueInKeyframes=i=>isKeyframesTarget(i)?i[i.length-1]||0:i;function resolveMotionValue(i){const e=isMotionValue(i)?i.get():i;return isCustomValue(e)?e.toValue():e}function makeState({scrapeMotionValuesFromProps:i,createRenderState:e,onMount:s},o,a,c){const d={latestValues:makeLatestValues(o,a,c,i),renderState:e()};return s&&(d.mount=h=>s(o,h,d)),d}const makeUseVisualState=i=>(e,s)=>{const o=reactExports.useContext(MotionContext),a=reactExports.useContext(PresenceContext),c=()=>makeState(i,e,o,a);return s?c():useConstant(c)};function makeLatestValues(i,e,s,o){const a={},c=o(i,{});for(const et in c)a[et]=resolveMotionValue(c[et]);let{initial:d,animate:h}=i;const g=isControllingVariants(i),j=isVariantNode(i);e&&j&&!g&&i.inherit!==!1&&(d===void 0&&(d=e.initial),h===void 0&&(h=e.animate));let $=s?s.initial===!1:!1;$=$||d===!1;const _=$?h:d;return _&&typeof _!="boolean"&&!isAnimationControls(_)&&(Array.isArray(_)?_:[_]).forEach(tt=>{const it=resolveVariantFromProps(i,tt);if(!it)return;const{transitionEnd:ot,transition:at,...rt}=it;for(const st in rt){let lt=rt[st];if(Array.isArray(lt)){const mt=$?lt.length-1:0;lt=lt[mt]}lt!==null&&(a[st]=lt)}for(const st in ot)a[st]=ot[st]}),a}const noop=i=>i;class Queue{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const s=this.order.indexOf(e);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function createRenderStep(i){let e=new Queue,s=new Queue,o=0,a=!1,c=!1;const d=new WeakSet,h={schedule:(g,j=!1,$=!1)=>{const _=$&&a,et=_?e:s;return j&&d.add(g),et.add(g)&&_&&a&&(o=e.order.length),g},cancel:g=>{s.remove(g),d.delete(g)},process:g=>{if(a){c=!0;return}if(a=!0,[e,s]=[s,e],s.clear(),o=e.order.length,o)for(let j=0;j<o;j++){const $=e.order[j];$(g),d.has($)&&(h.schedule($),i())}a=!1,c&&(c=!1,h.process(g))}};return h}const stepsOrder=["prepare","read","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(i,e){let s=!1,o=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=stepsOrder.reduce((_,et)=>(_[et]=createRenderStep(()=>s=!0),_),{}),d=_=>c[_].process(a),h=()=>{const _=performance.now();s=!1,a.delta=o?1e3/60:Math.max(Math.min(_-a.timestamp,maxElapsed),1),a.timestamp=_,a.isProcessing=!0,stepsOrder.forEach(d),a.isProcessing=!1,s&&e&&(o=!1,i(h))},g=()=>{s=!0,o=!0,a.isProcessing||i(h)};return{schedule:stepsOrder.reduce((_,et)=>{const tt=c[et];return _[et]=(it,ot=!1,at=!1)=>(s||g(),tt.schedule(it,ot,at)),_},{}),cancel:_=>stepsOrder.forEach(et=>c[et].cancel(_)),state:a,steps:c}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0),svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onMount:(i,e,{renderState:s,latestValues:o})=>{frame.read(()=>{try{s.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),frame.render(()=>{buildSVGAttrs(s,o,{enableHardwareAcceleration:!1},isSVGTag(e.tagName),i.transformTemplate),renderSVG(e,s)})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function createDomMotionConfig(i,{forwardMotionProps:e=!1},s,o){return{...isSVGComponent(i)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:s,useRender:createUseRender(e),createVisualElement:o,Component:i}}function addDomEvent(i,e,s,o={passive:!0}){return i.addEventListener(e,s,o),()=>i.removeEventListener(e,s)}const isPrimaryPointer=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1;function extractEventInfo(i,e="page"){return{point:{x:i[e+"X"],y:i[e+"Y"]}}}const addPointerInfo=i=>e=>isPrimaryPointer(e)&&i(e,extractEventInfo(e));function addPointerEvent(i,e,s,o){return addDomEvent(i,e,addPointerInfo(s),o)}const combineFunctions=(i,e)=>s=>e(i(s)),pipe=(...i)=>i.reduce(combineFunctions);function createLock(i){let e=null;return()=>{const s=()=>{e=null};return e===null?(e=i,s):!1}}const globalHorizontalLock=createLock("dragHorizontal"),globalVerticalLock=createLock("dragVertical");function getGlobalLock(i){let e=!1;if(i==="y")e=globalVerticalLock();else if(i==="x")e=globalHorizontalLock();else{const s=globalHorizontalLock(),o=globalVerticalLock();s&&o?e=()=>{s(),o()}:(s&&s(),o&&o())}return e}function isDragActive(){const i=getGlobalLock(!0);return i?(i(),!1):!0}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}function addHoverEvent(i,e){const s="pointer"+(e?"enter":"leave"),o="onHover"+(e?"Start":"End"),a=(c,d)=>{if(c.pointerType==="touch"||isDragActive())return;const h=i.getProps();i.animationState&&h.whileHover&&i.animationState.setActive("whileHover",e),h[o]&&frame.update(()=>h[o](c,d))};return addPointerEvent(i.current,s,a,{passive:!i.getProps()[o]})}class HoverGesture extends Feature{mount(){this.unmount=pipe(addHoverEvent(this.node,!0),addHoverEvent(this.node,!1))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const isNodeOrChild=(i,e)=>e?i===e?!0:isNodeOrChild(i,e.parentElement):!1;function fireSyntheticPointerEvent(i,e){if(!e)return;const s=new PointerEvent("pointer"+i);e(s,extractEventInfo(s))}class PressGesture extends Feature{constructor(){super(...arguments),this.removeStartListeners=noop,this.removeEndListeners=noop,this.removeAccessibleListeners=noop,this.startPointerPress=(e,s)=>{if(this.isPressing)return;this.removeEndListeners();const o=this.node.getProps(),c=addPointerEvent(window,"pointerup",(h,g)=>{if(!this.checkPressEnd())return;const{onTap:j,onTapCancel:$,globalTapTarget:_}=this.node.getProps();frame.update(()=>{!_&&!isNodeOrChild(this.node.current,h.target)?$&&$(h,g):j&&j(h,g)})},{passive:!(o.onTap||o.onPointerUp)}),d=addPointerEvent(window,"pointercancel",(h,g)=>this.cancelPress(h,g),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=pipe(c,d),this.startPress(e,s)},this.startAccessiblePress=()=>{const e=c=>{if(c.key!=="Enter"||this.isPressing)return;const d=h=>{h.key!=="Enter"||!this.checkPressEnd()||fireSyntheticPointerEvent("up",(g,j)=>{const{onTap:$}=this.node.getProps();$&&frame.update(()=>$(g,j))})};this.removeEndListeners(),this.removeEndListeners=addDomEvent(this.node.current,"keyup",d),fireSyntheticPointerEvent("down",(h,g)=>{this.startPress(h,g)})},s=addDomEvent(this.node.current,"keydown",e),o=()=>{this.isPressing&&fireSyntheticPointerEvent("cancel",(c,d)=>this.cancelPress(c,d))},a=addDomEvent(this.node.current,"blur",o);this.removeAccessibleListeners=pipe(s,a)}}startPress(e,s){this.isPressing=!0;const{onTapStart:o,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&frame.update(()=>o(e,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!isDragActive()}cancelPress(e,s){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&frame.update(()=>o(e,s))}mount(){const e=this.node.getProps(),s=addPointerEvent(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),o=addDomEvent(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pipe(s,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=i=>{const e=observerCallbacks.get(i.target);e&&e(i)},fireAllObserverCallbacks=i=>{i.forEach(fireObserverCallback)};function initIntersectionObserver({root:i,...e}){const s=i||document;observers.has(s)||observers.set(s,{});const o=observers.get(s),a=JSON.stringify(e);return o[a]||(o[a]=new IntersectionObserver(fireAllObserverCallbacks,{root:i,...e})),o[a]}function observeIntersection(i,e,s){const o=initIntersectionObserver(e);return observerCallbacks.set(i,s),o.observe(i),()=>{observerCallbacks.delete(i),o.unobserve(i)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:o,amount:a="some",once:c}=e,d={root:s?s.current:void 0,rootMargin:o,threshold:typeof a=="number"?a:thresholdNames[a]},h=g=>{const{isIntersecting:j}=g;if(this.isInView===j||(this.isInView=j,c&&!j&&this.hasEnteredView))return;j&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",j);const{onViewportEnter:$,onViewportLeave:_}=this.node.getProps(),et=j?$:_;et&&et(g)};return observeIntersection(this.node.current,d,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:i={}},{viewport:e={}}={}){return s=>i[s]!==e[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}};function shallowCompare(i,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==i.length)return!1;for(let o=0;o<s;o++)if(e[o]!==i[o])return!1;return!0}function getCurrent(i){const e={};return i.values.forEach((s,o)=>e[o]=s.get()),e}function getVelocity$1(i){const e={};return i.values.forEach((s,o)=>e[o]=s.getVelocity()),e}function resolveVariant(i,e,s){const o=i.getProps();return resolveVariantFromProps(o,e,s!==void 0?s:o.custom,getCurrent(i),getVelocity$1(i))}let invariant$1=noop;const secondsToMilliseconds=i=>i*1e3,millisecondsToSeconds=i=>i/1e3,instantAnimationState={current:!1},isBezierDefinition=i=>Array.isArray(i)&&typeof i[0]=="number";function isWaapiSupportedEasing(i){return!!(!i||typeof i=="string"&&supportedWaapiEasing[i]||isBezierDefinition(i)||Array.isArray(i)&&i.every(isWaapiSupportedEasing))}const cubicBezierAsString=([i,e,s,o])=>`cubic-bezier(${i}, ${e}, ${s}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(i){if(i)return isBezierDefinition(i)?cubicBezierAsString(i):Array.isArray(i)?i.map(mapEasingToNativeEasing):supportedWaapiEasing[i]}function animateStyle(i,e,s,{delay:o=0,duration:a,repeat:c=0,repeatType:d="loop",ease:h,times:g}={}){const j={[e]:s};g&&(j.offset=g);const $=mapEasingToNativeEasing(h);return Array.isArray($)&&(j.easing=$),i.animate(j,{delay:o,duration:a,easing:Array.isArray($)?"linear":$,fill:"both",iterations:c+1,direction:d==="reverse"?"alternate":"normal"})}function getFinalKeyframe(i,{repeat:e,repeatType:s="loop"}){const o=e&&s!=="loop"&&e%2===1?0:i.length-1;return i[o]}const calcBezier=(i,e,s)=>(((1-3*s+3*e)*i+(3*s-6*e))*i+3*e)*i,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(i,e,s,o,a){let c,d,h=0;do d=e+(s-e)/2,c=calcBezier(d,o,a)-i,c>0?s=d:e=d;while(Math.abs(c)>subdivisionPrecision&&++h<subdivisionMaxIterations);return d}function cubicBezier(i,e,s,o){if(i===e&&s===o)return noop;const a=c=>binarySubdivide(c,0,1,i,s);return c=>c===0||c===1?c:calcBezier(a(c),e,o)}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=i=>Array.isArray(i)&&typeof i[0]!="number",mirrorEasing=i=>e=>e<=.5?i(2*e)/2:(2-i(2*(1-e)))/2,reverseEasing=i=>e=>1-i(1-e),circIn=i=>1-Math.sin(Math.acos(i)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=i=>(i*=2)<1?.5*backIn(i):.5*(2-Math.pow(2,-10*(i-1))),easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=i=>{if(Array.isArray(i)){invariant$1(i.length===4);const[e,s,o,a]=i;return cubicBezier(e,s,o,a)}else if(typeof i=="string")return invariant$1(easingLookup[i]!==void 0),easingLookup[i];return i},isColorString=(i,e)=>s=>!!(isString$1(s)&&singleColorRegex.test(s)&&s.startsWith(i)||e&&Object.prototype.hasOwnProperty.call(s,e)),splitColor=(i,e,s)=>o=>{if(!isString$1(o))return o;const[a,c,d,h]=o.match(floatRegex);return{[i]:parseFloat(a),[e]:parseFloat(c),[s]:parseFloat(d),alpha:h!==void 0?parseFloat(h):1}},clampRgbUnit=i=>clamp(0,255,i),rgbUnit={...number$1,transform:i=>Math.round(clampRgbUnit(i))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:i,green:e,blue:s,alpha:o=1})=>"rgba("+rgbUnit.transform(i)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(o))+")"};function parseHex(i){let e="",s="",o="",a="";return i.length>5?(e=i.substring(1,3),s=i.substring(3,5),o=i.substring(5,7),a=i.substring(7,9)):(e=i.substring(1,2),s=i.substring(2,3),o=i.substring(3,4),a=i.substring(4,5),e+=e,s+=s,o+=o,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:a?parseInt(a,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:i,saturation:e,lightness:s,alpha:o=1})=>"hsla("+Math.round(i)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(o))+")"},color$1={test:i=>rgba.test(i)||hex.test(i)||hsla.test(i),parse:i=>rgba.test(i)?rgba.parse(i):hsla.test(i)?hsla.parse(i):hex.parse(i),transform:i=>isString$1(i)?i:i.hasOwnProperty("red")?rgba.transform(i):hsla.transform(i)},mix=(i,e,s)=>-s*i+s*e+i;function hueToRgb(i,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?i+(e-i)*6*s:s<1/2?e:s<2/3?i+(e-i)*(2/3-s)*6:i}function hslaToRgba({hue:i,saturation:e,lightness:s,alpha:o}){i/=360,e/=100,s/=100;let a=0,c=0,d=0;if(!e)a=c=d=s;else{const h=s<.5?s*(1+e):s+e-s*e,g=2*s-h;a=hueToRgb(g,h,i+1/3),c=hueToRgb(g,h,i),d=hueToRgb(g,h,i-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(d*255),alpha:o}}const mixLinearColor=(i,e,s)=>{const o=i*i;return Math.sqrt(Math.max(0,s*(e*e-o)+o))},colorTypes=[hex,rgba,hsla],getColorType=i=>colorTypes.find(e=>e.test(i));function asRGBA(i){const e=getColorType(i);let s=e.parse(i);return e===hsla&&(s=hslaToRgba(s)),s}const mixColor=(i,e)=>{const s=asRGBA(i),o=asRGBA(e),a={...s};return c=>(a.red=mixLinearColor(s.red,o.red,c),a.green=mixLinearColor(s.green,o.green,c),a.blue=mixLinearColor(s.blue,o.blue,c),a.alpha=mix(s.alpha,o.alpha,c),rgba.transform(a))};function test(i){var e,s;return isNaN(i)&&isString$1(i)&&(((e=i.match(floatRegex))===null||e===void 0?void 0:e.length)||0)+(((s=i.match(colorRegex))===null||s===void 0?void 0:s.length)||0)>0}const cssVarTokeniser={regex:cssVariableRegex,countKey:"Vars",token:"${v}",parse:noop},colorTokeniser={regex:colorRegex,countKey:"Colors",token:"${c}",parse:color$1.parse},numberTokeniser={regex:floatRegex,countKey:"Numbers",token:"${n}",parse:number$1.parse};function tokenise(i,{regex:e,countKey:s,token:o,parse:a}){const c=i.tokenised.match(e);c&&(i["num"+s]=c.length,i.tokenised=i.tokenised.replace(e,o),i.values.push(...c.map(a)))}function analyseComplexValue(i){const e=i.toString(),s={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&tokenise(s,cssVarTokeniser),tokenise(s,colorTokeniser),tokenise(s,numberTokeniser),s}function parseComplexValue(i){return analyseComplexValue(i).values}function createTransformer(i){const{values:e,numColors:s,numVars:o,tokenised:a}=analyseComplexValue(i),c=e.length;return d=>{let h=a;for(let g=0;g<c;g++)g<o?h=h.replace(cssVarTokeniser.token,d[g]):g<o+s?h=h.replace(colorTokeniser.token,color$1.transform(d[g])):h=h.replace(numberTokeniser.token,sanitize(d[g]));return h}}const convertNumbersToZero=i=>typeof i=="number"?0:i;function getAnimatableNone$1(i){const e=parseComplexValue(i);return createTransformer(i)(e.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},mixImmediate=(i,e)=>s=>`${s>0?e:i}`;function getMixer(i,e){return typeof i=="number"?s=>mix(i,e,s):color$1.test(i)?mixColor(i,e):i.startsWith("var(")?mixImmediate(i,e):mixComplex(i,e)}const mixArray=(i,e)=>{const s=[...i],o=s.length,a=i.map((c,d)=>getMixer(c,e[d]));return c=>{for(let d=0;d<o;d++)s[d]=a[d](c);return s}},mixObject=(i,e)=>{const s={...i,...e},o={};for(const a in s)i[a]!==void 0&&e[a]!==void 0&&(o[a]=getMixer(i[a],e[a]));return a=>{for(const c in o)s[c]=o[c](a);return s}},mixComplex=(i,e)=>{const s=complex.createTransformer(e),o=analyseComplexValue(i),a=analyseComplexValue(e);return o.numVars===a.numVars&&o.numColors===a.numColors&&o.numNumbers>=a.numNumbers?pipe(mixArray(o.values,a.values),s):mixImmediate(i,e)},progress=(i,e,s)=>{const o=e-i;return o===0?1:(s-i)/o},mixNumber=(i,e)=>s=>mix(i,e,s);function detectMixerFactory(i){return typeof i=="number"?mixNumber:typeof i=="string"?color$1.test(i)?mixColor:mixComplex:Array.isArray(i)?mixArray:typeof i=="object"?mixObject:mixNumber}function createMixers(i,e,s){const o=[],a=s||detectMixerFactory(i[0]),c=i.length-1;for(let d=0;d<c;d++){let h=a(i[d],i[d+1]);if(e){const g=Array.isArray(e)?e[d]||noop:e;h=pipe(g,h)}o.push(h)}return o}function interpolate(i,e,{clamp:s=!0,ease:o,mixer:a}={}){const c=i.length;if(invariant$1(c===e.length),c===1)return()=>e[0];i[0]>i[c-1]&&(i=[...i].reverse(),e=[...e].reverse());const d=createMixers(e,o,a),h=d.length,g=j=>{let $=0;if(h>1)for(;$<i.length-2&&!(j<i[$+1]);$++);const _=progress(i[$],i[$+1],j);return d[$](_)};return s?j=>g(clamp(i[0],i[c-1],j)):g}function fillOffset(i,e){const s=i[i.length-1];for(let o=1;o<=e;o++){const a=progress(0,e,o);i.push(mix(s,1,a))}}function defaultOffset(i){const e=[0];return fillOffset(e,i.length-1),e}function convertOffsetToTimes(i,e){return i.map(s=>s*e)}function defaultEasing(i,e){return i.map(()=>e||easeInOut).splice(0,i.length-1)}function keyframes({duration:i=300,keyframes:e,times:s,ease:o="easeInOut"}){const a=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),c={done:!1,value:e[0]},d=convertOffsetToTimes(s&&s.length===e.length?s:defaultOffset(e),i),h=interpolate(d,e,{ease:Array.isArray(a)?a:defaultEasing(e,a)});return{calculatedDuration:i,next:g=>(c.value=h(g),c.done=g>=i,c)}}function velocityPerSecond(i,e){return e?i*(1e3/e):0}const velocitySampleDuration=5;function calcGeneratorVelocity(i,e,s){const o=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(s-i(o),e-o)}const safeMin=.001,minDuration=.01,maxDuration$1=10,minDamping=.05,maxDamping=1;function findSpring({duration:i=800,bounce:e=.25,velocity:s=0,mass:o=1}){let a,c,d=1-e;d=clamp(minDamping,maxDamping,d),i=clamp(minDuration,maxDuration$1,millisecondsToSeconds(i)),d<1?(a=j=>{const $=j*d,_=$*i,et=$-s,tt=calcAngularFreq(j,d),it=Math.exp(-_);return safeMin-et/tt*it},c=j=>{const _=j*d*i,et=_*s+s,tt=Math.pow(d,2)*Math.pow(j,2)*i,it=Math.exp(-_),ot=calcAngularFreq(Math.pow(j,2),d);return(-a(j)+safeMin>0?-1:1)*((et-tt)*it)/ot}):(a=j=>{const $=Math.exp(-j*i),_=(j-s)*i+1;return-safeMin+$*_},c=j=>{const $=Math.exp(-j*i),_=(s-j)*(i*i);return $*_});const h=5/i,g=approximateRoot(a,c,h);if(i=secondsToMilliseconds(i),isNaN(g))return{stiffness:100,damping:10,duration:i};{const j=Math.pow(g,2)*o;return{stiffness:j,damping:d*2*Math.sqrt(o*j),duration:i}}}const rootIterations=12;function approximateRoot(i,e,s){let o=s;for(let a=1;a<rootIterations;a++)o=o-i(o)/e(o);return o}function calcAngularFreq(i,e){return i*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(i,e){return e.some(s=>i[s]!==void 0)}function getSpringOptions(i){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...i};if(!isSpringType(i,physicsKeys)&&isSpringType(i,durationKeys)){const s=findSpring(i);e={...e,...s,mass:1},e.isResolvedFromDuration=!0}return e}function spring({keyframes:i,restDelta:e,restSpeed:s,...o}){const a=i[0],c=i[i.length-1],d={done:!1,value:a},{stiffness:h,damping:g,mass:j,duration:$,velocity:_,isResolvedFromDuration:et}=getSpringOptions({...o,velocity:-millisecondsToSeconds(o.velocity||0)}),tt=_||0,it=g/(2*Math.sqrt(h*j)),ot=c-a,at=millisecondsToSeconds(Math.sqrt(h/j)),rt=Math.abs(ot)<5;s||(s=rt?.01:2),e||(e=rt?.005:.5);let st;if(it<1){const lt=calcAngularFreq(at,it);st=mt=>{const ft=Math.exp(-it*at*mt);return c-ft*((tt+it*at*ot)/lt*Math.sin(lt*mt)+ot*Math.cos(lt*mt))}}else if(it===1)st=lt=>c-Math.exp(-at*lt)*(ot+(tt+at*ot)*lt);else{const lt=at*Math.sqrt(it*it-1);st=mt=>{const ft=Math.exp(-it*at*mt),gt=Math.min(lt*mt,300);return c-ft*((tt+it*at*ot)*Math.sinh(gt)+lt*ot*Math.cosh(gt))/lt}}return{calculatedDuration:et&&$||null,next:lt=>{const mt=st(lt);if(et)d.done=lt>=$;else{let ft=tt;lt!==0&&(it<1?ft=calcGeneratorVelocity(st,lt,mt):ft=0);const gt=Math.abs(ft)<=s,dt=Math.abs(c-mt)<=e;d.done=gt&&dt}return d.value=d.done?c:mt,d}}}function inertia({keyframes:i,velocity:e=0,power:s=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:d,min:h,max:g,restDelta:j=.5,restSpeed:$}){const _=i[0],et={done:!1,value:_},tt=ut=>h!==void 0&&ut<h||g!==void 0&&ut>g,it=ut=>h===void 0?g:g===void 0||Math.abs(h-ut)<Math.abs(g-ut)?h:g;let ot=s*e;const at=_+ot,rt=d===void 0?at:d(at);rt!==at&&(ot=rt-_);const st=ut=>-ot*Math.exp(-ut/o),lt=ut=>rt+st(ut),mt=ut=>{const ct=st(ut),_t=lt(ut);et.done=Math.abs(ct)<=j,et.value=et.done?rt:_t};let ft,gt;const dt=ut=>{tt(et.value)&&(ft=ut,gt=spring({keyframes:[et.value,it(et.value)],velocity:calcGeneratorVelocity(lt,ut,et.value),damping:a,stiffness:c,restDelta:j,restSpeed:$}))};return dt(0),{calculatedDuration:null,next:ut=>{let ct=!1;return!gt&&ft===void 0&&(ct=!0,mt(ut),dt(ut)),ft!==void 0&&ut>ft?gt.next(ut-ft):(!ct&&mt(ut),et)}}}const frameloopDriver=i=>{const e=({timestamp:s})=>i(s);return{start:()=>frame.update(e,!0),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:performance.now()}},maxGeneratorDuration=2e4;function calcGeneratorDuration(i){let e=0;const s=50;let o=i.next(e);for(;!o.done&&e<maxGeneratorDuration;)e+=s,o=i.next(e);return e>=maxGeneratorDuration?1/0:e}const types$1={decay:inertia,inertia,tween:keyframes,keyframes,spring};function animateValue({autoplay:i=!0,delay:e=0,driver:s=frameloopDriver,keyframes:o,type:a="keyframes",repeat:c=0,repeatDelay:d=0,repeatType:h="loop",onPlay:g,onStop:j,onComplete:$,onUpdate:_,...et}){let tt=1,it=!1,ot,at;const rt=()=>{at=new Promise(St=>{ot=St})};rt();let st;const lt=types$1[a]||keyframes;let mt;lt!==keyframes&&typeof o[0]!="number"&&(mt=interpolate([0,100],o,{clamp:!1}),o=[0,100]);const ft=lt({...et,keyframes:o});let gt;h==="mirror"&&(gt=lt({...et,keyframes:[...o].reverse(),velocity:-(et.velocity||0)}));let dt="idle",ut=null,ct=null,_t=null;ft.calculatedDuration===null&&c&&(ft.calculatedDuration=calcGeneratorDuration(ft));const{calculatedDuration:ht}=ft;let Et=1/0,yt=1/0;ht!==null&&(Et=ht+d,yt=Et*(c+1)-d);let Ot=0;const Dt=St=>{if(ct===null)return;tt>0&&(ct=Math.min(ct,St)),tt<0&&(ct=Math.min(St-yt/tt,ct)),ut!==null?Ot=ut:Ot=Math.round(St-ct)*tt;const Pt=Ot-e*(tt>=0?1:-1),pt=tt>=0?Pt<0:Pt>yt;Ot=Math.max(Pt,0),dt==="finished"&&ut===null&&(Ot=yt);let bt=Ot,Tt=ft;if(c){const zt=Math.min(Ot,yt)/Et;let Kt=Math.floor(zt),Yt=zt%1;!Yt&&zt>=1&&(Yt=1),Yt===1&&Kt--,Kt=Math.min(Kt,c+1),!!(Kt%2)&&(h==="reverse"?(Yt=1-Yt,d&&(Yt-=d/Et)):h==="mirror"&&(Tt=gt)),bt=clamp(0,1,Yt)*Et}const Ct=pt?{done:!1,value:o[0]}:Tt.next(bt);mt&&(Ct.value=mt(Ct.value));let{done:kt}=Ct;!pt&&ht!==null&&(kt=tt>=0?Ot>=yt:Ot<=0);const Mt=ut===null&&(dt==="finished"||dt==="running"&&kt);return _&&_(Ct.value),Mt&&Vt(),Ct},$t=()=>{st&&st.stop(),st=void 0},Bt=()=>{dt="idle",$t(),ot(),rt(),ct=_t=null},Vt=()=>{dt="finished",$&&$(),$t(),ot()},Rt=()=>{if(it)return;st||(st=s(Dt));const St=st.now();g&&g(),ut!==null?ct=St-ut:(!ct||dt==="finished")&&(ct=St),dt==="finished"&&rt(),_t=ct,ut=null,dt="running",st.start()};i&&Rt();const vt={then(St,Pt){return at.then(St,Pt)},get time(){return millisecondsToSeconds(Ot)},set time(St){St=secondsToMilliseconds(St),Ot=St,ut!==null||!st||tt===0?ut=St:ct=st.now()-St/tt},get duration(){const St=ft.calculatedDuration===null?calcGeneratorDuration(ft):ft.calculatedDuration;return millisecondsToSeconds(St)},get speed(){return tt},set speed(St){St===tt||!st||(tt=St,vt.time=millisecondsToSeconds(Ot))},get state(){return dt},play:Rt,pause:()=>{dt="paused",ut=Ot},stop:()=>{it=!0,dt!=="idle"&&(dt="idle",j&&j(),Bt())},cancel:()=>{_t!==null&&Dt(_t),Bt()},complete:()=>{dt="finished"},sample:St=>(ct=0,Dt(St))};return vt}function memo(i){let e;return()=>(e===void 0&&(e=i()),e)}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),acceleratedValues=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sampleDelta=10,maxDuration=2e4,requiresPregeneratedKeyframes=(i,e)=>e.type==="spring"||i==="backgroundColor"||!isWaapiSupportedEasing(e.ease);function createAcceleratedAnimation(i,e,{onUpdate:s,onComplete:o,...a}){if(!(supportsWaapi()&&acceleratedValues.has(e)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let d=!1,h,g,j=!1;const $=()=>{g=new Promise(lt=>{h=lt})};$();let{keyframes:_,duration:et=300,ease:tt,times:it}=a;if(requiresPregeneratedKeyframes(e,a)){const lt=animateValue({...a,repeat:0,delay:0});let mt={done:!1,value:_[0]};const ft=[];let gt=0;for(;!mt.done&&gt<maxDuration;)mt=lt.sample(gt),ft.push(mt.value),gt+=sampleDelta;it=void 0,_=ft,et=gt-sampleDelta,tt="linear"}const ot=animateStyle(i.owner.current,e,_,{...a,duration:et,ease:tt,times:it}),at=()=>{j=!1,ot.cancel()},rt=()=>{j=!0,frame.update(at),h(),$()};return ot.onfinish=()=>{j||(i.set(getFinalKeyframe(_,a)),o&&o(),rt())},{then(lt,mt){return g.then(lt,mt)},attachTimeline(lt){return ot.timeline=lt,ot.onfinish=null,noop},get time(){return millisecondsToSeconds(ot.currentTime||0)},set time(lt){ot.currentTime=secondsToMilliseconds(lt)},get speed(){return ot.playbackRate},set speed(lt){ot.playbackRate=lt},get duration(){return millisecondsToSeconds(et)},play:()=>{d||(ot.play(),cancelFrame(at))},pause:()=>ot.pause(),stop:()=>{if(d=!0,ot.playState==="idle")return;const{currentTime:lt}=ot;if(lt){const mt=animateValue({...a,autoplay:!1});i.setWithVelocity(mt.sample(lt-sampleDelta).value,mt.sample(lt).value,sampleDelta)}rt()},complete:()=>{j||ot.finish()},cancel:rt}}function createInstantAnimation({keyframes:i,delay:e,onUpdate:s,onComplete:o}){const a=()=>(s&&s(i[i.length-1]),o&&o(),{time:0,speed:1,duration:0,play:noop,pause:noop,stop:noop,then:c=>(c(),Promise.resolve()),cancel:noop,complete:noop});return e?animateValue({keyframes:[0,1],duration:0,delay:e,onComplete:a}):a()}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(i,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(i)?i.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease,isAnimatable=(i,e)=>i==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url(")),maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(i){const[e,s]=i.slice(0,-1).split("(");if(e==="drop-shadow")return i;const[o]=s.match(floatRegex)||[];if(!o)return i;const a=s.replace(o,"");let c=maxDefaults.has(e)?1:0;return o!==s&&(c*=100),e+"("+c+a+")"}const functionRegex=/([a-z-]*)\(.*?\)/g,filter={...complex,getAnimatableNone:i=>{const e=i.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):i}},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=i=>defaultValueTypes[i];function getAnimatableNone(i,e){let s=getDefaultValueType(i);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const isZeroValueString=i=>/^0[^.\s]+$/.test(i);function isNone(i){if(typeof i=="number")return i===0;if(i!==null)return i==="none"||i==="0"||isZeroValueString(i)}function getKeyframes(i,e,s,o){const a=isAnimatable(e,s);let c;Array.isArray(s)?c=[...s]:c=[null,s];const d=o.from!==void 0?o.from:i.get();let h;const g=[];for(let j=0;j<c.length;j++)c[j]===null&&(c[j]=j===0?d:c[j-1]),isNone(c[j])&&g.push(j),typeof c[j]=="string"&&c[j]!=="none"&&c[j]!=="0"&&(h=c[j]);if(a&&g.length&&h)for(let j=0;j<g.length;j++){const $=g[j];c[$]=getAnimatableNone(e,h)}return c}function isTransitionDefined({when:i,delay:e,delayChildren:s,staggerChildren:o,staggerDirection:a,repeat:c,repeatType:d,repeatDelay:h,from:g,elapsed:j,...$}){return!!Object.keys($).length}function getValueTransition(i,e){return i[e]||i.default||i}const MotionGlobalConfig={skipAnimations:!1},animateMotionValue=(i,e,s,o={})=>a=>{const c=getValueTransition(o,i)||{},d=c.delay||o.delay||0;let{elapsed:h=0}=o;h=h-secondsToMilliseconds(d);const g=getKeyframes(e,i,s,c),j=g[0],$=g[g.length-1],_=isAnimatable(i,j),et=isAnimatable(i,$);let tt={keyframes:g,velocity:e.getVelocity(),ease:"easeOut",...c,delay:-h,onUpdate:it=>{e.set(it),c.onUpdate&&c.onUpdate(it)},onComplete:()=>{a(),c.onComplete&&c.onComplete()}};if(isTransitionDefined(c)||(tt={...tt,...getDefaultTransition(i,tt)}),tt.duration&&(tt.duration=secondsToMilliseconds(tt.duration)),tt.repeatDelay&&(tt.repeatDelay=secondsToMilliseconds(tt.repeatDelay)),!_||!et||instantAnimationState.current||c.type===!1||MotionGlobalConfig.skipAnimations)return createInstantAnimation(tt);if(!o.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const it=createAcceleratedAnimation(e,i,tt);if(it)return it}return animateValue(tt)};function isWillChangeMotionValue(i){return!!(isMotionValue(i)&&i.add)}const isNumericalString=i=>/^\-?\d*\.?\d+$/.test(i);function addUniqueItem(i,e){i.indexOf(e)===-1&&i.push(e)}function removeItem(i,e){const s=i.indexOf(e);s>-1&&i.splice(s,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,s,o){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,o);else for(let c=0;c<a;c++){const d=this.subscriptions[c];d&&d(e,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const isFloat=i=>!isNaN(parseFloat(i));class MotionValue{constructor(e,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,a=!0)=>{this.prev=this.current,this.current=o;const{delta:c,timestamp:d}=frameData;this.lastUpdated!==d&&(this.timeDelta=c,this.lastUpdated=d,frame.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>frame.postRender(this.velocityCheck),this.velocityCheck=({timestamp:o})=>{o!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=isFloat(this.current),this.owner=s.owner}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new SubscriptionManager);const o=this.events[e].add(s);return e==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,o){this.set(s),this.prev=e,this.timeDelta=o}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(i,e){return new MotionValue(i,e)}const testValueType=i=>e=>e.test(i),auto$1={test:i=>i==="auto",parse:i=>i},dimensionValueTypes=[number$1,px,percent,degrees,vw,vh,auto$1],findDimensionValueType=i=>dimensionValueTypes.find(testValueType(i)),valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=i=>valueTypes.find(testValueType(i));function setMotionValue(i,e,s){i.hasValue(e)?i.getValue(e).set(s):i.addValue(e,motionValue(s))}function setTarget(i,e){const s=resolveVariant(i,e);let{transitionEnd:o={},transition:a={},...c}=s?i.makeTargetAnimatable(s,!1):{};c={...c,...o};for(const d in c){const h=resolveFinalValueInKeyframes(c[d]);setMotionValue(i,d,h)}}function checkTargetForNewValues(i,e,s){var o,a;const c=Object.keys(e).filter(h=>!i.hasValue(h)),d=c.length;if(d)for(let h=0;h<d;h++){const g=c[h],j=e[g];let $=null;Array.isArray(j)&&($=j[0]),$===null&&($=(a=(o=s[g])!==null&&o!==void 0?o:i.readValue(g))!==null&&a!==void 0?a:e[g]),$!=null&&(typeof $=="string"&&(isNumericalString($)||isZeroValueString($))?$=parseFloat($):!findValueType($)&&complex.test(j)&&($=getAnimatableNone(g,j)),i.addValue(g,motionValue($,{owner:i})),s[g]===void 0&&(s[g]=$),$!==null&&i.setBaseTarget(g,$))}}function getOriginFromTransition(i,e){return e?(e[i]||e.default||e).from:void 0}function getOrigin(i,e,s){const o={};for(const a in i){const c=getOriginFromTransition(a,e);if(c!==void 0)o[a]=c;else{const d=s.getValue(a);d&&(o[a]=d.get())}}return o}function shouldBlockAnimation({protectedKeys:i,needsAnimating:e},s){const o=i.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,o}function hasKeyframesChanged(i,e){const s=i.get();if(Array.isArray(e)){for(let o=0;o<e.length;o++)if(e[o]!==s)return!0}else return s!==e}function animateTarget(i,e,{delay:s=0,transitionOverride:o,type:a}={}){let{transition:c=i.getDefaultTransition(),transitionEnd:d,...h}=i.makeTargetAnimatable(e);const g=i.getValue("willChange");o&&(c=o);const j=[],$=a&&i.animationState&&i.animationState.getState()[a];for(const _ in h){const et=i.getValue(_),tt=h[_];if(!et||tt===void 0||$&&shouldBlockAnimation($,_))continue;const it={delay:s,elapsed:0,...getValueTransition(c||{},_)};if(window.HandoffAppearAnimations){const rt=i.getProps()[optimizedAppearDataAttribute];if(rt){const st=window.HandoffAppearAnimations(rt,_,et,frame);st!==null&&(it.elapsed=st,it.isHandoff=!0)}}let ot=!it.isHandoff&&!hasKeyframesChanged(et,tt);if(it.type==="spring"&&(et.getVelocity()||it.velocity)&&(ot=!1),et.animation&&(ot=!1),ot)continue;et.start(animateMotionValue(_,et,tt,i.shouldReduceMotion&&transformProps.has(_)?{type:!1}:it));const at=et.animation;isWillChangeMotionValue(g)&&(g.add(_),at.then(()=>g.remove(_))),j.push(at)}return d&&Promise.all(j).then(()=>{d&&setTarget(i,d)}),j}function animateVariant(i,e,s={}){const o=resolveVariant(i,e,s.custom);let{transition:a=i.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(a=s.transitionOverride);const c=o?()=>Promise.all(animateTarget(i,o,s)):()=>Promise.resolve(),d=i.variantChildren&&i.variantChildren.size?(g=0)=>{const{delayChildren:j=0,staggerChildren:$,staggerDirection:_}=a;return animateChildren(i,e,j+g,$,_,s)}:()=>Promise.resolve(),{when:h}=a;if(h){const[g,j]=h==="beforeChildren"?[c,d]:[d,c];return g().then(()=>j())}else return Promise.all([c(),d(s.delay)])}function animateChildren(i,e,s=0,o=0,a=1,c){const d=[],h=(i.variantChildren.size-1)*o,g=a===1?(j=0)=>j*o:(j=0)=>h-j*o;return Array.from(i.variantChildren).sort(sortByTreeOrder).forEach((j,$)=>{j.notify("AnimationStart",e),d.push(animateVariant(j,e,{...c,delay:s+g($)}).then(()=>j.notify("AnimationComplete",e)))}),Promise.all(d)}function sortByTreeOrder(i,e){return i.sortNodePosition(e)}function animateVisualElement(i,e,s={}){i.notify("AnimationStart",e);let o;if(Array.isArray(e)){const a=e.map(c=>animateVariant(i,c,s));o=Promise.all(a)}else if(typeof e=="string")o=animateVariant(i,e,s);else{const a=typeof e=="function"?resolveVariant(i,e,s.custom):e;o=Promise.all(animateTarget(i,a,s))}return o.then(()=>i.notify("AnimationComplete",e))}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(i){return e=>Promise.all(e.map(({animation:s,options:o})=>animateVisualElement(i,s,o)))}function createAnimationState(i){let e=animateList(i);const s=createState$1();let o=!0;const a=(g,j)=>{const $=resolveVariant(i,j);if($){const{transition:_,transitionEnd:et,...tt}=$;g={...g,...tt,...et}}return g};function c(g){e=g(i)}function d(g,j){const $=i.getProps(),_=i.getVariantContext(!0)||{},et=[],tt=new Set;let it={},ot=1/0;for(let rt=0;rt<numAnimationTypes;rt++){const st=reversePriorityOrder[rt],lt=s[st],mt=$[st]!==void 0?$[st]:_[st],ft=isVariantLabel(mt),gt=st===j?lt.isActive:null;gt===!1&&(ot=rt);let dt=mt===_[st]&&mt!==$[st]&&ft;if(dt&&o&&i.manuallyAnimateOnMount&&(dt=!1),lt.protectedKeys={...it},!lt.isActive&&gt===null||!mt&&!lt.prevProp||isAnimationControls(mt)||typeof mt=="boolean")continue;let ct=checkVariantsDidChange(lt.prevProp,mt)||st===j&&lt.isActive&&!dt&&ft||rt>ot&&ft,_t=!1;const ht=Array.isArray(mt)?mt:[mt];let Et=ht.reduce(a,{});gt===!1&&(Et={});const{prevResolvedValues:yt={}}=lt,Ot={...yt,...Et},Dt=$t=>{ct=!0,tt.has($t)&&(_t=!0,tt.delete($t)),lt.needsAnimating[$t]=!0};for(const $t in Ot){const Bt=Et[$t],Vt=yt[$t];if(it.hasOwnProperty($t))continue;let Rt=!1;isKeyframesTarget(Bt)&&isKeyframesTarget(Vt)?Rt=!shallowCompare(Bt,Vt):Rt=Bt!==Vt,Rt?Bt!==void 0?Dt($t):tt.add($t):Bt!==void 0&&tt.has($t)?Dt($t):lt.protectedKeys[$t]=!0}lt.prevProp=mt,lt.prevResolvedValues=Et,lt.isActive&&(it={...it,...Et}),o&&i.blockInitialAnimation&&(ct=!1),ct&&(!dt||_t)&&et.push(...ht.map($t=>({animation:$t,options:{type:st,...g}})))}if(tt.size){const rt={};tt.forEach(st=>{const lt=i.getBaseTarget(st);lt!==void 0&&(rt[st]=lt)}),et.push({animation:rt})}let at=!!et.length;return o&&($.initial===!1||$.initial===$.animate)&&!i.manuallyAnimateOnMount&&(at=!1),o=!1,at?e(et):Promise.resolve()}function h(g,j,$){var _;if(s[g].isActive===j)return Promise.resolve();(_=i.variantChildren)===null||_===void 0||_.forEach(tt=>{var it;return(it=tt.animationState)===null||it===void 0?void 0:it.setActive(g,j)}),s[g].isActive=j;const et=d($,g);for(const tt in s)s[tt].protectedKeys={};return et}return{animateChanges:d,setActive:h,setAnimateFunction:c,getState:()=>s}}function checkVariantsDidChange(i,e){return typeof e=="string"?e!==i:Array.isArray(e)?!shallowCompare(e,i):!1}function createTypeState(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState$1(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),isAnimationControls(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s,custom:o}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===a)return;const c=this.node.animationState.setActive("exit",!e,{custom:o??this.node.getProps().custom});s&&!e&&c.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}},distance=(i,e)=>Math.abs(i-e);function distance2D(i,e){const s=distance(i.x,e.x),o=distance(i.y,e.y);return Math.sqrt(s**2+o**2)}class PanSession{constructor(e,s,{transformPagePoint:o,contextWindow:a,dragSnapToOrigin:c=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=getPanInfo(this.lastMoveEventInfo,this.history),et=this.startEvent!==null,tt=distance2D(_.offset,{x:0,y:0})>=3;if(!et&&!tt)return;const{point:it}=_,{timestamp:ot}=frameData;this.history.push({...it,timestamp:ot});const{onStart:at,onMove:rt}=this.handlers;et||(at&&at(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),rt&&rt(this.lastMoveEvent,_)},this.handlePointerMove=(_,et)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=transformPoint(et,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(_,et)=>{this.end();const{onEnd:tt,onSessionEnd:it,resumeAnimation:ot}=this.handlers;if(this.dragSnapToOrigin&&ot&&ot(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const at=getPanInfo(_.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(et,this.transformPagePoint),this.history);this.startEvent&&tt&&tt(_,at),it&&it(_,at)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=c,this.handlers=s,this.transformPagePoint=o,this.contextWindow=a||window;const d=extractEventInfo(e),h=transformPoint(d,this.transformPagePoint),{point:g}=h,{timestamp:j}=frameData;this.history=[{...g,timestamp:j}];const{onSessionStart:$}=s;$&&$(e,getPanInfo(h,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(i,e){return e?{point:e(i.point)}:i}function subtractPoint(i,e){return{x:i.x-e.x,y:i.y-e.y}}function getPanInfo({point:i},e){return{point:i,delta:subtractPoint(i,lastDevicePoint(e)),offset:subtractPoint(i,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(i){return i[0]}function lastDevicePoint(i){return i[i.length-1]}function getVelocity(i,e){if(i.length<2)return{x:0,y:0};let s=i.length-1,o=null;const a=lastDevicePoint(i);for(;s>=0&&(o=i[s],!(a.timestamp-o.timestamp>secondsToMilliseconds(e)));)s--;if(!o)return{x:0,y:0};const c=millisecondsToSeconds(a.timestamp-o.timestamp);if(c===0)return{x:0,y:0};const d={x:(a.x-o.x)/c,y:(a.y-o.y)/c};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function calcLength(i){return i.max-i.min}function isNear(i,e=0,s=.01){return Math.abs(i-e)<=s}function calcAxisDelta(i,e,s,o=.5){i.origin=o,i.originPoint=mix(e.min,e.max,i.origin),i.scale=calcLength(s)/calcLength(e),(isNear(i.scale,1,1e-4)||isNaN(i.scale))&&(i.scale=1),i.translate=mix(s.min,s.max,i.origin)-i.originPoint,(isNear(i.translate)||isNaN(i.translate))&&(i.translate=0)}function calcBoxDelta(i,e,s,o){calcAxisDelta(i.x,e.x,s.x,o?o.originX:void 0),calcAxisDelta(i.y,e.y,s.y,o?o.originY:void 0)}function calcRelativeAxis(i,e,s){i.min=s.min+e.min,i.max=i.min+calcLength(e)}function calcRelativeBox(i,e,s){calcRelativeAxis(i.x,e.x,s.x),calcRelativeAxis(i.y,e.y,s.y)}function calcRelativeAxisPosition(i,e,s){i.min=e.min-s.min,i.max=i.min+calcLength(e)}function calcRelativePosition(i,e,s){calcRelativeAxisPosition(i.x,e.x,s.x),calcRelativeAxisPosition(i.y,e.y,s.y)}function applyConstraints(i,{min:e,max:s},o){return e!==void 0&&i<e?i=o?mix(e,i,o.min):Math.max(i,e):s!==void 0&&i>s&&(i=o?mix(s,i,o.max):Math.min(i,s)),i}function calcRelativeAxisConstraints(i,e,s){return{min:e!==void 0?i.min+e:void 0,max:s!==void 0?i.max+s-(i.max-i.min):void 0}}function calcRelativeConstraints(i,{top:e,left:s,bottom:o,right:a}){return{x:calcRelativeAxisConstraints(i.x,s,a),y:calcRelativeAxisConstraints(i.y,e,o)}}function calcViewportAxisConstraints(i,e){let s=e.min-i.min,o=e.max-i.max;return e.max-e.min<i.max-i.min&&([s,o]=[o,s]),{min:s,max:o}}function calcViewportConstraints(i,e){return{x:calcViewportAxisConstraints(i.x,e.x),y:calcViewportAxisConstraints(i.y,e.y)}}function calcOrigin(i,e){let s=.5;const o=calcLength(i),a=calcLength(e);return a>o?s=progress(e.min,e.max-o,i.min):o>a&&(s=progress(i.min,i.max-a,e.min)),clamp(0,1,s)}function rebaseAxisConstraints(i,e){const s={};return e.min!==void 0&&(s.min=e.min-i.min),e.max!==void 0&&(s.max=e.max-i.min),s}const defaultElastic=.35;function resolveDragElastic(i=defaultElastic){return i===!1?i=0:i===!0&&(i=defaultElastic),{x:resolveAxisElastic(i,"left","right"),y:resolveAxisElastic(i,"top","bottom")}}function resolveAxisElastic(i,e,s){return{min:resolvePointElastic(i,e),max:resolvePointElastic(i,s)}}function resolvePointElastic(i,e){return typeof i=="number"?i:i[e]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(i){return[i("x"),i("y")]}function convertBoundingBoxToBox({top:i,left:e,right:s,bottom:o}){return{x:{min:e,max:s},y:{min:i,max:o}}}function convertBoxToBoundingBox({x:i,y:e}){return{top:e.min,right:i.max,bottom:e.max,left:i.min}}function transformBoxPoints(i,e){if(!e)return i;const s=e({x:i.left,y:i.top}),o=e({x:i.right,y:i.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function isIdentityScale(i){return i===void 0||i===1}function hasScale({scale:i,scaleX:e,scaleY:s}){return!isIdentityScale(i)||!isIdentityScale(e)||!isIdentityScale(s)}function hasTransform(i){return hasScale(i)||has2DTranslate(i)||i.z||i.rotate||i.rotateX||i.rotateY}function has2DTranslate(i){return is2DTranslate(i.x)||is2DTranslate(i.y)}function is2DTranslate(i){return i&&i!=="0%"}function scalePoint(i,e,s){const o=i-s,a=e*o;return s+a}function applyPointDelta(i,e,s,o,a){return a!==void 0&&(i=scalePoint(i,a,o)),scalePoint(i,s,o)+e}function applyAxisDelta(i,e=0,s=1,o,a){i.min=applyPointDelta(i.min,e,s,o,a),i.max=applyPointDelta(i.max,e,s,o,a)}function applyBoxDelta(i,{x:e,y:s}){applyAxisDelta(i.x,e.translate,e.scale,e.originPoint),applyAxisDelta(i.y,s.translate,s.scale,s.originPoint)}function applyTreeDeltas(i,e,s,o=!1){const a=s.length;if(!a)return;e.x=e.y=1;let c,d;for(let h=0;h<a;h++){c=s[h],d=c.projectionDelta;const g=c.instance;g&&g.style&&g.style.display==="contents"||(o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&transformBox(i,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),d&&(e.x*=d.x.scale,e.y*=d.y.scale,applyBoxDelta(i,d)),o&&hasTransform(c.latestValues)&&transformBox(i,c.latestValues))}e.x=snapToDefault(e.x),e.y=snapToDefault(e.y)}function snapToDefault(i){return Number.isInteger(i)||i>1.0000000000001||i<.999999999999?i:1}function translateAxis(i,e){i.min=i.min+e,i.max=i.max+e}function transformAxis(i,e,[s,o,a]){const c=e[a]!==void 0?e[a]:.5,d=mix(i.min,i.max,c);applyAxisDelta(i,e[s],e[o],d,e.scale)}const xKeys$1=["x","scaleX","originX"],yKeys$1=["y","scaleY","originY"];function transformBox(i,e){transformAxis(i.x,e,xKeys$1),transformAxis(i.y,e,yKeys$1)}function measureViewportBox(i,e){return convertBoundingBoxToBox(transformBoxPoints(i.getBoundingClientRect(),e))}function measurePageBox(i,e,s){const o=measureViewportBox(i,s),{scroll:a}=e;return a&&(translateAxis(o.x,a.offset.x),translateAxis(o.y,a.offset.y)),o}const getContextWindow=({current:i})=>i?i.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const a=$=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(extractEventInfo($,"page").point)},c=($,_)=>{const{drag:et,dragPropagation:tt,onDragStart:it}=this.getProps();if(et&&!tt&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=getGlobalLock(et),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(at=>{let rt=this.getAxisMotionValue(at).get()||0;if(percent.test(rt)){const{projection:st}=this.visualElement;if(st&&st.layout){const lt=st.layout.layoutBox[at];lt&&(rt=calcLength(lt)*(parseFloat(rt)/100))}}this.originPoint[at]=rt}),it&&frame.update(()=>it($,_),!1,!0);const{animationState:ot}=this.visualElement;ot&&ot.setActive("whileDrag",!0)},d=($,_)=>{const{dragPropagation:et,dragDirectionLock:tt,onDirectionLock:it,onDrag:ot}=this.getProps();if(!et&&!this.openGlobalLock)return;const{offset:at}=_;if(tt&&this.currentDirection===null){this.currentDirection=getCurrentDirection(at),this.currentDirection!==null&&it&&it(this.currentDirection);return}this.updateAxis("x",_.point,at),this.updateAxis("y",_.point,at),this.visualElement.render(),ot&&ot($,_)},h=($,_)=>this.stop($,_),g=()=>eachAxis($=>{var _;return this.getAnimationState($)==="paused"&&((_=this.getAxisMotionValue($).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:j}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:a,onStart:c,onMove:d,onSessionEnd:h,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:j,contextWindow:getContextWindow(this.visualElement)})}stop(e,s){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:c}=this.getProps();c&&frame.update(()=>c(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,o){const{drag:a}=this.getProps();if(!o||!shouldDrag(e,a,this.currentDirection))return;const c=this.getAxisMotionValue(e);let d=this.originPoint[e]+o[e];this.constraints&&this.constraints[e]&&(d=applyConstraints(d,this.constraints[e],this.elastic[e])),c.set(d)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:o}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,c=this.constraints;s&&isRefObject(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=calcRelativeConstraints(a.layoutBox,s):this.constraints=!1,this.elastic=resolveDragElastic(o),c!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(d=>{this.getAxisMotionValue(d)&&(this.constraints[d]=rebaseAxisConstraints(a.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!isRefObject(e))return!1;const o=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=measurePageBox(o,a.root,this.visualElement.getTransformPagePoint());let d=calcViewportConstraints(a.layout.layoutBox,c);if(s){const h=s(convertBoxToBoundingBox(d));this.hasMutatedConstraints=!!h,h&&(d=convertBoundingBoxToBox(h))}return d}startAnimation(e){const{drag:s,dragMomentum:o,dragElastic:a,dragTransition:c,dragSnapToOrigin:d,onDragTransitionEnd:h}=this.getProps(),g=this.constraints||{},j=eachAxis($=>{if(!shouldDrag($,s,this.currentDirection))return;let _=g&&g[$]||{};d&&(_={min:0,max:0});const et=a?200:1e6,tt=a?40:1e7,it={type:"inertia",velocity:o?e[$]:0,bounceStiffness:et,bounceDamping:tt,timeConstant:750,restDelta:1,restSpeed:10,...c,..._};return this.startAxisValueAnimation($,it)});return Promise.all(j).then(h)}startAxisValueAnimation(e,s){const o=this.getAxisMotionValue(e);return o.start(animateMotionValue(e,o,0,s))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s="_drag"+e.toUpperCase(),o=this.visualElement.getProps(),a=o[s];return a||this.visualElement.getValue(e,(o.initial?o.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(s=>{const{drag:o}=this.getProps();if(!shouldDrag(s,o,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(s);if(a&&a.layout){const{min:d,max:h}=a.layout.layoutBox[s];c.set(e[s]-mix(d,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(s)||!o||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};eachAxis(d=>{const h=this.getAxisMotionValue(d);if(h){const g=h.get();a[d]=calcOrigin({min:g,max:g},this.constraints[d])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(d=>{if(!shouldDrag(d,e,null))return;const h=this.getAxisMotionValue(d),{min:g,max:j}=this.constraints[d];h.set(mix(g,j,a[d]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,s=addPointerEvent(e,"pointerdown",g=>{const{drag:j,dragListener:$=!0}=this.getProps();j&&$&&this.start(g)}),o=()=>{const{dragConstraints:g}=this.getProps();isRefObject(g)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",o);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),o();const d=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",({delta:g,hasLayoutChanged:j})=>{this.isDragging&&j&&(eachAxis($=>{const _=this.getAxisMotionValue($);_&&(this.originPoint[$]+=g[$].translate,_.set(_.get()+g[$].translate))}),this.visualElement.render())});return()=>{d(),s(),c(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:d=defaultElastic,dragMomentum:h=!0}=e;return{...e,drag:s,dragDirectionLock:o,dragPropagation:a,dragConstraints:c,dragElastic:d,dragMomentum:h}}}function shouldDrag(i,e,s){return(e===!0||e===i)&&(s===null||s===i)}function getCurrentDirection(i,e=10){let s=null;return Math.abs(i.y)>e?s="y":Math.abs(i.x)>e&&(s="x"),s}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=i=>(e,s)=>{i&&frame.update(()=>i(e,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:o,onPanEnd:a}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(s),onMove:o,onEnd:(c,d)=>{delete this.session,a&&frame.update(()=>a(c,d))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function usePresence(){const i=reactExports.useContext(PresenceContext);if(i===null)return[!0,null];const{isPresent:e,onExitComplete:s,register:o}=i,a=reactExports.useId();return reactExports.useEffect(()=>o(a),[]),!e&&s?[!1,()=>s&&s(a)]:[!0]}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(i,e){return e.max===e.min?0:i/(e.max-e.min)*100}const correctBorderRadius={correct:(i,e)=>{if(!e.target)return i;if(typeof i=="string")if(px.test(i))i=parseFloat(i);else return i;const s=pixelsToPercent(i,e.target.x),o=pixelsToPercent(i,e.target.y);return`${s}% ${o}%`}},correctBoxShadow={correct:(i,{treeScale:e,projectionDelta:s})=>{const o=i,a=complex.parse(i);if(a.length>5)return o;const c=complex.createTransformer(i),d=typeof a[0]!="number"?1:0,h=s.x.scale*e.x,g=s.y.scale*e.y;a[0+d]/=h,a[1+d]/=g;const j=mix(h,g,.5);return typeof a[2+d]=="number"&&(a[2+d]/=j),typeof a[3+d]=="number"&&(a[3+d]/=j),c(a)}};class MeasureLayoutWithContext extends React.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:o,layoutId:a}=this.props,{projection:c}=e;addScaleCorrector(defaultScaleCorrectors),c&&(s.group&&s.group.add(c),o&&o.register&&a&&o.register(c),c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:o,drag:a,isPresent:c}=this.props,d=o.projection;return d&&(d.isPresent=c,a||e.layoutDependency!==s||s===void 0?d.willUpdate():this.safeToRemove(),e.isPresent!==c&&(c?d.promote():d.relegate()||frame.postRender(()=>{const h=d.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:a}=e;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),o&&o.deregister&&o.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(i){const[e,s]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return React.createElement(MeasureLayoutWithContext,{...i,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:s})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow},borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=i=>typeof i=="string"?parseFloat(i):i,isPx=i=>typeof i=="number"||px.test(i);function mixValues(i,e,s,o,a,c){a?(i.opacity=mix(0,s.opacity!==void 0?s.opacity:1,easeCrossfadeIn(o)),i.opacityExit=mix(e.opacity!==void 0?e.opacity:1,0,easeCrossfadeOut(o))):c&&(i.opacity=mix(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,o));for(let d=0;d<numBorders;d++){const h=`border${borders[d]}Radius`;let g=getRadius(e,h),j=getRadius(s,h);if(g===void 0&&j===void 0)continue;g||(g=0),j||(j=0),g===0||j===0||isPx(g)===isPx(j)?(i[h]=Math.max(mix(asNumber(g),asNumber(j),o),0),(percent.test(j)||percent.test(g))&&(i[h]+="%")):i[h]=j}(e.rotate||s.rotate)&&(i.rotate=mix(e.rotate||0,s.rotate||0,o))}function getRadius(i,e){return i[e]!==void 0?i[e]:i.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(i,e,s){return o=>o<i?0:o>e?1:s(progress(i,e,o))}function copyAxisInto(i,e){i.min=e.min,i.max=e.max}function copyBoxInto(i,e){copyAxisInto(i.x,e.x),copyAxisInto(i.y,e.y)}function removePointDelta(i,e,s,o,a){return i-=e,i=scalePoint(i,1/s,o),a!==void 0&&(i=scalePoint(i,1/a,o)),i}function removeAxisDelta(i,e=0,s=1,o=.5,a,c=i,d=i){if(percent.test(e)&&(e=parseFloat(e),e=mix(d.min,d.max,e/100)-d.min),typeof e!="number")return;let h=mix(c.min,c.max,o);i===c&&(h-=e),i.min=removePointDelta(i.min,e,s,h,a),i.max=removePointDelta(i.max,e,s,h,a)}function removeAxisTransforms(i,e,[s,o,a],c,d){removeAxisDelta(i,e[s],e[o],e[a],e.scale,c,d)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(i,e,s,o){removeAxisTransforms(i.x,e,xKeys,s?s.x:void 0,o?o.x:void 0),removeAxisTransforms(i.y,e,yKeys,s?s.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(i){return i.translate===0&&i.scale===1}function isDeltaZero(i){return isAxisDeltaZero(i.x)&&isAxisDeltaZero(i.y)}function boxEquals(i,e){return i.x.min===e.x.min&&i.x.max===e.x.max&&i.y.min===e.y.min&&i.y.max===e.y.max}function boxEqualsRounded(i,e){return Math.round(i.x.min)===Math.round(e.x.min)&&Math.round(i.x.max)===Math.round(e.x.max)&&Math.round(i.y.min)===Math.round(e.y.min)&&Math.round(i.y.max)===Math.round(e.y.max)}function aspectRatio(i){return calcLength(i.x)/calcLength(i.y)}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let o;for(let a=s;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){o=c;break}}return o?(this.promote(o),!0):!1}promote(e,s){const o=this.lead;if(e!==o&&(this.prevLead=o,this.lead=e,e.show(),o)){o.instance&&o.scheduleRender(),e.scheduleRender(),e.resumeFrom=o,s&&(e.resumeFrom.preserveOpacity=!0),o.snapshot&&(e.snapshot=o.snapshot,e.snapshot.latestValues=o.animationValues||o.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:o}=e;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(i,e,s){let o="";const a=i.x.translate/e.x,c=i.y.translate/e.y;if((a||c)&&(o=`translate3d(${a}px, ${c}px, 0) `),(e.x!==1||e.y!==1)&&(o+=`scale(${1/e.x}, ${1/e.y}) `),s){const{rotate:g,rotateX:j,rotateY:$}=s;g&&(o+=`rotate(${g}deg) `),j&&(o+=`rotateX(${j}deg) `),$&&(o+=`rotateY(${$}deg) `)}const d=i.x.scale*e.x,h=i.y.scale*e.y;return(d!==1||h!==1)&&(o+=`scale(${d}, ${h})`),o||"none"}const compareByDepth=(i,e)=>i.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(i,e){const s=performance.now(),o=({timestamp:a})=>{const c=a-s;c>=e&&(cancelFrame(o),i(c-e))};return frame.read(o,!0),()=>cancelFrame(o)}function record(i){window.MotionDebug&&window.MotionDebug.record(i)}function isSVGElement(i){return i instanceof SVGElement&&i.tagName!=="svg"}function animateSingleValue(i,e,s){const o=isMotionValue(i)?i:motionValue(i);return o.start(animateMotionValue("",o,e,s)),o.animation}const transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;const projectionFrameData={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function createProjectionNode({attachResizeListener:i,defaultParent:e,measureScroll:s,checkIsScrollRoot:o,resetTransform:a}){return class{constructor(d={},h=e==null?void 0:e()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,projectionFrameData.totalNodes=projectionFrameData.resolvedTargetDeltas=projectionFrameData.recalculatedProjection=0,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),record(projectionFrameData)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(d,h){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new SubscriptionManager),this.eventHandlers.get(d).add(h)}notifyListeners(d,...h){const g=this.eventHandlers.get(d);g&&g.notify(...h)}hasListeners(d){return this.eventHandlers.has(d)}mount(d,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(d),this.instance=d;const{layoutId:g,layout:j,visualElement:$}=this.options;if($&&!$.current&&$.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(j||g)&&(this.isLayoutDirty=!0),i){let _;const et=()=>this.root.updateBlockedByResize=!1;i(d,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=delay(et,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&$&&(g||j)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:et,hasRelativeTargetChanged:tt,layout:it})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ot=this.options.transition||$.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:at,onLayoutAnimationComplete:rt}=$.getProps(),st=!this.targetLayout||!boxEqualsRounded(this.targetLayout,it)||tt,lt=!et&&tt;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||lt||et&&(st||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,lt);const mt={...getValueTransition(ot,"layout"),onPlay:at,onComplete:rt};($.shouldReduceMotion||this.options.layoutRoot)&&(mt.delay=0,mt.type=!1),this.startAnimation(mt)}else et||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=it})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetRotation),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let $=0;$<this.path.length;$++){const _=this.path[$];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:g}=this.options;if(h===void 0&&!g)return;const j=this.getTransformTemplate();this.prevTransformTemplateValue=j?j(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const h=performance.now();frameData.delta=clamp(0,1e3/60,h-frameData.timestamp),frameData.timestamp=h,frameData.isProcessing=!0,steps.update.process(frameData),steps.preRender.process(frameData),steps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:d,isRoot:o(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const d=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!isDeltaZero(this.projectionDelta),g=this.getTransformTemplate(),j=g?g(this.latestValues,""):void 0,$=j!==this.prevTransformTemplateValue;d&&(h||hasTransform(this.latestValues)||$)&&(a(this.instance,j),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const h=this.measurePageBox();let g=this.removeElementScroll(h);return d&&(g=this.removeTransform(g)),roundBox(g),{animationId:this.root.animationId,measuredBox:h,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return createBox();const h=d.measureViewportBox(),{scroll:g}=this.root;return g&&(translateAxis(h.x,g.offset.x),translateAxis(h.y,g.offset.y)),h}removeElementScroll(d){const h=createBox();copyBoxInto(h,d);for(let g=0;g<this.path.length;g++){const j=this.path[g],{scroll:$,options:_}=j;if(j!==this.root&&$&&_.layoutScroll){if($.isRoot){copyBoxInto(h,d);const{scroll:et}=this.root;et&&(translateAxis(h.x,-et.offset.x),translateAxis(h.y,-et.offset.y))}translateAxis(h.x,$.offset.x),translateAxis(h.y,$.offset.y)}}return h}applyTransform(d,h=!1){const g=createBox();copyBoxInto(g,d);for(let j=0;j<this.path.length;j++){const $=this.path[j];!h&&$.options.layoutScroll&&$.scroll&&$!==$.root&&transformBox(g,{x:-$.scroll.offset.x,y:-$.scroll.offset.y}),hasTransform($.latestValues)&&transformBox(g,$.latestValues)}return hasTransform(this.latestValues)&&transformBox(g,this.latestValues),g}removeTransform(d){const h=createBox();copyBoxInto(h,d);for(let g=0;g<this.path.length;g++){const j=this.path[g];if(!j.instance||!hasTransform(j.latestValues))continue;hasScale(j.latestValues)&&j.updateSnapshot();const $=createBox(),_=j.measurePageBox();copyBoxInto($,_),removeBoxTransforms(h,j.latestValues,j.snapshot?j.snapshot.layoutBox:void 0,$)}return hasTransform(this.latestValues)&&removeBoxTransforms(h,this.latestValues),h}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){var h;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const j=!!this.resumingFrom||this!==g;if(!(d||j&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:_,layoutId:et}=this.options;if(!(!this.layout||!(_||et))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const tt=this.getClosestProjectingParent();tt&&tt.layout&&this.animationProgress!==1?(this.relativeParent=tt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,tt.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const tt=this.getClosestProjectingParent();tt&&!!tt.resumingFrom==!!this.resumingFrom&&!tt.options.layoutScroll&&tt.target&&this.animationProgress!==1?(this.relativeParent=tt,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,tt.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}projectionFrameData.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var d;const h=this.getLead(),g=!!this.resumingFrom||this!==h;let j=!0;if((this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty)&&(j=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(j=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(j=!1),j)return;const{layout:$,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!($||_))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const et=this.treeScale.x,tt=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,g),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:it}=h;if(!it){this.projectionTransform&&(this.projectionDelta=createDelta(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta());const ot=this.projectionTransform;calcBoxDelta(this.projectionDelta,this.layoutCorrected,it,this.latestValues),this.projectionTransform=buildProjectionTransform(this.projectionDelta,this.treeScale),(this.projectionTransform!==ot||this.treeScale.x!==et||this.treeScale.y!==tt)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",it)),projectionFrameData.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),d){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(d,h=!1){const g=this.snapshot,j=g?g.latestValues:{},$={...this.latestValues},_=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const et=createBox(),tt=g?g.source:void 0,it=this.layout?this.layout.source:void 0,ot=tt!==it,at=this.getStack(),rt=!at||at.members.length<=1,st=!!(ot&&!rt&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let lt;this.mixTargetDelta=mt=>{const ft=mt/1e3;mixAxisDelta(_.x,d.x,ft),mixAxisDelta(_.y,d.y,ft),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(et,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,et,ft),lt&&boxEquals(this.relativeTarget,lt)&&(this.isProjectionDirty=!1),lt||(lt=createBox()),copyBoxInto(lt,this.relativeTarget)),ot&&(this.animationValues=$,mixValues($,j,this.latestValues,ft,st,rt)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ft},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...d,onUpdate:h=>{this.mixTargetDelta(h),d.onUpdate&&d.onUpdate(h)},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:h,target:g,layout:j,latestValues:$}=d;if(!(!h||!g||!j)){if(this!==d&&this.layout&&j&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,j.layoutBox)){g=this.target||createBox();const _=calcLength(this.layout.layoutBox.x);g.x.min=d.target.x.min,g.x.max=g.x.min+_;const et=calcLength(this.layout.layoutBox.y);g.y.min=d.target.y.min,g.y.max=g.y.min+et}copyBoxInto(h,g),transformBox(h,$),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,h,$)}}registerSharedNode(d,h){this.sharedNodes.has(d)||this.sharedNodes.set(d,new NodeStack),this.sharedNodes.get(d).add(h);const j=h.options.initialPromotionConfig;h.promote({transition:j?j.transition:void 0,preserveFollowOpacity:j&&j.shouldPreserveFollowOpacity?j.shouldPreserveFollowOpacity(h):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){var d;const{layoutId:h}=this.options;return h?((d=this.getStack())===null||d===void 0?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:h}=this.options;return h?(d=this.getStack())===null||d===void 0?void 0:d.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:h,preserveFollowOpacity:g}={}){const j=this.getStack();j&&j.promote(this,g),d&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetRotation(){const{visualElement:d}=this.options;if(!d)return;let h=!1;const{latestValues:g}=d;if((g.rotate||g.rotateX||g.rotateY||g.rotateZ)&&(h=!0),!h)return;const j={};for(let $=0;$<transformAxes.length;$++){const _="rotate"+transformAxes[$];g[_]&&(j[_]=g[_],d.setStaticValue(_,0))}d.render();for(const $ in j)d.setStaticValue($,j[$]);d.scheduleRender()}getProjectionStyles(d){var h,g;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const j={visibility:""},$=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,j.opacity="",j.pointerEvents=resolveMotionValue(d==null?void 0:d.pointerEvents)||"",j.transform=$?$(this.latestValues,""):"none",j;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const ot={};return this.options.layoutId&&(ot.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ot.pointerEvents=resolveMotionValue(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(ot.transform=$?$({},""):"none",this.hasProjected=!1),ot}const et=_.animationValues||_.latestValues;this.applyTransformsToTarget(),j.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,et),$&&(j.transform=$(et,j.transform));const{x:tt,y:it}=this.projectionDelta;j.transformOrigin=`${tt.origin*100}% ${it.origin*100}% 0`,_.animationValues?j.opacity=_===this?(g=(h=et.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&g!==void 0?g:1:this.preserveOpacity?this.latestValues.opacity:et.opacityExit:j.opacity=_===this?et.opacity!==void 0?et.opacity:"":et.opacityExit!==void 0?et.opacityExit:0;for(const ot in scaleCorrectors){if(et[ot]===void 0)continue;const{correct:at,applyTo:rt}=scaleCorrectors[ot],st=j.transform==="none"?et[ot]:at(et[ot],_);if(rt){const lt=rt.length;for(let mt=0;mt<lt;mt++)j[rt[mt]]=st}else j[ot]=st}return this.options.layoutId&&(j.pointerEvents=_===this?resolveMotionValue(d==null?void 0:d.pointerEvents)||"":"none"),j}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>{var h;return(h=d.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(i){i.updateLayout()}function notifyLayoutUpdate(i){var e;const s=((e=i.resumeFrom)===null||e===void 0?void 0:e.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&s&&i.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:a}=i.layout,{animationType:c}=i.options,d=s.source!==i.layout.source;c==="size"?eachAxis(_=>{const et=d?s.measuredBox[_]:s.layoutBox[_],tt=calcLength(et);et.min=o[_].min,et.max=et.min+tt}):shouldAnimatePositionOnly(c,s.layoutBox,o)&&eachAxis(_=>{const et=d?s.measuredBox[_]:s.layoutBox[_],tt=calcLength(o[_]);et.max=et.min+tt,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[_].max=i.relativeTarget[_].min+tt)});const h=createDelta();calcBoxDelta(h,o,s.layoutBox);const g=createDelta();d?calcBoxDelta(g,i.applyTransform(a,!0),s.measuredBox):calcBoxDelta(g,o,s.layoutBox);const j=!isDeltaZero(h);let $=!1;if(!i.resumeFrom){const _=i.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:et,layout:tt}=_;if(et&&tt){const it=createBox();calcRelativePosition(it,s.layoutBox,et.layoutBox);const ot=createBox();calcRelativePosition(ot,o,tt.layoutBox),boxEqualsRounded(it,ot)||($=!0),_.options.layoutRoot&&(i.relativeTarget=ot,i.relativeTargetOrigin=it,i.relativeParent=_)}}}i.notifyListeners("didUpdate",{layout:o,snapshot:s,delta:g,layoutDelta:h,hasLayoutChanged:j,hasRelativeTargetChanged:$})}else if(i.isLead()){const{onExitComplete:o}=i.options;o&&o()}i.options.transition=void 0}function propagateDirtyNodes(i){projectionFrameData.totalNodes++,i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function cleanDirtyNodes(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function clearSnapshot(i){i.clearSnapshot()}function clearMeasurements(i){i.clearMeasurements()}function clearIsLayoutDirty(i){i.isLayoutDirty=!1}function resetTransformStyle(i){const{visualElement:e}=i.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),i.resetTransform()}function finishAnimation(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function resolveTargetDelta(i){i.resolveTargetDelta()}function calcProjection(i){i.calcProjection()}function resetRotation(i){i.resetRotation()}function removeLeadSnapshots(i){i.removeLeadSnapshot()}function mixAxisDelta(i,e,s){i.translate=mix(e.translate,0,s),i.scale=mix(e.scale,1,s),i.origin=e.origin,i.originPoint=e.originPoint}function mixAxis(i,e,s,o){i.min=mix(e.min,s.min,o),i.max=mix(e.max,s.max,o)}function mixBox(i,e,s,o){mixAxis(i.x,e.x,s.x,o),mixAxis(i.y,e.y,s.y,o)}function hasOpacityCrossfade(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=i=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(i),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(i){i.min=roundPoint(i.min),i.max=roundPoint(i.max)}function roundBox(i){roundAxis(i.x),roundAxis(i.y)}function shouldAnimatePositionOnly(i,e,s){return i==="position"||i==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(s),.2)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(i,e)=>addDomEvent(i,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const i=new DocumentProjectionNode({});i.mount(window),i.setOptions({layoutScroll:!0}),rootProjectionNode.current=i}return rootProjectionNode.current},resetTransform:(i,e)=>{i.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}},splitCSSVariableRegex=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function parseCSSVariable(i){const e=splitCSSVariableRegex.exec(i);if(!e)return[,];const[,s,o]=e;return[s,o]}function getVariableValue(i,e,s=1){const[o,a]=parseCSSVariable(i);if(!o)return;const c=window.getComputedStyle(e).getPropertyValue(o);if(c){const d=c.trim();return isNumericalString(d)?parseFloat(d):d}else return isCSSVariableToken(a)?getVariableValue(a,e,s+1):a}function resolveCSSVariables(i,{...e},s){const o=i.current;if(!(o instanceof Element))return{target:e,transitionEnd:s};s&&(s={...s}),i.values.forEach(a=>{const c=a.get();if(!isCSSVariableToken(c))return;const d=getVariableValue(c,o);d&&a.set(d)});for(const a in e){const c=e[a];if(!isCSSVariableToken(c))continue;const d=getVariableValue(c,o);d&&(e[a]=d,s||(s={}),s[a]===void 0&&(s[a]=c))}return{target:e,transitionEnd:s}}const positionalKeys=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),isPositionalKey=i=>positionalKeys.has(i),hasPositionalKey=i=>Object.keys(i).some(isPositionalKey),isNumOrPxType=i=>i===number$1||i===px,getPosFromMatrix=(i,e)=>parseFloat(i.split(", ")[e]),getTranslateFromMatrix=(i,e)=>(s,{transform:o})=>{if(o==="none"||!o)return 0;const a=o.match(/^matrix3d\((.+)\)$/);if(a)return getPosFromMatrix(a[1],e);{const c=o.match(/^matrix\((.+)\)$/);return c?getPosFromMatrix(c[1],i):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(i=>!transformKeys.has(i));function removeNonTranslationalTransform(i){const e=[];return nonTranslationalTransformKeys.forEach(s=>{const o=i.getValue(s);o!==void 0&&(e.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),e.length&&i.render(),e}const positionalValues={width:({x:i},{paddingLeft:e="0",paddingRight:s="0"})=>i.max-i.min-parseFloat(e)-parseFloat(s),height:({y:i},{paddingTop:e="0",paddingBottom:s="0"})=>i.max-i.min-parseFloat(e)-parseFloat(s),top:(i,{top:e})=>parseFloat(e),left:(i,{left:e})=>parseFloat(e),bottom:({y:i},{top:e})=>parseFloat(e)+(i.max-i.min),right:({x:i},{left:e})=>parseFloat(e)+(i.max-i.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const convertChangedValueTypes=(i,e,s)=>{const o=e.measureViewportBox(),a=e.current,c=getComputedStyle(a),{display:d}=c,h={};d==="none"&&e.setStaticValue("display",i.display||"block"),s.forEach(j=>{h[j]=positionalValues[j](o,c)}),e.render();const g=e.measureViewportBox();return s.forEach(j=>{const $=e.getValue(j);$&&$.jump(h[j]),i[j]=positionalValues[j](g,c)}),i},checkAndConvertChangedValueTypes=(i,e,s={},o={})=>{e={...e},o={...o};const a=Object.keys(e).filter(isPositionalKey);let c=[],d=!1;const h=[];if(a.forEach(g=>{const j=i.getValue(g);if(!i.hasValue(g))return;let $=s[g],_=findDimensionValueType($);const et=e[g];let tt;if(isKeyframesTarget(et)){const it=et.length,ot=et[0]===null?1:0;$=et[ot],_=findDimensionValueType($);for(let at=ot;at<it&&et[at]!==null;at++)tt?invariant$1(findDimensionValueType(et[at])===tt):tt=findDimensionValueType(et[at])}else tt=findDimensionValueType(et);if(_!==tt)if(isNumOrPxType(_)&&isNumOrPxType(tt)){const it=j.get();typeof it=="string"&&j.set(parseFloat(it)),typeof et=="string"?e[g]=parseFloat(et):Array.isArray(et)&&tt===px&&(e[g]=et.map(parseFloat))}else _!=null&&_.transform&&(tt!=null&&tt.transform)&&($===0||et===0)?$===0?j.set(tt.transform($)):e[g]=_.transform(et):(d||(c=removeNonTranslationalTransform(i),d=!0),h.push(g),o[g]=o[g]!==void 0?o[g]:e[g],j.jump(et))}),h.length){const g=h.indexOf("height")>=0?window.pageYOffset:null,j=convertChangedValueTypes(e,i,h);return c.length&&c.forEach(([$,_])=>{i.getValue($).set(_)}),i.render(),isBrowser$1&&g!==null&&window.scrollTo({top:g}),{target:j,transitionEnd:o}}else return{target:e,transitionEnd:o}};function unitConversion(i,e,s,o){return hasPositionalKey(e)?checkAndConvertChangedValueTypes(i,e,s,o):{target:e,transitionEnd:o}}const parseDomVariant=(i,e,s,o)=>{const a=resolveCSSVariables(i,e,o);return e=a.target,o=a.transitionEnd,unitConversion(i,e,s,o)},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser$1)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=i.matches;i.addListener(e),e()}else prefersReducedMotion.current=!1}function updateMotionValuesFromProps(i,e,s){const{willChange:o}=e;for(const a in e){const c=e[a],d=s[a];if(isMotionValue(c))i.addValue(a,c),isWillChangeMotionValue(o)&&o.add(a);else if(isMotionValue(d))i.addValue(a,motionValue(c,{owner:i})),isWillChangeMotionValue(o)&&o.remove(a);else if(d!==c)if(i.hasValue(a)){const h=i.getValue(a);!h.hasAnimated&&h.set(c)}else{const h=i.getStaticValue(a);i.addValue(a,motionValue(h!==void 0?h:c,{owner:i}))}}for(const a in s)e[a]===void 0&&i.removeValue(a);return e}const visualElementStore=new WeakMap,featureNames=Object.keys(featureDefinitions),numFeatures=featureNames.length,propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],numVariantProps=variantProps.length;class VisualElement{constructor({parent:e,props:s,presenceContext:o,reducedMotionConfig:a,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>frame.render(this.render,!1,!0);const{latestValues:h,renderState:g}=c;this.latestValues=h,this.baseTarget={...h},this.initialValues=s.initial?{...h}:{},this.renderState=g,this.parent=e,this.props=s,this.presenceContext=o,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=d,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:j,...$}=this.scrapeMotionValuesFromProps(s,{});for(const _ in $){const et=$[_];h[_]!==void 0&&isMotionValue(et)&&(et.set(h[_],!1),isWillChangeMotionValue(j)&&j.add(_))}}scrapeMotionValuesFromProps(e,s){return{}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,s){const o=transformProps.has(e),a=s.on("change",d=>{this.latestValues[e]=d,this.props.onUpdate&&frame.update(this.notifyUpdate,!1,!0),o&&this.projection&&(this.projection.isTransformDirty=!0)}),c=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{a(),c()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...s},o,a,c){let d,h;for(let g=0;g<numFeatures;g++){const j=featureNames[g],{isEnabled:$,Feature:_,ProjectionNode:et,MeasureLayout:tt}=featureDefinitions[j];et&&(d=et),$(s)&&(!this.features[j]&&_&&(this.features[j]=new _(this)),tt&&(h=tt))}if((this.type==="html"||this.type==="svg")&&!this.projection&&d){this.projection=new d(this.latestValues,this.parent&&this.parent.projection);const{layoutId:g,layout:j,drag:$,dragConstraints:_,layoutScroll:et,layoutRoot:tt}=s;this.projection.setOptions({layoutId:g,layout:j,alwaysMeasureLayout:!!$||_&&isRefObject(_),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof j=="string"?j:"both",initialPromotionConfig:c,layoutScroll:et,layoutRoot:tt})}return h}updateFeatures(){for(const e in this.features){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}makeTargetAnimatable(e,s=!0){return this.makeTargetAnimatableFromInstance(e,this.props,s)}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<propEventHandlers.length;o++){const a=propEventHandlers[o];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c=e["on"+a];c&&(this.propEventSubscriptions[a]=this.on(a,c))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const s={};for(let o=0;o<numVariantProps;o++){const a=variantProps[o],c=this.props[a];(isVariantLabel(c)||c===!1)&&(s[a]=c)}return s}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){s!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,s)),this.values.set(e,s),this.latestValues[e]=s.get()}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let o=this.values.get(e);return o===void 0&&s!==void 0&&(o=motionValue(s,{owner:this}),this.addValue(e,o)),o}readValue(e){var s;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:o}=this.props,a=typeof o=="string"||typeof o=="object"?(s=resolveVariantFromProps(this.props,o))===null||s===void 0?void 0:s[e]:void 0;if(o&&a!==void 0)return a;const c=this.getBaseTargetFromProps(this.props,e);return c!==void 0&&!isMotionValue(c)?c:this.initialValues[e]!==void 0&&a===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class DOMVisualElement extends VisualElement{sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:o}){delete s[e],delete o[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:s,...o},{transformValues:a},c){let d=getOrigin(o,e||{},this);if(a&&(s&&(s=a(s)),o&&(o=a(o)),d&&(d=a(d))),c){checkTargetForNewValues(this,o,d);const h=parseDomVariant(this,o,d,s);s=h.transitionEnd,o=h.target}return{transition:e,transitionEnd:s,...o}}}function getComputedStyle$2(i){return window.getComputedStyle(i)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}else{const o=getComputedStyle$2(e),a=(isCSSVariableName(s)?o.getPropertyValue(s):o[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:s}){return measureViewportBox(e,s)}build(e,s,o,a){buildHTMLStyles(e,s,o,a.transformTemplate)}scrapeMotionValuesFromProps(e,s){return scrapeMotionValuesFromProps$1(e,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(e,s,o,a){renderHTML(e,s,o,a)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),e.getAttribute(s)}measureInstanceViewportBox(){return createBox()}scrapeMotionValuesFromProps(e,s){return scrapeMotionValuesFromProps(e,s)}build(e,s,o,a){buildSVGAttrs(e,s,o,this.isSVGTag,a.transformTemplate)}renderInstance(e,s,o,a){renderSVG(e,s,o,a)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(i,e)=>isSVGComponent(i)?new SVGVisualElement(e,{enableHardwareAcceleration:!1}):new HTMLVisualElement(e,{enableHardwareAcceleration:!0}),layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},preloadedFeatures={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy((i,e)=>createDomMotionConfig(i,e,preloadedFeatures,createDomVisualElement));function useIsMounted(){const i=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>(i.current=!0,()=>{i.current=!1}),[]),i}function useForceUpdate(){const i=useIsMounted(),[e,s]=reactExports.useState(0),o=reactExports.useCallback(()=>{i.current&&s(e+1)},[e]);return[reactExports.useCallback(()=>frame.postRender(o),[o]),e]}class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=s.offsetHeight||0,o.width=s.offsetWidth||0,o.top=s.offsetTop,o.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:i,isPresent:e}){const s=reactExports.useId(),o=reactExports.useRef(null),a=reactExports.useRef({width:0,height:0,top:0,left:0});return reactExports.useInsertionEffect(()=>{const{width:c,height:d,top:h,left:g}=a.current;if(e||!o.current||!c||!d)return;o.current.dataset.motionPopId=s;const j=document.createElement("style");return document.head.appendChild(j),j.sheet&&j.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            top: ${h}px !important;
            left: ${g}px !important;
          }
        `),()=>{document.head.removeChild(j)}},[e]),reactExports.createElement(PopChildMeasure,{isPresent:e,childRef:o,sizeRef:a},reactExports.cloneElement(i,{ref:o}))}const PresenceChild=({children:i,initial:e,isPresent:s,onExitComplete:o,custom:a,presenceAffectsLayout:c,mode:d})=>{const h=useConstant(newChildrenMap),g=reactExports.useId(),j=reactExports.useMemo(()=>({id:g,initial:e,isPresent:s,custom:a,onExitComplete:$=>{h.set($,!0);for(const _ of h.values())if(!_)return;o&&o()},register:$=>(h.set($,!1),()=>h.delete($))}),c?void 0:[s]);return reactExports.useMemo(()=>{h.forEach(($,_)=>h.set(_,!1))},[s]),reactExports.useEffect(()=>{!s&&!h.size&&o&&o()},[s]),d==="popLayout"&&(i=reactExports.createElement(PopChild,{isPresent:s},i)),reactExports.createElement(PresenceContext.Provider,{value:j},i)};function newChildrenMap(){return new Map}function useUnmountEffect(i){return reactExports.useEffect(()=>()=>i(),[])}const getChildKey=i=>i.key||"";function updateChildLookup(i,e){i.forEach(s=>{const o=getChildKey(s);e.set(o,s)})}function onlyElements(i){const e=[];return reactExports.Children.forEach(i,s=>{reactExports.isValidElement(s)&&e.push(s)}),e}const AnimatePresence=({children:i,custom:e,initial:s=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:d="sync"})=>{const h=reactExports.useContext(LayoutGroupContext).forceRender||useForceUpdate()[0],g=useIsMounted(),j=onlyElements(i);let $=j;const _=reactExports.useRef(new Map).current,et=reactExports.useRef($),tt=reactExports.useRef(new Map).current,it=reactExports.useRef(!0);if(useIsomorphicLayoutEffect$1(()=>{it.current=!1,updateChildLookup(j,tt),et.current=$}),useUnmountEffect(()=>{it.current=!0,tt.clear(),_.clear()}),it.current)return reactExports.createElement(reactExports.Fragment,null,$.map(st=>reactExports.createElement(PresenceChild,{key:getChildKey(st),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:c,mode:d},st)));$=[...$];const ot=et.current.map(getChildKey),at=j.map(getChildKey),rt=ot.length;for(let st=0;st<rt;st++){const lt=ot[st];at.indexOf(lt)===-1&&!_.has(lt)&&_.set(lt,void 0)}return d==="wait"&&_.size&&($=[]),_.forEach((st,lt)=>{if(at.indexOf(lt)!==-1)return;const mt=tt.get(lt);if(!mt)return;const ft=ot.indexOf(lt);let gt=st;if(!gt){const dt=()=>{_.delete(lt);const ut=Array.from(tt.keys()).filter(ct=>!at.includes(ct));if(ut.forEach(ct=>tt.delete(ct)),et.current=j.filter(ct=>{const _t=getChildKey(ct);return _t===lt||ut.includes(_t)}),!_.size){if(g.current===!1)return;h(),o&&o()}};gt=reactExports.createElement(PresenceChild,{key:getChildKey(mt),isPresent:!1,onExitComplete:dt,custom:e,presenceAffectsLayout:c,mode:d},mt),_.set(lt,gt)}$.splice(ft,0,gt)}),$=$.map(st=>{const lt=st.key;return _.has(lt)?st:reactExports.createElement(PresenceChild,{key:getChildKey(st),isPresent:!0,presenceAffectsLayout:c,mode:d},st)}),reactExports.createElement(reactExports.Fragment,null,_.size?$:$.map(st=>reactExports.cloneElement(st)))};function ok$1(){}function unreachable(){}function stringify$2(i,e){const s={};return(i[i.length-1]===""?[...i,""]:i).join((s.padRight?" ":"")+","+(s.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name(i,e){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(i)}const re=/[ \t\n\f\r]/g;function whitespace(i){return typeof i=="object"?i.type==="text"?empty$1(i.value):!1:empty$1(i)}function empty$1(i){return i.replace(re,"")===""}class Schema{constructor(e,s,o){this.property=e,this.normal=s,o&&(this.space=o)}}Schema.prototype.property={};Schema.prototype.normal={};Schema.prototype.space=null;function merge(i,e){const s={},o={};let a=-1;for(;++a<i.length;)Object.assign(s,i[a].property),Object.assign(o,i[a].normal);return new Schema(s,o,e)}function normalize$1(i){return i.toLowerCase()}class Info{constructor(e,s){this.property=e,this.attribute=s}}Info.prototype.space=null;Info.prototype.boolean=!1;Info.prototype.booleanish=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.number=!1;Info.prototype.commaSeparated=!1;Info.prototype.spaceSeparated=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.mustUseProperty=!1;Info.prototype.defined=!1;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,s,o,a){let c=-1;if(super(e,s),mark(this,"space",a),typeof o=="number")for(;++c<checks.length;){const d=checks[c];mark(this,checks[c],(o&types[d])===types[d])}}}DefinedInfo.prototype.defined=!0;function mark(i,e,s){s&&(i[e]=s)}const own$4={}.hasOwnProperty;function create(i){const e={},s={};let o;for(o in i.properties)if(own$4.call(i.properties,o)){const a=i.properties[o],c=new DefinedInfo(o,i.transform(i.attributes||{},o),a,i.space);i.mustUseProperty&&i.mustUseProperty.includes(o)&&(c.mustUseProperty=!0),e[o]=c,s[normalize$1(o)]=o,s[normalize$1(c.attribute)]=o}return new Schema(e,s,i.space)}const xlink=create({space:"xlink",transform(i,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),xml=create({space:"xml",transform(i,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function caseSensitiveTransform(i,e){return e in i?i[e]:e}function caseInsensitiveTransform(i,e){return caseSensitiveTransform(i,e.toLowerCase())}const xmlns=create({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:caseInsensitiveTransform,properties:{xmlns:null,xmlnsXLink:null}}),aria=create({transform(i,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null}}),html$2=create({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:caseInsensitiveTransform,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:boolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null}}),svg$1=create({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:caseSensitiveTransform,properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),valid=/^data[-\w.:]+$/i,dash=/-[a-z]/g,cap$1=/[A-Z]/g;function find$1(i,e){const s=normalize$1(e);let o=e,a=Info;if(s in i.normal)return i.property[i.normal[s]];if(s.length>4&&s.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const c=e.slice(5).replace(dash,camelcase);o="data"+c.charAt(0).toUpperCase()+c.slice(1)}else{const c=e.slice(4);if(!dash.test(c)){let d=c.replace(cap$1,kebab);d.charAt(0)!=="-"&&(d="-"+d),e="data"+d}}a=DefinedInfo}return new a(o,e)}function kebab(i){return"-"+i.toLowerCase()}function camelcase(i){return i.charAt(1).toUpperCase()}const hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},html$1=merge([xml,xlink,xmlns,aria,html$2],"html"),svg=merge([xml,xlink,xmlns,aria,svg$1],"svg");function stringify$1(i){return i.join(" ").trim()}var cjs={},COMMENT_REGEX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,NEWLINE_REGEX=/\n/g,WHITESPACE_REGEX=/^\s*/,PROPERTY_REGEX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,COLON_REGEX=/^:\s*/,VALUE_REGEX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SEMICOLON_REGEX=/^[;\s]*/,TRIM_REGEX=/^\s+|\s+$/g,NEWLINE=`
`,FORWARD_SLASH="/",ASTERISK="*",EMPTY_STRING="",TYPE_COMMENT="comment",TYPE_DECLARATION="declaration",inlineStyleParser=function(i,e){if(typeof i!="string")throw new TypeError("First argument must be a string");if(!i)return[];e=e||{};var s=1,o=1;function a(it){var ot=it.match(NEWLINE_REGEX);ot&&(s+=ot.length);var at=it.lastIndexOf(NEWLINE);o=~at?it.length-at:o+it.length}function c(){var it={line:s,column:o};return function(ot){return ot.position=new d(it),j(),ot}}function d(it){this.start=it,this.end={line:s,column:o},this.source=e.source}d.prototype.content=i;function h(it){var ot=new Error(e.source+":"+s+":"+o+": "+it);if(ot.reason=it,ot.filename=e.source,ot.line=s,ot.column=o,ot.source=i,!e.silent)throw ot}function g(it){var ot=it.exec(i);if(ot){var at=ot[0];return a(at),i=i.slice(at.length),ot}}function j(){g(WHITESPACE_REGEX)}function $(it){var ot;for(it=it||[];ot=_();)ot!==!1&&it.push(ot);return it}function _(){var it=c();if(!(FORWARD_SLASH!=i.charAt(0)||ASTERISK!=i.charAt(1))){for(var ot=2;EMPTY_STRING!=i.charAt(ot)&&(ASTERISK!=i.charAt(ot)||FORWARD_SLASH!=i.charAt(ot+1));)++ot;if(ot+=2,EMPTY_STRING===i.charAt(ot-1))return h("End of comment missing");var at=i.slice(2,ot-2);return o+=2,a(at),i=i.slice(ot),o+=2,it({type:TYPE_COMMENT,comment:at})}}function et(){var it=c(),ot=g(PROPERTY_REGEX);if(ot){if(_(),!g(COLON_REGEX))return h("property missing ':'");var at=g(VALUE_REGEX),rt=it({type:TYPE_DECLARATION,property:trim(ot[0].replace(COMMENT_REGEX,EMPTY_STRING)),value:at?trim(at[0].replace(COMMENT_REGEX,EMPTY_STRING)):EMPTY_STRING});return g(SEMICOLON_REGEX),rt}}function tt(){var it=[];$(it);for(var ot;ot=et();)ot!==!1&&(it.push(ot),$(it));return it}return j(),tt()};function trim(i){return i?i.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}var __importDefault=commonjsGlobal$2&&commonjsGlobal$2.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(cjs,"__esModule",{value:!0});var _default=cjs.default=StyleToObject,inline_style_parser_1=__importDefault(inlineStyleParser);function StyleToObject(i,e){var s=null;if(!i||typeof i!="string")return s;var o=(0,inline_style_parser_1.default)(i),a=typeof e=="function";return o.forEach(function(c){if(c.type==="declaration"){var d=c.property,h=c.value;a?e(d,h,c):h&&(s=s||{},s[d]=h)}}),s}const styleToObject=_default.default||_default,pointEnd=point$2("end"),pointStart=point$2("start");function point$2(i){return e;function e(s){const o=s&&s.position&&s.position[i]||{};if(typeof o.line=="number"&&o.line>0&&typeof o.column=="number"&&o.column>0)return{line:o.line,column:o.column,offset:typeof o.offset=="number"&&o.offset>-1?o.offset:void 0}}}function position$1(i){const e=pointStart(i),s=pointEnd(i);if(e&&s)return{start:e,end:s}}function stringifyPosition(i){return!i||typeof i!="object"?"":"position"in i||"type"in i?position(i.position):"start"in i||"end"in i?position(i):"line"in i||"column"in i?point$1(i):""}function point$1(i){return index(i&&i.line)+":"+index(i&&i.column)}function position(i){return point$1(i&&i.start)+"-"+point$1(i&&i.end)}function index(i){return i&&typeof i=="number"?i:1}class VFileMessage extends Error{constructor(e,s,o){super(),typeof s=="string"&&(o=s,s=void 0);let a="",c={},d=!1;if(s&&("line"in s&&"column"in s?c={place:s}:"start"in s&&"end"in s?c={place:s}:"type"in s?c={ancestors:[s],place:s.position}:c={...s}),typeof e=="string"?a=e:!c.cause&&e&&(d=!0,a=e.message,c.cause=e),!c.ruleId&&!c.source&&typeof o=="string"){const g=o.indexOf(":");g===-1?c.ruleId=o:(c.source=o.slice(0,g),c.ruleId=o.slice(g+1))}if(!c.place&&c.ancestors&&c.ancestors){const g=c.ancestors[c.ancestors.length-1];g&&(c.place=g.position)}const h=c.place&&"start"in c.place?c.place.start:c.place;this.ancestors=c.ancestors||void 0,this.cause=c.cause||void 0,this.column=h?h.column:void 0,this.fatal=void 0,this.file,this.message=a,this.line=h?h.line:void 0,this.name=stringifyPosition(c.place)||"1:1",this.place=c.place||void 0,this.reason=this.message,this.ruleId=c.ruleId||void 0,this.source=c.source||void 0,this.stack=d&&c.cause&&typeof c.cause.stack=="string"?c.cause.stack:"",this.actual,this.expected,this.note,this.url}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,dashSomething=/-([a-z])/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(i,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const s=e.filePath||void 0;let o;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");o=developmentCreate(s,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");o=productionCreate(s,e.jsx,e.jsxs)}const a={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:o,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:s,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$1,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},c=one$1(a,i,void 0);return c&&typeof c!="string"?c:a.create(i,a.Fragment,{children:c||void 0},void 0)}function one$1(i,e,s){if(e.type==="element")return element$1(i,e,s);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(i,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(i,e,s);if(e.type==="mdxjsEsm")return mdxEsm(i,e);if(e.type==="root")return root$2(i,e,s);if(e.type==="text")return text$3(i,e)}function element$1(i,e,s){const o=i.schema;let a=o;e.tagName.toLowerCase()==="svg"&&o.space==="html"&&(a=svg,i.schema=a),i.ancestors.push(e);const c=findComponentFromName(i,e.tagName,!1),d=createElementProps(i,e);let h=createChildren(i,e);return tableElements.has(e.tagName)&&(h=h.filter(function(g){return typeof g=="string"?!whitespace(g):!0})),addNode(i,d,c,e),addChildren(d,h),i.ancestors.pop(),i.schema=o,i.create(e,c,d,s)}function mdxExpression(i,e){if(e.data&&e.data.estree&&i.evaluater){const o=e.data.estree.body[0];return o.type,i.evaluater.evaluateExpression(o.expression)}crashEstree(i,e.position)}function mdxEsm(i,e){if(e.data&&e.data.estree&&i.evaluater)return i.evaluater.evaluateProgram(e.data.estree);crashEstree(i,e.position)}function mdxJsxElement(i,e,s){const o=i.schema;let a=o;e.name==="svg"&&o.space==="html"&&(a=svg,i.schema=a),i.ancestors.push(e);const c=e.name===null?i.Fragment:findComponentFromName(i,e.name,!0),d=createJsxElementProps(i,e),h=createChildren(i,e);return addNode(i,d,c,e),addChildren(d,h),i.ancestors.pop(),i.schema=o,i.create(e,c,d,s)}function root$2(i,e,s){const o={};return addChildren(o,createChildren(i,e)),i.create(e,i.Fragment,o,s)}function text$3(i,e){return e.value}function addNode(i,e,s,o){typeof s!="string"&&s!==i.Fragment&&i.passNode&&(e.node=o)}function addChildren(i,e){if(e.length>0){const s=e.length>1?e:e[0];s&&(i.children=s)}}function productionCreate(i,e,s){return o;function o(a,c,d,h){const j=Array.isArray(d.children)?s:e;return h?j(c,d,h):j(c,d)}}function developmentCreate(i,e){return s;function s(o,a,c,d){const h=Array.isArray(c.children),g=pointStart(o);return e(a,c,d,h,{columnNumber:g?g.column-1:void 0,fileName:i,lineNumber:g?g.line:void 0},void 0)}}function createElementProps(i,e){const s={};let o,a;for(a in e.properties)if(a!=="children"&&own$3.call(e.properties,a)){const c=createProperty(i,a,e.properties[a]);if(c){const[d,h]=c;i.tableCellAlignToStyle&&d==="align"&&typeof h=="string"&&tableCellElement.has(e.tagName)?o=h:s[d]=h}}if(o){const c=s.style||(s.style={});c[i.stylePropertyNameCase==="css"?"text-align":"textAlign"]=o}return s}function createJsxElementProps(i,e){const s={};for(const o of e.attributes)if(o.type==="mdxJsxExpressionAttribute")if(o.data&&o.data.estree&&i.evaluater){const c=o.data.estree.body[0];c.type;const d=c.expression;d.type;const h=d.properties[0];h.type,Object.assign(s,i.evaluater.evaluateExpression(h.argument))}else crashEstree(i,e.position);else{const a=o.name;let c;if(o.value&&typeof o.value=="object")if(o.value.data&&o.value.data.estree&&i.evaluater){const h=o.value.data.estree.body[0];h.type,c=i.evaluater.evaluateExpression(h.expression)}else crashEstree(i,e.position);else c=o.value===null?!0:o.value;s[a]=c}return s}function createChildren(i,e){const s=[];let o=-1;const a=i.passKeys?new Map:emptyMap;for(;++o<e.children.length;){const c=e.children[o];let d;if(i.passKeys){const g=c.type==="element"?c.tagName:c.type==="mdxJsxFlowElement"||c.type==="mdxJsxTextElement"?c.name:void 0;if(g){const j=a.get(g)||0;d=g+"-"+j,a.set(g,j+1)}}const h=one$1(i,c,d);h!==void 0&&s.push(h)}return s}function createProperty(i,e,s){const o=find$1(i.schema,e);if(!(s==null||typeof s=="number"&&Number.isNaN(s))){if(Array.isArray(s)&&(s=o.commaSeparated?stringify$2(s):stringify$1(s)),o.property==="style"){let a=typeof s=="object"?s:parseStyle(i,String(s));return i.stylePropertyNameCase==="css"&&(a=transformStylesToCssCasing(a)),["style",a]}return[i.elementAttributeNameCase==="react"&&o.space?hastToReact[o.property]||o.property:o.attribute,s]}}function parseStyle(i,e){const s={};try{styleToObject(e,o)}catch(a){if(!i.ignoreInvalidStyle){const c=a,d=new VFileMessage("Cannot parse `style` attribute",{ancestors:i.ancestors,cause:c,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw d.file=i.filePath||void 0,d.url=docs+"#cannot-parse-style-attribute",d}}return s;function o(a,c){let d=a;d.slice(0,2)!=="--"&&(d.slice(0,4)==="-ms-"&&(d="ms-"+d.slice(4)),d=d.replace(dashSomething,toCamel)),s[d]=c}}function findComponentFromName(i,e,s){let o;if(!s)o={type:"Literal",value:e};else if(e.includes(".")){const a=e.split(".");let c=-1,d;for(;++c<a.length;){const h=name(a[c])?{type:"Identifier",name:a[c]}:{type:"Literal",value:a[c]};d=d?{type:"MemberExpression",object:d,property:h,computed:!!(c&&h.type==="Literal"),optional:!1}:h}o=d}else o=name(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(o.type==="Literal"){const a=o.value;return own$3.call(i.components,a)?i.components[a]:a}if(i.evaluater)return i.evaluater.evaluateExpression(o);crashEstree(i)}function crashEstree(i,e){const s=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:i.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw s.file=i.filePath||void 0,s.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",s}function transformStylesToCssCasing(i){const e={};let s;for(s in i)own$3.call(i,s)&&(e[transformStyleToCssCasing(s)]=i[s]);return e}function transformStyleToCssCasing(i){let e=i.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toCamel(i,e){return e.toUpperCase()}function toDash(i){return"-"+i.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$1(i,e){const s=emptyOptions$1,o=typeof s.includeImageAlt=="boolean"?s.includeImageAlt:!0,a=typeof s.includeHtml=="boolean"?s.includeHtml:!0;return one(i,o,a)}function one(i,e,s){if(node(i)){if("value"in i)return i.type==="html"&&!s?"":i.value;if(e&&"alt"in i&&i.alt)return i.alt;if("children"in i)return all(i.children,e,s)}return Array.isArray(i)?all(i,e,s):""}function all(i,e,s){const o=[];let a=-1;for(;++a<i.length;)o[a]=one(i[a],e,s);return o.join("")}function node(i){return!!(i&&typeof i=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(i){const e="&"+i+";";element.innerHTML=e;const s=element.textContent;return s.charCodeAt(s.length-1)===59&&i!=="semi"||s===e?!1:s}function splice(i,e,s,o){const a=i.length;let c=0,d;if(e<0?e=-e>a?0:a+e:e=e>a?a:e,s=s>0?s:0,o.length<1e4)d=Array.from(o),d.unshift(e,s),i.splice(...d);else for(s&&i.splice(e,s);c<o.length;)d=o.slice(c,c+1e4),d.unshift(e,0),i.splice(...d),c+=1e4,e+=1e4}function push$1(i,e){return i.length>0?(splice(i,i.length,0,e),i):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(i){const e={};let s=-1;for(;++s<i.length;)syntaxExtension(e,i[s]);return e}function syntaxExtension(i,e){let s;for(s in e){const a=(hasOwnProperty.call(i,s)?i[s]:void 0)||(i[s]={}),c=e[s];let d;if(c)for(d in c){hasOwnProperty.call(a,d)||(a[d]=[]);const h=c[d];constructs(a[d],Array.isArray(h)?h:h?[h]:[])}}}function constructs(i,e){let s=-1;const o=[];for(;++s<e.length;)(e[s].add==="after"?i:o).push(e[s]);splice(i,0,0,o)}function decodeNumericCharacterReference(i,e){const s=Number.parseInt(i,e);return s<9||s===11||s>13&&s<32||s>126&&s<160||s>55295&&s<57344||s>64975&&s<65008||(s&65535)===65535||(s&65535)===65534||s>1114111?"":String.fromCodePoint(s)}function normalizeIdentifier(i){return i.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(i){return i!==null&&(i<32||i===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(i){return i!==null&&i<-2}function markdownLineEndingOrSpace(i){return i!==null&&(i<0||i===32)}function markdownSpace(i){return i===-2||i===-1||i===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(i){return e;function e(s){return s!==null&&s>-1&&i.test(String.fromCharCode(s))}}function normalizeUri(i){const e=[];let s=-1,o=0,a=0;for(;++s<i.length;){const c=i.charCodeAt(s);let d="";if(c===37&&asciiAlphanumeric(i.charCodeAt(s+1))&&asciiAlphanumeric(i.charCodeAt(s+2)))a=2;else if(c<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(c))||(d=String.fromCharCode(c));else if(c>55295&&c<57344){const h=i.charCodeAt(s+1);c<56320&&h>56319&&h<57344?(d=String.fromCharCode(c,h),a=1):d=""}else d=String.fromCharCode(c);d&&(e.push(i.slice(o,s),encodeURIComponent(d)),o=s+a+1,d=""),a&&(s+=a,a=0)}return e.join("")+i.slice(o)}function factorySpace(i,e,s,o){const a=o?o-1:Number.POSITIVE_INFINITY;let c=0;return d;function d(g){return markdownSpace(g)?(i.enter(s),h(g)):e(g)}function h(g){return markdownSpace(g)&&c++<a?(i.consume(g),h):(i.exit(s),e(g))}}const content$1={tokenize:initializeContent};function initializeContent(i){const e=i.attempt(this.parser.constructs.contentInitial,o,a);let s;return e;function o(h){if(h===null){i.consume(h);return}return i.enter("lineEnding"),i.consume(h),i.exit("lineEnding"),factorySpace(i,e,"linePrefix")}function a(h){return i.enter("paragraph"),c(h)}function c(h){const g=i.enter("chunkText",{contentType:"text",previous:s});return s&&(s.next=g),s=g,d(h)}function d(h){if(h===null){i.exit("chunkText"),i.exit("paragraph"),i.consume(h);return}return markdownLineEnding(h)?(i.consume(h),i.exit("chunkText"),c):(i.consume(h),d)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(i){const e=this,s=[];let o=0,a,c,d;return h;function h(lt){if(o<s.length){const mt=s[o];return e.containerState=mt[1],i.attempt(mt[0].continuation,g,j)(lt)}return j(lt)}function g(lt){if(o++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,a&&st();const mt=e.events.length;let ft=mt,gt;for(;ft--;)if(e.events[ft][0]==="exit"&&e.events[ft][1].type==="chunkFlow"){gt=e.events[ft][1].end;break}rt(o);let dt=mt;for(;dt<e.events.length;)e.events[dt][1].end=Object.assign({},gt),dt++;return splice(e.events,ft+1,0,e.events.slice(mt)),e.events.length=dt,j(lt)}return h(lt)}function j(lt){if(o===s.length){if(!a)return et(lt);if(a.currentConstruct&&a.currentConstruct.concrete)return it(lt);e.interrupt=!!(a.currentConstruct&&!a._gfmTableDynamicInterruptHack)}return e.containerState={},i.check(containerConstruct,$,_)(lt)}function $(lt){return a&&st(),rt(o),et(lt)}function _(lt){return e.parser.lazy[e.now().line]=o!==s.length,d=e.now().offset,it(lt)}function et(lt){return e.containerState={},i.attempt(containerConstruct,tt,it)(lt)}function tt(lt){return o++,s.push([e.currentConstruct,e.containerState]),et(lt)}function it(lt){if(lt===null){a&&st(),rt(0),i.consume(lt);return}return a=a||e.parser.flow(e.now()),i.enter("chunkFlow",{contentType:"flow",previous:c,_tokenizer:a}),ot(lt)}function ot(lt){if(lt===null){at(i.exit("chunkFlow"),!0),rt(0),i.consume(lt);return}return markdownLineEnding(lt)?(i.consume(lt),at(i.exit("chunkFlow")),o=0,e.interrupt=void 0,h):(i.consume(lt),ot)}function at(lt,mt){const ft=e.sliceStream(lt);if(mt&&ft.push(null),lt.previous=c,c&&(c.next=lt),c=lt,a.defineSkip(lt.start),a.write(ft),e.parser.lazy[lt.start.line]){let gt=a.events.length;for(;gt--;)if(a.events[gt][1].start.offset<d&&(!a.events[gt][1].end||a.events[gt][1].end.offset>d))return;const dt=e.events.length;let ut=dt,ct,_t;for(;ut--;)if(e.events[ut][0]==="exit"&&e.events[ut][1].type==="chunkFlow"){if(ct){_t=e.events[ut][1].end;break}ct=!0}for(rt(o),gt=dt;gt<e.events.length;)e.events[gt][1].end=Object.assign({},_t),gt++;splice(e.events,ut+1,0,e.events.slice(dt)),e.events.length=gt}}function rt(lt){let mt=s.length;for(;mt-- >lt;){const ft=s[mt];e.containerState=ft[1],ft[0].exit.call(e,i)}s.length=lt}function st(){a.write([null]),c=void 0,a=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(i,e,s){return factorySpace(i,i.attempt(this.parser.constructs.document,e,s),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(i){if(i===null||markdownLineEndingOrSpace(i)||unicodeWhitespace(i))return 1;if(unicodePunctuation(i))return 2}function resolveAll(i,e,s){const o=[];let a=-1;for(;++a<i.length;){const c=i[a].resolveAll;c&&!o.includes(c)&&(e=c(e,s),o.push(c))}return e}const attention={name:"attention",tokenize:tokenizeAttention,resolveAll:resolveAllAttention};function resolveAllAttention(i,e){let s=-1,o,a,c,d,h,g,j,$;for(;++s<i.length;)if(i[s][0]==="enter"&&i[s][1].type==="attentionSequence"&&i[s][1]._close){for(o=s;o--;)if(i[o][0]==="exit"&&i[o][1].type==="attentionSequence"&&i[o][1]._open&&e.sliceSerialize(i[o][1]).charCodeAt(0)===e.sliceSerialize(i[s][1]).charCodeAt(0)){if((i[o][1]._close||i[s][1]._open)&&(i[s][1].end.offset-i[s][1].start.offset)%3&&!((i[o][1].end.offset-i[o][1].start.offset+i[s][1].end.offset-i[s][1].start.offset)%3))continue;g=i[o][1].end.offset-i[o][1].start.offset>1&&i[s][1].end.offset-i[s][1].start.offset>1?2:1;const _=Object.assign({},i[o][1].end),et=Object.assign({},i[s][1].start);movePoint(_,-g),movePoint(et,g),d={type:g>1?"strongSequence":"emphasisSequence",start:_,end:Object.assign({},i[o][1].end)},h={type:g>1?"strongSequence":"emphasisSequence",start:Object.assign({},i[s][1].start),end:et},c={type:g>1?"strongText":"emphasisText",start:Object.assign({},i[o][1].end),end:Object.assign({},i[s][1].start)},a={type:g>1?"strong":"emphasis",start:Object.assign({},d.start),end:Object.assign({},h.end)},i[o][1].end=Object.assign({},d.start),i[s][1].start=Object.assign({},h.end),j=[],i[o][1].end.offset-i[o][1].start.offset&&(j=push$1(j,[["enter",i[o][1],e],["exit",i[o][1],e]])),j=push$1(j,[["enter",a,e],["enter",d,e],["exit",d,e],["enter",c,e]]),j=push$1(j,resolveAll(e.parser.constructs.insideSpan.null,i.slice(o+1,s),e)),j=push$1(j,[["exit",c,e],["enter",h,e],["exit",h,e],["exit",a,e]]),i[s][1].end.offset-i[s][1].start.offset?($=2,j=push$1(j,[["enter",i[s][1],e],["exit",i[s][1],e]])):$=0,splice(i,o-1,s-o+3,j),s=o+j.length-$-2;break}}for(s=-1;++s<i.length;)i[s][1].type==="attentionSequence"&&(i[s][1].type="data");return i}function tokenizeAttention(i,e){const s=this.parser.constructs.attentionMarkers.null,o=this.previous,a=classifyCharacter(o);let c;return d;function d(g){return c=g,i.enter("attentionSequence"),h(g)}function h(g){if(g===c)return i.consume(g),h;const j=i.exit("attentionSequence"),$=classifyCharacter(g),_=!$||$===2&&a||s.includes(g),et=!a||a===2&&$||s.includes(o);return j._open=!!(c===42?_:_&&(a||!et)),j._close=!!(c===42?et:et&&($||!_)),e(g)}}function movePoint(i,e){i.column+=e,i.offset+=e,i._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(i,e,s){let o=0;return a;function a(tt){return i.enter("autolink"),i.enter("autolinkMarker"),i.consume(tt),i.exit("autolinkMarker"),i.enter("autolinkProtocol"),c}function c(tt){return asciiAlpha(tt)?(i.consume(tt),d):tt===64?s(tt):j(tt)}function d(tt){return tt===43||tt===45||tt===46||asciiAlphanumeric(tt)?(o=1,h(tt)):j(tt)}function h(tt){return tt===58?(i.consume(tt),o=0,g):(tt===43||tt===45||tt===46||asciiAlphanumeric(tt))&&o++<32?(i.consume(tt),h):(o=0,j(tt))}function g(tt){return tt===62?(i.exit("autolinkProtocol"),i.enter("autolinkMarker"),i.consume(tt),i.exit("autolinkMarker"),i.exit("autolink"),e):tt===null||tt===32||tt===60||asciiControl(tt)?s(tt):(i.consume(tt),g)}function j(tt){return tt===64?(i.consume(tt),$):asciiAtext(tt)?(i.consume(tt),j):s(tt)}function $(tt){return asciiAlphanumeric(tt)?_(tt):s(tt)}function _(tt){return tt===46?(i.consume(tt),o=0,$):tt===62?(i.exit("autolinkProtocol").type="autolinkEmail",i.enter("autolinkMarker"),i.consume(tt),i.exit("autolinkMarker"),i.exit("autolink"),e):et(tt)}function et(tt){if((tt===45||asciiAlphanumeric(tt))&&o++<63){const it=tt===45?et:_;return i.consume(tt),it}return s(tt)}}const blankLine={tokenize:tokenizeBlankLine,partial:!0};function tokenizeBlankLine(i,e,s){return o;function o(c){return markdownSpace(c)?factorySpace(i,a,"linePrefix")(c):a(c)}function a(c){return c===null||markdownLineEnding(c)?e(c):s(c)}}const blockQuote={name:"blockQuote",tokenize:tokenizeBlockQuoteStart,continuation:{tokenize:tokenizeBlockQuoteContinuation},exit};function tokenizeBlockQuoteStart(i,e,s){const o=this;return a;function a(d){if(d===62){const h=o.containerState;return h.open||(i.enter("blockQuote",{_container:!0}),h.open=!0),i.enter("blockQuotePrefix"),i.enter("blockQuoteMarker"),i.consume(d),i.exit("blockQuoteMarker"),c}return s(d)}function c(d){return markdownSpace(d)?(i.enter("blockQuotePrefixWhitespace"),i.consume(d),i.exit("blockQuotePrefixWhitespace"),i.exit("blockQuotePrefix"),e):(i.exit("blockQuotePrefix"),e(d))}}function tokenizeBlockQuoteContinuation(i,e,s){const o=this;return a;function a(d){return markdownSpace(d)?factorySpace(i,c,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):c(d)}function c(d){return i.attempt(blockQuote,e,s)(d)}}function exit(i){i.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(i,e,s){return o;function o(c){return i.enter("characterEscape"),i.enter("escapeMarker"),i.consume(c),i.exit("escapeMarker"),a}function a(c){return asciiPunctuation(c)?(i.enter("characterEscapeValue"),i.consume(c),i.exit("characterEscapeValue"),i.exit("characterEscape"),e):s(c)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(i,e,s){const o=this;let a=0,c,d;return h;function h(_){return i.enter("characterReference"),i.enter("characterReferenceMarker"),i.consume(_),i.exit("characterReferenceMarker"),g}function g(_){return _===35?(i.enter("characterReferenceMarkerNumeric"),i.consume(_),i.exit("characterReferenceMarkerNumeric"),j):(i.enter("characterReferenceValue"),c=31,d=asciiAlphanumeric,$(_))}function j(_){return _===88||_===120?(i.enter("characterReferenceMarkerHexadecimal"),i.consume(_),i.exit("characterReferenceMarkerHexadecimal"),i.enter("characterReferenceValue"),c=6,d=asciiHexDigit,$):(i.enter("characterReferenceValue"),c=7,d=asciiDigit,$(_))}function $(_){if(_===59&&a){const et=i.exit("characterReferenceValue");return d===asciiAlphanumeric&&!decodeNamedCharacterReference(o.sliceSerialize(et))?s(_):(i.enter("characterReferenceMarker"),i.consume(_),i.exit("characterReferenceMarker"),i.exit("characterReference"),e)}return d(_)&&a++<c?(i.consume(_),$):s(_)}}const nonLazyContinuation={tokenize:tokenizeNonLazyContinuation,partial:!0},codeFenced={name:"codeFenced",tokenize:tokenizeCodeFenced,concrete:!0};function tokenizeCodeFenced(i,e,s){const o=this,a={tokenize:ft,partial:!0};let c=0,d=0,h;return g;function g(gt){return j(gt)}function j(gt){const dt=o.events[o.events.length-1];return c=dt&&dt[1].type==="linePrefix"?dt[2].sliceSerialize(dt[1],!0).length:0,h=gt,i.enter("codeFenced"),i.enter("codeFencedFence"),i.enter("codeFencedFenceSequence"),$(gt)}function $(gt){return gt===h?(d++,i.consume(gt),$):d<3?s(gt):(i.exit("codeFencedFenceSequence"),markdownSpace(gt)?factorySpace(i,_,"whitespace")(gt):_(gt))}function _(gt){return gt===null||markdownLineEnding(gt)?(i.exit("codeFencedFence"),o.interrupt?e(gt):i.check(nonLazyContinuation,ot,mt)(gt)):(i.enter("codeFencedFenceInfo"),i.enter("chunkString",{contentType:"string"}),et(gt))}function et(gt){return gt===null||markdownLineEnding(gt)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),_(gt)):markdownSpace(gt)?(i.exit("chunkString"),i.exit("codeFencedFenceInfo"),factorySpace(i,tt,"whitespace")(gt)):gt===96&&gt===h?s(gt):(i.consume(gt),et)}function tt(gt){return gt===null||markdownLineEnding(gt)?_(gt):(i.enter("codeFencedFenceMeta"),i.enter("chunkString",{contentType:"string"}),it(gt))}function it(gt){return gt===null||markdownLineEnding(gt)?(i.exit("chunkString"),i.exit("codeFencedFenceMeta"),_(gt)):gt===96&&gt===h?s(gt):(i.consume(gt),it)}function ot(gt){return i.attempt(a,mt,at)(gt)}function at(gt){return i.enter("lineEnding"),i.consume(gt),i.exit("lineEnding"),rt}function rt(gt){return c>0&&markdownSpace(gt)?factorySpace(i,st,"linePrefix",c+1)(gt):st(gt)}function st(gt){return gt===null||markdownLineEnding(gt)?i.check(nonLazyContinuation,ot,mt)(gt):(i.enter("codeFlowValue"),lt(gt))}function lt(gt){return gt===null||markdownLineEnding(gt)?(i.exit("codeFlowValue"),st(gt)):(i.consume(gt),lt)}function mt(gt){return i.exit("codeFenced"),e(gt)}function ft(gt,dt,ut){let ct=0;return _t;function _t(Dt){return gt.enter("lineEnding"),gt.consume(Dt),gt.exit("lineEnding"),ht}function ht(Dt){return gt.enter("codeFencedFence"),markdownSpace(Dt)?factorySpace(gt,Et,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Dt):Et(Dt)}function Et(Dt){return Dt===h?(gt.enter("codeFencedFenceSequence"),yt(Dt)):ut(Dt)}function yt(Dt){return Dt===h?(ct++,gt.consume(Dt),yt):ct>=d?(gt.exit("codeFencedFenceSequence"),markdownSpace(Dt)?factorySpace(gt,Ot,"whitespace")(Dt):Ot(Dt)):ut(Dt)}function Ot(Dt){return Dt===null||markdownLineEnding(Dt)?(gt.exit("codeFencedFence"),dt(Dt)):ut(Dt)}}}function tokenizeNonLazyContinuation(i,e,s){const o=this;return a;function a(d){return d===null?s(d):(i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),c)}function c(d){return o.parser.lazy[o.now().line]?s(d):e(d)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={tokenize:tokenizeFurtherStart,partial:!0};function tokenizeCodeIndented(i,e,s){const o=this;return a;function a(j){return i.enter("codeIndented"),factorySpace(i,c,"linePrefix",5)(j)}function c(j){const $=o.events[o.events.length-1];return $&&$[1].type==="linePrefix"&&$[2].sliceSerialize($[1],!0).length>=4?d(j):s(j)}function d(j){return j===null?g(j):markdownLineEnding(j)?i.attempt(furtherStart,d,g)(j):(i.enter("codeFlowValue"),h(j))}function h(j){return j===null||markdownLineEnding(j)?(i.exit("codeFlowValue"),d(j)):(i.consume(j),h)}function g(j){return i.exit("codeIndented"),e(j)}}function tokenizeFurtherStart(i,e,s){const o=this;return a;function a(d){return o.parser.lazy[o.now().line]?s(d):markdownLineEnding(d)?(i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),a):factorySpace(i,c,"linePrefix",5)(d)}function c(d){const h=o.events[o.events.length-1];return h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(d):markdownLineEnding(d)?a(d):s(d)}}const codeText={name:"codeText",tokenize:tokenizeCodeText,resolve:resolveCodeText,previous};function resolveCodeText(i){let e=i.length-4,s=3,o,a;if((i[s][1].type==="lineEnding"||i[s][1].type==="space")&&(i[e][1].type==="lineEnding"||i[e][1].type==="space")){for(o=s;++o<e;)if(i[o][1].type==="codeTextData"){i[s][1].type="codeTextPadding",i[e][1].type="codeTextPadding",s+=2,e-=2;break}}for(o=s-1,e++;++o<=e;)a===void 0?o!==e&&i[o][1].type!=="lineEnding"&&(a=o):(o===e||i[o][1].type==="lineEnding")&&(i[a][1].type="codeTextData",o!==a+2&&(i[a][1].end=i[o-1][1].end,i.splice(a+2,o-a-2),e-=o-a-2,o=a+2),a=void 0);return i}function previous(i){return i!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(i,e,s){let o=0,a,c;return d;function d(_){return i.enter("codeText"),i.enter("codeTextSequence"),h(_)}function h(_){return _===96?(i.consume(_),o++,h):(i.exit("codeTextSequence"),g(_))}function g(_){return _===null?s(_):_===32?(i.enter("space"),i.consume(_),i.exit("space"),g):_===96?(c=i.enter("codeTextSequence"),a=0,$(_)):markdownLineEnding(_)?(i.enter("lineEnding"),i.consume(_),i.exit("lineEnding"),g):(i.enter("codeTextData"),j(_))}function j(_){return _===null||_===32||_===96||markdownLineEnding(_)?(i.exit("codeTextData"),g(_)):(i.consume(_),j)}function $(_){return _===96?(i.consume(_),a++,$):a===o?(i.exit("codeTextSequence"),i.exit("codeText"),e(_)):(c.type="codeTextData",j(_))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,s){const o=s??Number.POSITIVE_INFINITY;return o<this.left.length?this.left.slice(e,o):e>this.left.length?this.right.slice(this.right.length-o+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-o+this.left.length).reverse())}splice(e,s,o){const a=s||0;this.setCursor(Math.trunc(e));const c=this.right.splice(this.right.length-a,Number.POSITIVE_INFINITY);return o&&chunkedPush(this.left,o),c.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const s=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,s.reverse())}else{const s=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,s.reverse())}}}function chunkedPush(i,e){let s=0;if(e.length<1e4)i.push(...e);else for(;s<e.length;)i.push(...e.slice(s,s+1e4)),s+=1e4}function subtokenize(i){const e={};let s=-1,o,a,c,d,h,g,j;const $=new SpliceBuffer(i);for(;++s<$.length;){for(;s in e;)s=e[s];if(o=$.get(s),s&&o[1].type==="chunkFlow"&&$.get(s-1)[1].type==="listItemPrefix"&&(g=o[1]._tokenizer.events,c=0,c<g.length&&g[c][1].type==="lineEndingBlank"&&(c+=2),c<g.length&&g[c][1].type==="content"))for(;++c<g.length&&g[c][1].type!=="content";)g[c][1].type==="chunkText"&&(g[c][1]._isInFirstContentOfListItem=!0,c++);if(o[0]==="enter")o[1].contentType&&(Object.assign(e,subcontent($,s)),s=e[s],j=!0);else if(o[1]._container){for(c=s,a=void 0;c--&&(d=$.get(c),d[1].type==="lineEnding"||d[1].type==="lineEndingBlank");)d[0]==="enter"&&(a&&($.get(a)[1].type="lineEndingBlank"),d[1].type="lineEnding",a=c);a&&(o[1].end=Object.assign({},$.get(a)[1].start),h=$.slice(a,s),h.unshift(o),$.splice(a,s-a+1,h))}}return splice(i,0,Number.POSITIVE_INFINITY,$.slice(0)),!j}function subcontent(i,e){const s=i.get(e)[1],o=i.get(e)[2];let a=e-1;const c=[],d=s._tokenizer||o.parser[s.contentType](s.start),h=d.events,g=[],j={};let $,_,et=-1,tt=s,it=0,ot=0;const at=[ot];for(;tt;){for(;i.get(++a)[1]!==tt;);c.push(a),tt._tokenizer||($=o.sliceStream(tt),tt.next||$.push(null),_&&d.defineSkip(tt.start),tt._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=!0),d.write($),tt._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=void 0)),_=tt,tt=tt.next}for(tt=s;++et<h.length;)h[et][0]==="exit"&&h[et-1][0]==="enter"&&h[et][1].type===h[et-1][1].type&&h[et][1].start.line!==h[et][1].end.line&&(ot=et+1,at.push(ot),tt._tokenizer=void 0,tt.previous=void 0,tt=tt.next);for(d.events=[],tt?(tt._tokenizer=void 0,tt.previous=void 0):at.pop(),et=at.length;et--;){const rt=h.slice(at[et],at[et+1]),st=c.pop();g.push([st,st+rt.length-1]),i.splice(st,2,rt)}for(g.reverse(),et=-1;++et<g.length;)j[it+g[et][0]]=it+g[et][1],it+=g[et][1]-g[et][0]-1;return j}const content={tokenize:tokenizeContent,resolve:resolveContent},continuationConstruct={tokenize:tokenizeContinuation,partial:!0};function resolveContent(i){return subtokenize(i),i}function tokenizeContent(i,e){let s;return o;function o(h){return i.enter("content"),s=i.enter("chunkContent",{contentType:"content"}),a(h)}function a(h){return h===null?c(h):markdownLineEnding(h)?i.check(continuationConstruct,d,c)(h):(i.consume(h),a)}function c(h){return i.exit("chunkContent"),i.exit("content"),e(h)}function d(h){return i.consume(h),i.exit("chunkContent"),s.next=i.enter("chunkContent",{contentType:"content",previous:s}),s=s.next,a}}function tokenizeContinuation(i,e,s){const o=this;return a;function a(d){return i.exit("chunkContent"),i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),factorySpace(i,c,"linePrefix")}function c(d){if(d===null||markdownLineEnding(d))return s(d);const h=o.events[o.events.length-1];return!o.parser.constructs.disable.null.includes("codeIndented")&&h&&h[1].type==="linePrefix"&&h[2].sliceSerialize(h[1],!0).length>=4?e(d):i.interrupt(o.parser.constructs.flow,s,e)(d)}}function factoryDestination(i,e,s,o,a,c,d,h,g){const j=g||Number.POSITIVE_INFINITY;let $=0;return _;function _(rt){return rt===60?(i.enter(o),i.enter(a),i.enter(c),i.consume(rt),i.exit(c),et):rt===null||rt===32||rt===41||asciiControl(rt)?s(rt):(i.enter(o),i.enter(d),i.enter(h),i.enter("chunkString",{contentType:"string"}),ot(rt))}function et(rt){return rt===62?(i.enter(c),i.consume(rt),i.exit(c),i.exit(a),i.exit(o),e):(i.enter(h),i.enter("chunkString",{contentType:"string"}),tt(rt))}function tt(rt){return rt===62?(i.exit("chunkString"),i.exit(h),et(rt)):rt===null||rt===60||markdownLineEnding(rt)?s(rt):(i.consume(rt),rt===92?it:tt)}function it(rt){return rt===60||rt===62||rt===92?(i.consume(rt),tt):tt(rt)}function ot(rt){return!$&&(rt===null||rt===41||markdownLineEndingOrSpace(rt))?(i.exit("chunkString"),i.exit(h),i.exit(d),i.exit(o),e(rt)):$<j&&rt===40?(i.consume(rt),$++,ot):rt===41?(i.consume(rt),$--,ot):rt===null||rt===32||rt===40||asciiControl(rt)?s(rt):(i.consume(rt),rt===92?at:ot)}function at(rt){return rt===40||rt===41||rt===92?(i.consume(rt),ot):ot(rt)}}function factoryLabel(i,e,s,o,a,c){const d=this;let h=0,g;return j;function j(tt){return i.enter(o),i.enter(a),i.consume(tt),i.exit(a),i.enter(c),$}function $(tt){return h>999||tt===null||tt===91||tt===93&&!g||tt===94&&!h&&"_hiddenFootnoteSupport"in d.parser.constructs?s(tt):tt===93?(i.exit(c),i.enter(a),i.consume(tt),i.exit(a),i.exit(o),e):markdownLineEnding(tt)?(i.enter("lineEnding"),i.consume(tt),i.exit("lineEnding"),$):(i.enter("chunkString",{contentType:"string"}),_(tt))}function _(tt){return tt===null||tt===91||tt===93||markdownLineEnding(tt)||h++>999?(i.exit("chunkString"),$(tt)):(i.consume(tt),g||(g=!markdownSpace(tt)),tt===92?et:_)}function et(tt){return tt===91||tt===92||tt===93?(i.consume(tt),h++,_):_(tt)}}function factoryTitle(i,e,s,o,a,c){let d;return h;function h(et){return et===34||et===39||et===40?(i.enter(o),i.enter(a),i.consume(et),i.exit(a),d=et===40?41:et,g):s(et)}function g(et){return et===d?(i.enter(a),i.consume(et),i.exit(a),i.exit(o),e):(i.enter(c),j(et))}function j(et){return et===d?(i.exit(c),g(d)):et===null?s(et):markdownLineEnding(et)?(i.enter("lineEnding"),i.consume(et),i.exit("lineEnding"),factorySpace(i,j,"linePrefix")):(i.enter("chunkString",{contentType:"string"}),$(et))}function $(et){return et===d||et===null||markdownLineEnding(et)?(i.exit("chunkString"),j(et)):(i.consume(et),et===92?_:$)}function _(et){return et===d||et===92?(i.consume(et),$):$(et)}}function factoryWhitespace(i,e){let s;return o;function o(a){return markdownLineEnding(a)?(i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),s=!0,o):markdownSpace(a)?factorySpace(i,o,s?"linePrefix":"lineSuffix")(a):e(a)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={tokenize:tokenizeTitleBefore,partial:!0};function tokenizeDefinition(i,e,s){const o=this;let a;return c;function c(tt){return i.enter("definition"),d(tt)}function d(tt){return factoryLabel.call(o,i,h,s,"definitionLabel","definitionLabelMarker","definitionLabelString")(tt)}function h(tt){return a=normalizeIdentifier(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)),tt===58?(i.enter("definitionMarker"),i.consume(tt),i.exit("definitionMarker"),g):s(tt)}function g(tt){return markdownLineEndingOrSpace(tt)?factoryWhitespace(i,j)(tt):j(tt)}function j(tt){return factoryDestination(i,$,s,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(tt)}function $(tt){return i.attempt(titleBefore,_,_)(tt)}function _(tt){return markdownSpace(tt)?factorySpace(i,et,"whitespace")(tt):et(tt)}function et(tt){return tt===null||markdownLineEnding(tt)?(i.exit("definition"),o.parser.defined.push(a),e(tt)):s(tt)}}function tokenizeTitleBefore(i,e,s){return o;function o(h){return markdownLineEndingOrSpace(h)?factoryWhitespace(i,a)(h):s(h)}function a(h){return factoryTitle(i,c,s,"definitionTitle","definitionTitleMarker","definitionTitleString")(h)}function c(h){return markdownSpace(h)?factorySpace(i,d,"whitespace")(h):d(h)}function d(h){return h===null||markdownLineEnding(h)?e(h):s(h)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(i,e,s){return o;function o(c){return i.enter("hardBreakEscape"),i.consume(c),a}function a(c){return markdownLineEnding(c)?(i.exit("hardBreakEscape"),e(c)):s(c)}}const headingAtx={name:"headingAtx",tokenize:tokenizeHeadingAtx,resolve:resolveHeadingAtx};function resolveHeadingAtx(i,e){let s=i.length-2,o=3,a,c;return i[o][1].type==="whitespace"&&(o+=2),s-2>o&&i[s][1].type==="whitespace"&&(s-=2),i[s][1].type==="atxHeadingSequence"&&(o===s-1||s-4>o&&i[s-2][1].type==="whitespace")&&(s-=o+1===s?2:4),s>o&&(a={type:"atxHeadingText",start:i[o][1].start,end:i[s][1].end},c={type:"chunkText",start:i[o][1].start,end:i[s][1].end,contentType:"text"},splice(i,o,s-o+1,[["enter",a,e],["enter",c,e],["exit",c,e],["exit",a,e]])),i}function tokenizeHeadingAtx(i,e,s){let o=0;return a;function a($){return i.enter("atxHeading"),c($)}function c($){return i.enter("atxHeadingSequence"),d($)}function d($){return $===35&&o++<6?(i.consume($),d):$===null||markdownLineEndingOrSpace($)?(i.exit("atxHeadingSequence"),h($)):s($)}function h($){return $===35?(i.enter("atxHeadingSequence"),g($)):$===null||markdownLineEnding($)?(i.exit("atxHeading"),e($)):markdownSpace($)?factorySpace(i,h,"whitespace")($):(i.enter("atxHeadingText"),j($))}function g($){return $===35?(i.consume($),g):(i.exit("atxHeadingSequence"),h($))}function j($){return $===null||$===35||markdownLineEndingOrSpace($)?(i.exit("atxHeadingText"),h($)):(i.consume($),j)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={name:"htmlFlow",tokenize:tokenizeHtmlFlow,resolveTo:resolveToHtmlFlow,concrete:!0},blankLineBefore={tokenize:tokenizeBlankLineBefore,partial:!0},nonLazyContinuationStart={tokenize:tokenizeNonLazyContinuationStart,partial:!0};function resolveToHtmlFlow(i){let e=i.length;for(;e--&&!(i[e][0]==="enter"&&i[e][1].type==="htmlFlow"););return e>1&&i[e-2][1].type==="linePrefix"&&(i[e][1].start=i[e-2][1].start,i[e+1][1].start=i[e-2][1].start,i.splice(e-2,2)),i}function tokenizeHtmlFlow(i,e,s){const o=this;let a,c,d,h,g;return j;function j(pt){return $(pt)}function $(pt){return i.enter("htmlFlow"),i.enter("htmlFlowData"),i.consume(pt),_}function _(pt){return pt===33?(i.consume(pt),et):pt===47?(i.consume(pt),c=!0,ot):pt===63?(i.consume(pt),a=3,o.interrupt?e:vt):asciiAlpha(pt)?(i.consume(pt),d=String.fromCharCode(pt),at):s(pt)}function et(pt){return pt===45?(i.consume(pt),a=2,tt):pt===91?(i.consume(pt),a=5,h=0,it):asciiAlpha(pt)?(i.consume(pt),a=4,o.interrupt?e:vt):s(pt)}function tt(pt){return pt===45?(i.consume(pt),o.interrupt?e:vt):s(pt)}function it(pt){const bt="CDATA[";return pt===bt.charCodeAt(h++)?(i.consume(pt),h===bt.length?o.interrupt?e:Et:it):s(pt)}function ot(pt){return asciiAlpha(pt)?(i.consume(pt),d=String.fromCharCode(pt),at):s(pt)}function at(pt){if(pt===null||pt===47||pt===62||markdownLineEndingOrSpace(pt)){const bt=pt===47,Tt=d.toLowerCase();return!bt&&!c&&htmlRawNames.includes(Tt)?(a=1,o.interrupt?e(pt):Et(pt)):htmlBlockNames.includes(d.toLowerCase())?(a=6,bt?(i.consume(pt),rt):o.interrupt?e(pt):Et(pt)):(a=7,o.interrupt&&!o.parser.lazy[o.now().line]?s(pt):c?st(pt):lt(pt))}return pt===45||asciiAlphanumeric(pt)?(i.consume(pt),d+=String.fromCharCode(pt),at):s(pt)}function rt(pt){return pt===62?(i.consume(pt),o.interrupt?e:Et):s(pt)}function st(pt){return markdownSpace(pt)?(i.consume(pt),st):_t(pt)}function lt(pt){return pt===47?(i.consume(pt),_t):pt===58||pt===95||asciiAlpha(pt)?(i.consume(pt),mt):markdownSpace(pt)?(i.consume(pt),lt):_t(pt)}function mt(pt){return pt===45||pt===46||pt===58||pt===95||asciiAlphanumeric(pt)?(i.consume(pt),mt):ft(pt)}function ft(pt){return pt===61?(i.consume(pt),gt):markdownSpace(pt)?(i.consume(pt),ft):lt(pt)}function gt(pt){return pt===null||pt===60||pt===61||pt===62||pt===96?s(pt):pt===34||pt===39?(i.consume(pt),g=pt,dt):markdownSpace(pt)?(i.consume(pt),gt):ut(pt)}function dt(pt){return pt===g?(i.consume(pt),g=null,ct):pt===null||markdownLineEnding(pt)?s(pt):(i.consume(pt),dt)}function ut(pt){return pt===null||pt===34||pt===39||pt===47||pt===60||pt===61||pt===62||pt===96||markdownLineEndingOrSpace(pt)?ft(pt):(i.consume(pt),ut)}function ct(pt){return pt===47||pt===62||markdownSpace(pt)?lt(pt):s(pt)}function _t(pt){return pt===62?(i.consume(pt),ht):s(pt)}function ht(pt){return pt===null||markdownLineEnding(pt)?Et(pt):markdownSpace(pt)?(i.consume(pt),ht):s(pt)}function Et(pt){return pt===45&&a===2?(i.consume(pt),$t):pt===60&&a===1?(i.consume(pt),Bt):pt===62&&a===4?(i.consume(pt),St):pt===63&&a===3?(i.consume(pt),vt):pt===93&&a===5?(i.consume(pt),Rt):markdownLineEnding(pt)&&(a===6||a===7)?(i.exit("htmlFlowData"),i.check(blankLineBefore,Pt,yt)(pt)):pt===null||markdownLineEnding(pt)?(i.exit("htmlFlowData"),yt(pt)):(i.consume(pt),Et)}function yt(pt){return i.check(nonLazyContinuationStart,Ot,Pt)(pt)}function Ot(pt){return i.enter("lineEnding"),i.consume(pt),i.exit("lineEnding"),Dt}function Dt(pt){return pt===null||markdownLineEnding(pt)?yt(pt):(i.enter("htmlFlowData"),Et(pt))}function $t(pt){return pt===45?(i.consume(pt),vt):Et(pt)}function Bt(pt){return pt===47?(i.consume(pt),d="",Vt):Et(pt)}function Vt(pt){if(pt===62){const bt=d.toLowerCase();return htmlRawNames.includes(bt)?(i.consume(pt),St):Et(pt)}return asciiAlpha(pt)&&d.length<8?(i.consume(pt),d+=String.fromCharCode(pt),Vt):Et(pt)}function Rt(pt){return pt===93?(i.consume(pt),vt):Et(pt)}function vt(pt){return pt===62?(i.consume(pt),St):pt===45&&a===2?(i.consume(pt),vt):Et(pt)}function St(pt){return pt===null||markdownLineEnding(pt)?(i.exit("htmlFlowData"),Pt(pt)):(i.consume(pt),St)}function Pt(pt){return i.exit("htmlFlow"),e(pt)}}function tokenizeNonLazyContinuationStart(i,e,s){const o=this;return a;function a(d){return markdownLineEnding(d)?(i.enter("lineEnding"),i.consume(d),i.exit("lineEnding"),c):s(d)}function c(d){return o.parser.lazy[o.now().line]?s(d):e(d)}}function tokenizeBlankLineBefore(i,e,s){return o;function o(a){return i.enter("lineEnding"),i.consume(a),i.exit("lineEnding"),i.attempt(blankLine,e,s)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(i,e,s){const o=this;let a,c,d;return h;function h(vt){return i.enter("htmlText"),i.enter("htmlTextData"),i.consume(vt),g}function g(vt){return vt===33?(i.consume(vt),j):vt===47?(i.consume(vt),ft):vt===63?(i.consume(vt),lt):asciiAlpha(vt)?(i.consume(vt),ut):s(vt)}function j(vt){return vt===45?(i.consume(vt),$):vt===91?(i.consume(vt),c=0,it):asciiAlpha(vt)?(i.consume(vt),st):s(vt)}function $(vt){return vt===45?(i.consume(vt),tt):s(vt)}function _(vt){return vt===null?s(vt):vt===45?(i.consume(vt),et):markdownLineEnding(vt)?(d=_,Bt(vt)):(i.consume(vt),_)}function et(vt){return vt===45?(i.consume(vt),tt):_(vt)}function tt(vt){return vt===62?$t(vt):vt===45?et(vt):_(vt)}function it(vt){const St="CDATA[";return vt===St.charCodeAt(c++)?(i.consume(vt),c===St.length?ot:it):s(vt)}function ot(vt){return vt===null?s(vt):vt===93?(i.consume(vt),at):markdownLineEnding(vt)?(d=ot,Bt(vt)):(i.consume(vt),ot)}function at(vt){return vt===93?(i.consume(vt),rt):ot(vt)}function rt(vt){return vt===62?$t(vt):vt===93?(i.consume(vt),rt):ot(vt)}function st(vt){return vt===null||vt===62?$t(vt):markdownLineEnding(vt)?(d=st,Bt(vt)):(i.consume(vt),st)}function lt(vt){return vt===null?s(vt):vt===63?(i.consume(vt),mt):markdownLineEnding(vt)?(d=lt,Bt(vt)):(i.consume(vt),lt)}function mt(vt){return vt===62?$t(vt):lt(vt)}function ft(vt){return asciiAlpha(vt)?(i.consume(vt),gt):s(vt)}function gt(vt){return vt===45||asciiAlphanumeric(vt)?(i.consume(vt),gt):dt(vt)}function dt(vt){return markdownLineEnding(vt)?(d=dt,Bt(vt)):markdownSpace(vt)?(i.consume(vt),dt):$t(vt)}function ut(vt){return vt===45||asciiAlphanumeric(vt)?(i.consume(vt),ut):vt===47||vt===62||markdownLineEndingOrSpace(vt)?ct(vt):s(vt)}function ct(vt){return vt===47?(i.consume(vt),$t):vt===58||vt===95||asciiAlpha(vt)?(i.consume(vt),_t):markdownLineEnding(vt)?(d=ct,Bt(vt)):markdownSpace(vt)?(i.consume(vt),ct):$t(vt)}function _t(vt){return vt===45||vt===46||vt===58||vt===95||asciiAlphanumeric(vt)?(i.consume(vt),_t):ht(vt)}function ht(vt){return vt===61?(i.consume(vt),Et):markdownLineEnding(vt)?(d=ht,Bt(vt)):markdownSpace(vt)?(i.consume(vt),ht):ct(vt)}function Et(vt){return vt===null||vt===60||vt===61||vt===62||vt===96?s(vt):vt===34||vt===39?(i.consume(vt),a=vt,yt):markdownLineEnding(vt)?(d=Et,Bt(vt)):markdownSpace(vt)?(i.consume(vt),Et):(i.consume(vt),Ot)}function yt(vt){return vt===a?(i.consume(vt),a=void 0,Dt):vt===null?s(vt):markdownLineEnding(vt)?(d=yt,Bt(vt)):(i.consume(vt),yt)}function Ot(vt){return vt===null||vt===34||vt===39||vt===60||vt===61||vt===96?s(vt):vt===47||vt===62||markdownLineEndingOrSpace(vt)?ct(vt):(i.consume(vt),Ot)}function Dt(vt){return vt===47||vt===62||markdownLineEndingOrSpace(vt)?ct(vt):s(vt)}function $t(vt){return vt===62?(i.consume(vt),i.exit("htmlTextData"),i.exit("htmlText"),e):s(vt)}function Bt(vt){return i.exit("htmlTextData"),i.enter("lineEnding"),i.consume(vt),i.exit("lineEnding"),Vt}function Vt(vt){return markdownSpace(vt)?factorySpace(i,Rt,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(vt):Rt(vt)}function Rt(vt){return i.enter("htmlTextData"),d(vt)}}const labelEnd={name:"labelEnd",tokenize:tokenizeLabelEnd,resolveTo:resolveToLabelEnd,resolveAll:resolveAllLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(i){let e=-1;for(;++e<i.length;){const s=i[e][1];(s.type==="labelImage"||s.type==="labelLink"||s.type==="labelEnd")&&(i.splice(e+1,s.type==="labelImage"?4:2),s.type="data",e++)}return i}function resolveToLabelEnd(i,e){let s=i.length,o=0,a,c,d,h;for(;s--;)if(a=i[s][1],c){if(a.type==="link"||a.type==="labelLink"&&a._inactive)break;i[s][0]==="enter"&&a.type==="labelLink"&&(a._inactive=!0)}else if(d){if(i[s][0]==="enter"&&(a.type==="labelImage"||a.type==="labelLink")&&!a._balanced&&(c=s,a.type!=="labelLink")){o=2;break}}else a.type==="labelEnd"&&(d=s);const g={type:i[c][1].type==="labelLink"?"link":"image",start:Object.assign({},i[c][1].start),end:Object.assign({},i[i.length-1][1].end)},j={type:"label",start:Object.assign({},i[c][1].start),end:Object.assign({},i[d][1].end)},$={type:"labelText",start:Object.assign({},i[c+o+2][1].end),end:Object.assign({},i[d-2][1].start)};return h=[["enter",g,e],["enter",j,e]],h=push$1(h,i.slice(c+1,c+o+3)),h=push$1(h,[["enter",$,e]]),h=push$1(h,resolveAll(e.parser.constructs.insideSpan.null,i.slice(c+o+4,d-3),e)),h=push$1(h,[["exit",$,e],i[d-2],i[d-1],["exit",j,e]]),h=push$1(h,i.slice(d+1)),h=push$1(h,[["exit",g,e]]),splice(i,c,i.length,h),i}function tokenizeLabelEnd(i,e,s){const o=this;let a=o.events.length,c,d;for(;a--;)if((o.events[a][1].type==="labelImage"||o.events[a][1].type==="labelLink")&&!o.events[a][1]._balanced){c=o.events[a][1];break}return h;function h(et){return c?c._inactive?_(et):(d=o.parser.defined.includes(normalizeIdentifier(o.sliceSerialize({start:c.end,end:o.now()}))),i.enter("labelEnd"),i.enter("labelMarker"),i.consume(et),i.exit("labelMarker"),i.exit("labelEnd"),g):s(et)}function g(et){return et===40?i.attempt(resourceConstruct,$,d?$:_)(et):et===91?i.attempt(referenceFullConstruct,$,d?j:_)(et):d?$(et):_(et)}function j(et){return i.attempt(referenceCollapsedConstruct,$,_)(et)}function $(et){return e(et)}function _(et){return c._balanced=!0,s(et)}}function tokenizeResource(i,e,s){return o;function o(_){return i.enter("resource"),i.enter("resourceMarker"),i.consume(_),i.exit("resourceMarker"),a}function a(_){return markdownLineEndingOrSpace(_)?factoryWhitespace(i,c)(_):c(_)}function c(_){return _===41?$(_):factoryDestination(i,d,h,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(_)}function d(_){return markdownLineEndingOrSpace(_)?factoryWhitespace(i,g)(_):$(_)}function h(_){return s(_)}function g(_){return _===34||_===39||_===40?factoryTitle(i,j,s,"resourceTitle","resourceTitleMarker","resourceTitleString")(_):$(_)}function j(_){return markdownLineEndingOrSpace(_)?factoryWhitespace(i,$)(_):$(_)}function $(_){return _===41?(i.enter("resourceMarker"),i.consume(_),i.exit("resourceMarker"),i.exit("resource"),e):s(_)}}function tokenizeReferenceFull(i,e,s){const o=this;return a;function a(h){return factoryLabel.call(o,i,c,d,"reference","referenceMarker","referenceString")(h)}function c(h){return o.parser.defined.includes(normalizeIdentifier(o.sliceSerialize(o.events[o.events.length-1][1]).slice(1,-1)))?e(h):s(h)}function d(h){return s(h)}}function tokenizeReferenceCollapsed(i,e,s){return o;function o(c){return i.enter("reference"),i.enter("referenceMarker"),i.consume(c),i.exit("referenceMarker"),a}function a(c){return c===93?(i.enter("referenceMarker"),i.consume(c),i.exit("referenceMarker"),i.exit("reference"),e):s(c)}}const labelStartImage={name:"labelStartImage",tokenize:tokenizeLabelStartImage,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartImage(i,e,s){const o=this;return a;function a(h){return i.enter("labelImage"),i.enter("labelImageMarker"),i.consume(h),i.exit("labelImageMarker"),c}function c(h){return h===91?(i.enter("labelMarker"),i.consume(h),i.exit("labelMarker"),i.exit("labelImage"),d):s(h)}function d(h){return h===94&&"_hiddenFootnoteSupport"in o.parser.constructs?s(h):e(h)}}const labelStartLink={name:"labelStartLink",tokenize:tokenizeLabelStartLink,resolveAll:labelEnd.resolveAll};function tokenizeLabelStartLink(i,e,s){const o=this;return a;function a(d){return i.enter("labelLink"),i.enter("labelMarker"),i.consume(d),i.exit("labelMarker"),i.exit("labelLink"),c}function c(d){return d===94&&"_hiddenFootnoteSupport"in o.parser.constructs?s(d):e(d)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(i,e){return s;function s(o){return i.enter("lineEnding"),i.consume(o),i.exit("lineEnding"),factorySpace(i,e,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(i,e,s){let o=0,a;return c;function c(j){return i.enter("thematicBreak"),d(j)}function d(j){return a=j,h(j)}function h(j){return j===a?(i.enter("thematicBreakSequence"),g(j)):o>=3&&(j===null||markdownLineEnding(j))?(i.exit("thematicBreak"),e(j)):s(j)}function g(j){return j===a?(i.consume(j),o++,g):(i.exit("thematicBreakSequence"),markdownSpace(j)?factorySpace(i,h,"whitespace")(j):h(j))}}const list$1={name:"list",tokenize:tokenizeListStart,continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd},listItemPrefixWhitespaceConstruct={tokenize:tokenizeListItemPrefixWhitespace,partial:!0},indentConstruct={tokenize:tokenizeIndent,partial:!0};function tokenizeListStart(i,e,s){const o=this,a=o.events[o.events.length-1];let c=a&&a[1].type==="linePrefix"?a[2].sliceSerialize(a[1],!0).length:0,d=0;return h;function h(tt){const it=o.containerState.type||(tt===42||tt===43||tt===45?"listUnordered":"listOrdered");if(it==="listUnordered"?!o.containerState.marker||tt===o.containerState.marker:asciiDigit(tt)){if(o.containerState.type||(o.containerState.type=it,i.enter(it,{_container:!0})),it==="listUnordered")return i.enter("listItemPrefix"),tt===42||tt===45?i.check(thematicBreak$1,s,j)(tt):j(tt);if(!o.interrupt||tt===49)return i.enter("listItemPrefix"),i.enter("listItemValue"),g(tt)}return s(tt)}function g(tt){return asciiDigit(tt)&&++d<10?(i.consume(tt),g):(!o.interrupt||d<2)&&(o.containerState.marker?tt===o.containerState.marker:tt===41||tt===46)?(i.exit("listItemValue"),j(tt)):s(tt)}function j(tt){return i.enter("listItemMarker"),i.consume(tt),i.exit("listItemMarker"),o.containerState.marker=o.containerState.marker||tt,i.check(blankLine,o.interrupt?s:$,i.attempt(listItemPrefixWhitespaceConstruct,et,_))}function $(tt){return o.containerState.initialBlankLine=!0,c++,et(tt)}function _(tt){return markdownSpace(tt)?(i.enter("listItemPrefixWhitespace"),i.consume(tt),i.exit("listItemPrefixWhitespace"),et):s(tt)}function et(tt){return o.containerState.size=c+o.sliceSerialize(i.exit("listItemPrefix"),!0).length,e(tt)}}function tokenizeListContinuation(i,e,s){const o=this;return o.containerState._closeFlow=void 0,i.check(blankLine,a,c);function a(h){return o.containerState.furtherBlankLines=o.containerState.furtherBlankLines||o.containerState.initialBlankLine,factorySpace(i,e,"listItemIndent",o.containerState.size+1)(h)}function c(h){return o.containerState.furtherBlankLines||!markdownSpace(h)?(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,d(h)):(o.containerState.furtherBlankLines=void 0,o.containerState.initialBlankLine=void 0,i.attempt(indentConstruct,e,d)(h))}function d(h){return o.containerState._closeFlow=!0,o.interrupt=void 0,factorySpace(i,i.attempt(list$1,e,s),"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(h)}}function tokenizeIndent(i,e,s){const o=this;return factorySpace(i,a,"listItemIndent",o.containerState.size+1);function a(c){const d=o.events[o.events.length-1];return d&&d[1].type==="listItemIndent"&&d[2].sliceSerialize(d[1],!0).length===o.containerState.size?e(c):s(c)}}function tokenizeListEnd(i){i.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(i,e,s){const o=this;return factorySpace(i,a,"listItemPrefixWhitespace",o.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function a(c){const d=o.events[o.events.length-1];return!markdownSpace(c)&&d&&d[1].type==="listItemPrefixWhitespace"?e(c):s(c)}}const setextUnderline={name:"setextUnderline",tokenize:tokenizeSetextUnderline,resolveTo:resolveToSetextUnderline};function resolveToSetextUnderline(i,e){let s=i.length,o,a,c;for(;s--;)if(i[s][0]==="enter"){if(i[s][1].type==="content"){o=s;break}i[s][1].type==="paragraph"&&(a=s)}else i[s][1].type==="content"&&i.splice(s,1),!c&&i[s][1].type==="definition"&&(c=s);const d={type:"setextHeading",start:Object.assign({},i[a][1].start),end:Object.assign({},i[i.length-1][1].end)};return i[a][1].type="setextHeadingText",c?(i.splice(a,0,["enter",d,e]),i.splice(c+1,0,["exit",i[o][1],e]),i[o][1].end=Object.assign({},i[c][1].end)):i[o][1]=d,i.push(["exit",d,e]),i}function tokenizeSetextUnderline(i,e,s){const o=this;let a;return c;function c(j){let $=o.events.length,_;for(;$--;)if(o.events[$][1].type!=="lineEnding"&&o.events[$][1].type!=="linePrefix"&&o.events[$][1].type!=="content"){_=o.events[$][1].type==="paragraph";break}return!o.parser.lazy[o.now().line]&&(o.interrupt||_)?(i.enter("setextHeadingLine"),a=j,d(j)):s(j)}function d(j){return i.enter("setextHeadingLineSequence"),h(j)}function h(j){return j===a?(i.consume(j),h):(i.exit("setextHeadingLineSequence"),markdownSpace(j)?factorySpace(i,g,"lineSuffix")(j):g(j))}function g(j){return j===null||markdownLineEnding(j)?(i.exit("setextHeadingLine"),e(j)):s(j)}}const flow$1={tokenize:initializeFlow};function initializeFlow(i){const e=this,s=i.attempt(blankLine,o,i.attempt(this.parser.constructs.flowInitial,a,factorySpace(i,i.attempt(this.parser.constructs.flow,a,i.attempt(content,a)),"linePrefix")));return s;function o(c){if(c===null){i.consume(c);return}return i.enter("lineEndingBlank"),i.consume(c),i.exit("lineEndingBlank"),e.currentConstruct=void 0,s}function a(c){if(c===null){i.consume(c);return}return i.enter("lineEnding"),i.consume(c),i.exit("lineEnding"),e.currentConstruct=void 0,s}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$2=initializeFactory("text");function initializeFactory(i){return{tokenize:e,resolveAll:createResolver(i==="text"?resolveAllLineSuffixes:void 0)};function e(s){const o=this,a=this.parser.constructs[i],c=s.attempt(a,d,h);return d;function d($){return j($)?c($):h($)}function h($){if($===null){s.consume($);return}return s.enter("data"),s.consume($),g}function g($){return j($)?(s.exit("data"),c($)):(s.consume($),g)}function j($){if($===null)return!0;const _=a[$];let et=-1;if(_)for(;++et<_.length;){const tt=_[et];if(!tt.previous||tt.previous.call(o,o.previous))return!0}return!1}}}function createResolver(i){return e;function e(s,o){let a=-1,c;for(;++a<=s.length;)c===void 0?s[a]&&s[a][1].type==="data"&&(c=a,a++):(!s[a]||s[a][1].type!=="data")&&(a!==c+2&&(s[c][1].end=s[a-1][1].end,s.splice(c+2,a-c-2),a=c+2),c=void 0);return i?i(s,o):s}}function resolveAllLineSuffixes(i,e){let s=0;for(;++s<=i.length;)if((s===i.length||i[s][1].type==="lineEnding")&&i[s-1][1].type==="data"){const o=i[s-1][1],a=e.sliceStream(o);let c=a.length,d=-1,h=0,g;for(;c--;){const j=a[c];if(typeof j=="string"){for(d=j.length;j.charCodeAt(d-1)===32;)h++,d--;if(d)break;d=-1}else if(j===-2)g=!0,h++;else if(j!==-1){c++;break}}if(h){const j={type:s===i.length||g||h<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-h,offset:o.end.offset-h,_index:o.start._index+c,_bufferIndex:c?d:o.start._bufferIndex+d},end:Object.assign({},o.end)};o.end=Object.assign({},j.start),o.start.offset===o.end.offset?Object.assign(o,j):(i.splice(s,0,["enter",j,e],["exit",j,e]),s+=2)}s++}return i}function createTokenizer(i,e,s){let o=Object.assign(s?Object.assign({},s):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const a={},c=[];let d=[],h=[];const g={consume:st,enter:lt,exit:mt,attempt:dt(ft),check:dt(gt),interrupt:dt(gt,{interrupt:!0})},j={previous:null,code:null,containerState:{},events:[],parser:i,sliceStream:tt,sliceSerialize:et,now:it,defineSkip:ot,write:_};let $=e.tokenize.call(j,g);return e.resolveAll&&c.push(e),j;function _(ht){return d=push$1(d,ht),at(),d[d.length-1]!==null?[]:(ut(e,0),j.events=resolveAll(c,j.events,j),j.events)}function et(ht,Et){return serializeChunks(tt(ht),Et)}function tt(ht){return sliceChunks(d,ht)}function it(){const{line:ht,column:Et,offset:yt,_index:Ot,_bufferIndex:Dt}=o;return{line:ht,column:Et,offset:yt,_index:Ot,_bufferIndex:Dt}}function ot(ht){a[ht.line]=ht.column,_t()}function at(){let ht;for(;o._index<d.length;){const Et=d[o._index];if(typeof Et=="string")for(ht=o._index,o._bufferIndex<0&&(o._bufferIndex=0);o._index===ht&&o._bufferIndex<Et.length;)rt(Et.charCodeAt(o._bufferIndex));else rt(Et)}}function rt(ht){$=$(ht)}function st(ht){markdownLineEnding(ht)?(o.line++,o.column=1,o.offset+=ht===-3?2:1,_t()):ht!==-1&&(o.column++,o.offset++),o._bufferIndex<0?o._index++:(o._bufferIndex++,o._bufferIndex===d[o._index].length&&(o._bufferIndex=-1,o._index++)),j.previous=ht}function lt(ht,Et){const yt=Et||{};return yt.type=ht,yt.start=it(),j.events.push(["enter",yt,j]),h.push(yt),yt}function mt(ht){const Et=h.pop();return Et.end=it(),j.events.push(["exit",Et,j]),Et}function ft(ht,Et){ut(ht,Et.from)}function gt(ht,Et){Et.restore()}function dt(ht,Et){return yt;function yt(Ot,Dt,$t){let Bt,Vt,Rt,vt;return Array.isArray(Ot)?Pt(Ot):"tokenize"in Ot?Pt([Ot]):St(Ot);function St(Ct){return kt;function kt(Mt){const zt=Mt!==null&&Ct[Mt],Kt=Mt!==null&&Ct.null,Yt=[...Array.isArray(zt)?zt:zt?[zt]:[],...Array.isArray(Kt)?Kt:Kt?[Kt]:[]];return Pt(Yt)(Mt)}}function Pt(Ct){return Bt=Ct,Vt=0,Ct.length===0?$t:pt(Ct[Vt])}function pt(Ct){return kt;function kt(Mt){return vt=ct(),Rt=Ct,Ct.partial||(j.currentConstruct=Ct),Ct.name&&j.parser.constructs.disable.null.includes(Ct.name)?Tt():Ct.tokenize.call(Et?Object.assign(Object.create(j),Et):j,g,bt,Tt)(Mt)}}function bt(Ct){return ht(Rt,vt),Dt}function Tt(Ct){return vt.restore(),++Vt<Bt.length?pt(Bt[Vt]):$t}}}function ut(ht,Et){ht.resolveAll&&!c.includes(ht)&&c.push(ht),ht.resolve&&splice(j.events,Et,j.events.length-Et,ht.resolve(j.events.slice(Et),j)),ht.resolveTo&&(j.events=ht.resolveTo(j.events,j))}function ct(){const ht=it(),Et=j.previous,yt=j.currentConstruct,Ot=j.events.length,Dt=Array.from(h);return{restore:$t,from:Ot};function $t(){o=ht,j.previous=Et,j.currentConstruct=yt,j.events.length=Ot,h=Dt,_t()}}function _t(){o.line in a&&o.column<2&&(o.column=a[o.line],o.offset+=a[o.line]-1)}}function sliceChunks(i,e){const s=e.start._index,o=e.start._bufferIndex,a=e.end._index,c=e.end._bufferIndex;let d;if(s===a)d=[i[s].slice(o,c)];else{if(d=i.slice(s,a),o>-1){const h=d[0];typeof h=="string"?d[0]=h.slice(o):d.shift()}c>0&&d.push(i[a].slice(0,c))}return d}function serializeChunks(i,e){let s=-1;const o=[];let a;for(;++s<i.length;){const c=i[s];let d;if(typeof c=="string")d=c;else switch(c){case-5:{d="\r";break}case-4:{d=`
`;break}case-3:{d=`\r
`;break}case-2:{d=e?" ":"	";break}case-1:{if(!e&&a)continue;d=" ";break}default:d=String.fromCharCode(c)}a=c===-2,o.push(d)}return o.join("")}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$1={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$1},Symbol.toStringTag,{value:"Module"}));function parse(i){const s=combineExtensions([defaultConstructs,...(i||{}).extensions||[]]),o={defined:[],lazy:{},constructs:s,content:a(content$1),document:a(document$2),flow:a(flow$1),string:a(string$1),text:a(text$2)};return o;function a(c){return d;function d(h){return createTokenizer(o,c,h)}}}function postprocess(i){for(;!subtokenize(i););return i}const search=/[\0\t\n\r]/g;function preprocess(){let i=1,e="",s=!0,o;return a;function a(c,d,h){const g=[];let j,$,_,et,tt;for(c=e+(typeof c=="string"?c.toString():new TextDecoder(d||void 0).decode(c)),_=0,e="",s&&(c.charCodeAt(0)===65279&&_++,s=void 0);_<c.length;){if(search.lastIndex=_,j=search.exec(c),et=j&&j.index!==void 0?j.index:c.length,tt=c.charCodeAt(et),!j){e=c.slice(_);break}if(tt===10&&_===et&&o)g.push(-3),o=void 0;else switch(o&&(g.push(-5),o=void 0),_<et&&(g.push(c.slice(_,et)),i+=et-_),tt){case 0:{g.push(65533),i++;break}case 9:{for($=Math.ceil(i/4)*4,g.push(-2);i++<$;)g.push(-1);break}case 10:{g.push(-4),i=1;break}default:o=!0,i=1}_=et+1}return h&&(o&&g.push(-5),e&&g.push(e),g.push(null)),g}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(i){return i.replace(characterEscapeOrReference,decode)}function decode(i,e,s){if(e)return e;if(s.charCodeAt(0)===35){const a=s.charCodeAt(1),c=a===120||a===88;return decodeNumericCharacterReference(s.slice(c?2:1),c?16:10)}return decodeNamedCharacterReference(s)||i}const own$2={}.hasOwnProperty;function fromMarkdown(i,e,s){return typeof e!="string"&&(s=e,e=void 0),compiler(s)(postprocess(parse(s).document().write(preprocess()(i,e,!0))))}function compiler(i){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:c(Nt),autolinkProtocol:ct,autolinkEmail:ct,atxHeading:c(dn),blockQuote:c(Kt),characterEscape:ct,characterReference:ct,codeFenced:c(Yt),codeFencedFenceInfo:d,codeFencedFenceMeta:d,codeIndented:c(Yt,d),codeText:c(rn,d),codeTextData:ct,data:ct,codeFlowValue:ct,definition:c(cn),definitionDestinationString:d,definitionLabelString:d,definitionTitleString:d,emphasis:c(sn),hardBreakEscape:c(Ht),hardBreakTrailing:c(Ht),htmlFlow:c(Xt,d),htmlFlowData:ct,htmlText:c(Xt,d),htmlTextData:ct,image:c(It),label:d,link:c(Nt),listItem:c(tn),listItemValue:et,listOrdered:c(Gt,_),listUnordered:c(Gt),paragraph:c(fn),reference:pt,referenceString:d,resourceDestinationString:d,resourceTitleString:d,setextHeading:c(dn),strong:c(yn),thematicBreak:c(Qt)},exit:{atxHeading:g(),atxHeadingSequence:ft,autolink:g(),autolinkEmail:zt,autolinkProtocol:Mt,blockQuote:g(),characterEscapeValue:_t,characterReferenceMarkerHexadecimal:Tt,characterReferenceMarkerNumeric:Tt,characterReferenceValue:Ct,characterReference:kt,codeFenced:g(at),codeFencedFence:ot,codeFencedFenceInfo:tt,codeFencedFenceMeta:it,codeFlowValue:_t,codeIndented:g(rt),codeText:g(Dt),codeTextData:_t,data:_t,definition:g(),definitionDestinationString:mt,definitionLabelString:st,definitionTitleString:lt,emphasis:g(),hardBreakEscape:g(Et),hardBreakTrailing:g(Et),htmlFlow:g(yt),htmlFlowData:_t,htmlText:g(Ot),htmlTextData:_t,image:g(Bt),label:Rt,labelText:Vt,lineEnding:ht,link:g($t),listItem:g(),listOrdered:g(),listUnordered:g(),paragraph:g(),referenceString:bt,resourceDestinationString:vt,resourceTitleString:St,resource:Pt,setextHeading:g(ut),setextHeadingLineSequence:dt,setextHeadingText:gt,strong:g(),thematicBreak:g()}};configure(e,(i||{}).mdastExtensions||[]);const s={};return o;function o(Wt){let Zt={type:"root",children:[]};const xn={stack:[Zt],tokenStack:[],config:e,enter:h,exit:j,buffer:d,resume:$,data:s},An=[];let Cn=-1;for(;++Cn<Wt.length;)if(Wt[Cn][1].type==="listOrdered"||Wt[Cn][1].type==="listUnordered")if(Wt[Cn][0]==="enter")An.push(Cn);else{const Sn=An.pop();Cn=a(Wt,Sn,Cn)}for(Cn=-1;++Cn<Wt.length;){const Sn=e[Wt[Cn][0]];own$2.call(Sn,Wt[Cn][1].type)&&Sn[Wt[Cn][1].type].call(Object.assign({sliceSerialize:Wt[Cn][2].sliceSerialize},xn),Wt[Cn][1])}if(xn.tokenStack.length>0){const Sn=xn.tokenStack[xn.tokenStack.length-1];(Sn[1]||defaultOnError).call(xn,void 0,Sn[0])}for(Zt.position={start:point(Wt.length>0?Wt[0][1].start:{line:1,column:1,offset:0}),end:point(Wt.length>0?Wt[Wt.length-2][1].end:{line:1,column:1,offset:0})},Cn=-1;++Cn<e.transforms.length;)Zt=e.transforms[Cn](Zt)||Zt;return Zt}function a(Wt,Zt,xn){let An=Zt-1,Cn=-1,Sn=!1,Pn,Vn,Bn,mn;for(;++An<=xn;){const en=Wt[An];switch(en[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{en[0]==="enter"?Cn++:Cn--,mn=void 0;break}case"lineEndingBlank":{en[0]==="enter"&&(Pn&&!mn&&!Cn&&!Bn&&(Bn=An),mn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:mn=void 0}if(!Cn&&en[0]==="enter"&&en[1].type==="listItemPrefix"||Cn===-1&&en[0]==="exit"&&(en[1].type==="listUnordered"||en[1].type==="listOrdered")){if(Pn){let nn=An;for(Vn=void 0;nn--;){const Tn=Wt[nn];if(Tn[1].type==="lineEnding"||Tn[1].type==="lineEndingBlank"){if(Tn[0]==="exit")continue;Vn&&(Wt[Vn][1].type="lineEndingBlank",Sn=!0),Tn[1].type="lineEnding",Vn=nn}else if(!(Tn[1].type==="linePrefix"||Tn[1].type==="blockQuotePrefix"||Tn[1].type==="blockQuotePrefixWhitespace"||Tn[1].type==="blockQuoteMarker"||Tn[1].type==="listItemIndent"))break}Bn&&(!Vn||Bn<Vn)&&(Pn._spread=!0),Pn.end=Object.assign({},Vn?Wt[Vn][1].start:en[1].end),Wt.splice(Vn||An,0,["exit",Pn,en[2]]),An++,xn++}if(en[1].type==="listItemPrefix"){const nn={type:"listItem",_spread:!1,start:Object.assign({},en[1].start),end:void 0};Pn=nn,Wt.splice(An,0,["enter",nn,en[2]]),An++,xn++,Bn=void 0,mn=!0}}}return Wt[Zt][1]._spread=Sn,xn}function c(Wt,Zt){return xn;function xn(An){h.call(this,Wt(An),An),Zt&&Zt.call(this,An)}}function d(){this.stack.push({type:"fragment",children:[]})}function h(Wt,Zt,xn){this.stack[this.stack.length-1].children.push(Wt),this.stack.push(Wt),this.tokenStack.push([Zt,xn||void 0]),Wt.position={start:point(Zt.start),end:void 0}}function g(Wt){return Zt;function Zt(xn){Wt&&Wt.call(this,xn),j.call(this,xn)}}function j(Wt,Zt){const xn=this.stack.pop(),An=this.tokenStack.pop();if(An)An[0].type!==Wt.type&&(Zt?Zt.call(this,Wt,An[0]):(An[1]||defaultOnError).call(this,Wt,An[0]));else throw new Error("Cannot close `"+Wt.type+"` ("+stringifyPosition({start:Wt.start,end:Wt.end})+"): its not open");xn.position.end=point(Wt.end)}function $(){return toString$1(this.stack.pop())}function _(){this.data.expectingFirstListItemValue=!0}function et(Wt){if(this.data.expectingFirstListItemValue){const Zt=this.stack[this.stack.length-2];Zt.start=Number.parseInt(this.sliceSerialize(Wt),10),this.data.expectingFirstListItemValue=void 0}}function tt(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.lang=Wt}function it(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.meta=Wt}function ot(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function at(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.value=Wt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function rt(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.value=Wt.replace(/(\r?\n|\r)$/g,"")}function st(Wt){const Zt=this.resume(),xn=this.stack[this.stack.length-1];xn.label=Zt,xn.identifier=normalizeIdentifier(this.sliceSerialize(Wt)).toLowerCase()}function lt(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.title=Wt}function mt(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.url=Wt}function ft(Wt){const Zt=this.stack[this.stack.length-1];if(!Zt.depth){const xn=this.sliceSerialize(Wt).length;Zt.depth=xn}}function gt(){this.data.setextHeadingSlurpLineEnding=!0}function dt(Wt){const Zt=this.stack[this.stack.length-1];Zt.depth=this.sliceSerialize(Wt).codePointAt(0)===61?1:2}function ut(){this.data.setextHeadingSlurpLineEnding=void 0}function ct(Wt){const xn=this.stack[this.stack.length-1].children;let An=xn[xn.length-1];(!An||An.type!=="text")&&(An=gn(),An.position={start:point(Wt.start),end:void 0},xn.push(An)),this.stack.push(An)}function _t(Wt){const Zt=this.stack.pop();Zt.value+=this.sliceSerialize(Wt),Zt.position.end=point(Wt.end)}function ht(Wt){const Zt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xn=Zt.children[Zt.children.length-1];xn.position.end=point(Wt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Zt.type)&&(ct.call(this,Wt),_t.call(this,Wt))}function Et(){this.data.atHardBreak=!0}function yt(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.value=Wt}function Ot(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.value=Wt}function Dt(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.value=Wt}function $t(){const Wt=this.stack[this.stack.length-1];if(this.data.inReference){const Zt=this.data.referenceType||"shortcut";Wt.type+="Reference",Wt.referenceType=Zt,delete Wt.url,delete Wt.title}else delete Wt.identifier,delete Wt.label;this.data.referenceType=void 0}function Bt(){const Wt=this.stack[this.stack.length-1];if(this.data.inReference){const Zt=this.data.referenceType||"shortcut";Wt.type+="Reference",Wt.referenceType=Zt,delete Wt.url,delete Wt.title}else delete Wt.identifier,delete Wt.label;this.data.referenceType=void 0}function Vt(Wt){const Zt=this.sliceSerialize(Wt),xn=this.stack[this.stack.length-2];xn.label=decodeString(Zt),xn.identifier=normalizeIdentifier(Zt).toLowerCase()}function Rt(){const Wt=this.stack[this.stack.length-1],Zt=this.resume(),xn=this.stack[this.stack.length-1];if(this.data.inReference=!0,xn.type==="link"){const An=Wt.children;xn.children=An}else xn.alt=Zt}function vt(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.url=Wt}function St(){const Wt=this.resume(),Zt=this.stack[this.stack.length-1];Zt.title=Wt}function Pt(){this.data.inReference=void 0}function pt(){this.data.referenceType="collapsed"}function bt(Wt){const Zt=this.resume(),xn=this.stack[this.stack.length-1];xn.label=Zt,xn.identifier=normalizeIdentifier(this.sliceSerialize(Wt)).toLowerCase(),this.data.referenceType="full"}function Tt(Wt){this.data.characterReferenceType=Wt.type}function Ct(Wt){const Zt=this.sliceSerialize(Wt),xn=this.data.characterReferenceType;let An;xn?(An=decodeNumericCharacterReference(Zt,xn==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):An=decodeNamedCharacterReference(Zt);const Cn=this.stack[this.stack.length-1];Cn.value+=An}function kt(Wt){const Zt=this.stack.pop();Zt.position.end=point(Wt.end)}function Mt(Wt){_t.call(this,Wt);const Zt=this.stack[this.stack.length-1];Zt.url=this.sliceSerialize(Wt)}function zt(Wt){_t.call(this,Wt);const Zt=this.stack[this.stack.length-1];Zt.url="mailto:"+this.sliceSerialize(Wt)}function Kt(){return{type:"blockquote",children:[]}}function Yt(){return{type:"code",lang:null,meta:null,value:""}}function rn(){return{type:"inlineCode",value:""}}function cn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function sn(){return{type:"emphasis",children:[]}}function dn(){return{type:"heading",depth:0,children:[]}}function Ht(){return{type:"break"}}function Xt(){return{type:"html",value:""}}function It(){return{type:"image",title:null,url:"",alt:null}}function Nt(){return{type:"link",title:null,url:"",children:[]}}function Gt(Wt){return{type:"list",ordered:Wt.type==="listOrdered",start:null,spread:Wt._spread,children:[]}}function tn(Wt){return{type:"listItem",spread:Wt._spread,checked:null,children:[]}}function fn(){return{type:"paragraph",children:[]}}function yn(){return{type:"strong",children:[]}}function gn(){return{type:"text",value:""}}function Qt(){return{type:"thematicBreak"}}}function point(i){return{line:i.line,column:i.column,offset:i.offset}}function configure(i,e){let s=-1;for(;++s<e.length;){const o=e[s];Array.isArray(o)?configure(i,o):extension(i,o)}}function extension(i,e){let s;for(s in e)if(own$2.call(e,s))switch(s){case"canContainEols":{const o=e[s];o&&i[s].push(...o);break}case"transforms":{const o=e[s];o&&i[s].push(...o);break}case"enter":case"exit":{const o=e[s];o&&Object.assign(i[s],o);break}}}function defaultOnError(i,e){throw i?new Error("Cannot close `"+i.type+"` ("+stringifyPosition({start:i.start,end:i.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(i){const e=this;e.parser=s;function s(o){return fromMarkdown(o,{...e.data("settings"),...i,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote(i,e){const s={type:"element",tagName:"blockquote",properties:{},children:i.wrap(i.all(e),!0)};return i.patch(e,s),i.applyData(e,s)}function hardBreak(i,e){const s={type:"element",tagName:"br",properties:{},children:[]};return i.patch(e,s),[i.applyData(e,s),{type:"text",value:`
`}]}function code(i,e){const s=e.value?e.value+`
`:"",o={};e.lang&&(o.className=["language-"+e.lang]);let a={type:"element",tagName:"code",properties:o,children:[{type:"text",value:s}]};return e.meta&&(a.data={meta:e.meta}),i.patch(e,a),a=i.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},i.patch(e,a),a}function strikethrough(i,e){const s={type:"element",tagName:"del",properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function emphasis(i,e){const s={type:"element",tagName:"em",properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function footnoteReference(i,e){const s=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",o=String(e.identifier).toUpperCase(),a=normalizeUri(o.toLowerCase()),c=i.footnoteOrder.indexOf(o);let d,h=i.footnoteCounts.get(o);h===void 0?(h=0,i.footnoteOrder.push(o),d=i.footnoteOrder.length):d=c+1,h+=1,i.footnoteCounts.set(o,h);const g={type:"element",tagName:"a",properties:{href:"#"+s+"fn-"+a,id:s+"fnref-"+a+(h>1?"-"+h:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(d)}]};i.patch(e,g);const j={type:"element",tagName:"sup",properties:{},children:[g]};return i.patch(e,j),i.applyData(e,j)}function heading(i,e){const s={type:"element",tagName:"h"+e.depth,properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function html(i,e){if(i.options.allowDangerousHtml){const s={type:"raw",value:e.value};return i.patch(e,s),i.applyData(e,s)}}function revert(i,e){const s=e.referenceType;let o="]";if(s==="collapsed"?o+="[]":s==="full"&&(o+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+o}];const a=i.all(e),c=a[0];c&&c.type==="text"?c.value="["+c.value:a.unshift({type:"text",value:"["});const d=a[a.length-1];return d&&d.type==="text"?d.value+=o:a.push({type:"text",value:o}),a}function imageReference(i,e){const s=String(e.identifier).toUpperCase(),o=i.definitionById.get(s);if(!o)return revert(i,e);const a={src:normalizeUri(o.url||""),alt:e.alt};o.title!==null&&o.title!==void 0&&(a.title=o.title);const c={type:"element",tagName:"img",properties:a,children:[]};return i.patch(e,c),i.applyData(e,c)}function image(i,e){const s={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(s.alt=e.alt),e.title!==null&&e.title!==void 0&&(s.title=e.title);const o={type:"element",tagName:"img",properties:s,children:[]};return i.patch(e,o),i.applyData(e,o)}function inlineCode(i,e){const s={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};i.patch(e,s);const o={type:"element",tagName:"code",properties:{},children:[s]};return i.patch(e,o),i.applyData(e,o)}function linkReference(i,e){const s=String(e.identifier).toUpperCase(),o=i.definitionById.get(s);if(!o)return revert(i,e);const a={href:normalizeUri(o.url||"")};o.title!==null&&o.title!==void 0&&(a.title=o.title);const c={type:"element",tagName:"a",properties:a,children:i.all(e)};return i.patch(e,c),i.applyData(e,c)}function link(i,e){const s={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(s.title=e.title);const o={type:"element",tagName:"a",properties:s,children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function listItem(i,e,s){const o=i.all(e),a=s?listLoose(s):listItemLoose(e),c={},d=[];if(typeof e.checked=="boolean"){const $=o[0];let _;$&&$.type==="element"&&$.tagName==="p"?_=$:(_={type:"element",tagName:"p",properties:{},children:[]},o.unshift(_)),_.children.length>0&&_.children.unshift({type:"text",value:" "}),_.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),c.className=["task-list-item"]}let h=-1;for(;++h<o.length;){const $=o[h];(a||h!==0||$.type!=="element"||$.tagName!=="p")&&d.push({type:"text",value:`
`}),$.type==="element"&&$.tagName==="p"&&!a?d.push(...$.children):d.push($)}const g=o[o.length-1];g&&(a||g.type!=="element"||g.tagName!=="p")&&d.push({type:"text",value:`
`});const j={type:"element",tagName:"li",properties:c,children:d};return i.patch(e,j),i.applyData(e,j)}function listLoose(i){let e=!1;if(i.type==="list"){e=i.spread||!1;const s=i.children;let o=-1;for(;!e&&++o<s.length;)e=listItemLoose(s[o])}return e}function listItemLoose(i){const e=i.spread;return e??i.children.length>1}function list(i,e){const s={},o=i.all(e);let a=-1;for(typeof e.start=="number"&&e.start!==1&&(s.start=e.start);++a<o.length;){const d=o[a];if(d.type==="element"&&d.tagName==="li"&&d.properties&&Array.isArray(d.properties.className)&&d.properties.className.includes("task-list-item")){s.className=["contains-task-list"];break}}const c={type:"element",tagName:e.ordered?"ol":"ul",properties:s,children:i.wrap(o,!0)};return i.patch(e,c),i.applyData(e,c)}function paragraph(i,e){const s={type:"element",tagName:"p",properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function root$1(i,e){const s={type:"root",children:i.wrap(i.all(e))};return i.patch(e,s),i.applyData(e,s)}function strong(i,e){const s={type:"element",tagName:"strong",properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}function table(i,e){const s=i.all(e),o=s.shift(),a=[];if(o){const d={type:"element",tagName:"thead",properties:{},children:i.wrap([o],!0)};i.patch(e.children[0],d),a.push(d)}if(s.length>0){const d={type:"element",tagName:"tbody",properties:{},children:i.wrap(s,!0)},h=pointStart(e.children[1]),g=pointEnd(e.children[e.children.length-1]);h&&g&&(d.position={start:h,end:g}),a.push(d)}const c={type:"element",tagName:"table",properties:{},children:i.wrap(a,!0)};return i.patch(e,c),i.applyData(e,c)}function tableRow(i,e,s){const o=s?s.children:void 0,c=(o?o.indexOf(e):1)===0?"th":"td",d=s&&s.type==="table"?s.align:void 0,h=d?d.length:e.children.length;let g=-1;const j=[];for(;++g<h;){const _=e.children[g],et={},tt=d?d[g]:void 0;tt&&(et.align=tt);let it={type:"element",tagName:c,properties:et,children:[]};_&&(it.children=i.all(_),i.patch(_,it),it=i.applyData(_,it)),j.push(it)}const $={type:"element",tagName:"tr",properties:{},children:i.wrap(j,!0)};return i.patch(e,$),i.applyData(e,$)}function tableCell(i,e){const s={type:"element",tagName:"td",properties:{},children:i.all(e)};return i.patch(e,s),i.applyData(e,s)}const tab=9,space=32;function trimLines(i){const e=String(i),s=/\r?\n|\r/g;let o=s.exec(e),a=0;const c=[];for(;o;)c.push(trimLine(e.slice(a,o.index),a>0,!0),o[0]),a=o.index+o[0].length,o=s.exec(e);return c.push(trimLine(e.slice(a),a>0,!1)),c.join("")}function trimLine(i,e,s){let o=0,a=i.length;if(e){let c=i.codePointAt(o);for(;c===tab||c===space;)o++,c=i.codePointAt(o)}if(s){let c=i.codePointAt(a-1);for(;c===tab||c===space;)a--,c=i.codePointAt(a-1)}return a>o?i.slice(o,a):""}function text(i,e){const s={type:"text",value:trimLines(String(e.value))};return i.patch(e,s),i.applyData(e,s)}function thematicBreak(i,e){const s={type:"element",tagName:"hr",properties:{},children:[]};return i.patch(e,s),i.applyData(e,s)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root:root$1,strong,table,tableCell,tableRow,text,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(i,e)=>{const s=(a,c)=>(i.set(c,a),a),o=a=>{if(i.has(a))return i.get(a);const[c,d]=e[a];switch(c){case PRIMITIVE:case VOID:return s(d,a);case ARRAY:{const h=s([],a);for(const g of d)h.push(o(g));return h}case OBJECT:{const h=s({},a);for(const[g,j]of d)h[o(g)]=o(j);return h}case DATE:return s(new Date(d),a);case REGEXP:{const{source:h,flags:g}=d;return s(new RegExp(h,g),a)}case MAP:{const h=s(new Map,a);for(const[g,j]of d)h.set(o(g),o(j));return h}case SET:{const h=s(new Set,a);for(const g of d)h.add(o(g));return h}case ERROR:{const{name:h,message:g}=d;return s(new env[h](g),a)}case BIGINT:return s(BigInt(d),a);case"BigInt":return s(Object(BigInt(d)),a)}return s(new env[c](d),a)};return o},deserialize=i=>deserializer(new Map,i)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=i=>{const e=typeof i;if(e!=="object"||!i)return[PRIMITIVE,e];const s=toString.call(i).slice(8,-1);switch(s){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY]}return s.includes("Array")?[ARRAY,s]:s.includes("Error")?[ERROR,s]:[OBJECT,s]},shouldSkip=([i,e])=>i===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(i,e,s,o)=>{const a=(d,h)=>{const g=o.push(d)-1;return s.set(h,g),g},c=d=>{if(s.has(d))return s.get(d);let[h,g]=typeOf(d);switch(h){case PRIMITIVE:{let $=d;switch(g){case"bigint":h=BIGINT,$=d.toString();break;case"function":case"symbol":if(i)throw new TypeError("unable to serialize "+g);$=null;break;case"undefined":return a([VOID],d)}return a([h,$],d)}case ARRAY:{if(g)return a([g,[...d]],d);const $=[],_=a([h,$],d);for(const et of d)$.push(c(et));return _}case OBJECT:{if(g)switch(g){case"BigInt":return a([g,d.toString()],d);case"Boolean":case"Number":case"String":return a([g,d.valueOf()],d)}if(e&&"toJSON"in d)return c(d.toJSON());const $=[],_=a([h,$],d);for(const et of keys(d))(i||!shouldSkip(typeOf(d[et])))&&$.push([c(et),c(d[et])]);return _}case DATE:return a([h,d.toISOString()],d);case REGEXP:{const{source:$,flags:_}=d;return a([h,{source:$,flags:_}],d)}case MAP:{const $=[],_=a([h,$],d);for(const[et,tt]of d)(i||!(shouldSkip(typeOf(et))||shouldSkip(typeOf(tt))))&&$.push([c(et),c(tt)]);return _}case SET:{const $=[],_=a([h,$],d);for(const et of d)(i||!shouldSkip(typeOf(et)))&&$.push(c(et));return _}}const{message:j}=d;return a([h,{name:g,message:j}],d)};return c},serialize=(i,{json:e,lossy:s}={})=>{const o=[];return serializer(!(e||s),!!e,new Map,o)(i),o},structuredClone$1=typeof structuredClone=="function"?(i,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize(i,e)):structuredClone(i):(i,e)=>deserialize(serialize(i,e));function defaultFootnoteBackContent(i,e){const s=[{type:"text",value:""}];return e>1&&s.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),s}function defaultFootnoteBackLabel(i,e){return"Back to reference "+(i+1)+(e>1?"-"+e:"")}function footer(i){const e=typeof i.options.clobberPrefix=="string"?i.options.clobberPrefix:"user-content-",s=i.options.footnoteBackContent||defaultFootnoteBackContent,o=i.options.footnoteBackLabel||defaultFootnoteBackLabel,a=i.options.footnoteLabel||"Footnotes",c=i.options.footnoteLabelTagName||"h2",d=i.options.footnoteLabelProperties||{className:["sr-only"]},h=[];let g=-1;for(;++g<i.footnoteOrder.length;){const j=i.footnoteById.get(i.footnoteOrder[g]);if(!j)continue;const $=i.all(j),_=String(j.identifier).toUpperCase(),et=normalizeUri(_.toLowerCase());let tt=0;const it=[],ot=i.footnoteCounts.get(_);for(;ot!==void 0&&++tt<=ot;){it.length>0&&it.push({type:"text",value:" "});let st=typeof s=="string"?s:s(g,tt);typeof st=="string"&&(st={type:"text",value:st}),it.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+et+(tt>1?"-"+tt:""),dataFootnoteBackref:"",ariaLabel:typeof o=="string"?o:o(g,tt),className:["data-footnote-backref"]},children:Array.isArray(st)?st:[st]})}const at=$[$.length-1];if(at&&at.type==="element"&&at.tagName==="p"){const st=at.children[at.children.length-1];st&&st.type==="text"?st.value+=" ":at.children.push({type:"text",value:" "}),at.children.push(...it)}else $.push(...it);const rt={type:"element",tagName:"li",properties:{id:e+"fn-"+et},children:i.wrap($,!0)};i.patch(j,rt),h.push(rt)}if(h.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:c,properties:{...structuredClone$1(d),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:i.wrap(h,!0)},{type:"text",value:`
`}]}}const convert=function(i){if(i==null)return ok;if(typeof i=="function")return castFactory(i);if(typeof i=="object")return Array.isArray(i)?anyFactory(i):propsFactory(i);if(typeof i=="string")return typeFactory(i);throw new Error("Expected function, string, or object as test")};function anyFactory(i){const e=[];let s=-1;for(;++s<i.length;)e[s]=convert(i[s]);return castFactory(o);function o(...a){let c=-1;for(;++c<e.length;)if(e[c].apply(this,a))return!0;return!1}}function propsFactory(i){const e=i;return castFactory(s);function s(o){const a=o;let c;for(c in i)if(a[c]!==e[c])return!1;return!0}}function typeFactory(i){return castFactory(e);function e(s){return s&&s.type===i}}function castFactory(i){return e;function e(s,o,a){return!!(looksLikeANode(s)&&i.call(this,s,typeof o=="number"?o:void 0,a||void 0))}}function ok(){return!0}function looksLikeANode(i){return i!==null&&typeof i=="object"&&"type"in i}function color(i){return i}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(i,e,s,o){let a;typeof e=="function"&&typeof s!="function"?(o=s,s=e):a=e;const c=convert(a),d=o?-1:1;h(i,void 0,[])();function h(g,j,$){const _=g&&typeof g=="object"?g:{};if(typeof _.type=="string"){const tt=typeof _.tagName=="string"?_.tagName:typeof _.name=="string"?_.name:void 0;Object.defineProperty(et,"name",{value:"node ("+(g.type+(tt?"<"+tt+">":""))+")"})}return et;function et(){let tt=empty,it,ot,at;if((!e||c(g,j,$[$.length-1]||void 0))&&(tt=toResult(s(g,$)),tt[0]===EXIT))return tt;if("children"in g&&g.children){const rt=g;if(rt.children&&tt[0]!==SKIP)for(ot=(o?rt.children.length:-1)+d,at=$.concat(rt);ot>-1&&ot<rt.children.length;){const st=rt.children[ot];if(it=h(st,ot,at)(),it[0]===EXIT)return it;ot=typeof it[1]=="number"?it[1]:ot+d}}return tt}}}function toResult(i){return Array.isArray(i)?i:typeof i=="number"?[CONTINUE,i]:i==null?empty:[i]}function visit(i,e,s,o){let a,c,d;typeof e=="function"&&typeof s!="function"?(c=void 0,d=e,a=s):(c=e,d=s,a=o),visitParents(i,c,h,a);function h(g,j){const $=j[j.length-1],_=$?$.children.indexOf(g):void 0;return d(g,_,$)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState(i,e){const s=e||emptyOptions,o=new Map,a=new Map,c=new Map,d={...handlers,...s.handlers},h={all:j,applyData,definitionById:o,footnoteById:a,footnoteCounts:c,footnoteOrder:[],handlers:d,one:g,options:s,patch,wrap:wrap$1};return visit(i,function($){if($.type==="definition"||$.type==="footnoteDefinition"){const _=$.type==="definition"?o:a,et=String($.identifier).toUpperCase();_.has(et)||_.set(et,$)}}),h;function g($,_){const et=$.type,tt=h.handlers[et];if(own$1.call(h.handlers,et)&&tt)return tt(h,$,_);if(h.options.passThrough&&h.options.passThrough.includes(et)){if("children"in $){const{children:ot,...at}=$,rt=structuredClone$1(at);return rt.children=h.all($),rt}return structuredClone$1($)}return(h.options.unknownHandler||defaultUnknownHandler)(h,$,_)}function j($){const _=[];if("children"in $){const et=$.children;let tt=-1;for(;++tt<et.length;){const it=h.one(et[tt],$);if(it){if(tt&&et[tt-1].type==="break"&&(!Array.isArray(it)&&it.type==="text"&&(it.value=trimMarkdownSpaceStart(it.value)),!Array.isArray(it)&&it.type==="element")){const ot=it.children[0];ot&&ot.type==="text"&&(ot.value=trimMarkdownSpaceStart(ot.value))}Array.isArray(it)?_.push(...it):_.push(it)}}}return _}}function patch(i,e){i.position&&(e.position=position$1(i))}function applyData(i,e){let s=e;if(i&&i.data){const o=i.data.hName,a=i.data.hChildren,c=i.data.hProperties;if(typeof o=="string")if(s.type==="element")s.tagName=o;else{const d="children"in s?s.children:[s];s={type:"element",tagName:o,properties:{},children:d}}s.type==="element"&&c&&Object.assign(s.properties,structuredClone$1(c)),"children"in s&&s.children&&a!==null&&a!==void 0&&(s.children=a)}return s}function defaultUnknownHandler(i,e){const s=e.data||{},o="value"in e&&!(own$1.call(s,"hProperties")||own$1.call(s,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:i.all(e)};return i.patch(e,o),i.applyData(e,o)}function wrap$1(i,e){const s=[];let o=-1;for(e&&s.push({type:"text",value:`
`});++o<i.length;)o&&s.push({type:"text",value:`
`}),s.push(i[o]);return e&&i.length>0&&s.push({type:"text",value:`
`}),s}function trimMarkdownSpaceStart(i){let e=0,s=i.charCodeAt(e);for(;s===9||s===32;)e++,s=i.charCodeAt(e);return i.slice(e)}function toHast(i,e){const s=createState(i,e),o=s.one(i,void 0),a=footer(s),c=Array.isArray(o)?{type:"root",children:o}:o||{type:"root",children:[]};return a&&c.children.push({type:"text",value:`
`},a),c}function remarkRehype(i,e){return i&&"run"in i?async function(s,o){const a=toHast(s,{file:o,...e});await i.run(a,o)}:function(s,o){return toHast(s,{file:o,...i||e})}}function bail(i){if(i)throw i}var hasOwn$1=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function(e){return typeof Array.isArray=="function"?Array.isArray(e):toStr.call(e)==="[object Array]"},isPlainObject$1=function(e){if(!e||toStr.call(e)!=="[object Object]")return!1;var s=hasOwn$1.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&hasOwn$1.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!o)return!1;var a;for(a in e);return typeof a>"u"||hasOwn$1.call(e,a)},setProperty=function(e,s){defineProperty&&s.name==="__proto__"?defineProperty(e,s.name,{enumerable:!0,configurable:!0,value:s.newValue,writable:!0}):e[s.name]=s.newValue},getProperty=function(e,s){if(s==="__proto__")if(hasOwn$1.call(e,s)){if(gOPD)return gOPD(e,s).value}else return;return e[s]},extend$3=function i(){var e,s,o,a,c,d,h=arguments[0],g=1,j=arguments.length,$=!1;for(typeof h=="boolean"&&($=h,h=arguments[1]||{},g=2),(h==null||typeof h!="object"&&typeof h!="function")&&(h={});g<j;++g)if(e=arguments[g],e!=null)for(s in e)o=getProperty(h,s),a=getProperty(e,s),h!==a&&($&&a&&(isPlainObject$1(a)||(c=isArray(a)))?(c?(c=!1,d=o&&isArray(o)?o:[]):d=o&&isPlainObject$1(o)?o:{},setProperty(h,{name:s,newValue:i($,d,a)})):typeof a<"u"&&setProperty(h,{name:s,newValue:a}));return h};const extend$4=getDefaultExportFromCjs(extend$3);function isPlainObject(i){if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)}function trough(){const i=[],e={run:s,use:o};return e;function s(...a){let c=-1;const d=a.pop();if(typeof d!="function")throw new TypeError("Expected function as last argument, not "+d);h(null,...a);function h(g,...j){const $=i[++c];let _=-1;if(g){d(g);return}for(;++_<a.length;)(j[_]===null||j[_]===void 0)&&(j[_]=a[_]);a=j,$?wrap($,h)(...j):d(null,...j)}}function o(a){if(typeof a!="function")throw new TypeError("Expected `middelware` to be a function, not "+a);return i.push(a),e}}function wrap(i,e){let s;return o;function o(...d){const h=i.length>d.length;let g;h&&d.push(a);try{g=i.apply(this,d)}catch(j){const $=j;if(h&&s)throw $;return a($)}h||(g&&g.then&&typeof g.then=="function"?g.then(c,a):g instanceof Error?a(g):c(g))}function a(d,...h){s||(s=!0,e(d,...h))}function c(d){a(null,d)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(i);let s=0,o=-1,a=i.length,c;if(e===void 0||e.length===0||e.length>i.length){for(;a--;)if(i.codePointAt(a)===47){if(c){s=a+1;break}}else o<0&&(c=!0,o=a+1);return o<0?"":i.slice(s,o)}if(e===i)return"";let d=-1,h=e.length-1;for(;a--;)if(i.codePointAt(a)===47){if(c){s=a+1;break}}else d<0&&(c=!0,d=a+1),h>-1&&(i.codePointAt(a)===e.codePointAt(h--)?h<0&&(o=a):(h=-1,o=d));return s===o?o=d:o<0&&(o=i.length),i.slice(s,o)}function dirname(i){if(assertPath$1(i),i.length===0)return".";let e=-1,s=i.length,o;for(;--s;)if(i.codePointAt(s)===47){if(o){e=s;break}}else o||(o=!0);return e<0?i.codePointAt(0)===47?"/":".":e===1&&i.codePointAt(0)===47?"//":i.slice(0,e)}function extname(i){assertPath$1(i);let e=i.length,s=-1,o=0,a=-1,c=0,d;for(;e--;){const h=i.codePointAt(e);if(h===47){if(d){o=e+1;break}continue}s<0&&(d=!0,s=e+1),h===46?a<0?a=e:c!==1&&(c=1):a>-1&&(c=-1)}return a<0||s<0||c===0||c===1&&a===s-1&&a===o+1?"":i.slice(a,s)}function join(...i){let e=-1,s;for(;++e<i.length;)assertPath$1(i[e]),i[e]&&(s=s===void 0?i[e]:s+"/"+i[e]);return s===void 0?".":normalize(s)}function normalize(i){assertPath$1(i);const e=i.codePointAt(0)===47;let s=normalizeString(i,!e);return s.length===0&&!e&&(s="."),s.length>0&&i.codePointAt(i.length-1)===47&&(s+="/"),e?"/"+s:s}function normalizeString(i,e){let s="",o=0,a=-1,c=0,d=-1,h,g;for(;++d<=i.length;){if(d<i.length)h=i.codePointAt(d);else{if(h===47)break;h=47}if(h===47){if(!(a===d-1||c===1))if(a!==d-1&&c===2){if(s.length<2||o!==2||s.codePointAt(s.length-1)!==46||s.codePointAt(s.length-2)!==46){if(s.length>2){if(g=s.lastIndexOf("/"),g!==s.length-1){g<0?(s="",o=0):(s=s.slice(0,g),o=s.length-1-s.lastIndexOf("/")),a=d,c=0;continue}}else if(s.length>0){s="",o=0,a=d,c=0;continue}}e&&(s=s.length>0?s+"/..":"..",o=2)}else s.length>0?s+="/"+i.slice(a+1,d):s=i.slice(a+1,d),o=d-a-1;a=d,c=0}else h===46&&c>-1?c++:c=-1}return s}function assertPath$1(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}const minproc={cwd};function cwd(){return"/"}function isUrl(i){return!!(i!==null&&typeof i=="object"&&"href"in i&&i.href&&"protocol"in i&&i.protocol&&i.auth===void 0)}function urlToPath(i){if(typeof i=="string")i=new URL(i);else if(!isUrl(i)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+i+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(i.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(i)}function getPathFromURLPosix(i){if(i.hostname!==""){const o=new TypeError('File URL host must be "localhost" or empty on darwin');throw o.code="ERR_INVALID_FILE_URL_HOST",o}const e=i.pathname;let s=-1;for(;++s<e.length;)if(e.codePointAt(s)===37&&e.codePointAt(s+1)===50){const o=e.codePointAt(s+2);if(o===70||o===102){const a=new TypeError("File URL path must not include encoded / characters");throw a.code="ERR_INVALID_FILE_URL_PATH",a}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let s;e?isUrl(e)?s={path:e}:typeof e=="string"||isUint8Array$1(e)?s={value:e}:s=e:s={},this.cwd="cwd"in s?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let o=-1;for(;++o<order.length;){const c=order[o];c in s&&s[c]!==void 0&&s[c]!==null&&(this[c]=c==="history"?[...s[c]]:s[c])}let a;for(a in s)order.includes(a)||(this[a]=s[a])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,s,o){const a=this.message(e,s,o);throw a.fatal=!0,a}info(e,s,o){const a=this.message(e,s,o);return a.fatal=void 0,a}message(e,s,o){const a=new VFileMessage(e,s,o);return this.path&&(a.name=this.path+":"+a.name,a.file=this.path),a.fatal=!1,this.messages.push(a),a}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(i,e){if(i&&i.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(i,e){if(!i)throw new Error("`"+e+"` cannot be empty")}function assertPath(i,e){if(!i)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const CallableInstance=function(i){const o=this.constructor.prototype,a=o[i],c=function(){return a.apply(c,arguments)};return Object.setPrototypeOf(c,o),c},own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Processor;let s=-1;for(;++s<this.attachers.length;){const o=this.attachers[s];e.use(...o)}return e.data(extend$4(!0,{},this.namespace)),e}data(e,s){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=s,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[s,...o]=this.attachers[this.freezeIndex];if(o[0]===!1)continue;o[0]===!0&&(o[0]=void 0);const a=s.call(e,...o);typeof a=="function"&&this.transformers.use(a)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const s=vfile(e),o=this.parser||this.Parser;return assertParser("parse",o),o(String(s),s)}process(e,s){const o=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),s?a(void 0,s):new Promise(a);function a(c,d){const h=vfile(e),g=o.parse(h);o.run(g,h,function($,_,et){if($||!_||!et)return j($);const tt=_,it=o.stringify(tt,et);looksLikeAValue(it)?et.value=it:et.result=it,j($,et)});function j($,_){$||!_?d($):c?c(_):s(void 0,_)}}}processSync(e){let s=!1,o;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,a),assertDone("processSync","process",s),o;function a(c,d){s=!0,bail(c),o=d}}run(e,s,o){assertNode(e),this.freeze();const a=this.transformers;return!o&&typeof s=="function"&&(o=s,s=void 0),o?c(void 0,o):new Promise(c);function c(d,h){const g=vfile(s);a.run(e,g,j);function j($,_,et){const tt=_||e;$?h($):d?d(tt):o(void 0,tt,et)}}}runSync(e,s){let o=!1,a;return this.run(e,s,c),assertDone("runSync","run",o),a;function c(d,h){bail(d),a=h,o=!0}}stringify(e,s){this.freeze();const o=vfile(s),a=this.compiler||this.Compiler;return assertCompiler("stringify",a),assertNode(e),a(e,o)}use(e,...s){const o=this.attachers,a=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")g(e,s);else if(typeof e=="object")Array.isArray(e)?h(e):d(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function c(j){if(typeof j=="function")g(j,[]);else if(typeof j=="object")if(Array.isArray(j)){const[$,..._]=j;g($,_)}else d(j);else throw new TypeError("Expected usable value, not `"+j+"`")}function d(j){if(!("plugins"in j)&&!("settings"in j))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");h(j.plugins),j.settings&&(a.settings=extend$4(!0,a.settings,j.settings))}function h(j){let $=-1;if(j!=null)if(Array.isArray(j))for(;++$<j.length;){const _=j[$];c(_)}else throw new TypeError("Expected a list of plugins, not `"+j+"`")}function g(j,$){let _=-1,et=-1;for(;++_<o.length;)if(o[_][0]===j){et=_;break}if(et===-1)o.push([j,...$]);else if($.length>0){let[tt,...it]=$;const ot=o[et][1];isPlainObject(ot)&&isPlainObject(tt)&&(tt=extend$4(!0,ot,tt)),o[et]=[j,tt,...it]}}}}const unified=new Processor().freeze();function assertParser(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `parser`")}function assertCompiler(i,e){if(typeof e!="function")throw new TypeError("Cannot `"+i+"` without `compiler`")}function assertUnfrozen(i,e){if(e)throw new Error("Cannot call `"+i+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(i){if(!isPlainObject(i)||typeof i.type!="string")throw new TypeError("Expected node, got `"+i+"`")}function assertDone(i,e,s){if(!s)throw new Error("`"+i+"` finished async. Use `"+e+"` instead")}function vfile(i){return looksLikeAVFile(i)?i:new VFile(i)}function looksLikeAVFile(i){return!!(i&&typeof i=="object"&&"message"in i&&"messages"in i)}function looksLikeAValue(i){return typeof i=="string"||isUint8Array(i)}function isUint8Array(i){return!!(i&&typeof i=="object"&&"byteLength"in i&&"byteOffset"in i)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(i){const e=i.allowedElements,s=i.allowElement,o=i.children||"",a=i.className,c=i.components,d=i.disallowedElements,h=i.rehypePlugins||emptyPlugins,g=i.remarkPlugins||emptyPlugins,j=i.remarkRehypeOptions?{...i.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions,$=i.skipHtml,_=i.unwrapDisallowed,et=i.urlTransform||defaultUrlTransform,tt=unified().use(remarkParse).use(g).use(remarkRehype,j).use(h),it=new VFile;typeof o=="string"&&(it.value=o);for(const st of deprecations)Object.hasOwn(i,st.from)&&(""+st.from+(st.to?"use `"+st.to+"` instead":"remove it")+changelog+st.id,void 0);const ot=tt.parse(it);let at=tt.runSync(ot,it);return a&&(at={type:"element",tagName:"div",properties:{className:a},children:at.type==="root"?at.children:[at]}),visit(at,rt),toJsxRuntime(at,{Fragment:jsxRuntimeExports.Fragment,components:c,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function rt(st,lt,mt){if(st.type==="raw"&&mt&&typeof lt=="number")return $?mt.children.splice(lt,1):mt.children[lt]={type:"text",value:st.value},lt;if(st.type==="element"){let ft;for(ft in urlAttributes)if(Object.hasOwn(urlAttributes,ft)&&Object.hasOwn(st.properties,ft)){const gt=st.properties[ft],dt=urlAttributes[ft];(dt===null||dt.includes(st.tagName))&&(st.properties[ft]=et(String(gt||""),ft,st))}}if(st.type==="element"){let ft=e?!e.includes(st.tagName):d?d.includes(st.tagName):!1;if(!ft&&s&&typeof lt=="number"&&(ft=!s(st,lt,mt)),ft&&mt&&typeof lt=="number")return _&&st.children?mt.children.splice(lt,1,...st.children):mt.children.splice(lt,1),lt}}}function defaultUrlTransform(i){const e=i.indexOf(":"),s=i.indexOf("?"),o=i.indexOf("#"),a=i.indexOf("/");return e<0||a>-1&&e>a||s>-1&&e>s||o>-1&&e>o||safeProtocol.test(i.slice(0,e))?i:""}const ChatMessage=({role:i,content:e})=>jsxRuntimeExports.jsx("div",{className:`flex ${i==="user"?"justify-end":"justify-start"} mb-4`,children:jsxRuntimeExports.jsx("div",{className:`max-w-[80%] rounded-lg p-4 ${i==="user"?"bg-blue-500 text-white":"bg-gray-100 text-gray-800"}`,children:jsxRuntimeExports.jsx(Markdown,{className:"prose prose-sm max-w-none",components:{p:({children:s})=>jsxRuntimeExports.jsx("p",{className:"m-0",children:s}),pre:({children:s})=>jsxRuntimeExports.jsx("pre",{className:"bg-gray-800 text-white p-2 rounded mt-2 overflow-x-auto",children:s}),code:({children:s})=>jsxRuntimeExports.jsx("code",{className:"bg-gray-800 text-white px-1 rounded",children:s})},children:e})})}),VERSION="4.69.0";let auto=!1,kind,fetch$1,FormData$1,File$1,ReadableStream$1,getMultipartRequestOptions,getDefaultAgent,fileFromPath,isFsReadStream;function setShims(i,e={auto:!1}){if(auto)throw new Error(`you must \`import 'openai/shims/${i.kind}'\` before importing anything else from openai`);if(kind)throw new Error(`can't \`import 'openai/shims/${i.kind}'\` after \`import 'openai/shims/${kind}'\``);auto=e.auto,kind=i.kind,fetch$1=i.fetch,FormData$1=i.FormData,File$1=i.File,ReadableStream$1=i.ReadableStream,getMultipartRequestOptions=i.getMultipartRequestOptions,getDefaultAgent=i.getDefaultAgent,fileFromPath=i.fileFromPath,isFsReadStream=i.isFsReadStream}class MultipartBody{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function getRuntime({manuallyImported:i}={}){const e=i?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let s,o,a,c;try{s=fetch,o=Request,a=Response,c=Headers}catch(d){throw new Error(`this environment is missing the following Web Fetch API type: ${d.message}. ${e}`)}return{kind:"web",fetch:s,Request:o,Response:a,Headers:c,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(d,h)=>({...h,body:new MultipartBody(d)}),getDefaultAgent:d=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:d=>!1}}kind||setShims(getRuntime(),{auto:!0});class LineDecoder{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let s=this.decodeText(e);if(this.trailingCR&&(s="\r"+s,this.trailingCR=!1),s.endsWith("\r")&&(this.trailingCR=!0,s=s.slice(0,-1)),!s)return[];const o=LineDecoder.NEWLINE_CHARS.has(s[s.length-1]||"");let a=s.split(LineDecoder.NEWLINE_REGEXP);return o&&a.pop(),a.length===1&&!o?(this.buffer.push(a[0]),[]):(this.buffer.length>0&&(a=[this.buffer.join("")+a[0],...a.slice(1)],this.buffer=[]),o||(this.buffer=[a.pop()||""]),a)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new OpenAIError(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}LineDecoder.NEWLINE_CHARS=new Set([`
`,"\r"]);LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Stream{constructor(e,s){this.iterator=e,this.controller=s}static fromSSEResponse(e,s){let o=!1;async function*a(){if(o)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let c=!1;try{for await(const d of _iterSSEMessages(e,s))if(!c){if(d.data.startsWith("[DONE]")){c=!0;continue}if(d.event===null){let h;try{h=JSON.parse(d.data)}catch(g){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),g}if(h&&h.error)throw new APIError(void 0,h.error,void 0,void 0);yield h}else{let h;try{h=JSON.parse(d.data)}catch(g){throw console.error("Could not parse message into JSON:",d.data),console.error("From chunk:",d.raw),g}if(d.event=="error")throw new APIError(void 0,h.error,h.message,void 0);yield{event:d.event,data:h}}}c=!0}catch(d){if(d instanceof Error&&d.name==="AbortError")return;throw d}finally{c||s.abort()}}return new Stream(a,s)}static fromReadableStream(e,s){let o=!1;async function*a(){const d=new LineDecoder,h=readableStreamAsyncIterable(e);for await(const g of h)for(const j of d.decode(g))yield j;for(const g of d.flush())yield g}async function*c(){if(o)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let d=!1;try{for await(const h of a())d||h&&(yield JSON.parse(h));d=!0}catch(h){if(h instanceof Error&&h.name==="AbortError")return;throw h}finally{d||s.abort()}}return new Stream(c,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],o=this.iterator(),a=c=>({next:()=>{if(c.length===0){const d=o.next();e.push(d),s.push(d)}return c.shift()}});return[new Stream(()=>a(e),this.controller),new Stream(()=>a(s),this.controller)]}toReadableStream(){const e=this;let s;const o=new TextEncoder;return new ReadableStream$1({async start(){s=e[Symbol.asyncIterator]()},async pull(a){try{const{value:c,done:d}=await s.next();if(d)return a.close();const h=o.encode(JSON.stringify(c)+`
`);a.enqueue(h)}catch(c){a.error(c)}},async cancel(){var a;await((a=s.return)==null?void 0:a.call(s))}})}}async function*_iterSSEMessages(i,e){if(!i.body)throw e.abort(),new OpenAIError("Attempted to iterate over a response with no body");const s=new SSEDecoder,o=new LineDecoder,a=readableStreamAsyncIterable(i.body);for await(const c of iterSSEChunks(a))for(const d of o.decode(c)){const h=s.decode(d);h&&(yield h)}for(const c of o.flush()){const d=s.decode(c);d&&(yield d)}}async function*iterSSEChunks(i){let e=new Uint8Array;for await(const s of i){if(s==null)continue;const o=s instanceof ArrayBuffer?new Uint8Array(s):typeof s=="string"?new TextEncoder().encode(s):s;let a=new Uint8Array(e.length+o.length);a.set(e),a.set(o,e.length),e=a;let c;for(;(c=findDoubleNewlineIndex(e))!==-1;)yield e.slice(0,c),e=e.slice(c)}e.length>0&&(yield e)}function findDoubleNewlineIndex(i){for(let o=0;o<i.length-2;o++){if(i[o]===10&&i[o+1]===10||i[o]===13&&i[o+1]===13)return o+2;if(i[o]===13&&i[o+1]===10&&o+3<i.length&&i[o+2]===13&&i[o+3]===10)return o+4}return-1}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,o,a]=partition(e,":");return a.startsWith(" ")&&(a=a.substring(1)),s==="event"?this.event=a:s==="data"&&this.data.push(a),null}}function partition(i,e){const s=i.indexOf(e);return s!==-1?[i.substring(0,s),e,i.substring(s+e.length)]:[i,"",""]}function readableStreamAsyncIterable(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const s=await e.read();return s!=null&&s.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}const isResponseLike=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function",isFileLike=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&isBlobLike(i),isBlobLike=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",isUploadable=i=>isFileLike(i)||isResponseLike(i)||isFsReadStream(i);async function toFile(i,e,s){var a;if(i=await i,isFileLike(i))return i;if(isResponseLike(i)){const c=await i.blob();e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()??"unknown_file");const d=isBlobLike(c)?[await c.arrayBuffer()]:[c];return new File$1(d,e,s)}const o=await getBytes(i);if(e||(e=getName(i)??"unknown_file"),!(s!=null&&s.type)){const c=(a=o[0])==null?void 0:a.type;typeof c=="string"&&(s={...s,type:c})}return new File$1(o,e,s)}async function getBytes(i){var s;let e=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)e.push(i);else if(isBlobLike(i))e.push(await i.arrayBuffer());else if(isAsyncIterableIterator(i))for await(const o of i)e.push(o);else throw new Error(`Unexpected data type: ${typeof i}; constructor: ${(s=i==null?void 0:i.constructor)==null?void 0:s.name}; props: ${propsForError(i)}`);return e}function propsForError(i){return`[${Object.getOwnPropertyNames(i).map(s=>`"${s}"`).join(", ")}]`}function getName(i){var e;return getStringFromMaybeBuffer(i.name)||getStringFromMaybeBuffer(i.filename)||((e=getStringFromMaybeBuffer(i.path))==null?void 0:e.split(/[\\/]/).pop())}const getStringFromMaybeBuffer=i=>{if(typeof i=="string")return i;if(typeof Buffer<"u"&&i instanceof Buffer)return String(i)},isAsyncIterableIterator=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function",isMultipartBody=i=>i&&typeof i=="object"&&i.body&&i[Symbol.toStringTag]==="MultipartBody",multipartFormRequestOptions=async i=>{const e=await createForm(i.body);return getMultipartRequestOptions(e,i)},createForm=async i=>{const e=new FormData$1;return await Promise.all(Object.entries(i||{}).map(([s,o])=>addFormValue(e,s,o))),e},addFormValue=async(i,e,s)=>{if(s!==void 0){if(s==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")i.append(e,String(s));else if(isUploadable(s)){const o=await toFile(s);i.append(e,o)}else if(Array.isArray(s))await Promise.all(s.map(o=>addFormValue(i,e+"[]",o)));else if(typeof s=="object")await Promise.all(Object.entries(s).map(([o,a])=>addFormValue(i,`${e}[${o}]`,a)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${s} instead`)}};var define_process_env_default={},__classPrivateFieldSet$3=function(i,e,s,o,a){if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(i,s),s},__classPrivateFieldGet$4=function(i,e,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(i):o?o.value:e.get(i)},_AbstractPage_client;async function defaultParseResponse(i){const{response:e}=i;if(i.options.stream)return debug("response",e.status,e.url,e.headers,e.body),i.options.__streamClass?i.options.__streamClass.fromSSEResponse(e,i.controller):Stream.fromSSEResponse(e,i.controller);if(e.status===204)return null;if(i.options.__binaryResponse)return e;const s=e.headers.get("content-type");if((s==null?void 0:s.includes("application/json"))||(s==null?void 0:s.includes("application/vnd.api+json"))){const c=await e.json();return debug("response",e.status,e.url,e.headers,c),_addRequestID(c,e)}const a=await e.text();return debug("response",e.status,e.url,e.headers,a),a}function _addRequestID(i,e){return!i||typeof i!="object"||Array.isArray(i)?i:Object.defineProperty(i,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class APIPromise extends Promise{constructor(e,s=defaultParseResponse){super(o=>{o(null)}),this.responsePromise=e,this.parseResponse=s}_thenUnwrap(e){return new APIPromise(this.responsePromise,async s=>_addRequestID(e(await this.parseResponse(s),s),s.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s,request_id:s.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class APIClient{constructor({baseURL:e,maxRetries:s=2,timeout:o=6e5,httpAgent:a,fetch:c}){this.baseURL=e,this.maxRetries=validatePositiveInteger("maxRetries",s),this.timeout=validatePositiveInteger("timeout",o),this.httpAgent=a,this.fetch=c??fetch$1}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...getPlatformHeaders(),...this.authHeaders(e)}}validateHeaders(e,s){}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,o){return this.request(Promise.resolve(o).then(async a=>{const c=a&&isBlobLike(a==null?void 0:a.body)?new DataView(await a.body.arrayBuffer()):(a==null?void 0:a.body)instanceof DataView?a.body:(a==null?void 0:a.body)instanceof ArrayBuffer?new DataView(a.body):a&&ArrayBuffer.isView(a==null?void 0:a.body)?new DataView(a.body.buffer):a==null?void 0:a.body;return{method:e,path:s,...a,body:c}}))}getAPIList(e,s,o){return this.requestAPIList(s,{method:"get",path:e,...o})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:s=0}={}){var ot;const{method:o,path:a,query:c,headers:d={}}=e,h=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:isMultipartBody(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,g=this.calculateContentLength(h),j=this.buildURL(a,c);"timeout"in e&&validatePositiveInteger("timeout",e.timeout);const $=e.timeout??this.timeout,_=e.httpAgent??this.httpAgent??getDefaultAgent(j),et=$+1e3;typeof((ot=_==null?void 0:_.options)==null?void 0:ot.timeout)=="number"&&et>(_.options.timeout??0)&&(_.options.timeout=et),this.idempotencyHeader&&o!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),d[this.idempotencyHeader]=e.idempotencyKey);const tt=this.buildHeaders({options:e,headers:d,contentLength:g,retryCount:s});return{req:{method:o,...h&&{body:h},headers:tt,..._&&{agent:_},signal:e.signal??null},url:j,timeout:$}}buildHeaders({options:e,headers:s,contentLength:o,retryCount:a}){const c={};o&&(c["content-length"]=o);const d=this.defaultHeaders(e);return applyHeadersMut(c,d),applyHeadersMut(c,s),isMultipartBody(e.body)&&kind!=="node"&&delete c["content-type"],getHeader(d,"x-stainless-retry-count")===void 0&&getHeader(s,"x-stainless-retry-count")===void 0&&(c["x-stainless-retry-count"]=String(a)),this.validateHeaders(c,s),c}async prepareOptions(e){}async prepareRequest(e,{url:s,options:o}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(s=>[...s])):{...e}:{}}makeStatusError(e,s,o,a){return APIError.generate(e,s,o,a)}request(e,s=null){return new APIPromise(this.makeRequest(e,s))}async makeRequest(e,s){var _,et;const o=await e,a=o.maxRetries??this.maxRetries;s==null&&(s=a),await this.prepareOptions(o);const{req:c,url:d,timeout:h}=this.buildRequest(o,{retryCount:a-s});if(await this.prepareRequest(c,{url:d,options:o}),debug("request",d,o,c.headers),(_=o.signal)!=null&&_.aborted)throw new APIUserAbortError;const g=new AbortController,j=await this.fetchWithTimeout(d,c,h,g).catch(castToError);if(j instanceof Error){if((et=o.signal)!=null&&et.aborted)throw new APIUserAbortError;if(s)return this.retryRequest(o,s);throw j.name==="AbortError"?new APIConnectionTimeoutError:new APIConnectionError({cause:j})}const $=createResponseHeaders(j.headers);if(!j.ok){if(s&&this.shouldRetry(j)){const st=`retrying, ${s} attempts remaining`;return debug(`response (error; ${st})`,j.status,d,$),this.retryRequest(o,s,$)}const tt=await j.text().catch(st=>castToError(st).message),it=safeJSON(tt),ot=it?void 0:tt;throw debug(`response (error; ${s?"(error; no more retries left)":"(error; not retryable)"})`,j.status,d,$,ot),this.makeStatusError(j.status,it,ot,$)}return{response:j,options:o,controller:g}}requestAPIList(e,s){const o=this.makeRequest(s,null);return new PagePromise(this,o,e)}buildURL(e,s){const o=isAbsoluteURL(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),a=this.defaultQuery();return isEmptyObj(a)||(s={...a,...s}),typeof s=="object"&&s&&!Array.isArray(s)&&(o.search=this.stringifyQuery(s)),o.toString()}stringifyQuery(e){return Object.entries(e).filter(([s,o])=>typeof o<"u").map(([s,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(s)}=`;throw new OpenAIError(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,s,o,a){const{signal:c,...d}=s||{};c&&c.addEventListener("abort",()=>a.abort());const h=setTimeout(()=>a.abort(),o);return this.getRequestClient().fetch.call(void 0,e,{signal:a.signal,...d}).finally(()=>{clearTimeout(h)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,o){let a;const c=o==null?void 0:o["retry-after-ms"];if(c){const h=parseFloat(c);Number.isNaN(h)||(a=h)}const d=o==null?void 0:o["retry-after"];if(d&&!a){const h=parseFloat(d);Number.isNaN(h)?a=Date.parse(d)-Date.now():a=h*1e3}if(!(a&&0<=a&&a<60*1e3)){const h=e.maxRetries??this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(s,h)}return await sleep(a),this.makeRequest(e,s-1)}calculateDefaultRetryTimeoutMillis(e,s){const c=s-e,d=Math.min(.5*Math.pow(2,c),8),h=1-Math.random()*.25;return d*h*1e3}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}}class AbstractPage{constructor(e,s,o,a){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet$3(this,_AbstractPage_client,e),this.options=a,this.response=s,this.body=o}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const s={...this.options};if("params"in e&&typeof s.query=="object")s.query={...s.query,...e.params};else if("url"in e){const o=[...Object.entries(s.query||{}),...e.url.searchParams.entries()];for(const[a,c]of o)e.url.searchParams.set(a,c);s.query=void 0,s.path=e.url.toString()}return await __classPrivateFieldGet$4(this,_AbstractPage_client,"f").requestAPIList(this.constructor,s)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const s of e.getPaginatedItems())yield s}}class PagePromise extends APIPromise{constructor(e,s,o){super(s,async a=>new o(e,a.response,await defaultParseResponse(a),a.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const s of e)yield s}}const createResponseHeaders=i=>new Proxy(Object.fromEntries(i.entries()),{get(e,s){const o=s.toString();return e[o.toLowerCase()]||e[o]}}),requestOptionsKeys={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},isRequestOptions=i=>typeof i=="object"&&i!==null&&!isEmptyObj(i)&&Object.keys(i).every(e=>hasOwn(requestOptionsKeys,e)),getPlatformProperties=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(process.platform),"X-Stainless-Arch":normalizeArch(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const i=getBrowserInfo();return i?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${i.browser}`,"X-Stainless-Runtime-Version":i.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of i){const o=s.exec(navigator.userAgent);if(o){const a=o[1]||0,c=o[2]||0,d=o[3]||0;return{browser:e,version:`${a}.${c}.${d}`}}}return null}const normalizeArch=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",normalizePlatform=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties()),safeJSON=i=>{try{return JSON.parse(i)}catch{return}},startsWithSchemeRegexp=new RegExp("^(?:[a-z]+:)?//","i"),isAbsoluteURL=i=>startsWithSchemeRegexp.test(i),sleep=i=>new Promise(e=>setTimeout(e,i)),validatePositiveInteger=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new OpenAIError(`${i} must be an integer`);if(e<0)throw new OpenAIError(`${i} must be a positive integer`);return e},castToError=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null)try{return new Error(JSON.stringify(i))}catch{}return new Error(i)},readEnv=i=>{var e,s,o,a;if(typeof process<"u")return((e=define_process_env_default==null?void 0:define_process_env_default[i])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(a=(o=(s=Deno.env)==null?void 0:s.get)==null?void 0:o.call(s,i))==null?void 0:a.trim()};function isEmptyObj(i){if(!i)return!0;for(const e in i)return!1;return!0}function hasOwn(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function applyHeadersMut(i,e){for(const s in e){if(!hasOwn(e,s))continue;const o=s.toLowerCase();if(!o)continue;const a=e[s];a===null?delete i[o]:a!==void 0&&(i[o]=a)}}function debug(i,...e){typeof process<"u"&&(define_process_env_default==null?void 0:define_process_env_default.DEBUG)==="true"&&console.log(`OpenAI:DEBUG:${i}`,...e)}const uuid4=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const e=Math.random()*16|0;return(i==="x"?e:e&3|8).toString(16)}),isRunningInBrowser=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",isHeadersProtocol=i=>typeof(i==null?void 0:i.get)=="function",getHeader=(i,e)=>{var o;const s=e.toLowerCase();if(isHeadersProtocol(i)){const a=((o=e[0])==null?void 0:o.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(c,d,h)=>d+h.toUpperCase());for(const c of[e,s,e.toUpperCase(),a]){const d=i.get(c);if(d)return d}}for(const[a,c]of Object.entries(i))if(a.toLowerCase()===s)return Array.isArray(c)?(c.length<=1||console.warn(`Received ${c.length} entries for the ${e} header, using the first entry.`),c[0]):c};function isObj(i){return i!=null&&typeof i=="object"&&!Array.isArray(i)}class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(e,s,o,a){super(`${APIError.makeMessage(e,s,o)}`),this.status=e,this.headers=a,this.request_id=a==null?void 0:a["x-request-id"];const c=s;this.error=c,this.code=c==null?void 0:c.code,this.param=c==null?void 0:c.param,this.type=c==null?void 0:c.type}static makeMessage(e,s,o){const a=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):o;return e&&a?`${e} ${a}`:e?`${e} status code (no body)`:a||"(no status code or body)"}static generate(e,s,o,a){if(!e)return new APIConnectionError({message:o,cause:castToError(s)});const c=s==null?void 0:s.error;return e===400?new BadRequestError(e,c,o,a):e===401?new AuthenticationError(e,c,o,a):e===403?new PermissionDeniedError(e,c,o,a):e===404?new NotFoundError(e,c,o,a):e===409?new ConflictError(e,c,o,a):e===422?new UnprocessableEntityError(e,c,o,a):e===429?new RateLimitError(e,c,o,a):e>=500?new InternalServerError(e,c,o,a):new APIError(e,c,o,a)}}class APIUserAbortError extends APIError{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class APIConnectionError extends APIError{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,s&&(this.cause=s)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BadRequestError extends APIError{constructor(){super(...arguments),this.status=400}}class AuthenticationError extends APIError{constructor(){super(...arguments),this.status=401}}class PermissionDeniedError extends APIError{constructor(){super(...arguments),this.status=403}}class NotFoundError extends APIError{constructor(){super(...arguments),this.status=404}}class ConflictError extends APIError{constructor(){super(...arguments),this.status=409}}class UnprocessableEntityError extends APIError{constructor(){super(...arguments),this.status=422}}class RateLimitError extends APIError{constructor(){super(...arguments),this.status=429}}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}const default_format="RFC3986",formatters={RFC1738:i=>String(i).replace(/%20/g,"+"),RFC3986:i=>String(i)},RFC1738="RFC1738",is_array$1=Array.isArray,hex_table=(()=>{const i=[];for(let e=0;e<256;++e)i.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return i})(),limit=1024,encode=(i,e,s,o,a)=>{if(i.length===0)return i;let c=i;if(typeof i=="symbol"?c=Symbol.prototype.toString.call(i):typeof i!="string"&&(c=String(i)),s==="iso-8859-1")return escape(c).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});let d="";for(let h=0;h<c.length;h+=limit){const g=c.length>=limit?c.slice(h,h+limit):c,j=[];for(let $=0;$<g.length;++$){let _=g.charCodeAt($);if(_===45||_===46||_===95||_===126||_>=48&&_<=57||_>=65&&_<=90||_>=97&&_<=122||a===RFC1738&&(_===40||_===41)){j[j.length]=g.charAt($);continue}if(_<128){j[j.length]=hex_table[_];continue}if(_<2048){j[j.length]=hex_table[192|_>>6]+hex_table[128|_&63];continue}if(_<55296||_>=57344){j[j.length]=hex_table[224|_>>12]+hex_table[128|_>>6&63]+hex_table[128|_&63];continue}$+=1,_=65536+((_&1023)<<10|g.charCodeAt($)&1023),j[j.length]=hex_table[240|_>>18]+hex_table[128|_>>12&63]+hex_table[128|_>>6&63]+hex_table[128|_&63]}d+=j.join("")}return d};function is_buffer(i){return!i||typeof i!="object"?!1:!!(i.constructor&&i.constructor.isBuffer&&i.constructor.isBuffer(i))}function maybe_map(i,e){if(is_array$1(i)){const s=[];for(let o=0;o<i.length;o+=1)s.push(e(i[o]));return s}return e(i)}const has$1=Object.prototype.hasOwnProperty,array_prefix_generators={brackets(i){return String(i)+"[]"},comma:"comma",indices(i,e){return String(i)+"["+e+"]"},repeat(i){return String(i)}},is_array=Array.isArray,push=Array.prototype.push,push_to_array=function(i,e){push.apply(i,is_array(e)?e:[e])},to_ISO=Date.prototype.toISOString,defaults$1={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode,encodeValuesOnly:!1,format:default_format,formatter:formatters[default_format],indices:!1,serializeDate(i){return to_ISO.call(i)},skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(i){return typeof i=="string"||typeof i=="number"||typeof i=="boolean"||typeof i=="symbol"||typeof i=="bigint"}const sentinel={};function inner_stringify(i,e,s,o,a,c,d,h,g,j,$,_,et,tt,it,ot,at,rt){let st=i,lt=rt,mt=0,ft=!1;for(;(lt=lt.get(sentinel))!==void 0&&!ft;){const _t=lt.get(i);if(mt+=1,typeof _t<"u"){if(_t===mt)throw new RangeError("Cyclic object value");ft=!0}typeof lt.get(sentinel)>"u"&&(mt=0)}if(typeof j=="function"?st=j(e,st):st instanceof Date?st=et==null?void 0:et(st):s==="comma"&&is_array(st)&&(st=maybe_map(st,function(_t){return _t instanceof Date?et==null?void 0:et(_t):_t})),st===null){if(c)return g&&!ot?g(e,defaults$1.encoder,at,"key",tt):e;st=""}if(is_non_nullish_primitive(st)||is_buffer(st)){if(g){const _t=ot?e:g(e,defaults$1.encoder,at,"key",tt);return[(it==null?void 0:it(_t))+"="+(it==null?void 0:it(g(st,defaults$1.encoder,at,"value",tt)))]}return[(it==null?void 0:it(e))+"="+(it==null?void 0:it(String(st)))]}const gt=[];if(typeof st>"u")return gt;let dt;if(s==="comma"&&is_array(st))ot&&g&&(st=maybe_map(st,g)),dt=[{value:st.length>0?st.join(",")||null:void 0}];else if(is_array(j))dt=j;else{const _t=Object.keys(st);dt=$?_t.sort($):_t}const ut=h?String(e).replace(/\./g,"%2E"):String(e),ct=o&&is_array(st)&&st.length===1?ut+"[]":ut;if(a&&is_array(st)&&st.length===0)return ct+"[]";for(let _t=0;_t<dt.length;++_t){const ht=dt[_t],Et=typeof ht=="object"&&typeof ht.value<"u"?ht.value:st[ht];if(d&&Et===null)continue;const yt=_&&h?ht.replace(/\./g,"%2E"):ht,Ot=is_array(st)?typeof s=="function"?s(ct,yt):ct:ct+(_?"."+yt:"["+yt+"]");rt.set(i,mt);const Dt=new WeakMap;Dt.set(sentinel,rt),push_to_array(gt,inner_stringify(Et,Ot,s,o,a,c,d,h,s==="comma"&&ot&&is_array(st)?null:g,j,$,_,et,tt,it,ot,at,Dt))}return gt}function normalize_stringify_options(i=defaults$1){if(typeof i.allowEmptyArrays<"u"&&typeof i.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof i.encodeDotInKeys<"u"&&typeof i.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(i.encoder!==null&&typeof i.encoder<"u"&&typeof i.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=i.charset||defaults$1.charset;if(typeof i.charset<"u"&&i.charset!=="utf-8"&&i.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let s=default_format;if(typeof i.format<"u"){if(!has$1.call(formatters,i.format))throw new TypeError("Unknown format option provided.");s=i.format}const o=formatters[s];let a=defaults$1.filter;(typeof i.filter=="function"||is_array(i.filter))&&(a=i.filter);let c;if(i.arrayFormat&&i.arrayFormat in array_prefix_generators?c=i.arrayFormat:"indices"in i?c=i.indices?"indices":"repeat":c=defaults$1.arrayFormat,"commaRoundTrip"in i&&typeof i.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const d=typeof i.allowDots>"u"?i.encodeDotInKeys?!0:defaults$1.allowDots:!!i.allowDots;return{addQueryPrefix:typeof i.addQueryPrefix=="boolean"?i.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:d,allowEmptyArrays:typeof i.allowEmptyArrays=="boolean"?!!i.allowEmptyArrays:defaults$1.allowEmptyArrays,arrayFormat:c,charset:e,charsetSentinel:typeof i.charsetSentinel=="boolean"?i.charsetSentinel:defaults$1.charsetSentinel,commaRoundTrip:!!i.commaRoundTrip,delimiter:typeof i.delimiter>"u"?defaults$1.delimiter:i.delimiter,encode:typeof i.encode=="boolean"?i.encode:defaults$1.encode,encodeDotInKeys:typeof i.encodeDotInKeys=="boolean"?i.encodeDotInKeys:defaults$1.encodeDotInKeys,encoder:typeof i.encoder=="function"?i.encoder:defaults$1.encoder,encodeValuesOnly:typeof i.encodeValuesOnly=="boolean"?i.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:a,format:s,formatter:o,serializeDate:typeof i.serializeDate=="function"?i.serializeDate:defaults$1.serializeDate,skipNulls:typeof i.skipNulls=="boolean"?i.skipNulls:defaults$1.skipNulls,sort:typeof i.sort=="function"?i.sort:null,strictNullHandling:typeof i.strictNullHandling=="boolean"?i.strictNullHandling:defaults$1.strictNullHandling}}function stringify(i,e={}){let s=i;const o=normalize_stringify_options(e);let a,c;typeof o.filter=="function"?(c=o.filter,s=c("",s)):is_array(o.filter)&&(c=o.filter,a=c);const d=[];if(typeof s!="object"||s===null)return"";const h=array_prefix_generators[o.arrayFormat],g=h==="comma"&&o.commaRoundTrip;a||(a=Object.keys(s)),o.sort&&a.sort(o.sort);const j=new WeakMap;for(let et=0;et<a.length;++et){const tt=a[et];o.skipNulls&&s[tt]===null||push_to_array(d,inner_stringify(s[tt],tt,h,g,o.allowEmptyArrays,o.strictNullHandling,o.skipNulls,o.encodeDotInKeys,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.format,o.formatter,o.encodeValuesOnly,o.charset,j))}const $=d.join(o.delimiter);let _=o.addQueryPrefix===!0?"?":"";return o.charsetSentinel&&(o.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),$.length>0?_+$:""}let Page$1=class extends AbstractPage{constructor(e,s,o,a){super(e,s,o,a),this.data=o.data||[],this.object=o.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}};class CursorPage extends AbstractPage{constructor(e,s,o,a){super(e,s,o,a),this.data=o.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const s=Object.fromEntries(e.url.searchParams);return Object.keys(s).length?s:null}nextPageInfo(){var o;const e=this.getPaginatedItems();if(!e.length)return null;const s=(o=e[e.length-1])==null?void 0:o.id;return s?{params:{after:s}}:null}}class APIResource{constructor(e){this._client=e}}let Completions$2=class extends APIResource{create(e,s){return this._client.post("/chat/completions",{body:e,...s,stream:e.stream??!1})}};Completions$2||(Completions$2={});let Chat$1=class extends APIResource{constructor(){super(...arguments),this.completions=new Completions$2(this._client)}};(function(i){i.Completions=Completions$2})(Chat$1||(Chat$1={}));class Speech extends APIResource{create(e,s){return this._client.post("/audio/speech",{body:e,...s,__binaryResponse:!0})}}Speech||(Speech={});class Transcriptions extends APIResource{create(e,s){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:e,...s}))}}Transcriptions||(Transcriptions={});class Translations extends APIResource{create(e,s){return this._client.post("/audio/translations",multipartFormRequestOptions({body:e,...s}))}}Translations||(Translations={});let Audio$1=class extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}};(function(i){i.Transcriptions=Transcriptions,i.Translations=Translations,i.Speech=Speech})(Audio$1||(Audio$1={}));class Batches extends APIResource{create(e,s){return this._client.post("/batches",{body:e,...s})}retrieve(e,s){return this._client.get(`/batches/${e}`,s)}list(e={},s){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/batches",BatchesPage,{query:e,...s})}cancel(e,s){return this._client.post(`/batches/${e}/cancel`,s)}}class BatchesPage extends CursorPage{}(function(i){i.BatchesPage=BatchesPage})(Batches||(Batches={}));class Assistants extends APIResource{create(e,s){return this._client.post("/assistants",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/assistants/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,o){return this._client.post(`/assistants/${e}`,{body:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e={},s){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/assistants",AssistantsPage,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,s){return this._client.delete(`/assistants/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class AssistantsPage extends CursorPage{}(function(i){i.AssistantsPage=AssistantsPage})(Assistants||(Assistants={}));function isRunnableFunctionWithParse(i){return typeof i.parse=="function"}const isAssistantMessage=i=>(i==null?void 0:i.role)==="assistant",isFunctionMessage=i=>(i==null?void 0:i.role)==="function",isToolMessage=i=>(i==null?void 0:i.role)==="tool";var __classPrivateFieldSet$2=function(i,e,s,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(i,s):a?a.value=s:e.set(i,s),s},__classPrivateFieldGet$3=function(i,e,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(i):o?o.value:e.get(i)},_EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet$2(this,_EventStream_connectedPromise,new Promise((e,s)=>{__classPrivateFieldSet$2(this,_EventStream_resolveConnectedPromise,e,"f"),__classPrivateFieldSet$2(this,_EventStream_rejectConnectedPromise,s,"f")}),"f"),__classPrivateFieldSet$2(this,_EventStream_endPromise,new Promise((e,s)=>{__classPrivateFieldSet$2(this,_EventStream_resolveEndPromise,e,"f"),__classPrivateFieldSet$2(this,_EventStream_rejectEndPromise,s,"f")}),"f"),__classPrivateFieldGet$3(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet$3(this,_EventStream_endPromise,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet$3(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet$3(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet$3(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet$3(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet$3(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(e,s){return(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[e]||(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[e]=[])).push({listener:s}),this}off(e,s){const o=__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[e];if(!o)return this;const a=o.findIndex(c=>c.listener===s);return a>=0&&o.splice(a,1),this}once(e,s){return(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[e]||(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[e]=[])).push({listener:s,once:!0}),this}emitted(e){return new Promise((s,o)=>{__classPrivateFieldSet$2(this,_EventStream_catchingPromiseCreated,!0,"f"),e!=="error"&&this.once("error",o),this.once(e,s)})}async done(){__classPrivateFieldSet$2(this,_EventStream_catchingPromiseCreated,!0,"f"),await __classPrivateFieldGet$3(this,_EventStream_endPromise,"f")}_emit(e,...s){if(__classPrivateFieldGet$3(this,_EventStream_ended,"f"))return;e==="end"&&(__classPrivateFieldSet$2(this,_EventStream_ended,!0,"f"),__classPrivateFieldGet$3(this,_EventStream_resolveEndPromise,"f").call(this));const o=__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[e];if(o&&(__classPrivateFieldGet$3(this,_EventStream_listeners,"f")[e]=o.filter(a=>!a.once),o.forEach(({listener:a})=>a(...s))),e==="abort"){const a=s[0];!__classPrivateFieldGet$3(this,_EventStream_catchingPromiseCreated,"f")&&!(o!=null&&o.length)&&Promise.reject(a),__classPrivateFieldGet$3(this,_EventStream_rejectConnectedPromise,"f").call(this,a),__classPrivateFieldGet$3(this,_EventStream_rejectEndPromise,"f").call(this,a),this._emit("end");return}if(e==="error"){const a=s[0];!__classPrivateFieldGet$3(this,_EventStream_catchingPromiseCreated,"f")&&!(o!=null&&o.length)&&Promise.reject(a),__classPrivateFieldGet$3(this,_EventStream_rejectConnectedPromise,"f").call(this,a),__classPrivateFieldGet$3(this,_EventStream_rejectEndPromise,"f").call(this,a),this._emit("end")}}_emitFinal(){}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function(e){if(__classPrivateFieldSet$2(this,_EventStream_errored,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new APIUserAbortError),e instanceof APIUserAbortError)return __classPrivateFieldSet$2(this,_EventStream_aborted,!0,"f"),this._emit("abort",e);if(e instanceof OpenAIError)return this._emit("error",e);if(e instanceof Error){const s=new OpenAIError(e.message);return s.cause=e,this._emit("error",s)}return this._emit("error",new OpenAIError(String(e)))};function isAutoParsableResponseFormat(i){return(i==null?void 0:i.$brand)==="auto-parseable-response-format"}function isAutoParsableTool(i){return(i==null?void 0:i.$brand)==="auto-parseable-tool"}function maybeParseChatCompletion(i,e){return!e||!hasAutoParseableInput(e)?{...i,choices:i.choices.map(s=>({...s,message:{...s.message,parsed:null,tool_calls:s.message.tool_calls??[]}}))}:parseChatCompletion(i,e)}function parseChatCompletion(i,e){const s=i.choices.map(o=>{var a;if(o.finish_reason==="length")throw new LengthFinishReasonError;if(o.finish_reason==="content_filter")throw new ContentFilterFinishReasonError;return{...o,message:{...o.message,tool_calls:((a=o.message.tool_calls)==null?void 0:a.map(c=>parseToolCall(e,c)))??[],parsed:o.message.content&&!o.message.refusal?parseResponseFormat(e,o.message.content):null}}});return{...i,choices:s}}function parseResponseFormat(i,e){var s,o;return((s=i.response_format)==null?void 0:s.type)!=="json_schema"?null:((o=i.response_format)==null?void 0:o.type)==="json_schema"?"$parseRaw"in i.response_format?i.response_format.$parseRaw(e):JSON.parse(e):null}function parseToolCall(i,e){var o;const s=(o=i.tools)==null?void 0:o.find(a=>{var c;return((c=a.function)==null?void 0:c.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:isAutoParsableTool(s)?s.$parseRaw(e.function.arguments):s!=null&&s.function.strict?JSON.parse(e.function.arguments):null}}}function shouldParseToolCall(i,e){var o;if(!i)return!1;const s=(o=i.tools)==null?void 0:o.find(a=>{var c;return((c=a.function)==null?void 0:c.name)===e.function.name});return isAutoParsableTool(s)||(s==null?void 0:s.function.strict)||!1}function hasAutoParseableInput(i){var e;return isAutoParsableResponseFormat(i.response_format)?!0:((e=i.tools)==null?void 0:e.some(s=>isAutoParsableTool(s)||s.type==="function"&&s.function.strict===!0))??!1}function validateInputTools(i){for(const e of i??[]){if(e.type!=="function")throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new OpenAIError(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var __classPrivateFieldGet$2=function(i,e,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(i):o?o.value:e.get(i)},_AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionCall,_AbstractChatCompletionRunner_getFinalFunctionCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var o;this._chatCompletions.push(e),this._emit("chatCompletion",e);const s=(o=e.choices[0])==null?void 0:o.message;return s&&this._addMessage(s),e}_addMessage(e,s=!0){if("content"in e||(e.content=null),this.messages.push(e),s){if(this._emit("message",e),(isFunctionMessage(e)||isToolMessage(e))&&e.content)this._emit("functionCallResult",e.content);else if(isAssistantMessage(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(isAssistantMessage(e)&&e.tool_calls)for(const o of e.tool_calls)o.type==="function"&&this._emit("functionCall",o.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new OpenAIError("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionCall(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this)}async finalFunctionCallResult(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const s=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);s&&this._emit("finalMessage",s);const o=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);o&&this._emit("finalContent",o);const a=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCall).call(this);a&&this._emit("finalFunctionCall",a);const c=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionCallResult).call(this);c!=null&&this._emit("finalFunctionCallResult",c),this._chatCompletions.some(d=>d.usage)&&this._emit("totalUsage",__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(e,s,o){const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,s);const c=await e.chat.completions.create({...s,stream:!1},{...o,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(c,s))}async _runChatCompletion(e,s,o){for(const a of s.messages)this._addMessage(a,!1);return await this._createChatCompletion(e,s,o)}async _runFunctions(e,s,o){var et;const a="function",{function_call:c="auto",stream:d,...h}=s,g=typeof c!="string"&&(c==null?void 0:c.name),{maxChatCompletions:j=DEFAULT_MAX_CHAT_COMPLETIONS}=o||{},$={};for(const tt of s.functions)$[tt.name||tt.function.name]=tt;const _=s.functions.map(tt=>({name:tt.name||tt.function.name,parameters:tt.parameters,description:tt.description}));for(const tt of s.messages)this._addMessage(tt,!1);for(let tt=0;tt<j;++tt){const ot=(et=(await this._createChatCompletion(e,{...h,function_call:c,functions:_,messages:[...this.messages]},o)).choices[0])==null?void 0:et.message;if(!ot)throw new OpenAIError("missing message in ChatCompletion response");if(!ot.function_call)return;const{name:at,arguments:rt}=ot.function_call,st=$[at];if(st){if(g&&g!==at){const gt=`Invalid function_call: ${JSON.stringify(at)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:a,name:at,content:gt});continue}}else{const gt=`Invalid function_call: ${JSON.stringify(at)}. Available options are: ${_.map(dt=>JSON.stringify(dt.name)).join(", ")}. Please try again`;this._addMessage({role:a,name:at,content:gt});continue}let lt;try{lt=isRunnableFunctionWithParse(st)?await st.parse(rt):rt}catch(gt){this._addMessage({role:a,name:at,content:gt instanceof Error?gt.message:String(gt)});continue}const mt=await st.function(lt,this),ft=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,mt);if(this._addMessage({role:a,name:at,content:ft}),g)return}}async _runTools(e,s,o){var tt,it,ot;const a="tool",{tool_choice:c="auto",stream:d,...h}=s,g=typeof c!="string"&&((tt=c==null?void 0:c.function)==null?void 0:tt.name),{maxChatCompletions:j=DEFAULT_MAX_CHAT_COMPLETIONS}=o||{},$=s.tools.map(at=>{if(isAutoParsableTool(at)){if(!at.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:at.$callback,name:at.function.name,description:at.function.description||"",parameters:at.function.parameters,parse:at.$parseRaw,strict:!0}}}return at}),_={};for(const at of $)at.type==="function"&&(_[at.function.name||at.function.function.name]=at.function);const et="tools"in s?$.map(at=>at.type==="function"?{type:"function",function:{name:at.function.name||at.function.function.name,parameters:at.function.parameters,description:at.function.description,strict:at.function.strict}}:at):void 0;for(const at of s.messages)this._addMessage(at,!1);for(let at=0;at<j;++at){const st=(it=(await this._createChatCompletion(e,{...h,tool_choice:c,tools:et,messages:[...this.messages]},o)).choices[0])==null?void 0:it.message;if(!st)throw new OpenAIError("missing message in ChatCompletion response");if(!((ot=st.tool_calls)!=null&&ot.length))return;for(const lt of st.tool_calls){if(lt.type!=="function")continue;const mt=lt.id,{name:ft,arguments:gt}=lt.function,dt=_[ft];if(dt){if(g&&g!==ft){const ht=`Invalid tool_call: ${JSON.stringify(ft)}. ${JSON.stringify(g)} requested. Please try again`;this._addMessage({role:a,tool_call_id:mt,content:ht});continue}}else{const ht=`Invalid tool_call: ${JSON.stringify(ft)}. Available options are: ${Object.keys(_).map(Et=>JSON.stringify(Et)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:mt,content:ht});continue}let ut;try{ut=isRunnableFunctionWithParse(dt)?await dt.parse(gt):gt}catch(ht){const Et=ht instanceof Error?ht.message:String(ht);this._addMessage({role:a,tool_call_id:mt,content:Et});continue}const ct=await dt.function(ut,this),_t=__classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,ct);if(this._addMessage({role:a,tool_call_id:mt,content:_t}),g)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function(){return __classPrivateFieldGet$2(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function(){let e=this.messages.length;for(;e-- >0;){const s=this.messages[e];if(isAssistantMessage(s)){const{function_call:o,...a}=s,c={...a,content:s.content??null,refusal:s.refusal??null};return o&&(c.function_call=o),c}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionCall=function(){var e,s;for(let o=this.messages.length-1;o>=0;o--){const a=this.messages[o];if(isAssistantMessage(a)&&(a!=null&&a.function_call))return a.function_call;if(isAssistantMessage(a)&&((e=a==null?void 0:a.tool_calls)!=null&&e.length))return(s=a.tool_calls.at(-1))==null?void 0:s.function}},_AbstractChatCompletionRunner_getFinalFunctionCallResult=function(){for(let e=this.messages.length-1;e>=0;e--){const s=this.messages[e];if(isFunctionMessage(s)&&s.content!=null||isToolMessage(s)&&s.content!=null&&typeof s.content=="string"&&this.messages.some(o=>{var a;return o.role==="assistant"&&((a=o.tool_calls)==null?void 0:a.some(c=>c.type==="function"&&c.id===s.tool_call_id))}))return s.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:s}of this._chatCompletions)s&&(e.completion_tokens+=s.completion_tokens,e.prompt_tokens+=s.prompt_tokens,e.total_tokens+=s.total_tokens);return e},_AbstractChatCompletionRunner_validateParams=function(e){if(e.n!=null&&e.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runFunctions(e,s,o){const a=new ChatCompletionRunner,c={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,s,c)),a}static runTools(e,s,o){const a=new ChatCompletionRunner,c={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,s,c)),a}_addMessage(e,s=!0){super._addMessage(e,s),isAssistantMessage(e)&&e.content&&this._emit("content",e.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR,NUM,ARR,OBJ,NULL,BOOL,NAN,INFINITY,MINUS_INFINITY,INF,SPECIAL,ATOM,COLLECTION,ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(i,e=Allow.ALL){if(typeof i!="string")throw new TypeError(`expecting str, got ${typeof i}`);if(!i.trim())throw new Error(`${i} is empty`);return _parseJSON(i.trim(),e)}const _parseJSON=(i,e)=>{const s=i.length;let o=0;const a=et=>{throw new PartialJSON(`${et} at position ${o}`)},c=et=>{throw new MalformedJSON(`${et} at position ${o}`)},d=()=>(_(),o>=s&&a("Unexpected end of input"),i[o]==='"'?h():i[o]==="{"?g():i[o]==="["?j():i.substring(o,o+4)==="null"||Allow.NULL&e&&s-o<4&&"null".startsWith(i.substring(o))?(o+=4,null):i.substring(o,o+4)==="true"||Allow.BOOL&e&&s-o<4&&"true".startsWith(i.substring(o))?(o+=4,!0):i.substring(o,o+5)==="false"||Allow.BOOL&e&&s-o<5&&"false".startsWith(i.substring(o))?(o+=5,!1):i.substring(o,o+8)==="Infinity"||Allow.INFINITY&e&&s-o<8&&"Infinity".startsWith(i.substring(o))?(o+=8,1/0):i.substring(o,o+9)==="-Infinity"||Allow.MINUS_INFINITY&e&&1<s-o&&s-o<9&&"-Infinity".startsWith(i.substring(o))?(o+=9,-1/0):i.substring(o,o+3)==="NaN"||Allow.NAN&e&&s-o<3&&"NaN".startsWith(i.substring(o))?(o+=3,NaN):$()),h=()=>{const et=o;let tt=!1;for(o++;o<s&&(i[o]!=='"'||tt&&i[o-1]==="\\");)tt=i[o]==="\\"?!tt:!1,o++;if(i.charAt(o)=='"')try{return JSON.parse(i.substring(et,++o-Number(tt)))}catch(it){c(String(it))}else if(Allow.STR&e)try{return JSON.parse(i.substring(et,o-Number(tt))+'"')}catch{return JSON.parse(i.substring(et,i.lastIndexOf("\\"))+'"')}a("Unterminated string literal")},g=()=>{o++,_();const et={};try{for(;i[o]!=="}";){if(_(),o>=s&&Allow.OBJ&e)return et;const tt=h();_(),o++;try{const it=d();Object.defineProperty(et,tt,{value:it,writable:!0,enumerable:!0,configurable:!0})}catch(it){if(Allow.OBJ&e)return et;throw it}_(),i[o]===","&&o++}}catch{if(Allow.OBJ&e)return et;a("Expected '}' at end of object")}return o++,et},j=()=>{o++;const et=[];try{for(;i[o]!=="]";)et.push(d()),_(),i[o]===","&&o++}catch{if(Allow.ARR&e)return et;a("Expected ']' at end of array")}return o++,et},$=()=>{if(o===0){i==="-"&&Allow.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(i)}catch(tt){if(Allow.NUM&e)try{return i[i.length-1]==="."?JSON.parse(i.substring(0,i.lastIndexOf("."))):JSON.parse(i.substring(0,i.lastIndexOf("e")))}catch{}c(String(tt))}}const et=o;for(i[o]==="-"&&o++;i[o]&&!",]}".includes(i[o]);)o++;o==s&&!(Allow.NUM&e)&&a("Unterminated number literal");try{return JSON.parse(i.substring(et,o))}catch{i.substring(et,o)==="-"&&Allow.NUM&e&&a("Not sure what '-' is");try{return JSON.parse(i.substring(et,i.lastIndexOf("e")))}catch(it){c(String(it))}}},_=()=>{for(;o<s&&` 
\r	`.includes(i[o]);)o++};return d()},partialParse=i=>parseJSON(i,Allow.ALL^Allow.NUM);var __classPrivateFieldSet$1=function(i,e,s,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(i,s):a?a.value=s:e.set(i,s),s},__classPrivateFieldGet$1=function(i,e,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(i):o?o.value:e.get(i)},_ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(e){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet$1(this,_ChatCompletionStream_params,e,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f")}get currentChatCompletionSnapshot(){return __classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(e){const s=new ChatCompletionStream(null);return s._run(()=>s._fromReadableStream(e)),s}static createChatCompletion(e,s,o){const a=new ChatCompletionStream(s);return a._run(()=>a._runChatCompletion(e,{...s,stream:!0},{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}async _createChatCompletion(e,s,o){var d;super._createChatCompletion;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const c=await e.chat.completions.create({...s,stream:!0},{...o,signal:this.controller.signal});this._connected();for await(const h of c)__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,h);if((d=c.controller.signal)!=null&&d.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(e,s){var d;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const a=Stream.fromReadableStream(e,this.controller);let c;for await(const h of a)c&&c!==h.id&&this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,h),c=h.id;if((d=a.controller.signal)!=null&&d.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f")},_ChatCompletionStream_getChoiceEventState=function(s){let o=__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[s.index];return o||(o={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet$1(this,_ChatCompletionStream_choiceEventStates,"f")[s.index]=o,o)},_ChatCompletionStream_addChunk=function(s){var a,c,d,h,g,j,$,_,et,tt,it,ot,at,rt,st;if(this.ended)return;const o=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,s);this._emit("chunk",s,o);for(const lt of s.choices){const mt=o.choices[lt.index];lt.delta.content!=null&&((a=mt.message)==null?void 0:a.role)==="assistant"&&((c=mt.message)!=null&&c.content)&&(this._emit("content",lt.delta.content,mt.message.content),this._emit("content.delta",{delta:lt.delta.content,snapshot:mt.message.content,parsed:mt.message.parsed})),lt.delta.refusal!=null&&((d=mt.message)==null?void 0:d.role)==="assistant"&&((h=mt.message)!=null&&h.refusal)&&this._emit("refusal.delta",{delta:lt.delta.refusal,snapshot:mt.message.refusal}),((g=lt.logprobs)==null?void 0:g.content)!=null&&((j=mt.message)==null?void 0:j.role)==="assistant"&&this._emit("logprobs.content.delta",{content:($=lt.logprobs)==null?void 0:$.content,snapshot:((_=mt.logprobs)==null?void 0:_.content)??[]}),((et=lt.logprobs)==null?void 0:et.refusal)!=null&&((tt=mt.message)==null?void 0:tt.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(it=lt.logprobs)==null?void 0:it.refusal,snapshot:((ot=mt.logprobs)==null?void 0:ot.refusal)??[]});const ft=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,mt);mt.finish_reason&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,mt),ft.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,mt,ft.current_tool_call_index));for(const gt of lt.delta.tool_calls??[])ft.current_tool_call_index!==gt.index&&(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,mt),ft.current_tool_call_index!=null&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,mt,ft.current_tool_call_index)),ft.current_tool_call_index=gt.index;for(const gt of lt.delta.tool_calls??[]){const dt=(at=mt.message.tool_calls)==null?void 0:at[gt.index];dt!=null&&dt.type&&((dt==null?void 0:dt.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(rt=dt.function)==null?void 0:rt.name,index:gt.index,arguments:dt.function.arguments,parsed_arguments:dt.function.parsed_arguments,arguments_delta:((st=gt.function)==null?void 0:st.arguments)??""}):(dt==null||dt.type,void 0))}}},_ChatCompletionStream_emitToolCallDoneEvent=function(s,o){var d,h,g;if(__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,s).done_tool_calls.has(o))return;const c=(d=s.message.tool_calls)==null?void 0:d[o];if(!c)throw new Error("no tool call snapshot");if(!c.type)throw new Error("tool call snapshot missing `type`");if(c.type==="function"){const j=(g=(h=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:h.tools)==null?void 0:g.find($=>$.type==="function"&&$.function.name===c.function.name);this._emit("tool_calls.function.arguments.done",{name:c.function.name,index:o,arguments:c.function.arguments,parsed_arguments:isAutoParsableTool(j)?j.$parseRaw(c.function.arguments):j!=null&&j.function.strict?JSON.parse(c.function.arguments):null})}else c.type},_ChatCompletionStream_emitContentDoneEvents=function(s){var a,c;const o=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,s);if(s.message.content&&!o.content_done){o.content_done=!0;const d=__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:s.message.content,parsed:d?d.$parseRaw(s.message.content):null})}s.message.refusal&&!o.refusal_done&&(o.refusal_done=!0,this._emit("refusal.done",{refusal:s.message.refusal})),(a=s.logprobs)!=null&&a.content&&!o.logprobs_content_done&&(o.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:s.logprobs.content})),(c=s.logprobs)!=null&&c.refusal&&!o.logprobs_refusal_done&&(o.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:s.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const s=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!s)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0,"f"),__classPrivateFieldSet$1(this,_ChatCompletionStream_choiceEventStates,[],"f"),finalizeChatCompletion(s,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){var o;const s=(o=__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"))==null?void 0:o.response_format;return isAutoParsableResponseFormat(s)?s:null},_ChatCompletionStream_accumulateChatCompletion=function(s){var o,a,c,d;let h=__classPrivateFieldGet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:g,...j}=s;h?Object.assign(h,j):h=__classPrivateFieldSet$1(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...j,choices:[]},"f");for(const{delta:$,finish_reason:_,index:et,logprobs:tt=null,...it}of s.choices){let ot=h.choices[et];if(ot||(ot=h.choices[et]={finish_reason:_,index:et,message:{},logprobs:tt,...it}),tt)if(!ot.logprobs)ot.logprobs=Object.assign({},tt);else{const{content:gt,refusal:dt,...ut}=tt;Object.assign(ot.logprobs,ut),gt&&((o=ot.logprobs).content??(o.content=[]),ot.logprobs.content.push(...gt)),dt&&((a=ot.logprobs).refusal??(a.refusal=[]),ot.logprobs.refusal.push(...dt))}if(_&&(ot.finish_reason=_,__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f")))){if(_==="length")throw new LengthFinishReasonError;if(_==="content_filter")throw new ContentFilterFinishReasonError}if(Object.assign(ot,it),!$)continue;const{content:at,refusal:rt,function_call:st,role:lt,tool_calls:mt,...ft}=$;if(Object.assign(ot.message,ft),rt&&(ot.message.refusal=(ot.message.refusal||"")+rt),lt&&(ot.message.role=lt),st&&(ot.message.function_call?(st.name&&(ot.message.function_call.name=st.name),st.arguments&&((c=ot.message.function_call).arguments??(c.arguments=""),ot.message.function_call.arguments+=st.arguments)):ot.message.function_call=st),at&&(ot.message.content=(ot.message.content||"")+at,!ot.message.refusal&&__classPrivateFieldGet$1(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(ot.message.parsed=partialParse(ot.message.content))),mt){ot.message.tool_calls||(ot.message.tool_calls=[]);for(const{index:gt,id:dt,type:ut,function:ct,..._t}of mt){const ht=(d=ot.message.tool_calls)[gt]??(d[gt]={});Object.assign(ht,_t),dt&&(ht.id=dt),ut&&(ht.type=ut),ct&&(ht.function??(ht.function={name:ct.name??"",arguments:""})),ct!=null&&ct.name&&(ht.function.name=ct.name),ct!=null&&ct.arguments&&(ht.function.arguments+=ct.arguments,shouldParseToolCall(__classPrivateFieldGet$1(this,_ChatCompletionStream_params,"f"),ht)&&(ht.function.parsed_arguments=partialParse(ht.function.arguments)))}}}return h},Symbol.asyncIterator)](){const e=[],s=[];let o=!1;return this.on("chunk",a=>{const c=s.shift();c?c.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of s)a.resolve(void 0);s.length=0}),this.on("abort",a=>{o=!0;for(const c of s)c.reject(a);s.length=0}),this.on("error",a=>{o=!0;for(const c of s)c.reject(a);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((c,d)=>s.push({resolve:c,reject:d})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(i,e){const{id:s,choices:o,created:a,model:c,system_fingerprint:d,...h}=i,g={...h,id:s,choices:o.map(({message:j,finish_reason:$,index:_,logprobs:et,...tt})=>{if(!$)throw new OpenAIError(`missing finish_reason for choice ${_}`);const{content:it=null,function_call:ot,tool_calls:at,...rt}=j,st=j.role;if(!st)throw new OpenAIError(`missing role for choice ${_}`);if(ot){const{arguments:lt,name:mt}=ot;if(lt==null)throw new OpenAIError(`missing function_call.arguments for choice ${_}`);if(!mt)throw new OpenAIError(`missing function_call.name for choice ${_}`);return{...tt,message:{content:it,function_call:{arguments:lt,name:mt},role:st,refusal:j.refusal??null},finish_reason:$,index:_,logprobs:et}}return at?{...tt,index:_,finish_reason:$,logprobs:et,message:{...rt,role:st,content:it,refusal:j.refusal??null,tool_calls:at.map((lt,mt)=>{const{function:ft,type:gt,id:dt,...ut}=lt,{arguments:ct,name:_t,...ht}=ft||{};if(dt==null)throw new OpenAIError(`missing choices[${_}].tool_calls[${mt}].id
${str(i)}`);if(gt==null)throw new OpenAIError(`missing choices[${_}].tool_calls[${mt}].type
${str(i)}`);if(_t==null)throw new OpenAIError(`missing choices[${_}].tool_calls[${mt}].function.name
${str(i)}`);if(ct==null)throw new OpenAIError(`missing choices[${_}].tool_calls[${mt}].function.arguments
${str(i)}`);return{...ut,id:dt,type:gt,function:{...ht,name:_t,arguments:ct}}})}}:{...tt,message:{...rt,content:it,role:st,refusal:j.refusal??null},finish_reason:$,index:_,logprobs:et}}),created:a,model:c,object:"chat.completion",...d?{system_fingerprint:d}:{}};return maybeParseChatCompletion(g,e)}function str(i){return JSON.stringify(i)}function assertNever(i){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(e){const s=new ChatCompletionStreamingRunner(null);return s._run(()=>s._fromReadableStream(e)),s}static runFunctions(e,s,o){const a=new ChatCompletionStreamingRunner(null),c={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runFunctions"}};return a._run(()=>a._runFunctions(e,s,c)),a}static runTools(e,s,o){const a=new ChatCompletionStreamingRunner(s),c={...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"runTools"}};return a._run(()=>a._runTools(e,s,c)),a}}let Completions$1=class extends APIResource{parse(e,s){return validateInputTools(e.tools),this._client.chat.completions.create(e,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(o=>parseChatCompletion(o,e))}runFunctions(e,s){return e.stream?ChatCompletionStreamingRunner.runFunctions(this._client,e,s):ChatCompletionRunner.runFunctions(this._client,e,s)}runTools(e,s){return e.stream?ChatCompletionStreamingRunner.runTools(this._client,e,s):ChatCompletionRunner.runTools(this._client,e,s)}stream(e,s){return ChatCompletionStream.createChatCompletion(this._client,e,s)}};class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}(function(i){i.Completions=Completions$1})(Chat||(Chat={}));var __classPrivateFieldGet=function(i,e,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(i):o?o.value:e.get(i)},__classPrivateFieldSet=function(i,e,s,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(i,s):a?a.value=s:e.set(i,s),s},_AssistantStream_instances,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const e=[],s=[];let o=!1;return this.on("event",a=>{const c=s.shift();c?c.resolve(a):e.push(a)}),this.on("end",()=>{o=!0;for(const a of s)a.resolve(void 0);s.length=0}),this.on("abort",a=>{o=!0;for(const c of s)c.reject(a);s.length=0}),this.on("error",a=>{o=!0;for(const c of s)c.reject(a);s.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:o?{value:void 0,done:!0}:new Promise((c,d)=>s.push({resolve:c,reject:d})).then(c=>c?{value:c,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const s=new AssistantStream;return s._run(()=>s._fromReadableStream(e)),s}async _fromReadableStream(e,s){var c;const o=s==null?void 0:s.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),this._connected();const a=Stream.fromReadableStream(e,this.controller);for await(const d of a)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,d);if((c=a.controller.signal)!=null&&c.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,s,o,a,c){const d=new AssistantStream;return d._run(()=>d._runToolAssistantStream(e,s,o,a,{...c,headers:{...c==null?void 0:c.headers,"X-Stainless-Helper-Method":"stream"}})),d}async _createToolAssistantStream(e,s,o,a,c){var j;const d=c==null?void 0:c.signal;d&&(d.aborted&&this.controller.abort(),d.addEventListener("abort",()=>this.controller.abort()));const h={...a,stream:!0},g=await e.submitToolOutputs(s,o,h,{...c,signal:this.controller.signal});this._connected();for await(const $ of g)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,$);if((j=g.controller.signal)!=null&&j.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(e,s,o){const a=new AssistantStream;return a._run(()=>a._threadAssistantStream(e,s,{...o,headers:{...o==null?void 0:o.headers,"X-Stainless-Helper-Method":"stream"}})),a}static createAssistantStream(e,s,o,a){const c=new AssistantStream;return c._run(()=>c._runAssistantStream(e,s,o,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),c}currentEvent(){return __classPrivateFieldGet(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(e,s,o){var h;const a=o==null?void 0:o.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const c={...s,stream:!0},d=await e.createAndRun(c,{...o,signal:this.controller.signal});this._connected();for await(const g of d)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,g);if((h=d.controller.signal)!=null&&h.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(e,s,o,a){var g;const c=a==null?void 0:a.signal;c&&(c.aborted&&this.controller.abort(),c.addEventListener("abort",()=>this.controller.abort()));const d={...o,stream:!0},h=await e.create(s,d,{...a,signal:this.controller.signal});this._connected();for await(const j of h)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,j);if((g=h.controller.signal)!=null&&g.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(e,s){for(const[o,a]of Object.entries(s)){if(!e.hasOwnProperty(o)){e[o]=a;continue}let c=e[o];if(c==null){e[o]=a;continue}if(o==="index"||o==="type"){e[o]=a;continue}if(typeof c=="string"&&typeof a=="string")c+=a;else if(typeof c=="number"&&typeof a=="number")c+=a;else if(isObj(c)&&isObj(a))c=this.accumulateDelta(c,a);else if(Array.isArray(c)&&Array.isArray(a)){if(c.every(d=>typeof d=="string"||typeof d=="number")){c.push(...a);continue}for(const d of a){if(!isObj(d))throw new Error(`Expected array delta entry to be an object but got: ${d}`);const h=d.index;if(h==null)throw console.error(d),new Error("Expected array delta entry to have an `index` property");if(typeof h!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${h}`);const g=c[h];g==null?c.push(d):c[h]=this.accumulateDelta(g,d)}continue}else throw Error(`Unhandled record type: ${o}, deltaValue: ${a}, accValue: ${c}`);e[o]=c}return e}_addRun(e){return e}async _threadAssistantStream(e,s,o){return await this._createThreadAssistantStream(s,e,o)}async _runAssistantStream(e,s,o,a){return await this._createAssistantStream(s,e,o,a)}async _runToolAssistantStream(e,s,o,a,c){return await this._createToolAssistantStream(o,e,s,a,c)}}_AssistantStream_addEvent=function(e){if(!this.ended)switch(__classPrivateFieldSet(this,_AssistantStream_currentEvent,e,"f"),__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function(e){const[s,o]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,e,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,s,"f"),__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f")[s.id]=s;for(const a of o){const c=s.content[a.index];(c==null?void 0:c.type)=="text"&&this._emit("textCreated",c.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,s),e.data.delta.content)for(const a of e.data.delta.content){if(a.type=="text"&&a.text){let c=a.text,d=s.content[a.index];if(d&&d.type=="text")this._emit("textDelta",c,d.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(a.index!=__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break}__classPrivateFieldSet(this,_AssistantStream_currentContentIndex,a.index,"f")}__classPrivateFieldSet(this,_AssistantStream_currentContent,s.content[a.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")!==void 0){const a=e.data.content[__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")];if(a)switch(a.type){case"image_file":this._emit("imageFileDone",a.image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",a.text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break}}__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",e.data),__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,void 0,"f")}},_AssistantStream_handleRunStep=function(e){const s=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,e);switch(__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,s,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const o=e.data.delta;if(o.step_details&&o.step_details.type=="tool_calls"&&o.step_details.tool_calls&&s.step_details.type=="tool_calls")for(const c of o.step_details.tool_calls)c.index==__classPrivateFieldGet(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",c,s.step_details.tool_calls[c.index]):(__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCallIndex,c.index,"f"),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,s.step_details.tool_calls[c.index],"f"),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",e.data.delta,s);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,void 0,"f"),e.data.step_details.type=="tool_calls"&&__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0,"f")),this._emit("runStepDone",e.data,s);break}},_AssistantStream_handleEvent=function(e){__classPrivateFieldGet(this,_AssistantStream_events,"f").push(e),this._emit("event",e)},_AssistantStream_accumulateRunStep=function(e){switch(e.event){case"thread.run.step.created":return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let s=__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];if(!s)throw Error("Received a RunStepDelta before creation of a snapshot");let o=e.data;if(o.delta){const a=AssistantStream.accumulateDelta(s,o.delta);__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=a}return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=e.data;break}if(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id])return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function(e,s){let o=[];switch(e.event){case"thread.message.created":return[e.data,o];case"thread.message.delta":if(!s)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let a=e.data;if(a.delta.content)for(const c of a.delta.content)if(c.index in s.content){let d=s.content[c.index];s.content[c.index]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,c,d)}else s.content[c.index]=c,o.push(c);return[s,o];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(s)return[s,o];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function(e,s){return AssistantStream.accumulateDelta(s,e)},_AssistantStream_handleRun=function(e){switch(__classPrivateFieldSet(this,_AssistantStream_currentRunSnapshot,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":__classPrivateFieldSet(this,_AssistantStream_finalRun,e.data,"f"),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0,"f"));break}};class Messages extends APIResource{create(e,s,o){return this._client.post(`/threads/${e}/messages`,{body:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(e,s,o){return this._client.get(`/threads/${e}/messages/${s}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}update(e,s,o,a){return this._client.post(`/threads/${e}/messages/${s}`,{body:o,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,s={},o){return isRequestOptions(s)?this.list(e,{},s):this._client.getAPIList(`/threads/${e}/messages`,MessagesPage,{query:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(e,s,o){return this._client.delete(`/threads/${e}/messages/${s}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}}class MessagesPage extends CursorPage{}(function(i){i.MessagesPage=MessagesPage})(Messages||(Messages={}));class Steps extends APIResource{retrieve(e,s,o,a={},c){return isRequestOptions(a)?this.retrieve(e,s,o,{},a):this._client.get(`/threads/${e}/runs/${s}/steps/${o}`,{query:a,...c,headers:{"OpenAI-Beta":"assistants=v2",...c==null?void 0:c.headers}})}list(e,s,o={},a){return isRequestOptions(o)?this.list(e,s,{},o):this._client.getAPIList(`/threads/${e}/runs/${s}/steps`,RunStepsPage,{query:o,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}}class RunStepsPage extends CursorPage{}(function(i){i.RunStepsPage=RunStepsPage})(Steps||(Steps={}));class Runs extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(e,s,o){const{include:a,...c}=s;return this._client.post(`/threads/${e}/runs`,{query:{include:a},body:c,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers},stream:s.stream??!1})}retrieve(e,s,o){return this._client.get(`/threads/${e}/runs/${s}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}update(e,s,o,a){return this._client.post(`/threads/${e}/runs/${s}`,{body:o,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,s={},o){return isRequestOptions(s)?this.list(e,{},s):this._client.getAPIList(`/threads/${e}/runs`,RunsPage,{query:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}cancel(e,s,o){return this._client.post(`/threads/${e}/runs/${s}/cancel`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(e,s,o){const a=await this.create(e,s,o);return await this.poll(e,a.id,o)}createAndStream(e,s,o){return AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,s,o)}async poll(e,s,o){const a={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const{data:c,response:d}=await this.retrieve(e,s,{...o,headers:{...o==null?void 0:o.headers,...a}}).withResponse();switch(c.status){case"queued":case"in_progress":case"cancelling":let h=5e3;if(o!=null&&o.pollIntervalMs)h=o.pollIntervalMs;else{const g=d.headers.get("openai-poll-after-ms");if(g){const j=parseInt(g);isNaN(j)||(h=j)}}await sleep(h);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return c}}}stream(e,s,o){return AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,s,o)}submitToolOutputs(e,s,o,a){return this._client.post(`/threads/${e}/runs/${s}/submit_tool_outputs`,{body:o,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers},stream:o.stream??!1})}async submitToolOutputsAndPoll(e,s,o,a){const c=await this.submitToolOutputs(e,s,o,a);return await this.poll(e,c.id,a)}submitToolOutputsStream(e,s,o,a){return AssistantStream.createToolAssistantStream(e,s,this._client.beta.threads.runs,o,a)}}class RunsPage extends CursorPage{}(function(i){i.RunsPage=RunsPage,i.Steps=Steps,i.RunStepsPage=RunStepsPage})(Runs||(Runs={}));class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client),this.messages=new Messages(this._client)}create(e={},s){return isRequestOptions(e)?this.create({},e):this._client.post("/threads",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/threads/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,o){return this._client.post(`/threads/${e}`,{body:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(e,s){return this._client.delete(`/threads/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}createAndRun(e,s){return this._client.post("/threads/runs",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:e.stream??!1})}async createAndRunPoll(e,s){const o=await this.createAndRun(e,s);return await this.runs.poll(o.thread_id,o.id,s)}createAndRunStream(e,s){return AssistantStream.createThreadAssistantStream(e,this._client.beta.threads,s)}}(function(i){i.Runs=Runs,i.RunsPage=RunsPage,i.Messages=Messages,i.MessagesPage=MessagesPage})(Threads||(Threads={}));const allSettledWithThrow=async i=>{const e=await Promise.allSettled(i),s=e.filter(a=>a.status==="rejected");if(s.length){for(const a of s)console.error(a.reason);throw new Error(`${s.length} promise(s) failed - see the above errors`)}const o=[];for(const a of e)a.status==="fulfilled"&&o.push(a.value);return o};let Files$1=class extends APIResource{create(e,s,o){return this._client.post(`/vector_stores/${e}/files`,{body:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(e,s,o){return this._client.get(`/vector_stores/${e}/files/${s}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e,s={},o){return isRequestOptions(s)?this.list(e,{},s):this._client.getAPIList(`/vector_stores/${e}/files`,VectorStoreFilesPage,{query:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}del(e,s,o){return this._client.delete(`/vector_stores/${e}/files/${s}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(e,s,o){const a=await this.create(e,s,o);return await this.poll(e,a.id,o)}async poll(e,s,o){const a={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const c=await this.retrieve(e,s,{...o,headers:a}).withResponse(),d=c.data;switch(d.status){case"in_progress":let h=5e3;if(o!=null&&o.pollIntervalMs)h=o.pollIntervalMs;else{const g=c.response.headers.get("openai-poll-after-ms");if(g){const j=parseInt(g);isNaN(j)||(h=j)}}await sleep(h);break;case"failed":case"completed":return d}}}async upload(e,s,o){const a=await this._client.files.create({file:s,purpose:"assistants"},o);return this.create(e,{file_id:a.id},o)}async uploadAndPoll(e,s,o){const a=await this.upload(e,s,o);return await this.poll(e,a.id,o)}};class VectorStoreFilesPage extends CursorPage{}(function(i){i.VectorStoreFilesPage=VectorStoreFilesPage})(Files$1||(Files$1={}));class FileBatches extends APIResource{create(e,s,o){return this._client.post(`/vector_stores/${e}/file_batches`,{body:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}retrieve(e,s,o){return this._client.get(`/vector_stores/${e}/file_batches/${s}`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}cancel(e,s,o){return this._client.post(`/vector_stores/${e}/file_batches/${s}/cancel`,{...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}async createAndPoll(e,s,o){const a=await this.create(e,s);return await this.poll(e,a.id,o)}listFiles(e,s,o={},a){return isRequestOptions(o)?this.listFiles(e,s,{},o):this._client.getAPIList(`/vector_stores/${e}/file_batches/${s}/files`,VectorStoreFilesPage,{query:o,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}async poll(e,s,o){const a={...o==null?void 0:o.headers,"X-Stainless-Poll-Helper":"true"};for(o!=null&&o.pollIntervalMs&&(a["X-Stainless-Custom-Poll-Interval"]=o.pollIntervalMs.toString());;){const{data:c,response:d}=await this.retrieve(e,s,{...o,headers:a}).withResponse();switch(c.status){case"in_progress":let h=5e3;if(o!=null&&o.pollIntervalMs)h=o.pollIntervalMs;else{const g=d.headers.get("openai-poll-after-ms");if(g){const j=parseInt(g);isNaN(j)||(h=j)}}await sleep(h);break;case"failed":case"cancelled":case"completed":return c}}}async uploadAndPoll(e,{files:s,fileIds:o=[]},a){if(s==null||s.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const c=(a==null?void 0:a.maxConcurrency)??5,d=Math.min(c,s.length),h=this._client,g=s.values(),j=[...o];async function $(et){for(let tt of et){const it=await h.files.create({file:tt,purpose:"assistants"},a);j.push(it.id)}}const _=Array(d).fill(g).map($);return await allSettledWithThrow(_),await this.createAndPoll(e,{file_ids:j})}}FileBatches||(FileBatches={});class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files$1(this._client),this.fileBatches=new FileBatches(this._client)}create(e,s){return this._client.post("/vector_stores",{body:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}retrieve(e,s){return this._client.get(`/vector_stores/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}update(e,s,o){return this._client.post(`/vector_stores/${e}`,{body:s,...o,headers:{"OpenAI-Beta":"assistants=v2",...o==null?void 0:o.headers}})}list(e={},s){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/vector_stores",VectorStoresPage,{query:e,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}del(e,s){return this._client.delete(`/vector_stores/${e}`,{...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class VectorStoresPage extends CursorPage{}(function(i){i.VectorStoresPage=VectorStoresPage,i.Files=Files$1,i.VectorStoreFilesPage=VectorStoreFilesPage,i.FileBatches=FileBatches})(VectorStores||(VectorStores={}));class Beta extends APIResource{constructor(){super(...arguments),this.vectorStores=new VectorStores(this._client),this.chat=new Chat(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}(function(i){i.VectorStores=VectorStores,i.VectorStoresPage=VectorStoresPage,i.Chat=Chat,i.Assistants=Assistants,i.AssistantsPage=AssistantsPage,i.Threads=Threads})(Beta||(Beta={}));class Completions extends APIResource{create(e,s){return this._client.post("/completions",{body:e,...s,stream:e.stream??!1})}}Completions||(Completions={});class Embeddings extends APIResource{create(e,s){return this._client.post("/embeddings",{body:e,...s})}}Embeddings||(Embeddings={});class Files extends APIResource{create(e,s){return this._client.post("/files",multipartFormRequestOptions({body:e,...s}))}retrieve(e,s){return this._client.get(`/files/${e}`,s)}list(e={},s){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/files",FileObjectsPage,{query:e,...s})}del(e,s){return this._client.delete(`/files/${e}`,s)}content(e,s){return this._client.get(`/files/${e}/content`,{...s,__binaryResponse:!0})}retrieveContent(e,s){return this._client.get(`/files/${e}/content`,{...s,headers:{Accept:"application/json",...s==null?void 0:s.headers}})}async waitForProcessing(e,{pollInterval:s=5e3,maxWait:o=30*60*1e3}={}){const a=new Set(["processed","error","deleted"]),c=Date.now();let d=await this.retrieve(e);for(;!d.status||!a.has(d.status);)if(await sleep(s),d=await this.retrieve(e),Date.now()-c>o)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${e} to finish processing after ${o} milliseconds.`});return d}}class FileObjectsPage extends Page$1{}(function(i){i.FileObjectsPage=FileObjectsPage})(Files||(Files={}));class Checkpoints extends APIResource{list(e,s={},o){return isRequestOptions(s)?this.list(e,{},s):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,FineTuningJobCheckpointsPage,{query:s,...o})}}class FineTuningJobCheckpointsPage extends CursorPage{}(function(i){i.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage})(Checkpoints||(Checkpoints={}));class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(e,s){return this._client.post("/fine_tuning/jobs",{body:e,...s})}retrieve(e,s){return this._client.get(`/fine_tuning/jobs/${e}`,s)}list(e={},s){return isRequestOptions(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",FineTuningJobsPage,{query:e,...s})}cancel(e,s){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,s)}listEvents(e,s={},o){return isRequestOptions(s)?this.listEvents(e,{},s):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,FineTuningJobEventsPage,{query:s,...o})}}class FineTuningJobsPage extends CursorPage{}class FineTuningJobEventsPage extends CursorPage{}(function(i){i.FineTuningJobsPage=FineTuningJobsPage,i.FineTuningJobEventsPage=FineTuningJobEventsPage,i.Checkpoints=Checkpoints,i.FineTuningJobCheckpointsPage=FineTuningJobCheckpointsPage})(Jobs||(Jobs={}));class FineTuning extends APIResource{constructor(){super(...arguments),this.jobs=new Jobs(this._client)}}(function(i){i.Jobs=Jobs,i.FineTuningJobsPage=FineTuningJobsPage,i.FineTuningJobEventsPage=FineTuningJobEventsPage})(FineTuning||(FineTuning={}));class Images extends APIResource{createVariation(e,s){return this._client.post("/images/variations",multipartFormRequestOptions({body:e,...s}))}edit(e,s){return this._client.post("/images/edits",multipartFormRequestOptions({body:e,...s}))}generate(e,s){return this._client.post("/images/generations",{body:e,...s})}}Images||(Images={});class Models extends APIResource{retrieve(e,s){return this._client.get(`/models/${e}`,s)}list(e){return this._client.getAPIList("/models",ModelsPage,e)}del(e,s){return this._client.delete(`/models/${e}`,s)}}class ModelsPage extends Page$1{}(function(i){i.ModelsPage=ModelsPage})(Models||(Models={}));class Moderations extends APIResource{create(e,s){return this._client.post("/moderations",{body:e,...s})}}Moderations||(Moderations={});class Parts extends APIResource{create(e,s,o){return this._client.post(`/uploads/${e}/parts`,multipartFormRequestOptions({body:s,...o}))}}Parts||(Parts={});class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(e,s){return this._client.post("/uploads",{body:e,...s})}cancel(e,s){return this._client.post(`/uploads/${e}/cancel`,s)}complete(e,s,o){return this._client.post(`/uploads/${e}/complete`,{body:s,...o})}}(function(i){i.Parts=Parts})(Uploads||(Uploads={}));var _a;class OpenAI extends APIClient{constructor({baseURL:e=readEnv("OPENAI_BASE_URL"),apiKey:s=readEnv("OPENAI_API_KEY"),organization:o=readEnv("OPENAI_ORG_ID")??null,project:a=readEnv("OPENAI_PROJECT_ID")??null,...c}={}){if(s===void 0)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const d={apiKey:s,organization:o,project:a,...c,baseURL:e||"https://api.openai.com/v1"};if(!d.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:d.baseURL,timeout:d.timeout??6e5,httpAgent:d.httpAgent,maxRetries:d.maxRetries,fetch:d.fetch}),this.completions=new Completions(this),this.chat=new Chat$1(this),this.embeddings=new Embeddings(this),this.files=new Files(this),this.images=new Images(this),this.audio=new Audio$1(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this._options=d,this.apiKey=s,this.organization=o,this.project=a}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return stringify(e,{arrayFormat:"brackets"})}}_a=OpenAI;OpenAI.OpenAI=_a;OpenAI.DEFAULT_TIMEOUT=6e5;OpenAI.OpenAIError=OpenAIError;OpenAI.APIError=APIError;OpenAI.APIConnectionError=APIConnectionError;OpenAI.APIConnectionTimeoutError=APIConnectionTimeoutError;OpenAI.APIUserAbortError=APIUserAbortError;OpenAI.NotFoundError=NotFoundError;OpenAI.ConflictError=ConflictError;OpenAI.RateLimitError=RateLimitError;OpenAI.BadRequestError=BadRequestError;OpenAI.AuthenticationError=AuthenticationError;OpenAI.InternalServerError=InternalServerError;OpenAI.PermissionDeniedError=PermissionDeniedError;OpenAI.UnprocessableEntityError=UnprocessableEntityError;OpenAI.toFile=toFile;OpenAI.fileFromPath=fileFromPath;(function(i){i.Page=Page$1,i.CursorPage=CursorPage,i.Completions=Completions,i.Chat=Chat$1,i.Embeddings=Embeddings,i.Files=Files,i.FileObjectsPage=FileObjectsPage,i.Images=Images,i.Audio=Audio$1,i.Moderations=Moderations,i.Models=Models,i.ModelsPage=ModelsPage,i.FineTuning=FineTuning,i.Beta=Beta,i.Batches=Batches,i.BatchesPage=BatchesPage,i.Uploads=Uploads})(OpenAI||(OpenAI={}));function useAuth(){const[i,e]=reactExports.useState(null),[s,o]=reactExports.useState(!0);return reactExports.useEffect(()=>{const a=onAuthStateChanged(auth,c=>{e(c),o(!1)});return()=>a()},[]),{user:i,loading:s}}const placeholders=["What subject do you need help with?","Type your question here...","Need help solving a problem?","Stuck on homework? Let me help!","What would you like to learn today?"],HomeworkHelp=()=>{const[i,e]=reactExports.useState([]),[s,o]=reactExports.useState(""),[a,c]=reactExports.useState(!1),[d,h]=reactExports.useState(null),[g,j]=reactExports.useState(0),$=reactExports.useRef(null),{user:_}=useAuth(),et=new OpenAI({apiKey:"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",dangerouslyAllowBrowser:!0});reactExports.useEffect(()=>{const ot=setInterval(()=>{j(at=>(at+1)%placeholders.length)},3e3);return()=>clearInterval(ot)},[]),reactExports.useEffect(()=>{(async()=>{if(_){const at=await getDoc(doc(db,"users",_.uid));at.exists()&&h({firstName:at.data().firstName,grade:at.data().grade})}})()},[_]);const tt=()=>{var ot;(ot=$.current)==null||ot.scrollIntoView({behavior:"smooth"})};reactExports.useEffect(()=>{tt()},[i]);const it=async ot=>{var rt,st;if(ot.preventDefault(),!s.trim()||a)return;const at=s.trim();o(""),e(lt=>[...lt,{role:"user",content:at}]),c(!0);try{const mt=((st=(rt=(await et.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:`You are a helpful educational assistant. The student's name is ${(d==null?void 0:d.firstName)||"there"} and they are in Grade 8. Provide clear, age-appropriate explanations and guide them through problem-solving steps. Address them by name occasionally to make the interaction more personal.`},...i.map(ft=>({role:ft.role,content:ft.content})),{role:"user",content:at}],temperature:.7,max_tokens:500})).choices[0])==null?void 0:rt.message)==null?void 0:st.content)||"Sorry, I could not process your request.";e(ft=>[...ft,{role:"assistant",content:mt}])}catch(lt){console.error("Error:",lt),e(mt=>[...mt,{role:"assistant",content:"Sorry, I encountered an error. Please try again later."}])}finally{c(!1)}};return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:`overflow-y-auto transition-all duration-300 ease-in-out ${i.length>0?"h-[300px] mb-4":"h-0"}`,children:[i.map((ot,at)=>jsxRuntimeExports.jsx(ChatMessage,{...ot},at)),jsxRuntimeExports.jsx("div",{ref:$})]}),jsxRuntimeExports.jsxs("form",{onSubmit:it,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:s,onChange:ot=>o(ot.target.value),placeholder:placeholders[g],className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:a}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:a,className:"p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-colors disabled:bg-gray-400",children:a?jsxRuntimeExports.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[jsxRuntimeExports.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),jsxRuntimeExports.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})})]})]})},Notification=({message:i})=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-20 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-full shadow-lg z-50",children:i}),AccountMenu=()=>{const[i,e]=reactExports.useState(!1),s=reactExports.useRef(null),{user:o}=useAuth(),a=useNavigate();reactExports.useEffect(()=>{const d=h=>{s.current&&!s.current.contains(h.target)&&e(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const c=async()=>{try{await signOut(auth),a("/signin")}catch(d){console.error("Logout error:",d)}};return o?jsxRuntimeExports.jsxs("div",{className:"relative",ref:s,children:[jsxRuntimeExports.jsx("button",{onClick:()=>e(!i),className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center hover:bg-gray-300 transition-colors","aria-label":"Account menu",children:o.photoURL?jsxRuntimeExports.jsx("img",{src:o.photoURL,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):jsxRuntimeExports.jsx("span",{className:"text-xl",children:""})}),i&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-50",children:[jsxRuntimeExports.jsx(Link,{to:"/profile",className:"block px-4 py-2 text-gray-800 hover:bg-gray-100 transition-colors",onClick:()=>e(!1),children:"Profile Settings"}),jsxRuntimeExports.jsx("button",{onClick:c,className:"w-full text-left px-4 py-2 text-red-600 hover:bg-gray-100 transition-colors",children:"Sign Out"})]})]}):jsxRuntimeExports.jsx(Link,{to:"/signin",className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Sign In"})},Home=()=>{const[i,e]=reactExports.useState(!1),[s,o]=reactExports.useState(!1),[a,c]=reactExports.useState(""),d=reactExports.useRef(null),h=()=>{c("No new notifications"),o(!0),setTimeout(()=>o(!1),3e3)},g=()=>{c("Still cooking! Check back soon."),o(!0),setTimeout(()=>o(!1),3e3)};return jsxRuntimeExports.jsx("div",{className:"bg-gray-100 min-h-screen",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-lg overflow-hidden shadow-lg",children:[jsxRuntimeExports.jsxs("header",{className:"bg-gray-900 text-white p-4 flex items-center justify-between",children:[jsxRuntimeExports.jsx("div",{className:"flex items-center",children:jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold",children:[jsxRuntimeExports.jsx("span",{className:"text-white",children:"KITABU"}),jsxRuntimeExports.jsx("span",{className:"text-green-500",children:".AI"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("div",{className:"relative",ref:d,children:jsxRuntimeExports.jsx("button",{onClick:()=>e(!i),className:"bg-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-600 transition-colors",children:"GRADE 8"})}),jsxRuntimeExports.jsx("button",{className:"text-white hover:text-gray-300 transition-colors",onClick:h,children:""}),jsxRuntimeExports.jsx(AccountMenu,{})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx("img",{src:"/carousel-1.png",alt:"Homework is Easy and Fun with Kitabu AI",className:"w-full h-auto rounded-lg",loading:"eager",onError:j=>{const $=j.target;$.onerror=null,$.src="https://raw.githubusercontent.com/samora254/Kitabu/main/carousel-1.png"}})}),jsxRuntimeExports.jsxs("div",{className:"p-4 grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs(Link,{to:"/e-books",className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"E-Books"})]}),jsxRuntimeExports.jsxs(Link,{to:"/audio-books",className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Audio Books"})]}),jsxRuntimeExports.jsxs(Link,{to:"/revision-papers",className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Revision Papers"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Link,{to:"/subject/mathematics",className:"bg-red-400 text-white p-4 rounded-lg hover:bg-red-500 transition-colors",children:"Mathematics"}),jsxRuntimeExports.jsx(Link,{to:"/subject/english",className:"bg-green-400 text-white p-4 rounded-lg hover:bg-green-500 transition-colors",children:"English"}),jsxRuntimeExports.jsx(Link,{to:"/subject/kiswahili",className:"bg-blue-400 text-white p-4 rounded-lg hover:bg-blue-500 transition-colors",children:"Kiswahili"}),jsxRuntimeExports.jsx(Link,{to:"/subject/science",className:"bg-orange-700 text-white p-4 rounded-lg hover:bg-orange-800 transition-colors",children:"Science"}),jsxRuntimeExports.jsx(Link,{to:"/subject/social",className:"bg-yellow-500 text-white p-4 rounded-lg hover:bg-yellow-600 transition-colors",children:"Social"}),jsxRuntimeExports.jsxs("button",{onClick:g,className:"bg-gray-800 text-white p-4 rounded-lg flex items-center justify-center hover:bg-gray-900 transition-colors",children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:""}),"PLAY QUIZ MANIA"]})]}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx(HomeworkHelp,{})}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsx(Notification,{message:a})})]})})};function isObject$2(i){return i!==null&&typeof i=="object"&&"constructor"in i&&i.constructor===Object}function extend$2(i,e){i===void 0&&(i={}),e===void 0&&(e={}),Object.keys(e).forEach(s=>{typeof i[s]>"u"?i[s]=e[s]:isObject$2(e[s])&&isObject$2(i[s])&&Object.keys(e[s]).length>0&&extend$2(i[s],e[s])})}const ssrDocument={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function getDocument(){const i=typeof document<"u"?document:{};return extend$2(i,ssrDocument),i}const ssrWindow={document:ssrDocument,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(i){return typeof setTimeout>"u"?(i(),null):setTimeout(i,0)},cancelAnimationFrame(i){typeof setTimeout>"u"||clearTimeout(i)}};function getWindow(){const i=typeof window<"u"?window:{};return extend$2(i,ssrWindow),i}function classesToTokens(i){return i===void 0&&(i=""),i.trim().split(" ").filter(e=>!!e.trim())}function deleteProps(i){const e=i;Object.keys(e).forEach(s=>{try{e[s]=null}catch{}try{delete e[s]}catch{}})}function nextTick(i,e){return e===void 0&&(e=0),setTimeout(i,e)}function now(){return Date.now()}function getComputedStyle$1(i){const e=getWindow();let s;return e.getComputedStyle&&(s=e.getComputedStyle(i,null)),!s&&i.currentStyle&&(s=i.currentStyle),s||(s=i.style),s}function getTranslate(i,e){e===void 0&&(e="x");const s=getWindow();let o,a,c;const d=getComputedStyle$1(i);return s.WebKitCSSMatrix?(a=d.transform||d.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map(h=>h.replace(",",".")).join(", ")),c=new s.WebKitCSSMatrix(a==="none"?"":a)):(c=d.MozTransform||d.OTransform||d.MsTransform||d.msTransform||d.transform||d.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),o=c.toString().split(",")),e==="x"&&(s.WebKitCSSMatrix?a=c.m41:o.length===16?a=parseFloat(o[12]):a=parseFloat(o[4])),e==="y"&&(s.WebKitCSSMatrix?a=c.m42:o.length===16?a=parseFloat(o[13]):a=parseFloat(o[5])),a||0}function isObject$1(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"}function isNode(i){return typeof window<"u"&&typeof window.HTMLElement<"u"?i instanceof HTMLElement:i&&(i.nodeType===1||i.nodeType===11)}function extend$1(){const i=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let s=1;s<arguments.length;s+=1){const o=s<0||arguments.length<=s?void 0:arguments[s];if(o!=null&&!isNode(o)){const a=Object.keys(Object(o)).filter(c=>e.indexOf(c)<0);for(let c=0,d=a.length;c<d;c+=1){const h=a[c],g=Object.getOwnPropertyDescriptor(o,h);g!==void 0&&g.enumerable&&(isObject$1(i[h])&&isObject$1(o[h])?o[h].__swiper__?i[h]=o[h]:extend$1(i[h],o[h]):!isObject$1(i[h])&&isObject$1(o[h])?(i[h]={},o[h].__swiper__?i[h]=o[h]:extend$1(i[h],o[h])):i[h]=o[h])}}}return i}function setCSSProperty(i,e,s){i.style.setProperty(e,s)}function animateCSSModeScroll(i){let{swiper:e,targetPosition:s,side:o}=i;const a=getWindow(),c=-e.translate;let d=null,h;const g=e.params.speed;e.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(e.cssModeFrameID);const j=s>c?"next":"prev",$=(et,tt)=>j==="next"&&et>=tt||j==="prev"&&et<=tt,_=()=>{h=new Date().getTime(),d===null&&(d=h);const et=Math.max(Math.min((h-d)/g,1),0),tt=.5-Math.cos(et*Math.PI)/2;let it=c+tt*(s-c);if($(it,s)&&(it=s),e.wrapperEl.scrollTo({[o]:it}),$(it,s)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[o]:it})}),a.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=a.requestAnimationFrame(_)};_()}function getSlideTransformEl(i){return i.querySelector(".swiper-slide-transform")||i.shadowRoot&&i.shadowRoot.querySelector(".swiper-slide-transform")||i}function elementChildren(i,e){e===void 0&&(e="");const s=[...i.children];return i instanceof HTMLSlotElement&&s.push(...i.assignedElements()),e?s.filter(o=>o.matches(e)):s}function elementIsChildOf(i,e){const s=e.contains(i);return!s&&e instanceof HTMLSlotElement?[...e.assignedElements()].includes(i):s}function showWarning(i){try{console.warn(i);return}catch{}}function createElement(i,e){e===void 0&&(e=[]);const s=document.createElement(i);return s.classList.add(...Array.isArray(e)?e:classesToTokens(e)),s}function elementPrevAll(i,e){const s=[];for(;i.previousElementSibling;){const o=i.previousElementSibling;e?o.matches(e)&&s.push(o):s.push(o),i=o}return s}function elementNextAll(i,e){const s=[];for(;i.nextElementSibling;){const o=i.nextElementSibling;e?o.matches(e)&&s.push(o):s.push(o),i=o}return s}function elementStyle(i,e){return getWindow().getComputedStyle(i,null).getPropertyValue(e)}function elementIndex(i){let e=i,s;if(e){for(s=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(s+=1);return s}}function elementParents(i,e){const s=[];let o=i.parentElement;for(;o;)e?o.matches(e)&&s.push(o):s.push(o),o=o.parentElement;return s}function elementTransitionEnd(i,e){function s(o){o.target===i&&(e.call(i,o),i.removeEventListener("transitionend",s))}e&&i.addEventListener("transitionend",s)}function elementOuterSize(i,e,s){const o=getWindow();return i[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(o.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(o.getComputedStyle(i,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function makeElementsArray(i){return(Array.isArray(i)?i:[i]).filter(e=>!!e)}let support;function calcSupport(){const i=getWindow(),e=getDocument();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in i||i.DocumentTouch&&e instanceof i.DocumentTouch)}}function getSupport(){return support||(support=calcSupport()),support}let deviceCached;function calcDevice(i){let{userAgent:e}=i===void 0?{}:i;const s=getSupport(),o=getWindow(),a=o.navigator.platform,c=e||o.navigator.userAgent,d={ios:!1,android:!1},h=o.screen.width,g=o.screen.height,j=c.match(/(Android);?[\s\/]+([\d.]+)?/);let $=c.match(/(iPad).*OS\s([\d_]+)/);const _=c.match(/(iPod)(.*OS\s([\d_]+))?/),et=!$&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/),tt=a==="Win32";let it=a==="MacIntel";const ot=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!$&&it&&s.touch&&ot.indexOf(`${h}x${g}`)>=0&&($=c.match(/(Version)\/([\d.]+)/),$||($=[0,1,"13_0_0"]),it=!1),j&&!tt&&(d.os="android",d.android=!0),($||et||_)&&(d.os="ios",d.ios=!0),d}function getDevice(i){return i===void 0&&(i={}),deviceCached||(deviceCached=calcDevice(i)),deviceCached}let browser$1;function calcBrowser(){const i=getWindow(),e=getDevice();let s=!1;function o(){const h=i.navigator.userAgent.toLowerCase();return h.indexOf("safari")>=0&&h.indexOf("chrome")<0&&h.indexOf("android")<0}if(o()){const h=String(i.navigator.userAgent);if(h.includes("Version/")){const[g,j]=h.split("Version/")[1].split(" ")[0].split(".").map($=>Number($));s=g<16||g===16&&j<2}}const a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(i.navigator.userAgent),c=o(),d=c||a&&e.ios;return{isSafari:s||c,needPerspectiveFix:s,need3dFix:d,isWebView:a}}function getBrowser(){return browser$1||(browser$1=calcBrowser()),browser$1}function Resize(i){let{swiper:e,on:s,emit:o}=i;const a=getWindow();let c=null,d=null;const h=()=>{!e||e.destroyed||!e.initialized||(o("beforeResize"),o("resize"))},g=()=>{!e||e.destroyed||!e.initialized||(c=new ResizeObserver(_=>{d=a.requestAnimationFrame(()=>{const{width:et,height:tt}=e;let it=et,ot=tt;_.forEach(at=>{let{contentBoxSize:rt,contentRect:st,target:lt}=at;lt&&lt!==e.el||(it=st?st.width:(rt[0]||rt).inlineSize,ot=st?st.height:(rt[0]||rt).blockSize)}),(it!==et||ot!==tt)&&h()})}),c.observe(e.el))},j=()=>{d&&a.cancelAnimationFrame(d),c&&c.unobserve&&e.el&&(c.unobserve(e.el),c=null)},$=()=>{!e||e.destroyed||!e.initialized||o("orientationchange")};s("init",()=>{if(e.params.resizeObserver&&typeof a.ResizeObserver<"u"){g();return}a.addEventListener("resize",h),a.addEventListener("orientationchange",$)}),s("destroy",()=>{j(),a.removeEventListener("resize",h),a.removeEventListener("orientationchange",$)})}function Observer(i){let{swiper:e,extendParams:s,on:o,emit:a}=i;const c=[],d=getWindow(),h=function($,_){_===void 0&&(_={});const et=d.MutationObserver||d.WebkitMutationObserver,tt=new et(it=>{if(e.__preventObserver__)return;if(it.length===1){a("observerUpdate",it[0]);return}const ot=function(){a("observerUpdate",it[0])};d.requestAnimationFrame?d.requestAnimationFrame(ot):d.setTimeout(ot,0)});tt.observe($,{attributes:typeof _.attributes>"u"?!0:_.attributes,childList:e.isElement||(typeof _.childList>"u"?!0:_).childList,characterData:typeof _.characterData>"u"?!0:_.characterData}),c.push(tt)},g=()=>{if(e.params.observer){if(e.params.observeParents){const $=elementParents(e.hostEl);for(let _=0;_<$.length;_+=1)h($[_])}h(e.hostEl,{childList:e.params.observeSlideChildren}),h(e.wrapperEl,{attributes:!1})}},j=()=>{c.forEach($=>{$.disconnect()}),c.splice(0,c.length)};s({observer:!1,observeParents:!1,observeSlideChildren:!1}),o("init",g),o("destroy",j)}var eventsEmitter={on(i,e,s){const o=this;if(!o.eventsListeners||o.destroyed||typeof e!="function")return o;const a=s?"unshift":"push";return i.split(" ").forEach(c=>{o.eventsListeners[c]||(o.eventsListeners[c]=[]),o.eventsListeners[c][a](e)}),o},once(i,e,s){const o=this;if(!o.eventsListeners||o.destroyed||typeof e!="function")return o;function a(){o.off(i,a),a.__emitterProxy&&delete a.__emitterProxy;for(var c=arguments.length,d=new Array(c),h=0;h<c;h++)d[h]=arguments[h];e.apply(o,d)}return a.__emitterProxy=e,o.on(i,a,s)},onAny(i,e){const s=this;if(!s.eventsListeners||s.destroyed||typeof i!="function")return s;const o=e?"unshift":"push";return s.eventsAnyListeners.indexOf(i)<0&&s.eventsAnyListeners[o](i),s},offAny(i){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const s=e.eventsAnyListeners.indexOf(i);return s>=0&&e.eventsAnyListeners.splice(s,1),e},off(i,e){const s=this;return!s.eventsListeners||s.destroyed||!s.eventsListeners||i.split(" ").forEach(o=>{typeof e>"u"?s.eventsListeners[o]=[]:s.eventsListeners[o]&&s.eventsListeners[o].forEach((a,c)=>{(a===e||a.__emitterProxy&&a.__emitterProxy===e)&&s.eventsListeners[o].splice(c,1)})}),s},emit(){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let e,s,o;for(var a=arguments.length,c=new Array(a),d=0;d<a;d++)c[d]=arguments[d];return typeof c[0]=="string"||Array.isArray(c[0])?(e=c[0],s=c.slice(1,c.length),o=i):(e=c[0].events,s=c[0].data,o=c[0].context||i),s.unshift(o),(Array.isArray(e)?e:e.split(" ")).forEach(g=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(j=>{j.apply(o,[g,...s])}),i.eventsListeners&&i.eventsListeners[g]&&i.eventsListeners[g].forEach(j=>{j.apply(o,s)})}),i}};function updateSize(){const i=this;let e,s;const o=i.el;typeof i.params.width<"u"&&i.params.width!==null?e=i.params.width:e=o.clientWidth,typeof i.params.height<"u"&&i.params.height!==null?s=i.params.height:s=o.clientHeight,!(e===0&&i.isHorizontal()||s===0&&i.isVertical())&&(e=e-parseInt(elementStyle(o,"padding-left")||0,10)-parseInt(elementStyle(o,"padding-right")||0,10),s=s-parseInt(elementStyle(o,"padding-top")||0,10)-parseInt(elementStyle(o,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(s)&&(s=0),Object.assign(i,{width:e,height:s,size:i.isHorizontal()?e:s}))}function updateSlides(){const i=this;function e(_t,ht){return parseFloat(_t.getPropertyValue(i.getDirectionLabel(ht))||0)}const s=i.params,{wrapperEl:o,slidesEl:a,size:c,rtlTranslate:d,wrongRTL:h}=i,g=i.virtual&&s.virtual.enabled,j=g?i.virtual.slides.length:i.slides.length,$=elementChildren(a,`.${i.params.slideClass}, swiper-slide`),_=g?i.virtual.slides.length:$.length;let et=[];const tt=[],it=[];let ot=s.slidesOffsetBefore;typeof ot=="function"&&(ot=s.slidesOffsetBefore.call(i));let at=s.slidesOffsetAfter;typeof at=="function"&&(at=s.slidesOffsetAfter.call(i));const rt=i.snapGrid.length,st=i.slidesGrid.length;let lt=s.spaceBetween,mt=-ot,ft=0,gt=0;if(typeof c>"u")return;typeof lt=="string"&&lt.indexOf("%")>=0?lt=parseFloat(lt.replace("%",""))/100*c:typeof lt=="string"&&(lt=parseFloat(lt)),i.virtualSize=-lt,$.forEach(_t=>{d?_t.style.marginLeft="":_t.style.marginRight="",_t.style.marginBottom="",_t.style.marginTop=""}),s.centeredSlides&&s.cssMode&&(setCSSProperty(o,"--swiper-centered-offset-before",""),setCSSProperty(o,"--swiper-centered-offset-after",""));const dt=s.grid&&s.grid.rows>1&&i.grid;dt?i.grid.initSlides($):i.grid&&i.grid.unsetSlides();let ut;const ct=s.slidesPerView==="auto"&&s.breakpoints&&Object.keys(s.breakpoints).filter(_t=>typeof s.breakpoints[_t].slidesPerView<"u").length>0;for(let _t=0;_t<_;_t+=1){ut=0;let ht;if($[_t]&&(ht=$[_t]),dt&&i.grid.updateSlide(_t,ht,$),!($[_t]&&elementStyle(ht,"display")==="none")){if(s.slidesPerView==="auto"){ct&&($[_t].style[i.getDirectionLabel("width")]="");const Et=getComputedStyle(ht),yt=ht.style.transform,Ot=ht.style.webkitTransform;if(yt&&(ht.style.transform="none"),Ot&&(ht.style.webkitTransform="none"),s.roundLengths)ut=i.isHorizontal()?elementOuterSize(ht,"width"):elementOuterSize(ht,"height");else{const Dt=e(Et,"width"),$t=e(Et,"padding-left"),Bt=e(Et,"padding-right"),Vt=e(Et,"margin-left"),Rt=e(Et,"margin-right"),vt=Et.getPropertyValue("box-sizing");if(vt&&vt==="border-box")ut=Dt+Vt+Rt;else{const{clientWidth:St,offsetWidth:Pt}=ht;ut=Dt+$t+Bt+Vt+Rt+(Pt-St)}}yt&&(ht.style.transform=yt),Ot&&(ht.style.webkitTransform=Ot),s.roundLengths&&(ut=Math.floor(ut))}else ut=(c-(s.slidesPerView-1)*lt)/s.slidesPerView,s.roundLengths&&(ut=Math.floor(ut)),$[_t]&&($[_t].style[i.getDirectionLabel("width")]=`${ut}px`);$[_t]&&($[_t].swiperSlideSize=ut),it.push(ut),s.centeredSlides?(mt=mt+ut/2+ft/2+lt,ft===0&&_t!==0&&(mt=mt-c/2-lt),_t===0&&(mt=mt-c/2-lt),Math.abs(mt)<1/1e3&&(mt=0),s.roundLengths&&(mt=Math.floor(mt)),gt%s.slidesPerGroup===0&&et.push(mt),tt.push(mt)):(s.roundLengths&&(mt=Math.floor(mt)),(gt-Math.min(i.params.slidesPerGroupSkip,gt))%i.params.slidesPerGroup===0&&et.push(mt),tt.push(mt),mt=mt+ut+lt),i.virtualSize+=ut+lt,ft=ut,gt+=1}}if(i.virtualSize=Math.max(i.virtualSize,c)+at,d&&h&&(s.effect==="slide"||s.effect==="coverflow")&&(o.style.width=`${i.virtualSize+lt}px`),s.setWrapperSize&&(o.style[i.getDirectionLabel("width")]=`${i.virtualSize+lt}px`),dt&&i.grid.updateWrapperSize(ut,et),!s.centeredSlides){const _t=[];for(let ht=0;ht<et.length;ht+=1){let Et=et[ht];s.roundLengths&&(Et=Math.floor(Et)),et[ht]<=i.virtualSize-c&&_t.push(Et)}et=_t,Math.floor(i.virtualSize-c)-Math.floor(et[et.length-1])>1&&et.push(i.virtualSize-c)}if(g&&s.loop){const _t=it[0]+lt;if(s.slidesPerGroup>1){const ht=Math.ceil((i.virtual.slidesBefore+i.virtual.slidesAfter)/s.slidesPerGroup),Et=_t*s.slidesPerGroup;for(let yt=0;yt<ht;yt+=1)et.push(et[et.length-1]+Et)}for(let ht=0;ht<i.virtual.slidesBefore+i.virtual.slidesAfter;ht+=1)s.slidesPerGroup===1&&et.push(et[et.length-1]+_t),tt.push(tt[tt.length-1]+_t),i.virtualSize+=_t}if(et.length===0&&(et=[0]),lt!==0){const _t=i.isHorizontal()&&d?"marginLeft":i.getDirectionLabel("marginRight");$.filter((ht,Et)=>!s.cssMode||s.loop?!0:Et!==$.length-1).forEach(ht=>{ht.style[_t]=`${lt}px`})}if(s.centeredSlides&&s.centeredSlidesBounds){let _t=0;it.forEach(Et=>{_t+=Et+(lt||0)}),_t-=lt;const ht=_t>c?_t-c:0;et=et.map(Et=>Et<=0?-ot:Et>ht?ht+at:Et)}if(s.centerInsufficientSlides){let _t=0;it.forEach(Et=>{_t+=Et+(lt||0)}),_t-=lt;const ht=(s.slidesOffsetBefore||0)+(s.slidesOffsetAfter||0);if(_t+ht<c){const Et=(c-_t-ht)/2;et.forEach((yt,Ot)=>{et[Ot]=yt-Et}),tt.forEach((yt,Ot)=>{tt[Ot]=yt+Et})}}if(Object.assign(i,{slides:$,snapGrid:et,slidesGrid:tt,slidesSizesGrid:it}),s.centeredSlides&&s.cssMode&&!s.centeredSlidesBounds){setCSSProperty(o,"--swiper-centered-offset-before",`${-et[0]}px`),setCSSProperty(o,"--swiper-centered-offset-after",`${i.size/2-it[it.length-1]/2}px`);const _t=-i.snapGrid[0],ht=-i.slidesGrid[0];i.snapGrid=i.snapGrid.map(Et=>Et+_t),i.slidesGrid=i.slidesGrid.map(Et=>Et+ht)}if(_!==j&&i.emit("slidesLengthChange"),et.length!==rt&&(i.params.watchOverflow&&i.checkOverflow(),i.emit("snapGridLengthChange")),tt.length!==st&&i.emit("slidesGridLengthChange"),s.watchSlidesProgress&&i.updateSlidesOffset(),i.emit("slidesUpdated"),!g&&!s.cssMode&&(s.effect==="slide"||s.effect==="fade")){const _t=`${s.containerModifierClass}backface-hidden`,ht=i.el.classList.contains(_t);_<=s.maxBackfaceHiddenSlides?ht||i.el.classList.add(_t):ht&&i.el.classList.remove(_t)}}function updateAutoHeight(i){const e=this,s=[],o=e.virtual&&e.params.virtual.enabled;let a=0,c;typeof i=="number"?e.setTransition(i):i===!0&&e.setTransition(e.params.speed);const d=h=>o?e.slides[e.getSlideIndexByData(h)]:e.slides[h];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(h=>{s.push(h)});else for(c=0;c<Math.ceil(e.params.slidesPerView);c+=1){const h=e.activeIndex+c;if(h>e.slides.length&&!o)break;s.push(d(h))}else s.push(d(e.activeIndex));for(c=0;c<s.length;c+=1)if(typeof s[c]<"u"){const h=s[c].offsetHeight;a=h>a?h:a}(a||a===0)&&(e.wrapperEl.style.height=`${a}px`)}function updateSlidesOffset(){const i=this,e=i.slides,s=i.isElement?i.isHorizontal()?i.wrapperEl.offsetLeft:i.wrapperEl.offsetTop:0;for(let o=0;o<e.length;o+=1)e[o].swiperSlideOffset=(i.isHorizontal()?e[o].offsetLeft:e[o].offsetTop)-s-i.cssOverflowAdjustment()}const toggleSlideClasses$1=(i,e,s)=>{e&&!i.classList.contains(s)?i.classList.add(s):!e&&i.classList.contains(s)&&i.classList.remove(s)};function updateSlidesProgress(i){i===void 0&&(i=this&&this.translate||0);const e=this,s=e.params,{slides:o,rtlTranslate:a,snapGrid:c}=e;if(o.length===0)return;typeof o[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let d=-i;a&&(d=i),e.visibleSlidesIndexes=[],e.visibleSlides=[];let h=s.spaceBetween;typeof h=="string"&&h.indexOf("%")>=0?h=parseFloat(h.replace("%",""))/100*e.size:typeof h=="string"&&(h=parseFloat(h));for(let g=0;g<o.length;g+=1){const j=o[g];let $=j.swiperSlideOffset;s.cssMode&&s.centeredSlides&&($-=o[0].swiperSlideOffset);const _=(d+(s.centeredSlides?e.minTranslate():0)-$)/(j.swiperSlideSize+h),et=(d-c[0]+(s.centeredSlides?e.minTranslate():0)-$)/(j.swiperSlideSize+h),tt=-(d-$),it=tt+e.slidesSizesGrid[g],ot=tt>=0&&tt<=e.size-e.slidesSizesGrid[g],at=tt>=0&&tt<e.size-1||it>1&&it<=e.size||tt<=0&&it>=e.size;at&&(e.visibleSlides.push(j),e.visibleSlidesIndexes.push(g)),toggleSlideClasses$1(j,at,s.slideVisibleClass),toggleSlideClasses$1(j,ot,s.slideFullyVisibleClass),j.progress=a?-_:_,j.originalProgress=a?-et:et}}function updateProgress(i){const e=this;if(typeof i>"u"){const $=e.rtlTranslate?-1:1;i=e&&e.translate&&e.translate*$||0}const s=e.params,o=e.maxTranslate()-e.minTranslate();let{progress:a,isBeginning:c,isEnd:d,progressLoop:h}=e;const g=c,j=d;if(o===0)a=0,c=!0,d=!0;else{a=(i-e.minTranslate())/o;const $=Math.abs(i-e.minTranslate())<1,_=Math.abs(i-e.maxTranslate())<1;c=$||a<=0,d=_||a>=1,$&&(a=0),_&&(a=1)}if(s.loop){const $=e.getSlideIndexByData(0),_=e.getSlideIndexByData(e.slides.length-1),et=e.slidesGrid[$],tt=e.slidesGrid[_],it=e.slidesGrid[e.slidesGrid.length-1],ot=Math.abs(i);ot>=et?h=(ot-et)/it:h=(ot+it-tt)/it,h>1&&(h-=1)}Object.assign(e,{progress:a,progressLoop:h,isBeginning:c,isEnd:d}),(s.watchSlidesProgress||s.centeredSlides&&s.autoHeight)&&e.updateSlidesProgress(i),c&&!g&&e.emit("reachBeginning toEdge"),d&&!j&&e.emit("reachEnd toEdge"),(g&&!c||j&&!d)&&e.emit("fromEdge"),e.emit("progress",a)}const toggleSlideClasses=(i,e,s)=>{e&&!i.classList.contains(s)?i.classList.add(s):!e&&i.classList.contains(s)&&i.classList.remove(s)};function updateSlidesClasses(){const i=this,{slides:e,params:s,slidesEl:o,activeIndex:a}=i,c=i.virtual&&s.virtual.enabled,d=i.grid&&s.grid&&s.grid.rows>1,h=_=>elementChildren(o,`.${s.slideClass}${_}, swiper-slide${_}`)[0];let g,j,$;if(c)if(s.loop){let _=a-i.virtual.slidesBefore;_<0&&(_=i.virtual.slides.length+_),_>=i.virtual.slides.length&&(_-=i.virtual.slides.length),g=h(`[data-swiper-slide-index="${_}"]`)}else g=h(`[data-swiper-slide-index="${a}"]`);else d?(g=e.filter(_=>_.column===a)[0],$=e.filter(_=>_.column===a+1)[0],j=e.filter(_=>_.column===a-1)[0]):g=e[a];g&&(d||($=elementNextAll(g,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!$&&($=e[0]),j=elementPrevAll(g,`.${s.slideClass}, swiper-slide`)[0],s.loop&&!j===0&&(j=e[e.length-1]))),e.forEach(_=>{toggleSlideClasses(_,_===g,s.slideActiveClass),toggleSlideClasses(_,_===$,s.slideNextClass),toggleSlideClasses(_,_===j,s.slidePrevClass)}),i.emitSlidesClasses()}const processLazyPreloader=(i,e)=>{if(!i||i.destroyed||!i.params)return;const s=()=>i.isElement?"swiper-slide":`.${i.params.slideClass}`,o=e.closest(s());if(o){let a=o.querySelector(`.${i.params.lazyPreloaderClass}`);!a&&i.isElement&&(o.shadowRoot?a=o.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{o.shadowRoot&&(a=o.shadowRoot.querySelector(`.${i.params.lazyPreloaderClass}`),a&&a.remove())})),a&&a.remove()}},unlazy=(i,e)=>{if(!i.slides[e])return;const s=i.slides[e].querySelector('[loading="lazy"]');s&&s.removeAttribute("loading")},preload=i=>{if(!i||i.destroyed||!i.params)return;let e=i.params.lazyPreloadPrevNext;const s=i.slides.length;if(!s||!e||e<0)return;e=Math.min(e,s);const o=i.params.slidesPerView==="auto"?i.slidesPerViewDynamic():Math.ceil(i.params.slidesPerView),a=i.activeIndex;if(i.params.grid&&i.params.grid.rows>1){const d=a,h=[d-e];h.push(...Array.from({length:e}).map((g,j)=>d+o+j)),i.slides.forEach((g,j)=>{h.includes(g.column)&&unlazy(i,j)});return}const c=a+o-1;if(i.params.rewind||i.params.loop)for(let d=a-e;d<=c+e;d+=1){const h=(d%s+s)%s;(h<a||h>c)&&unlazy(i,h)}else for(let d=Math.max(a-e,0);d<=Math.min(c+e,s-1);d+=1)d!==a&&(d>c||d<a)&&unlazy(i,d)};function getActiveIndexByTranslate(i){const{slidesGrid:e,params:s}=i,o=i.rtlTranslate?i.translate:-i.translate;let a;for(let c=0;c<e.length;c+=1)typeof e[c+1]<"u"?o>=e[c]&&o<e[c+1]-(e[c+1]-e[c])/2?a=c:o>=e[c]&&o<e[c+1]&&(a=c+1):o>=e[c]&&(a=c);return s.normalizeSlideIndex&&(a<0||typeof a>"u")&&(a=0),a}function updateActiveIndex(i){const e=this,s=e.rtlTranslate?e.translate:-e.translate,{snapGrid:o,params:a,activeIndex:c,realIndex:d,snapIndex:h}=e;let g=i,j;const $=tt=>{let it=tt-e.virtual.slidesBefore;return it<0&&(it=e.virtual.slides.length+it),it>=e.virtual.slides.length&&(it-=e.virtual.slides.length),it};if(typeof g>"u"&&(g=getActiveIndexByTranslate(e)),o.indexOf(s)>=0)j=o.indexOf(s);else{const tt=Math.min(a.slidesPerGroupSkip,g);j=tt+Math.floor((g-tt)/a.slidesPerGroup)}if(j>=o.length&&(j=o.length-1),g===c&&!e.params.loop){j!==h&&(e.snapIndex=j,e.emit("snapIndexChange"));return}if(g===c&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=$(g);return}const _=e.grid&&a.grid&&a.grid.rows>1;let et;if(e.virtual&&a.virtual.enabled&&a.loop)et=$(g);else if(_){const tt=e.slides.filter(ot=>ot.column===g)[0];let it=parseInt(tt.getAttribute("data-swiper-slide-index"),10);Number.isNaN(it)&&(it=Math.max(e.slides.indexOf(tt),0)),et=Math.floor(it/a.grid.rows)}else if(e.slides[g]){const tt=e.slides[g].getAttribute("data-swiper-slide-index");tt?et=parseInt(tt,10):et=g}else et=g;Object.assign(e,{previousSnapIndex:h,snapIndex:j,previousRealIndex:d,realIndex:et,previousIndex:c,activeIndex:g}),e.initialized&&preload(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(d!==et&&e.emit("realIndexChange"),e.emit("slideChange"))}function updateClickedSlide(i,e){const s=this,o=s.params;let a=i.closest(`.${o.slideClass}, swiper-slide`);!a&&s.isElement&&e&&e.length>1&&e.includes(i)&&[...e.slice(e.indexOf(i)+1,e.length)].forEach(h=>{!a&&h.matches&&h.matches(`.${o.slideClass}, swiper-slide`)&&(a=h)});let c=!1,d;if(a){for(let h=0;h<s.slides.length;h+=1)if(s.slides[h]===a){c=!0,d=h;break}}if(a&&c)s.clickedSlide=a,s.virtual&&s.params.virtual.enabled?s.clickedIndex=parseInt(a.getAttribute("data-swiper-slide-index"),10):s.clickedIndex=d;else{s.clickedSlide=void 0,s.clickedIndex=void 0;return}o.slideToClickedSlide&&s.clickedIndex!==void 0&&s.clickedIndex!==s.activeIndex&&s.slideToClickedSlide()}var update={updateSize,updateSlides,updateAutoHeight,updateSlidesOffset,updateSlidesProgress,updateProgress,updateSlidesClasses,updateActiveIndex,updateClickedSlide};function getSwiperTranslate(i){i===void 0&&(i=this.isHorizontal()?"x":"y");const e=this,{params:s,rtlTranslate:o,translate:a,wrapperEl:c}=e;if(s.virtualTranslate)return o?-a:a;if(s.cssMode)return a;let d=getTranslate(c,i);return d+=e.cssOverflowAdjustment(),o&&(d=-d),d||0}function setTranslate(i,e){const s=this,{rtlTranslate:o,params:a,wrapperEl:c,progress:d}=s;let h=0,g=0;const j=0;s.isHorizontal()?h=o?-i:i:g=i,a.roundLengths&&(h=Math.floor(h),g=Math.floor(g)),s.previousTranslate=s.translate,s.translate=s.isHorizontal()?h:g,a.cssMode?c[s.isHorizontal()?"scrollLeft":"scrollTop"]=s.isHorizontal()?-h:-g:a.virtualTranslate||(s.isHorizontal()?h-=s.cssOverflowAdjustment():g-=s.cssOverflowAdjustment(),c.style.transform=`translate3d(${h}px, ${g}px, ${j}px)`);let $;const _=s.maxTranslate()-s.minTranslate();_===0?$=0:$=(i-s.minTranslate())/_,$!==d&&s.updateProgress(i),s.emit("setTranslate",s.translate,e)}function minTranslate(){return-this.snapGrid[0]}function maxTranslate(){return-this.snapGrid[this.snapGrid.length-1]}function translateTo(i,e,s,o,a){i===void 0&&(i=0),e===void 0&&(e=this.params.speed),s===void 0&&(s=!0),o===void 0&&(o=!0);const c=this,{params:d,wrapperEl:h}=c;if(c.animating&&d.preventInteractionOnTransition)return!1;const g=c.minTranslate(),j=c.maxTranslate();let $;if(o&&i>g?$=g:o&&i<j?$=j:$=i,c.updateProgress($),d.cssMode){const _=c.isHorizontal();if(e===0)h[_?"scrollLeft":"scrollTop"]=-$;else{if(!c.support.smoothScroll)return animateCSSModeScroll({swiper:c,targetPosition:-$,side:_?"left":"top"}),!0;h.scrollTo({[_?"left":"top"]:-$,behavior:"smooth"})}return!0}return e===0?(c.setTransition(0),c.setTranslate($),s&&(c.emit("beforeTransitionStart",e,a),c.emit("transitionEnd"))):(c.setTransition(e),c.setTranslate($),s&&(c.emit("beforeTransitionStart",e,a),c.emit("transitionStart")),c.animating||(c.animating=!0,c.onTranslateToWrapperTransitionEnd||(c.onTranslateToWrapperTransitionEnd=function(et){!c||c.destroyed||et.target===this&&(c.wrapperEl.removeEventListener("transitionend",c.onTranslateToWrapperTransitionEnd),c.onTranslateToWrapperTransitionEnd=null,delete c.onTranslateToWrapperTransitionEnd,c.animating=!1,s&&c.emit("transitionEnd"))}),c.wrapperEl.addEventListener("transitionend",c.onTranslateToWrapperTransitionEnd))),!0}var translate={getTranslate:getSwiperTranslate,setTranslate,minTranslate,maxTranslate,translateTo};function setTransition(i,e){const s=this;s.params.cssMode||(s.wrapperEl.style.transitionDuration=`${i}ms`,s.wrapperEl.style.transitionDelay=i===0?"0ms":""),s.emit("setTransition",i,e)}function transitionEmit(i){let{swiper:e,runCallbacks:s,direction:o,step:a}=i;const{activeIndex:c,previousIndex:d}=e;let h=o;if(h||(c>d?h="next":c<d?h="prev":h="reset"),e.emit(`transition${a}`),s&&c!==d){if(h==="reset"){e.emit(`slideResetTransition${a}`);return}e.emit(`slideChangeTransition${a}`),h==="next"?e.emit(`slideNextTransition${a}`):e.emit(`slidePrevTransition${a}`)}}function transitionStart(i,e){i===void 0&&(i=!0);const s=this,{params:o}=s;o.cssMode||(o.autoHeight&&s.updateAutoHeight(),transitionEmit({swiper:s,runCallbacks:i,direction:e,step:"Start"}))}function transitionEnd(i,e){i===void 0&&(i=!0);const s=this,{params:o}=s;s.animating=!1,!o.cssMode&&(s.setTransition(0),transitionEmit({swiper:s,runCallbacks:i,direction:e,step:"End"}))}var transition={setTransition,transitionStart,transitionEnd};function slideTo(i,e,s,o,a){i===void 0&&(i=0),s===void 0&&(s=!0),typeof i=="string"&&(i=parseInt(i,10));const c=this;let d=i;d<0&&(d=0);const{params:h,snapGrid:g,slidesGrid:j,previousIndex:$,activeIndex:_,rtlTranslate:et,wrapperEl:tt,enabled:it}=c;if(!it&&!o&&!a||c.destroyed||c.animating&&h.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=c.params.speed);const ot=Math.min(c.params.slidesPerGroupSkip,d);let at=ot+Math.floor((d-ot)/c.params.slidesPerGroup);at>=g.length&&(at=g.length-1);const rt=-g[at];if(h.normalizeSlideIndex)for(let ft=0;ft<j.length;ft+=1){const gt=-Math.floor(rt*100),dt=Math.floor(j[ft]*100),ut=Math.floor(j[ft+1]*100);typeof j[ft+1]<"u"?gt>=dt&&gt<ut-(ut-dt)/2?d=ft:gt>=dt&&gt<ut&&(d=ft+1):gt>=dt&&(d=ft)}if(c.initialized&&d!==_&&(!c.allowSlideNext&&(et?rt>c.translate&&rt>c.minTranslate():rt<c.translate&&rt<c.minTranslate())||!c.allowSlidePrev&&rt>c.translate&&rt>c.maxTranslate()&&(_||0)!==d))return!1;d!==($||0)&&s&&c.emit("beforeSlideChangeStart"),c.updateProgress(rt);let st;d>_?st="next":d<_?st="prev":st="reset";const lt=c.virtual&&c.params.virtual.enabled;if(!(lt&&a)&&(et&&-rt===c.translate||!et&&rt===c.translate))return c.updateActiveIndex(d),h.autoHeight&&c.updateAutoHeight(),c.updateSlidesClasses(),h.effect!=="slide"&&c.setTranslate(rt),st!=="reset"&&(c.transitionStart(s,st),c.transitionEnd(s,st)),!1;if(h.cssMode){const ft=c.isHorizontal(),gt=et?rt:-rt;if(e===0)lt&&(c.wrapperEl.style.scrollSnapType="none",c._immediateVirtual=!0),lt&&!c._cssModeVirtualInitialSet&&c.params.initialSlide>0?(c._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{tt[ft?"scrollLeft":"scrollTop"]=gt})):tt[ft?"scrollLeft":"scrollTop"]=gt,lt&&requestAnimationFrame(()=>{c.wrapperEl.style.scrollSnapType="",c._immediateVirtual=!1});else{if(!c.support.smoothScroll)return animateCSSModeScroll({swiper:c,targetPosition:gt,side:ft?"left":"top"}),!0;tt.scrollTo({[ft?"left":"top"]:gt,behavior:"smooth"})}return!0}return c.setTransition(e),c.setTranslate(rt),c.updateActiveIndex(d),c.updateSlidesClasses(),c.emit("beforeTransitionStart",e,o),c.transitionStart(s,st),e===0?c.transitionEnd(s,st):c.animating||(c.animating=!0,c.onSlideToWrapperTransitionEnd||(c.onSlideToWrapperTransitionEnd=function(gt){!c||c.destroyed||gt.target===this&&(c.wrapperEl.removeEventListener("transitionend",c.onSlideToWrapperTransitionEnd),c.onSlideToWrapperTransitionEnd=null,delete c.onSlideToWrapperTransitionEnd,c.transitionEnd(s,st))}),c.wrapperEl.addEventListener("transitionend",c.onSlideToWrapperTransitionEnd)),!0}function slideToLoop(i,e,s,o){i===void 0&&(i=0),s===void 0&&(s=!0),typeof i=="string"&&(i=parseInt(i,10));const a=this;if(a.destroyed)return;typeof e>"u"&&(e=a.params.speed);const c=a.grid&&a.params.grid&&a.params.grid.rows>1;let d=i;if(a.params.loop)if(a.virtual&&a.params.virtual.enabled)d=d+a.virtual.slidesBefore;else{let h;if(c){const et=d*a.params.grid.rows;h=a.slides.filter(tt=>tt.getAttribute("data-swiper-slide-index")*1===et)[0].column}else h=a.getSlideIndexByData(d);const g=c?Math.ceil(a.slides.length/a.params.grid.rows):a.slides.length,{centeredSlides:j}=a.params;let $=a.params.slidesPerView;$==="auto"?$=a.slidesPerViewDynamic():($=Math.ceil(parseFloat(a.params.slidesPerView,10)),j&&$%2===0&&($=$+1));let _=g-h<$;if(j&&(_=_||h<Math.ceil($/2)),o&&j&&a.params.slidesPerView!=="auto"&&!c&&(_=!1),_){const et=j?h<a.activeIndex?"prev":"next":h-a.activeIndex-1<a.params.slidesPerView?"next":"prev";a.loopFix({direction:et,slideTo:!0,activeSlideIndex:et==="next"?h+1:h-g+1,slideRealIndex:et==="next"?a.realIndex:void 0})}if(c){const et=d*a.params.grid.rows;d=a.slides.filter(tt=>tt.getAttribute("data-swiper-slide-index")*1===et)[0].column}else d=a.getSlideIndexByData(d)}return requestAnimationFrame(()=>{a.slideTo(d,e,s,o)}),a}function slideNext(i,e,s){e===void 0&&(e=!0);const o=this,{enabled:a,params:c,animating:d}=o;if(!a||o.destroyed)return o;typeof i>"u"&&(i=o.params.speed);let h=c.slidesPerGroup;c.slidesPerView==="auto"&&c.slidesPerGroup===1&&c.slidesPerGroupAuto&&(h=Math.max(o.slidesPerViewDynamic("current",!0),1));const g=o.activeIndex<c.slidesPerGroupSkip?1:h,j=o.virtual&&c.virtual.enabled;if(c.loop){if(d&&!j&&c.loopPreventsSliding)return!1;if(o.loopFix({direction:"next"}),o._clientLeft=o.wrapperEl.clientLeft,o.activeIndex===o.slides.length-1&&c.cssMode)return requestAnimationFrame(()=>{o.slideTo(o.activeIndex+g,i,e,s)}),!0}return c.rewind&&o.isEnd?o.slideTo(0,i,e,s):o.slideTo(o.activeIndex+g,i,e,s)}function slidePrev(i,e,s){e===void 0&&(e=!0);const o=this,{params:a,snapGrid:c,slidesGrid:d,rtlTranslate:h,enabled:g,animating:j}=o;if(!g||o.destroyed)return o;typeof i>"u"&&(i=o.params.speed);const $=o.virtual&&a.virtual.enabled;if(a.loop){if(j&&!$&&a.loopPreventsSliding)return!1;o.loopFix({direction:"prev"}),o._clientLeft=o.wrapperEl.clientLeft}const _=h?o.translate:-o.translate;function et(rt){return rt<0?-Math.floor(Math.abs(rt)):Math.floor(rt)}const tt=et(_),it=c.map(rt=>et(rt));let ot=c[it.indexOf(tt)-1];if(typeof ot>"u"&&a.cssMode){let rt;c.forEach((st,lt)=>{tt>=st&&(rt=lt)}),typeof rt<"u"&&(ot=c[rt>0?rt-1:rt])}let at=0;if(typeof ot<"u"&&(at=d.indexOf(ot),at<0&&(at=o.activeIndex-1),a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(at=at-o.slidesPerViewDynamic("previous",!0)+1,at=Math.max(at,0))),a.rewind&&o.isBeginning){const rt=o.params.virtual&&o.params.virtual.enabled&&o.virtual?o.virtual.slides.length-1:o.slides.length-1;return o.slideTo(rt,i,e,s)}else if(a.loop&&o.activeIndex===0&&a.cssMode)return requestAnimationFrame(()=>{o.slideTo(at,i,e,s)}),!0;return o.slideTo(at,i,e,s)}function slideReset(i,e,s){e===void 0&&(e=!0);const o=this;if(!o.destroyed)return typeof i>"u"&&(i=o.params.speed),o.slideTo(o.activeIndex,i,e,s)}function slideToClosest(i,e,s,o){e===void 0&&(e=!0),o===void 0&&(o=.5);const a=this;if(a.destroyed)return;typeof i>"u"&&(i=a.params.speed);let c=a.activeIndex;const d=Math.min(a.params.slidesPerGroupSkip,c),h=d+Math.floor((c-d)/a.params.slidesPerGroup),g=a.rtlTranslate?a.translate:-a.translate;if(g>=a.snapGrid[h]){const j=a.snapGrid[h],$=a.snapGrid[h+1];g-j>($-j)*o&&(c+=a.params.slidesPerGroup)}else{const j=a.snapGrid[h-1],$=a.snapGrid[h];g-j<=($-j)*o&&(c-=a.params.slidesPerGroup)}return c=Math.max(c,0),c=Math.min(c,a.slidesGrid.length-1),a.slideTo(c,i,e,s)}function slideToClickedSlide(){const i=this;if(i.destroyed)return;const{params:e,slidesEl:s}=i,o=e.slidesPerView==="auto"?i.slidesPerViewDynamic():e.slidesPerView;let a=i.clickedIndex,c;const d=i.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(i.animating)return;c=parseInt(i.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?a<i.loopedSlides-o/2||a>i.slides.length-i.loopedSlides+o/2?(i.loopFix(),a=i.getSlideIndex(elementChildren(s,`${d}[data-swiper-slide-index="${c}"]`)[0]),nextTick(()=>{i.slideTo(a)})):i.slideTo(a):a>i.slides.length-o?(i.loopFix(),a=i.getSlideIndex(elementChildren(s,`${d}[data-swiper-slide-index="${c}"]`)[0]),nextTick(()=>{i.slideTo(a)})):i.slideTo(a)}else i.slideTo(a)}var slide={slideTo,slideToLoop,slideNext,slidePrev,slideReset,slideToClosest,slideToClickedSlide};function loopCreate(i){const e=this,{params:s,slidesEl:o}=e;if(!s.loop||e.virtual&&e.params.virtual.enabled)return;const a=()=>{elementChildren(o,`.${s.slideClass}, swiper-slide`).forEach((_,et)=>{_.setAttribute("data-swiper-slide-index",et)})},c=e.grid&&s.grid&&s.grid.rows>1,d=s.slidesPerGroup*(c?s.grid.rows:1),h=e.slides.length%d!==0,g=c&&e.slides.length%s.grid.rows!==0,j=$=>{for(let _=0;_<$;_+=1){const et=e.isElement?createElement("swiper-slide",[s.slideBlankClass]):createElement("div",[s.slideClass,s.slideBlankClass]);e.slidesEl.append(et)}};if(h){if(s.loopAddBlankSlides){const $=d-e.slides.length%d;j($),e.recalcSlides(),e.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else if(g){if(s.loopAddBlankSlides){const $=s.grid.rows-e.slides.length%s.grid.rows;j($),e.recalcSlides(),e.updateSlides()}else showWarning("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");a()}else a();e.loopFix({slideRealIndex:i,direction:s.centeredSlides?void 0:"next"})}function loopFix(i){let{slideRealIndex:e,slideTo:s=!0,direction:o,setTranslate:a,activeSlideIndex:c,byController:d,byMousewheel:h}=i===void 0?{}:i;const g=this;if(!g.params.loop)return;g.emit("beforeLoopFix");const{slides:j,allowSlidePrev:$,allowSlideNext:_,slidesEl:et,params:tt}=g,{centeredSlides:it}=tt;if(g.allowSlidePrev=!0,g.allowSlideNext=!0,g.virtual&&tt.virtual.enabled){s&&(!tt.centeredSlides&&g.snapIndex===0?g.slideTo(g.virtual.slides.length,0,!1,!0):tt.centeredSlides&&g.snapIndex<tt.slidesPerView?g.slideTo(g.virtual.slides.length+g.snapIndex,0,!1,!0):g.snapIndex===g.snapGrid.length-1&&g.slideTo(g.virtual.slidesBefore,0,!1,!0)),g.allowSlidePrev=$,g.allowSlideNext=_,g.emit("loopFix");return}let ot=tt.slidesPerView;ot==="auto"?ot=g.slidesPerViewDynamic():(ot=Math.ceil(parseFloat(tt.slidesPerView,10)),it&&ot%2===0&&(ot=ot+1));const at=tt.slidesPerGroupAuto?ot:tt.slidesPerGroup;let rt=at;rt%at!==0&&(rt+=at-rt%at),rt+=tt.loopAdditionalSlides,g.loopedSlides=rt;const st=g.grid&&tt.grid&&tt.grid.rows>1;j.length<ot+rt?showWarning("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled and not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):st&&tt.grid.fill==="row"&&showWarning("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const lt=[],mt=[];let ft=g.activeIndex;typeof c>"u"?c=g.getSlideIndex(j.filter(yt=>yt.classList.contains(tt.slideActiveClass))[0]):ft=c;const gt=o==="next"||!o,dt=o==="prev"||!o;let ut=0,ct=0;const _t=st?Math.ceil(j.length/tt.grid.rows):j.length,Et=(st?j[c].column:c)+(it&&typeof a>"u"?-ot/2+.5:0);if(Et<rt){ut=Math.max(rt-Et,at);for(let yt=0;yt<rt-Et;yt+=1){const Ot=yt-Math.floor(yt/_t)*_t;if(st){const Dt=_t-Ot-1;for(let $t=j.length-1;$t>=0;$t-=1)j[$t].column===Dt&&lt.push($t)}else lt.push(_t-Ot-1)}}else if(Et+ot>_t-rt){ct=Math.max(Et-(_t-rt*2),at);for(let yt=0;yt<ct;yt+=1){const Ot=yt-Math.floor(yt/_t)*_t;st?j.forEach((Dt,$t)=>{Dt.column===Ot&&mt.push($t)}):mt.push(Ot)}}if(g.__preventObserver__=!0,requestAnimationFrame(()=>{g.__preventObserver__=!1}),dt&&lt.forEach(yt=>{j[yt].swiperLoopMoveDOM=!0,et.prepend(j[yt]),j[yt].swiperLoopMoveDOM=!1}),gt&&mt.forEach(yt=>{j[yt].swiperLoopMoveDOM=!0,et.append(j[yt]),j[yt].swiperLoopMoveDOM=!1}),g.recalcSlides(),tt.slidesPerView==="auto"?g.updateSlides():st&&(lt.length>0&&dt||mt.length>0&&gt)&&g.slides.forEach((yt,Ot)=>{g.grid.updateSlide(Ot,yt,g.slides)}),tt.watchSlidesProgress&&g.updateSlidesOffset(),s){if(lt.length>0&&dt){if(typeof e>"u"){const yt=g.slidesGrid[ft],Dt=g.slidesGrid[ft+ut]-yt;h?g.setTranslate(g.translate-Dt):(g.slideTo(ft+Math.ceil(ut),0,!1,!0),a&&(g.touchEventsData.startTranslate=g.touchEventsData.startTranslate-Dt,g.touchEventsData.currentTranslate=g.touchEventsData.currentTranslate-Dt))}else if(a){const yt=st?lt.length/tt.grid.rows:lt.length;g.slideTo(g.activeIndex+yt,0,!1,!0),g.touchEventsData.currentTranslate=g.translate}}else if(mt.length>0&&gt)if(typeof e>"u"){const yt=g.slidesGrid[ft],Dt=g.slidesGrid[ft-ct]-yt;h?g.setTranslate(g.translate-Dt):(g.slideTo(ft-ct,0,!1,!0),a&&(g.touchEventsData.startTranslate=g.touchEventsData.startTranslate-Dt,g.touchEventsData.currentTranslate=g.touchEventsData.currentTranslate-Dt))}else{const yt=st?mt.length/tt.grid.rows:mt.length;g.slideTo(g.activeIndex-yt,0,!1,!0)}}if(g.allowSlidePrev=$,g.allowSlideNext=_,g.controller&&g.controller.control&&!d){const yt={slideRealIndex:e,direction:o,setTranslate:a,activeSlideIndex:c,byController:!0};Array.isArray(g.controller.control)?g.controller.control.forEach(Ot=>{!Ot.destroyed&&Ot.params.loop&&Ot.loopFix({...yt,slideTo:Ot.params.slidesPerView===tt.slidesPerView?s:!1})}):g.controller.control instanceof g.constructor&&g.controller.control.params.loop&&g.controller.control.loopFix({...yt,slideTo:g.controller.control.params.slidesPerView===tt.slidesPerView?s:!1})}g.emit("loopFix")}function loopDestroy(){const i=this,{params:e,slidesEl:s}=i;if(!e.loop||i.virtual&&i.params.virtual.enabled)return;i.recalcSlides();const o=[];i.slides.forEach(a=>{const c=typeof a.swiperSlideIndex>"u"?a.getAttribute("data-swiper-slide-index")*1:a.swiperSlideIndex;o[c]=a}),i.slides.forEach(a=>{a.removeAttribute("data-swiper-slide-index")}),o.forEach(a=>{s.append(a)}),i.recalcSlides(),i.slideTo(i.realIndex,0)}var loop={loopCreate,loopFix,loopDestroy};function setGrabCursor(i){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const s=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),s.style.cursor="move",s.style.cursor=i?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function unsetGrabCursor(){const i=this;i.params.watchOverflow&&i.isLocked||i.params.cssMode||(i.isElement&&(i.__preventObserver__=!0),i[i.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1}))}var grabCursor={setGrabCursor,unsetGrabCursor};function closestElement(i,e){e===void 0&&(e=this);function s(o){if(!o||o===getDocument()||o===getWindow())return null;o.assignedSlot&&(o=o.assignedSlot);const a=o.closest(i);return!a&&!o.getRootNode?null:a||s(o.getRootNode().host)}return s(e)}function preventEdgeSwipe(i,e,s){const o=getWindow(),{params:a}=i,c=a.edgeSwipeDetection,d=a.edgeSwipeThreshold;return c&&(s<=d||s>=o.innerWidth-d)?c==="prevent"?(e.preventDefault(),!0):!1:!0}function onTouchStart(i){const e=this,s=getDocument();let o=i;o.originalEvent&&(o=o.originalEvent);const a=e.touchEventsData;if(o.type==="pointerdown"){if(a.pointerId!==null&&a.pointerId!==o.pointerId)return;a.pointerId=o.pointerId}else o.type==="touchstart"&&o.targetTouches.length===1&&(a.touchId=o.targetTouches[0].identifier);if(o.type==="touchstart"){preventEdgeSwipe(e,o,o.targetTouches[0].pageX);return}const{params:c,touches:d,enabled:h}=e;if(!h||!c.simulateTouch&&o.pointerType==="mouse"||e.animating&&c.preventInteractionOnTransition)return;!e.animating&&c.cssMode&&c.loop&&e.loopFix();let g=o.target;if(c.touchEventsTarget==="wrapper"&&!elementIsChildOf(g,e.wrapperEl)||"which"in o&&o.which===3||"button"in o&&o.button>0||a.isTouched&&a.isMoved)return;const j=!!c.noSwipingClass&&c.noSwipingClass!=="",$=o.composedPath?o.composedPath():o.path;j&&o.target&&o.target.shadowRoot&&$&&(g=$[0]);const _=c.noSwipingSelector?c.noSwipingSelector:`.${c.noSwipingClass}`,et=!!(o.target&&o.target.shadowRoot);if(c.noSwiping&&(et?closestElement(_,g):g.closest(_))){e.allowClick=!0;return}if(c.swipeHandler&&!g.closest(c.swipeHandler))return;d.currentX=o.pageX,d.currentY=o.pageY;const tt=d.currentX,it=d.currentY;if(!preventEdgeSwipe(e,o,tt))return;Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),d.startX=tt,d.startY=it,a.touchStartTime=now(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,c.threshold>0&&(a.allowThresholdMove=!1);let ot=!0;g.matches(a.focusableElements)&&(ot=!1,g.nodeName==="SELECT"&&(a.isTouched=!1)),s.activeElement&&s.activeElement.matches(a.focusableElements)&&s.activeElement!==g&&(o.pointerType==="mouse"||o.pointerType!=="mouse"&&!g.matches(a.focusableElements))&&s.activeElement.blur();const at=ot&&e.allowTouchMove&&c.touchStartPreventDefault;(c.touchStartForcePreventDefault||at)&&!g.isContentEditable&&o.preventDefault(),c.freeMode&&c.freeMode.enabled&&e.freeMode&&e.animating&&!c.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",o)}function onTouchMove(i){const e=getDocument(),s=this,o=s.touchEventsData,{params:a,touches:c,rtlTranslate:d,enabled:h}=s;if(!h||!a.simulateTouch&&i.pointerType==="mouse")return;let g=i;if(g.originalEvent&&(g=g.originalEvent),g.type==="pointermove"&&(o.touchId!==null||g.pointerId!==o.pointerId))return;let j;if(g.type==="touchmove"){if(j=[...g.changedTouches].filter(gt=>gt.identifier===o.touchId)[0],!j||j.identifier!==o.touchId)return}else j=g;if(!o.isTouched){o.startMoving&&o.isScrolling&&s.emit("touchMoveOpposite",g);return}const $=j.pageX,_=j.pageY;if(g.preventedByNestedSwiper){c.startX=$,c.startY=_;return}if(!s.allowTouchMove){g.target.matches(o.focusableElements)||(s.allowClick=!1),o.isTouched&&(Object.assign(c,{startX:$,startY:_,currentX:$,currentY:_}),o.touchStartTime=now());return}if(a.touchReleaseOnEdges&&!a.loop){if(s.isVertical()){if(_<c.startY&&s.translate<=s.maxTranslate()||_>c.startY&&s.translate>=s.minTranslate()){o.isTouched=!1,o.isMoved=!1;return}}else if($<c.startX&&s.translate<=s.maxTranslate()||$>c.startX&&s.translate>=s.minTranslate())return}if(e.activeElement&&e.activeElement.matches(o.focusableElements)&&e.activeElement!==g.target&&g.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&g.target===e.activeElement&&g.target.matches(o.focusableElements)){o.isMoved=!0,s.allowClick=!1;return}o.allowTouchCallbacks&&s.emit("touchMove",g),c.previousX=c.currentX,c.previousY=c.currentY,c.currentX=$,c.currentY=_;const et=c.currentX-c.startX,tt=c.currentY-c.startY;if(s.params.threshold&&Math.sqrt(et**2+tt**2)<s.params.threshold)return;if(typeof o.isScrolling>"u"){let gt;s.isHorizontal()&&c.currentY===c.startY||s.isVertical()&&c.currentX===c.startX?o.isScrolling=!1:et*et+tt*tt>=25&&(gt=Math.atan2(Math.abs(tt),Math.abs(et))*180/Math.PI,o.isScrolling=s.isHorizontal()?gt>a.touchAngle:90-gt>a.touchAngle)}if(o.isScrolling&&s.emit("touchMoveOpposite",g),typeof o.startMoving>"u"&&(c.currentX!==c.startX||c.currentY!==c.startY)&&(o.startMoving=!0),o.isScrolling||g.type==="touchmove"&&o.preventTouchMoveFromPointerMove){o.isTouched=!1;return}if(!o.startMoving)return;s.allowClick=!1,!a.cssMode&&g.cancelable&&g.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&g.stopPropagation();let it=s.isHorizontal()?et:tt,ot=s.isHorizontal()?c.currentX-c.previousX:c.currentY-c.previousY;a.oneWayMovement&&(it=Math.abs(it)*(d?1:-1),ot=Math.abs(ot)*(d?1:-1)),c.diff=it,it*=a.touchRatio,d&&(it=-it,ot=-ot);const at=s.touchesDirection;s.swipeDirection=it>0?"prev":"next",s.touchesDirection=ot>0?"prev":"next";const rt=s.params.loop&&!a.cssMode,st=s.touchesDirection==="next"&&s.allowSlideNext||s.touchesDirection==="prev"&&s.allowSlidePrev;if(!o.isMoved){if(rt&&st&&s.loopFix({direction:s.swipeDirection}),o.startTranslate=s.getTranslate(),s.setTransition(0),s.animating){const gt=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});s.wrapperEl.dispatchEvent(gt)}o.allowMomentumBounce=!1,a.grabCursor&&(s.allowSlideNext===!0||s.allowSlidePrev===!0)&&s.setGrabCursor(!0),s.emit("sliderFirstMove",g)}let lt;if(new Date().getTime(),o.isMoved&&o.allowThresholdMove&&at!==s.touchesDirection&&rt&&st&&Math.abs(it)>=1){Object.assign(c,{startX:$,startY:_,currentX:$,currentY:_,startTranslate:o.currentTranslate}),o.loopSwapReset=!0,o.startTranslate=o.currentTranslate;return}s.emit("sliderMove",g),o.isMoved=!0,o.currentTranslate=it+o.startTranslate;let mt=!0,ft=a.resistanceRatio;if(a.touchReleaseOnEdges&&(ft=0),it>0?(rt&&st&&!lt&&o.allowThresholdMove&&o.currentTranslate>(a.centeredSlides?s.minTranslate()-s.slidesSizesGrid[s.activeIndex+1]-(a.slidesPerView!=="auto"&&s.slides.length-a.slidesPerView>=2?s.slidesSizesGrid[s.activeIndex+1]+s.params.spaceBetween:0)-s.params.spaceBetween:s.minTranslate())&&s.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),o.currentTranslate>s.minTranslate()&&(mt=!1,a.resistance&&(o.currentTranslate=s.minTranslate()-1+(-s.minTranslate()+o.startTranslate+it)**ft))):it<0&&(rt&&st&&!lt&&o.allowThresholdMove&&o.currentTranslate<(a.centeredSlides?s.maxTranslate()+s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween+(a.slidesPerView!=="auto"&&s.slides.length-a.slidesPerView>=2?s.slidesSizesGrid[s.slidesSizesGrid.length-1]+s.params.spaceBetween:0):s.maxTranslate())&&s.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:s.slides.length-(a.slidesPerView==="auto"?s.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),o.currentTranslate<s.maxTranslate()&&(mt=!1,a.resistance&&(o.currentTranslate=s.maxTranslate()+1-(s.maxTranslate()-o.startTranslate-it)**ft))),mt&&(g.preventedByNestedSwiper=!0),!s.allowSlideNext&&s.swipeDirection==="next"&&o.currentTranslate<o.startTranslate&&(o.currentTranslate=o.startTranslate),!s.allowSlidePrev&&s.swipeDirection==="prev"&&o.currentTranslate>o.startTranslate&&(o.currentTranslate=o.startTranslate),!s.allowSlidePrev&&!s.allowSlideNext&&(o.currentTranslate=o.startTranslate),a.threshold>0)if(Math.abs(it)>a.threshold||o.allowThresholdMove){if(!o.allowThresholdMove){o.allowThresholdMove=!0,c.startX=c.currentX,c.startY=c.currentY,o.currentTranslate=o.startTranslate,c.diff=s.isHorizontal()?c.currentX-c.startX:c.currentY-c.startY;return}}else{o.currentTranslate=o.startTranslate;return}!a.followFinger||a.cssMode||((a.freeMode&&a.freeMode.enabled&&s.freeMode||a.watchSlidesProgress)&&(s.updateActiveIndex(),s.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&s.freeMode&&s.freeMode.onTouchMove(),s.updateProgress(o.currentTranslate),s.setTranslate(o.currentTranslate))}function onTouchEnd(i){const e=this,s=e.touchEventsData;let o=i;o.originalEvent&&(o=o.originalEvent);let a;if(o.type==="touchend"||o.type==="touchcancel"){if(a=[...o.changedTouches].filter(ft=>ft.identifier===s.touchId)[0],!a||a.identifier!==s.touchId)return}else{if(s.touchId!==null||o.pointerId!==s.pointerId)return;a=o}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(o.type)&&!(["pointercancel","contextmenu"].includes(o.type)&&(e.browser.isSafari||e.browser.isWebView)))return;s.pointerId=null,s.touchId=null;const{params:d,touches:h,rtlTranslate:g,slidesGrid:j,enabled:$}=e;if(!$||!d.simulateTouch&&o.pointerType==="mouse")return;if(s.allowTouchCallbacks&&e.emit("touchEnd",o),s.allowTouchCallbacks=!1,!s.isTouched){s.isMoved&&d.grabCursor&&e.setGrabCursor(!1),s.isMoved=!1,s.startMoving=!1;return}d.grabCursor&&s.isMoved&&s.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const _=now(),et=_-s.touchStartTime;if(e.allowClick){const ft=o.path||o.composedPath&&o.composedPath();e.updateClickedSlide(ft&&ft[0]||o.target,ft),e.emit("tap click",o),et<300&&_-s.lastClickTime<300&&e.emit("doubleTap doubleClick",o)}if(s.lastClickTime=now(),nextTick(()=>{e.destroyed||(e.allowClick=!0)}),!s.isTouched||!s.isMoved||!e.swipeDirection||h.diff===0&&!s.loopSwapReset||s.currentTranslate===s.startTranslate&&!s.loopSwapReset){s.isTouched=!1,s.isMoved=!1,s.startMoving=!1;return}s.isTouched=!1,s.isMoved=!1,s.startMoving=!1;let tt;if(d.followFinger?tt=g?e.translate:-e.translate:tt=-s.currentTranslate,d.cssMode)return;if(d.freeMode&&d.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:tt});return}const it=tt>=-e.maxTranslate()&&!e.params.loop;let ot=0,at=e.slidesSizesGrid[0];for(let ft=0;ft<j.length;ft+=ft<d.slidesPerGroupSkip?1:d.slidesPerGroup){const gt=ft<d.slidesPerGroupSkip-1?1:d.slidesPerGroup;typeof j[ft+gt]<"u"?(it||tt>=j[ft]&&tt<j[ft+gt])&&(ot=ft,at=j[ft+gt]-j[ft]):(it||tt>=j[ft])&&(ot=ft,at=j[j.length-1]-j[j.length-2])}let rt=null,st=null;d.rewind&&(e.isBeginning?st=d.virtual&&d.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(rt=0));const lt=(tt-j[ot])/at,mt=ot<d.slidesPerGroupSkip-1?1:d.slidesPerGroup;if(et>d.longSwipesMs){if(!d.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(lt>=d.longSwipesRatio?e.slideTo(d.rewind&&e.isEnd?rt:ot+mt):e.slideTo(ot)),e.swipeDirection==="prev"&&(lt>1-d.longSwipesRatio?e.slideTo(ot+mt):st!==null&&lt<0&&Math.abs(lt)>d.longSwipesRatio?e.slideTo(st):e.slideTo(ot))}else{if(!d.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(o.target===e.navigation.nextEl||o.target===e.navigation.prevEl)?o.target===e.navigation.nextEl?e.slideTo(ot+mt):e.slideTo(ot):(e.swipeDirection==="next"&&e.slideTo(rt!==null?rt:ot+mt),e.swipeDirection==="prev"&&e.slideTo(st!==null?st:ot))}}function onResize(){const i=this,{params:e,el:s}=i;if(s&&s.offsetWidth===0)return;e.breakpoints&&i.setBreakpoint();const{allowSlideNext:o,allowSlidePrev:a,snapGrid:c}=i,d=i.virtual&&i.params.virtual.enabled;i.allowSlideNext=!0,i.allowSlidePrev=!0,i.updateSize(),i.updateSlides(),i.updateSlidesClasses();const h=d&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&i.isEnd&&!i.isBeginning&&!i.params.centeredSlides&&!h?i.slideTo(i.slides.length-1,0,!1,!0):i.params.loop&&!d?i.slideToLoop(i.realIndex,0,!1,!0):i.slideTo(i.activeIndex,0,!1,!0),i.autoplay&&i.autoplay.running&&i.autoplay.paused&&(clearTimeout(i.autoplay.resizeTimeout),i.autoplay.resizeTimeout=setTimeout(()=>{i.autoplay&&i.autoplay.running&&i.autoplay.paused&&i.autoplay.resume()},500)),i.allowSlidePrev=a,i.allowSlideNext=o,i.params.watchOverflow&&c!==i.snapGrid&&i.checkOverflow()}function onClick(i){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&i.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(i.stopPropagation(),i.stopImmediatePropagation())))}function onScroll(){const i=this,{wrapperEl:e,rtlTranslate:s,enabled:o}=i;if(!o)return;i.previousTranslate=i.translate,i.isHorizontal()?i.translate=-e.scrollLeft:i.translate=-e.scrollTop,i.translate===0&&(i.translate=0),i.updateActiveIndex(),i.updateSlidesClasses();let a;const c=i.maxTranslate()-i.minTranslate();c===0?a=0:a=(i.translate-i.minTranslate())/c,a!==i.progress&&i.updateProgress(s?-i.translate:i.translate),i.emit("setTranslate",i.translate,!1)}function onLoad(i){const e=this;processLazyPreloader(e,i.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function onDocumentTouchStart(){const i=this;i.documentTouchHandlerProceeded||(i.documentTouchHandlerProceeded=!0,i.params.touchReleaseOnEdges&&(i.el.style.touchAction="auto"))}const events=(i,e)=>{const s=getDocument(),{params:o,el:a,wrapperEl:c,device:d}=i,h=!!o.nested,g=e==="on"?"addEventListener":"removeEventListener",j=e;!a||typeof a=="string"||(s[g]("touchstart",i.onDocumentTouchStart,{passive:!1,capture:h}),a[g]("touchstart",i.onTouchStart,{passive:!1}),a[g]("pointerdown",i.onTouchStart,{passive:!1}),s[g]("touchmove",i.onTouchMove,{passive:!1,capture:h}),s[g]("pointermove",i.onTouchMove,{passive:!1,capture:h}),s[g]("touchend",i.onTouchEnd,{passive:!0}),s[g]("pointerup",i.onTouchEnd,{passive:!0}),s[g]("pointercancel",i.onTouchEnd,{passive:!0}),s[g]("touchcancel",i.onTouchEnd,{passive:!0}),s[g]("pointerout",i.onTouchEnd,{passive:!0}),s[g]("pointerleave",i.onTouchEnd,{passive:!0}),s[g]("contextmenu",i.onTouchEnd,{passive:!0}),(o.preventClicks||o.preventClicksPropagation)&&a[g]("click",i.onClick,!0),o.cssMode&&c[g]("scroll",i.onScroll),o.updateOnWindowResize?i[j](d.ios||d.android?"resize orientationchange observerUpdate":"resize observerUpdate",onResize,!0):i[j]("observerUpdate",onResize,!0),a[g]("load",i.onLoad,{capture:!0}))};function attachEvents(){const i=this,{params:e}=i;i.onTouchStart=onTouchStart.bind(i),i.onTouchMove=onTouchMove.bind(i),i.onTouchEnd=onTouchEnd.bind(i),i.onDocumentTouchStart=onDocumentTouchStart.bind(i),e.cssMode&&(i.onScroll=onScroll.bind(i)),i.onClick=onClick.bind(i),i.onLoad=onLoad.bind(i),events(i,"on")}function detachEvents(){events(this,"off")}var events$1={attachEvents,detachEvents};const isGridEnabled=(i,e)=>i.grid&&e.grid&&e.grid.rows>1;function setBreakpoint(){const i=this,{realIndex:e,initialized:s,params:o,el:a}=i,c=o.breakpoints;if(!c||c&&Object.keys(c).length===0)return;const d=i.getBreakpoint(c,i.params.breakpointsBase,i.el);if(!d||i.currentBreakpoint===d)return;const g=(d in c?c[d]:void 0)||i.originalParams,j=isGridEnabled(i,o),$=isGridEnabled(i,g),_=i.params.grabCursor,et=g.grabCursor,tt=o.enabled;j&&!$?(a.classList.remove(`${o.containerModifierClass}grid`,`${o.containerModifierClass}grid-column`),i.emitContainerClasses()):!j&&$&&(a.classList.add(`${o.containerModifierClass}grid`),(g.grid.fill&&g.grid.fill==="column"||!g.grid.fill&&o.grid.fill==="column")&&a.classList.add(`${o.containerModifierClass}grid-column`),i.emitContainerClasses()),_&&!et?i.unsetGrabCursor():!_&&et&&i.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(lt=>{if(typeof g[lt]>"u")return;const mt=o[lt]&&o[lt].enabled,ft=g[lt]&&g[lt].enabled;mt&&!ft&&i[lt].disable(),!mt&&ft&&i[lt].enable()});const it=g.direction&&g.direction!==o.direction,ot=o.loop&&(g.slidesPerView!==o.slidesPerView||it),at=o.loop;it&&s&&i.changeDirection(),extend$1(i.params,g);const rt=i.params.enabled,st=i.params.loop;Object.assign(i,{allowTouchMove:i.params.allowTouchMove,allowSlideNext:i.params.allowSlideNext,allowSlidePrev:i.params.allowSlidePrev}),tt&&!rt?i.disable():!tt&&rt&&i.enable(),i.currentBreakpoint=d,i.emit("_beforeBreakpoint",g),s&&(ot?(i.loopDestroy(),i.loopCreate(e),i.updateSlides()):!at&&st?(i.loopCreate(e),i.updateSlides()):at&&!st&&i.loopDestroy()),i.emit("breakpoint",g)}function getBreakpoint(i,e,s){if(e===void 0&&(e="window"),!i||e==="container"&&!s)return;let o=!1;const a=getWindow(),c=e==="window"?a.innerHeight:s.clientHeight,d=Object.keys(i).map(h=>{if(typeof h=="string"&&h.indexOf("@")===0){const g=parseFloat(h.substr(1));return{value:c*g,point:h}}return{value:h,point:h}});d.sort((h,g)=>parseInt(h.value,10)-parseInt(g.value,10));for(let h=0;h<d.length;h+=1){const{point:g,value:j}=d[h];e==="window"?a.matchMedia(`(min-width: ${j}px)`).matches&&(o=g):j<=s.clientWidth&&(o=g)}return o||"max"}var breakpoints={setBreakpoint,getBreakpoint};function prepareClasses(i,e){const s=[];return i.forEach(o=>{typeof o=="object"?Object.keys(o).forEach(a=>{o[a]&&s.push(e+a)}):typeof o=="string"&&s.push(e+o)}),s}function addClasses(){const i=this,{classNames:e,params:s,rtl:o,el:a,device:c}=i,d=prepareClasses(["initialized",s.direction,{"free-mode":i.params.freeMode&&s.freeMode.enabled},{autoheight:s.autoHeight},{rtl:o},{grid:s.grid&&s.grid.rows>1},{"grid-column":s.grid&&s.grid.rows>1&&s.grid.fill==="column"},{android:c.android},{ios:c.ios},{"css-mode":s.cssMode},{centered:s.cssMode&&s.centeredSlides},{"watch-progress":s.watchSlidesProgress}],s.containerModifierClass);e.push(...d),a.classList.add(...e),i.emitContainerClasses()}function removeClasses(){const i=this,{el:e,classNames:s}=i;!e||typeof e=="string"||(e.classList.remove(...s),i.emitContainerClasses())}var classes={addClasses,removeClasses};function checkOverflow(){const i=this,{isLocked:e,params:s}=i,{slidesOffsetBefore:o}=s;if(o){const a=i.slides.length-1,c=i.slidesGrid[a]+i.slidesSizesGrid[a]+o*2;i.isLocked=i.size>c}else i.isLocked=i.snapGrid.length===1;s.allowSlideNext===!0&&(i.allowSlideNext=!i.isLocked),s.allowSlidePrev===!0&&(i.allowSlidePrev=!i.isLocked),e&&e!==i.isLocked&&(i.isEnd=!1),e!==i.isLocked&&i.emit(i.isLocked?"lock":"unlock")}var checkOverflow$1={checkOverflow},defaults={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function moduleExtendParams(i,e){return function(o){o===void 0&&(o={});const a=Object.keys(o)[0],c=o[a];if(typeof c!="object"||c===null){extend$1(e,o);return}if(i[a]===!0&&(i[a]={enabled:!0}),a==="navigation"&&i[a]&&i[a].enabled&&!i[a].prevEl&&!i[a].nextEl&&(i[a].auto=!0),["pagination","scrollbar"].indexOf(a)>=0&&i[a]&&i[a].enabled&&!i[a].el&&(i[a].auto=!0),!(a in i&&"enabled"in c)){extend$1(e,o);return}typeof i[a]=="object"&&!("enabled"in i[a])&&(i[a].enabled=!0),i[a]||(i[a]={enabled:!1}),extend$1(e,o)}}const prototypes={eventsEmitter,update,translate,transition,slide,loop,grabCursor,events:events$1,breakpoints,checkOverflow:checkOverflow$1,classes},extendedDefaults={};let Swiper$1=class ur{constructor(){let e,s;for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];a.length===1&&a[0].constructor&&Object.prototype.toString.call(a[0]).slice(8,-1)==="Object"?s=a[0]:[e,s]=a,s||(s={}),s=extend$1({},s),e&&!s.el&&(s.el=e);const d=getDocument();if(s.el&&typeof s.el=="string"&&d.querySelectorAll(s.el).length>1){const $=[];return d.querySelectorAll(s.el).forEach(_=>{const et=extend$1({},s,{el:_});$.push(new ur(et))}),$}const h=this;h.__swiper__=!0,h.support=getSupport(),h.device=getDevice({userAgent:s.userAgent}),h.browser=getBrowser(),h.eventsListeners={},h.eventsAnyListeners=[],h.modules=[...h.__modules__],s.modules&&Array.isArray(s.modules)&&h.modules.push(...s.modules);const g={};h.modules.forEach($=>{$({params:s,swiper:h,extendParams:moduleExtendParams(s,g),on:h.on.bind(h),once:h.once.bind(h),off:h.off.bind(h),emit:h.emit.bind(h)})});const j=extend$1({},defaults,g);return h.params=extend$1({},j,extendedDefaults,s),h.originalParams=extend$1({},h.params),h.passedParams=extend$1({},s),h.params&&h.params.on&&Object.keys(h.params.on).forEach($=>{h.on($,h.params.on[$])}),h.params&&h.params.onAny&&h.onAny(h.params.onAny),Object.assign(h,{enabled:h.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return h.params.direction==="horizontal"},isVertical(){return h.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:h.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:h.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),h.emit("_swiper"),h.params.init&&h.init(),h}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:s,params:o}=this,a=elementChildren(s,`.${o.slideClass}, swiper-slide`),c=elementIndex(a[0]);return elementIndex(e)-c}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(s=>s.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:s,params:o}=e;e.slides=elementChildren(s,`.${o.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,s){const o=this;e=Math.min(Math.max(e,0),1);const a=o.minTranslate(),d=(o.maxTranslate()-a)*e+a;o.translateTo(d,typeof s>"u"?0:s),o.updateActiveIndex(),o.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const s=e.el.className.split(" ").filter(o=>o.indexOf("swiper")===0||o.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",s.join(" "))}getSlideClasses(e){const s=this;return s.destroyed?"":e.className.split(" ").filter(o=>o.indexOf("swiper-slide")===0||o.indexOf(s.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const s=[];e.slides.forEach(o=>{const a=e.getSlideClasses(o);s.push({slideEl:o,classNames:a}),e.emit("_slideClass",o,a)}),e.emit("_slideClasses",s)}slidesPerViewDynamic(e,s){e===void 0&&(e="current"),s===void 0&&(s=!1);const o=this,{params:a,slides:c,slidesGrid:d,slidesSizesGrid:h,size:g,activeIndex:j}=o;let $=1;if(typeof a.slidesPerView=="number")return a.slidesPerView;if(a.centeredSlides){let _=c[j]?Math.ceil(c[j].swiperSlideSize):0,et;for(let tt=j+1;tt<c.length;tt+=1)c[tt]&&!et&&(_+=Math.ceil(c[tt].swiperSlideSize),$+=1,_>g&&(et=!0));for(let tt=j-1;tt>=0;tt-=1)c[tt]&&!et&&(_+=c[tt].swiperSlideSize,$+=1,_>g&&(et=!0))}else if(e==="current")for(let _=j+1;_<c.length;_+=1)(s?d[_]+h[_]-d[j]<g:d[_]-d[j]<g)&&($+=1);else for(let _=j-1;_>=0;_-=1)d[j]-d[_]<g&&($+=1);return $}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:s,params:o}=e;o.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(d=>{d.complete&&processLazyPreloader(e,d)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function a(){const d=e.rtlTranslate?e.translate*-1:e.translate,h=Math.min(Math.max(d,e.maxTranslate()),e.minTranslate());e.setTranslate(h),e.updateActiveIndex(),e.updateSlidesClasses()}let c;if(o.freeMode&&o.freeMode.enabled&&!o.cssMode)a(),o.autoHeight&&e.updateAutoHeight();else{if((o.slidesPerView==="auto"||o.slidesPerView>1)&&e.isEnd&&!o.centeredSlides){const d=e.virtual&&o.virtual.enabled?e.virtual.slides:e.slides;c=e.slideTo(d.length-1,0,!1,!0)}else c=e.slideTo(e.activeIndex,0,!1,!0);c||a()}o.watchOverflow&&s!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,s){s===void 0&&(s=!0);const o=this,a=o.params.direction;return e||(e=a==="horizontal"?"vertical":"horizontal"),e===a||e!=="horizontal"&&e!=="vertical"||(o.el.classList.remove(`${o.params.containerModifierClass}${a}`),o.el.classList.add(`${o.params.containerModifierClass}${e}`),o.emitContainerClasses(),o.params.direction=e,o.slides.forEach(c=>{e==="vertical"?c.style.width="":c.style.height=""}),o.emit("changeDirection"),s&&o.update()),o}changeLanguageDirection(e){const s=this;s.rtl&&e==="rtl"||!s.rtl&&e==="ltr"||(s.rtl=e==="rtl",s.rtlTranslate=s.params.direction==="horizontal"&&s.rtl,s.rtl?(s.el.classList.add(`${s.params.containerModifierClass}rtl`),s.el.dir="rtl"):(s.el.classList.remove(`${s.params.containerModifierClass}rtl`),s.el.dir="ltr"),s.update())}mount(e){const s=this;if(s.mounted)return!0;let o=e||s.params.el;if(typeof o=="string"&&(o=document.querySelector(o)),!o)return!1;o.swiper=s,o.parentNode&&o.parentNode.host&&o.parentNode.host.nodeName===s.params.swiperElementNodeName.toUpperCase()&&(s.isElement=!0);const a=()=>`.${(s.params.wrapperClass||"").trim().split(" ").join(".")}`;let d=o&&o.shadowRoot&&o.shadowRoot.querySelector?o.shadowRoot.querySelector(a()):elementChildren(o,a())[0];return!d&&s.params.createElements&&(d=createElement("div",s.params.wrapperClass),o.append(d),elementChildren(o,`.${s.params.slideClass}`).forEach(h=>{d.append(h)})),Object.assign(s,{el:o,wrapperEl:d,slidesEl:s.isElement&&!o.parentNode.host.slideSlots?o.parentNode.host:d,hostEl:s.isElement?o.parentNode.host:o,mounted:!0,rtl:o.dir.toLowerCase()==="rtl"||elementStyle(o,"direction")==="rtl",rtlTranslate:s.params.direction==="horizontal"&&(o.dir.toLowerCase()==="rtl"||elementStyle(o,"direction")==="rtl"),wrongRTL:elementStyle(d,"display")==="-webkit-box"}),!0}init(e){const s=this;if(s.initialized||s.mount(e)===!1)return s;s.emit("beforeInit"),s.params.breakpoints&&s.setBreakpoint(),s.addClasses(),s.updateSize(),s.updateSlides(),s.params.watchOverflow&&s.checkOverflow(),s.params.grabCursor&&s.enabled&&s.setGrabCursor(),s.params.loop&&s.virtual&&s.params.virtual.enabled?s.slideTo(s.params.initialSlide+s.virtual.slidesBefore,0,s.params.runCallbacksOnInit,!1,!0):s.slideTo(s.params.initialSlide,0,s.params.runCallbacksOnInit,!1,!0),s.params.loop&&s.loopCreate(),s.attachEvents();const a=[...s.el.querySelectorAll('[loading="lazy"]')];return s.isElement&&a.push(...s.hostEl.querySelectorAll('[loading="lazy"]')),a.forEach(c=>{c.complete?processLazyPreloader(s,c):c.addEventListener("load",d=>{processLazyPreloader(s,d.target)})}),preload(s),s.initialized=!0,preload(s),s.emit("init"),s.emit("afterInit"),s}destroy(e,s){e===void 0&&(e=!0),s===void 0&&(s=!0);const o=this,{params:a,el:c,wrapperEl:d,slides:h}=o;return typeof o.params>"u"||o.destroyed||(o.emit("beforeDestroy"),o.initialized=!1,o.detachEvents(),a.loop&&o.loopDestroy(),s&&(o.removeClasses(),c&&typeof c!="string"&&c.removeAttribute("style"),d&&d.removeAttribute("style"),h&&h.length&&h.forEach(g=>{g.classList.remove(a.slideVisibleClass,a.slideFullyVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass),g.removeAttribute("style"),g.removeAttribute("data-swiper-slide-index")})),o.emit("destroy"),Object.keys(o.eventsListeners).forEach(g=>{o.off(g)}),e!==!1&&(o.el&&typeof o.el!="string"&&(o.el.swiper=null),deleteProps(o)),o.destroyed=!0),null}static extendDefaults(e){extend$1(extendedDefaults,e)}static get extendedDefaults(){return extendedDefaults}static get defaults(){return defaults}static installModule(e){ur.prototype.__modules__||(ur.prototype.__modules__=[]);const s=ur.prototype.__modules__;typeof e=="function"&&s.indexOf(e)<0&&s.push(e)}static use(e){return Array.isArray(e)?(e.forEach(s=>ur.installModule(s)),ur):(ur.installModule(e),ur)}};Object.keys(prototypes).forEach(i=>{Object.keys(prototypes[i]).forEach(e=>{Swiper$1.prototype[e]=prototypes[i][e]})});Swiper$1.use([Resize,Observer]);const paramsList=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function isObject(i){return typeof i=="object"&&i!==null&&i.constructor&&Object.prototype.toString.call(i).slice(8,-1)==="Object"&&!i.__swiper__}function extend(i,e){const s=["__proto__","constructor","prototype"];Object.keys(e).filter(o=>s.indexOf(o)<0).forEach(o=>{typeof i[o]>"u"?i[o]=e[o]:isObject(e[o])&&isObject(i[o])&&Object.keys(e[o]).length>0?e[o].__swiper__?i[o]=e[o]:extend(i[o],e[o]):i[o]=e[o]})}function needsNavigation(i){return i===void 0&&(i={}),i.navigation&&typeof i.navigation.nextEl>"u"&&typeof i.navigation.prevEl>"u"}function needsPagination(i){return i===void 0&&(i={}),i.pagination&&typeof i.pagination.el>"u"}function needsScrollbar(i){return i===void 0&&(i={}),i.scrollbar&&typeof i.scrollbar.el>"u"}function uniqueClasses(i){i===void 0&&(i="");const e=i.split(" ").map(o=>o.trim()).filter(o=>!!o),s=[];return e.forEach(o=>{s.indexOf(o)<0&&s.push(o)}),s.join(" ")}function wrapperClass(i){return i===void 0&&(i=""),i?i.includes("swiper-wrapper")?i:`swiper-wrapper ${i}`:"swiper-wrapper"}function updateSwiper(i){let{swiper:e,slides:s,passedParams:o,changedParams:a,nextEl:c,prevEl:d,scrollbarEl:h,paginationEl:g}=i;const j=a.filter(ct=>ct!=="children"&&ct!=="direction"&&ct!=="wrapperClass"),{params:$,pagination:_,navigation:et,scrollbar:tt,virtual:it,thumbs:ot}=e;let at,rt,st,lt,mt,ft,gt,dt;a.includes("thumbs")&&o.thumbs&&o.thumbs.swiper&&$.thumbs&&!$.thumbs.swiper&&(at=!0),a.includes("controller")&&o.controller&&o.controller.control&&$.controller&&!$.controller.control&&(rt=!0),a.includes("pagination")&&o.pagination&&(o.pagination.el||g)&&($.pagination||$.pagination===!1)&&_&&!_.el&&(st=!0),a.includes("scrollbar")&&o.scrollbar&&(o.scrollbar.el||h)&&($.scrollbar||$.scrollbar===!1)&&tt&&!tt.el&&(lt=!0),a.includes("navigation")&&o.navigation&&(o.navigation.prevEl||d)&&(o.navigation.nextEl||c)&&($.navigation||$.navigation===!1)&&et&&!et.prevEl&&!et.nextEl&&(mt=!0);const ut=ct=>{e[ct]&&(e[ct].destroy(),ct==="navigation"?(e.isElement&&(e[ct].prevEl.remove(),e[ct].nextEl.remove()),$[ct].prevEl=void 0,$[ct].nextEl=void 0,e[ct].prevEl=void 0,e[ct].nextEl=void 0):(e.isElement&&e[ct].el.remove(),$[ct].el=void 0,e[ct].el=void 0))};a.includes("loop")&&e.isElement&&($.loop&&!o.loop?ft=!0:!$.loop&&o.loop?gt=!0:dt=!0),j.forEach(ct=>{if(isObject($[ct])&&isObject(o[ct]))Object.assign($[ct],o[ct]),(ct==="navigation"||ct==="pagination"||ct==="scrollbar")&&"enabled"in o[ct]&&!o[ct].enabled&&ut(ct);else{const _t=o[ct];(_t===!0||_t===!1)&&(ct==="navigation"||ct==="pagination"||ct==="scrollbar")?_t===!1&&ut(ct):$[ct]=o[ct]}}),j.includes("controller")&&!rt&&e.controller&&e.controller.control&&$.controller&&$.controller.control&&(e.controller.control=$.controller.control),a.includes("children")&&s&&it&&$.virtual.enabled?(it.slides=s,it.update(!0)):a.includes("virtual")&&it&&$.virtual.enabled&&(s&&(it.slides=s),it.update(!0)),a.includes("children")&&s&&$.loop&&(dt=!0),at&&ot.init()&&ot.update(!0),rt&&(e.controller.control=$.controller.control),st&&(e.isElement&&(!g||typeof g=="string")&&(g=document.createElement("div"),g.classList.add("swiper-pagination"),g.part.add("pagination"),e.el.appendChild(g)),g&&($.pagination.el=g),_.init(),_.render(),_.update()),lt&&(e.isElement&&(!h||typeof h=="string")&&(h=document.createElement("div"),h.classList.add("swiper-scrollbar"),h.part.add("scrollbar"),e.el.appendChild(h)),h&&($.scrollbar.el=h),tt.init(),tt.updateSize(),tt.setTranslate()),mt&&(e.isElement&&((!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-button-next"),c.innerHTML=e.hostEl.constructor.nextButtonSvg,c.part.add("button-next"),e.el.appendChild(c)),(!d||typeof d=="string")&&(d=document.createElement("div"),d.classList.add("swiper-button-prev"),d.innerHTML=e.hostEl.constructor.prevButtonSvg,d.part.add("button-prev"),e.el.appendChild(d))),c&&($.navigation.nextEl=c),d&&($.navigation.prevEl=d),et.init(),et.update()),a.includes("allowSlideNext")&&(e.allowSlideNext=o.allowSlideNext),a.includes("allowSlidePrev")&&(e.allowSlidePrev=o.allowSlidePrev),a.includes("direction")&&e.changeDirection(o.direction,!1),(ft||dt)&&e.loopDestroy(),(gt||dt)&&e.loopCreate(),e.update()}function getParams(i,e){i===void 0&&(i={}),e===void 0&&(e=!0);const s={on:{}},o={},a={};extend(s,defaults),s._emitClasses=!0,s.init=!1;const c={},d=paramsList.map(g=>g.replace(/_/,"")),h=Object.assign({},i);return Object.keys(h).forEach(g=>{typeof i[g]>"u"||(d.indexOf(g)>=0?isObject(i[g])?(s[g]={},a[g]={},extend(s[g],i[g]),extend(a[g],i[g])):(s[g]=i[g],a[g]=i[g]):g.search(/on[A-Z]/)===0&&typeof i[g]=="function"?e?o[`${g[2].toLowerCase()}${g.substr(3)}`]=i[g]:s.on[`${g[2].toLowerCase()}${g.substr(3)}`]=i[g]:c[g]=i[g])}),["navigation","pagination","scrollbar"].forEach(g=>{s[g]===!0&&(s[g]={}),s[g]===!1&&delete s[g]}),{params:s,passedParams:a,rest:c,events:o}}function mountSwiper(i,e){let{el:s,nextEl:o,prevEl:a,paginationEl:c,scrollbarEl:d,swiper:h}=i;needsNavigation(e)&&o&&a&&(h.params.navigation.nextEl=o,h.originalParams.navigation.nextEl=o,h.params.navigation.prevEl=a,h.originalParams.navigation.prevEl=a),needsPagination(e)&&c&&(h.params.pagination.el=c,h.originalParams.pagination.el=c),needsScrollbar(e)&&d&&(h.params.scrollbar.el=d,h.originalParams.scrollbar.el=d),h.init(s)}function getChangedParams(i,e,s,o,a){const c=[];if(!e)return c;const d=g=>{c.indexOf(g)<0&&c.push(g)};if(s&&o){const g=o.map(a),j=s.map(a);g.join("")!==j.join("")&&d("children"),o.length!==s.length&&d("children")}return paramsList.filter(g=>g[0]==="_").map(g=>g.replace(/_/,"")).forEach(g=>{if(g in i&&g in e)if(isObject(i[g])&&isObject(e[g])){const j=Object.keys(i[g]),$=Object.keys(e[g]);j.length!==$.length?d(g):(j.forEach(_=>{i[g][_]!==e[g][_]&&d(g)}),$.forEach(_=>{i[g][_]!==e[g][_]&&d(g)}))}else i[g]!==e[g]&&d(g)}),c}const updateOnVirtualData=i=>{!i||i.destroyed||!i.params.virtual||i.params.virtual&&!i.params.virtual.enabled||(i.updateSlides(),i.updateProgress(),i.updateSlidesClasses(),i.parallax&&i.params.parallax&&i.params.parallax.enabled&&i.parallax.setTranslate())};function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends.apply(this,arguments)}function isChildSwiperSlide(i){return i.type&&i.type.displayName&&i.type.displayName.includes("SwiperSlide")}function processChildren(i){const e=[];return React.Children.toArray(i).forEach(s=>{isChildSwiperSlide(s)?e.push(s):s.props&&s.props.children&&processChildren(s.props.children).forEach(o=>e.push(o))}),e}function getChildren(i){const e=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return React.Children.toArray(i).forEach(o=>{if(isChildSwiperSlide(o))e.push(o);else if(o.props&&o.props.slot&&s[o.props.slot])s[o.props.slot].push(o);else if(o.props&&o.props.children){const a=processChildren(o.props.children);a.length>0?a.forEach(c=>e.push(c)):s["container-end"].push(o)}else s["container-end"].push(o)}),{slides:e,slots:s}}function renderVirtual(i,e,s){if(!s)return null;const o=$=>{let _=$;return $<0?_=e.length+$:_>=e.length&&(_=_-e.length),_},a=i.isHorizontal()?{[i.rtlTranslate?"right":"left"]:`${s.offset}px`}:{top:`${s.offset}px`},{from:c,to:d}=s,h=i.params.loop?-e.length:0,g=i.params.loop?e.length*2:e.length,j=[];for(let $=h;$<g;$+=1)$>=c&&$<=d&&j.push(e[o($)]);return j.map(($,_)=>React.cloneElement($,{swiper:i,style:a,key:$.props.virtualIndex||$.key||`slide-${_}`}))}function useIsomorphicLayoutEffect(i,e){return typeof window>"u"?reactExports.useEffect(i,e):reactExports.useLayoutEffect(i,e)}const SwiperSlideContext=reactExports.createContext(null),SwiperContext=reactExports.createContext(null),Swiper=reactExports.forwardRef(function(i,e){let{className:s,tag:o="div",wrapperTag:a="div",children:c,onSwiper:d,...h}=i===void 0?{}:i,g=!1;const[j,$]=reactExports.useState("swiper"),[_,et]=reactExports.useState(null),[tt,it]=reactExports.useState(!1),ot=reactExports.useRef(!1),at=reactExports.useRef(null),rt=reactExports.useRef(null),st=reactExports.useRef(null),lt=reactExports.useRef(null),mt=reactExports.useRef(null),ft=reactExports.useRef(null),gt=reactExports.useRef(null),dt=reactExports.useRef(null),{params:ut,passedParams:ct,rest:_t,events:ht}=getParams(h),{slides:Et,slots:yt}=getChildren(c),Ot=()=>{it(!tt)};Object.assign(ut.on,{_containerClasses(Rt,vt){$(vt)}});const Dt=()=>{Object.assign(ut.on,ht),g=!0;const Rt={...ut};if(delete Rt.wrapperClass,rt.current=new Swiper$1(Rt),rt.current.virtual&&rt.current.params.virtual.enabled){rt.current.virtual.slides=Et;const vt={cache:!1,slides:Et,renderExternal:et,renderExternalUpdate:!1};extend(rt.current.params.virtual,vt),extend(rt.current.originalParams.virtual,vt)}};at.current||Dt(),rt.current&&rt.current.on("_beforeBreakpoint",Ot);const $t=()=>{g||!ht||!rt.current||Object.keys(ht).forEach(Rt=>{rt.current.on(Rt,ht[Rt])})},Bt=()=>{!ht||!rt.current||Object.keys(ht).forEach(Rt=>{rt.current.off(Rt,ht[Rt])})};reactExports.useEffect(()=>()=>{rt.current&&rt.current.off("_beforeBreakpoint",Ot)}),reactExports.useEffect(()=>{!ot.current&&rt.current&&(rt.current.emitSlidesClasses(),ot.current=!0)}),useIsomorphicLayoutEffect(()=>{if(e&&(e.current=at.current),!!at.current)return rt.current.destroyed&&Dt(),mountSwiper({el:at.current,nextEl:mt.current,prevEl:ft.current,paginationEl:gt.current,scrollbarEl:dt.current,swiper:rt.current},ut),d&&!rt.current.destroyed&&d(rt.current),()=>{rt.current&&!rt.current.destroyed&&rt.current.destroy(!0,!1)}},[]),useIsomorphicLayoutEffect(()=>{$t();const Rt=getChangedParams(ct,st.current,Et,lt.current,vt=>vt.key);return st.current=ct,lt.current=Et,Rt.length&&rt.current&&!rt.current.destroyed&&updateSwiper({swiper:rt.current,slides:Et,passedParams:ct,changedParams:Rt,nextEl:mt.current,prevEl:ft.current,scrollbarEl:dt.current,paginationEl:gt.current}),()=>{Bt()}}),useIsomorphicLayoutEffect(()=>{updateOnVirtualData(rt.current)},[_]);function Vt(){return ut.virtual?renderVirtual(rt.current,Et,_):Et.map((Rt,vt)=>React.cloneElement(Rt,{swiper:rt.current,swiperSlideIndex:vt}))}return React.createElement(o,_extends({ref:at,className:uniqueClasses(`${j}${s?` ${s}`:""}`)},_t),React.createElement(SwiperContext.Provider,{value:rt.current},yt["container-start"],React.createElement(a,{className:wrapperClass(ut.wrapperClass)},yt["wrapper-start"],Vt(),yt["wrapper-end"]),needsNavigation(ut)&&React.createElement(React.Fragment,null,React.createElement("div",{ref:ft,className:"swiper-button-prev"}),React.createElement("div",{ref:mt,className:"swiper-button-next"})),needsScrollbar(ut)&&React.createElement("div",{ref:dt,className:"swiper-scrollbar"}),needsPagination(ut)&&React.createElement("div",{ref:gt,className:"swiper-pagination"}),yt["container-end"]))});Swiper.displayName="Swiper";const SwiperSlide=reactExports.forwardRef(function(i,e){let{tag:s="div",children:o,className:a="",swiper:c,zoom:d,lazy:h,virtualIndex:g,swiperSlideIndex:j,...$}=i===void 0?{}:i;const _=reactExports.useRef(null),[et,tt]=reactExports.useState("swiper-slide"),[it,ot]=reactExports.useState(!1);function at(mt,ft,gt){ft===_.current&&tt(gt)}useIsomorphicLayoutEffect(()=>{if(typeof j<"u"&&(_.current.swiperSlideIndex=j),e&&(e.current=_.current),!(!_.current||!c)){if(c.destroyed){et!=="swiper-slide"&&tt("swiper-slide");return}return c.on("_slideClass",at),()=>{c&&c.off("_slideClass",at)}}}),useIsomorphicLayoutEffect(()=>{c&&_.current&&!c.destroyed&&tt(c.getSlideClasses(_.current))},[c]);const rt={isActive:et.indexOf("swiper-slide-active")>=0,isVisible:et.indexOf("swiper-slide-visible")>=0,isPrev:et.indexOf("swiper-slide-prev")>=0,isNext:et.indexOf("swiper-slide-next")>=0},st=()=>typeof o=="function"?o(rt):o,lt=()=>{ot(!0)};return React.createElement(s,_extends({ref:_,className:uniqueClasses(`${et}${a?` ${a}`:""}`),"data-swiper-slide-index":g,onLoad:lt},$),d&&React.createElement(SwiperSlideContext.Provider,{value:rt},React.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof d=="number"?d:void 0},st(),h&&!it&&React.createElement("div",{className:"swiper-lazy-preloader"}))),!d&&React.createElement(SwiperSlideContext.Provider,{value:rt},st(),h&&!it&&React.createElement("div",{className:"swiper-lazy-preloader"})))});SwiperSlide.displayName="SwiperSlide";function createElementIfNotDefined(i,e,s,o){return i.params.createElements&&Object.keys(o).forEach(a=>{if(!s[a]&&s.auto===!0){let c=elementChildren(i.el,`.${o[a]}`)[0];c||(c=createElement("div",o[a]),c.className=o[a],i.el.append(c)),s[a]=c,e[a]=c}}),s}function classesToSelector(i){return i===void 0&&(i=""),`.${i.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function Pagination(i){let{swiper:e,extendParams:s,on:o,emit:a}=i;const c="swiper-pagination";s({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:st=>st,formatFractionTotal:st=>st,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),e.pagination={el:null,bullets:[]};let d,h=0;function g(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function j(st,lt){const{bulletActiveClass:mt}=e.params.pagination;st&&(st=st[`${lt==="prev"?"previous":"next"}ElementSibling`],st&&(st.classList.add(`${mt}-${lt}`),st=st[`${lt==="prev"?"previous":"next"}ElementSibling`],st&&st.classList.add(`${mt}-${lt}-${lt}`)))}function $(st,lt,mt){if(st=st%mt,lt=lt%mt,lt===st+1)return"next";if(lt===st-1)return"previous"}function _(st){const lt=st.target.closest(classesToSelector(e.params.pagination.bulletClass));if(!lt)return;st.preventDefault();const mt=elementIndex(lt)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===mt)return;const ft=$(e.realIndex,mt,e.slides.length);ft==="next"?e.slideNext():ft==="previous"?e.slidePrev():e.slideToLoop(mt)}else e.slideTo(mt)}function et(){const st=e.rtl,lt=e.params.pagination;if(g())return;let mt=e.pagination.el;mt=makeElementsArray(mt);let ft,gt;const dt=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,ut=e.params.loop?Math.ceil(dt/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(gt=e.previousRealIndex||0,ft=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(ft=e.snapIndex,gt=e.previousSnapIndex):(gt=e.previousIndex||0,ft=e.activeIndex||0),lt.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const ct=e.pagination.bullets;let _t,ht,Et;if(lt.dynamicBullets&&(d=elementOuterSize(ct[0],e.isHorizontal()?"width":"height"),mt.forEach(yt=>{yt.style[e.isHorizontal()?"width":"height"]=`${d*(lt.dynamicMainBullets+4)}px`}),lt.dynamicMainBullets>1&&gt!==void 0&&(h+=ft-(gt||0),h>lt.dynamicMainBullets-1?h=lt.dynamicMainBullets-1:h<0&&(h=0)),_t=Math.max(ft-h,0),ht=_t+(Math.min(ct.length,lt.dynamicMainBullets)-1),Et=(ht+_t)/2),ct.forEach(yt=>{const Ot=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(Dt=>`${lt.bulletActiveClass}${Dt}`)].map(Dt=>typeof Dt=="string"&&Dt.includes(" ")?Dt.split(" "):Dt).flat();yt.classList.remove(...Ot)}),mt.length>1)ct.forEach(yt=>{const Ot=elementIndex(yt);Ot===ft?yt.classList.add(...lt.bulletActiveClass.split(" ")):e.isElement&&yt.setAttribute("part","bullet"),lt.dynamicBullets&&(Ot>=_t&&Ot<=ht&&yt.classList.add(...`${lt.bulletActiveClass}-main`.split(" ")),Ot===_t&&j(yt,"prev"),Ot===ht&&j(yt,"next"))});else{const yt=ct[ft];if(yt&&yt.classList.add(...lt.bulletActiveClass.split(" ")),e.isElement&&ct.forEach((Ot,Dt)=>{Ot.setAttribute("part",Dt===ft?"bullet-active":"bullet")}),lt.dynamicBullets){const Ot=ct[_t],Dt=ct[ht];for(let $t=_t;$t<=ht;$t+=1)ct[$t]&&ct[$t].classList.add(...`${lt.bulletActiveClass}-main`.split(" "));j(Ot,"prev"),j(Dt,"next")}}if(lt.dynamicBullets){const yt=Math.min(ct.length,lt.dynamicMainBullets+4),Ot=(d*yt-d)/2-Et*d,Dt=st?"right":"left";ct.forEach($t=>{$t.style[e.isHorizontal()?Dt:"top"]=`${Ot}px`})}}mt.forEach((ct,_t)=>{if(lt.type==="fraction"&&(ct.querySelectorAll(classesToSelector(lt.currentClass)).forEach(ht=>{ht.textContent=lt.formatFractionCurrent(ft+1)}),ct.querySelectorAll(classesToSelector(lt.totalClass)).forEach(ht=>{ht.textContent=lt.formatFractionTotal(ut)})),lt.type==="progressbar"){let ht;lt.progressbarOpposite?ht=e.isHorizontal()?"vertical":"horizontal":ht=e.isHorizontal()?"horizontal":"vertical";const Et=(ft+1)/ut;let yt=1,Ot=1;ht==="horizontal"?yt=Et:Ot=Et,ct.querySelectorAll(classesToSelector(lt.progressbarFillClass)).forEach(Dt=>{Dt.style.transform=`translate3d(0,0,0) scaleX(${yt}) scaleY(${Ot})`,Dt.style.transitionDuration=`${e.params.speed}ms`})}lt.type==="custom"&&lt.renderCustom?(ct.innerHTML=lt.renderCustom(e,ft+1,ut),_t===0&&a("paginationRender",ct)):(_t===0&&a("paginationRender",ct),a("paginationUpdate",ct)),e.params.watchOverflow&&e.enabled&&ct.classList[e.isLocked?"add":"remove"](lt.lockClass)})}function tt(){const st=e.params.pagination;if(g())return;const lt=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let mt=e.pagination.el;mt=makeElementsArray(mt);let ft="";if(st.type==="bullets"){let gt=e.params.loop?Math.ceil(lt/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&gt>lt&&(gt=lt);for(let dt=0;dt<gt;dt+=1)st.renderBullet?ft+=st.renderBullet.call(e,dt,st.bulletClass):ft+=`<${st.bulletElement} ${e.isElement?'part="bullet"':""} class="${st.bulletClass}"></${st.bulletElement}>`}st.type==="fraction"&&(st.renderFraction?ft=st.renderFraction.call(e,st.currentClass,st.totalClass):ft=`<span class="${st.currentClass}"></span> / <span class="${st.totalClass}"></span>`),st.type==="progressbar"&&(st.renderProgressbar?ft=st.renderProgressbar.call(e,st.progressbarFillClass):ft=`<span class="${st.progressbarFillClass}"></span>`),e.pagination.bullets=[],mt.forEach(gt=>{st.type!=="custom"&&(gt.innerHTML=ft||""),st.type==="bullets"&&e.pagination.bullets.push(...gt.querySelectorAll(classesToSelector(st.bulletClass)))}),st.type!=="custom"&&a("paginationRender",mt[0])}function it(){e.params.pagination=createElementIfNotDefined(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const st=e.params.pagination;if(!st.el)return;let lt;typeof st.el=="string"&&e.isElement&&(lt=e.el.querySelector(st.el)),!lt&&typeof st.el=="string"&&(lt=[...document.querySelectorAll(st.el)]),lt||(lt=st.el),!(!lt||lt.length===0)&&(e.params.uniqueNavElements&&typeof st.el=="string"&&Array.isArray(lt)&&lt.length>1&&(lt=[...e.el.querySelectorAll(st.el)],lt.length>1&&(lt=lt.filter(mt=>elementParents(mt,".swiper")[0]===e.el)[0])),Array.isArray(lt)&&lt.length===1&&(lt=lt[0]),Object.assign(e.pagination,{el:lt}),lt=makeElementsArray(lt),lt.forEach(mt=>{st.type==="bullets"&&st.clickable&&mt.classList.add(...(st.clickableClass||"").split(" ")),mt.classList.add(st.modifierClass+st.type),mt.classList.add(e.isHorizontal()?st.horizontalClass:st.verticalClass),st.type==="bullets"&&st.dynamicBullets&&(mt.classList.add(`${st.modifierClass}${st.type}-dynamic`),h=0,st.dynamicMainBullets<1&&(st.dynamicMainBullets=1)),st.type==="progressbar"&&st.progressbarOpposite&&mt.classList.add(st.progressbarOppositeClass),st.clickable&&mt.addEventListener("click",_),e.enabled||mt.classList.add(st.lockClass)}))}function ot(){const st=e.params.pagination;if(g())return;let lt=e.pagination.el;lt&&(lt=makeElementsArray(lt),lt.forEach(mt=>{mt.classList.remove(st.hiddenClass),mt.classList.remove(st.modifierClass+st.type),mt.classList.remove(e.isHorizontal()?st.horizontalClass:st.verticalClass),st.clickable&&(mt.classList.remove(...(st.clickableClass||"").split(" ")),mt.removeEventListener("click",_))})),e.pagination.bullets&&e.pagination.bullets.forEach(mt=>mt.classList.remove(...st.bulletActiveClass.split(" ")))}o("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const st=e.params.pagination;let{el:lt}=e.pagination;lt=makeElementsArray(lt),lt.forEach(mt=>{mt.classList.remove(st.horizontalClass,st.verticalClass),mt.classList.add(e.isHorizontal()?st.horizontalClass:st.verticalClass)})}),o("init",()=>{e.params.pagination.enabled===!1?rt():(it(),tt(),et())}),o("activeIndexChange",()=>{typeof e.snapIndex>"u"&&et()}),o("snapIndexChange",()=>{et()}),o("snapGridLengthChange",()=>{tt(),et()}),o("destroy",()=>{ot()}),o("enable disable",()=>{let{el:st}=e.pagination;st&&(st=makeElementsArray(st),st.forEach(lt=>lt.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),o("lock unlock",()=>{et()}),o("click",(st,lt)=>{const mt=lt.target,ft=makeElementsArray(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&ft&&ft.length>0&&!mt.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&mt===e.navigation.nextEl||e.navigation.prevEl&&mt===e.navigation.prevEl))return;const gt=ft[0].classList.contains(e.params.pagination.hiddenClass);a(gt===!0?"paginationShow":"paginationHide"),ft.forEach(dt=>dt.classList.toggle(e.params.pagination.hiddenClass))}});const at=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:st}=e.pagination;st&&(st=makeElementsArray(st),st.forEach(lt=>lt.classList.remove(e.params.pagination.paginationDisabledClass))),it(),tt(),et()},rt=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:st}=e.pagination;st&&(st=makeElementsArray(st),st.forEach(lt=>lt.classList.add(e.params.pagination.paginationDisabledClass))),ot()};Object.assign(e.pagination,{enable:at,disable:rt,render:tt,update:et,init:it,destroy:ot})}function Autoplay(i){let{swiper:e,extendParams:s,on:o,emit:a,params:c}=i;e.autoplay={running:!1,paused:!1,timeLeft:0},s({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let d,h,g=c&&c.autoplay?c.autoplay.delay:3e3,j=c&&c.autoplay?c.autoplay.delay:3e3,$,_=new Date().getTime(),et,tt,it,ot,at,rt,st;function lt(Vt){!e||e.destroyed||!e.wrapperEl||Vt.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",lt),!(st||Vt.detail&&Vt.detail.bySwiperTouchMove)&&_t())}const mt=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?et=!0:et&&(j=$,et=!1);const Vt=e.autoplay.paused?$:_+j-new Date().getTime();e.autoplay.timeLeft=Vt,a("autoplayTimeLeft",Vt,Vt/g),h=requestAnimationFrame(()=>{mt()})},ft=()=>{let Vt;return e.virtual&&e.params.virtual.enabled?Vt=e.slides.filter(vt=>vt.classList.contains("swiper-slide-active"))[0]:Vt=e.slides[e.activeIndex],Vt?parseInt(Vt.getAttribute("data-swiper-autoplay"),10):void 0},gt=Vt=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(h),mt();let Rt=typeof Vt>"u"?e.params.autoplay.delay:Vt;g=e.params.autoplay.delay,j=e.params.autoplay.delay;const vt=ft();!Number.isNaN(vt)&&vt>0&&typeof Vt>"u"&&(Rt=vt,g=vt,j=vt),$=Rt;const St=e.params.speed,Pt=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(St,!0,!0),a("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,St,!0,!0),a("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(St,!0,!0),a("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,St,!0,!0),a("autoplay")),e.params.cssMode&&(_=new Date().getTime(),requestAnimationFrame(()=>{gt()})))};return Rt>0?(clearTimeout(d),d=setTimeout(()=>{Pt()},Rt)):requestAnimationFrame(()=>{Pt()}),Rt},dt=()=>{_=new Date().getTime(),e.autoplay.running=!0,gt(),a("autoplayStart")},ut=()=>{e.autoplay.running=!1,clearTimeout(d),cancelAnimationFrame(h),a("autoplayStop")},ct=(Vt,Rt)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(d),Vt||(rt=!0);const vt=()=>{a("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",lt):_t()};if(e.autoplay.paused=!0,Rt){at&&($=e.params.autoplay.delay),at=!1,vt();return}$=($||e.params.autoplay.delay)-(new Date().getTime()-_),!(e.isEnd&&$<0&&!e.params.loop)&&($<0&&($=0),vt())},_t=()=>{e.isEnd&&$<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(_=new Date().getTime(),rt?(rt=!1,gt($)):gt(),e.autoplay.paused=!1,a("autoplayResume"))},ht=()=>{if(e.destroyed||!e.autoplay.running)return;const Vt=getDocument();Vt.visibilityState==="hidden"&&(rt=!0,ct(!0)),Vt.visibilityState==="visible"&&_t()},Et=Vt=>{Vt.pointerType==="mouse"&&(rt=!0,st=!0,!(e.animating||e.autoplay.paused)&&ct(!0))},yt=Vt=>{Vt.pointerType==="mouse"&&(st=!1,e.autoplay.paused&&_t())},Ot=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",Et),e.el.addEventListener("pointerleave",yt))},Dt=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",Et),e.el.removeEventListener("pointerleave",yt))},$t=()=>{getDocument().addEventListener("visibilitychange",ht)},Bt=()=>{getDocument().removeEventListener("visibilitychange",ht)};o("init",()=>{e.params.autoplay.enabled&&(Ot(),$t(),dt())}),o("destroy",()=>{Dt(),Bt(),e.autoplay.running&&ut()}),o("_freeModeStaticRelease",()=>{(it||rt)&&_t()}),o("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?ut():ct(!0,!0)}),o("beforeTransitionStart",(Vt,Rt,vt)=>{e.destroyed||!e.autoplay.running||(vt||!e.params.autoplay.disableOnInteraction?ct(!0,!0):ut())}),o("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){ut();return}tt=!0,it=!1,rt=!1,ot=setTimeout(()=>{rt=!0,it=!0,ct(!0)},200)}}),o("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!tt)){if(clearTimeout(ot),clearTimeout(d),e.params.autoplay.disableOnInteraction){it=!1,tt=!1;return}it&&e.params.cssMode&&_t(),it=!1,tt=!1}}),o("slideChange",()=>{e.destroyed||!e.autoplay.running||(at=!0)}),Object.assign(e.autoplay,{start:dt,stop:ut,pause:ct,resume:_t})}function effectInit(i){const{effect:e,swiper:s,on:o,setTranslate:a,setTransition:c,overwriteParams:d,perspective:h,recreateShadows:g,getEffectParams:j}=i;o("beforeInit",()=>{if(s.params.effect!==e)return;s.classNames.push(`${s.params.containerModifierClass}${e}`),h&&h()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const _=d?d():{};Object.assign(s.params,_),Object.assign(s.originalParams,_)}),o("setTranslate",()=>{s.params.effect===e&&a()}),o("setTransition",(_,et)=>{s.params.effect===e&&c(et)}),o("transitionEnd",()=>{if(s.params.effect===e&&g){if(!j||!j().slideShadows)return;s.slides.forEach(_=>{_.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(et=>et.remove())}),g()}});let $;o("virtualUpdate",()=>{s.params.effect===e&&(s.slides.length||($=!0),requestAnimationFrame(()=>{$&&s.slides&&s.slides.length&&(a(),$=!1)}))})}function effectTarget(i,e){const s=getSlideTransformEl(e);return s!==e&&(s.style.backfaceVisibility="hidden",s.style["-webkit-backface-visibility"]="hidden"),s}function effectVirtualTransitionEnd(i){let{swiper:e,duration:s,transformElements:o,allSlides:a}=i;const{activeIndex:c}=e,d=h=>h.parentElement?h.parentElement:e.slides.filter(j=>j.shadowRoot&&j.shadowRoot===h.parentNode)[0];if(e.params.virtualTranslate&&s!==0){let h=!1,g;a?g=o:g=o.filter(j=>{const $=j.classList.contains("swiper-slide-transform")?d(j):j;return e.getSlideIndex($)===c}),g.forEach(j=>{elementTransitionEnd(j,()=>{if(h||!e||e.destroyed)return;h=!0,e.animating=!1;const $=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent($)})})}}function createShadow(i,e,s){const o=`swiper-slide-shadow${` swiper-slide-shadow-${i}`}`,a=getSlideTransformEl(e);let c=a.querySelector(`.${o.split(" ").join(".")}`);return c||(c=createElement("div",o.split(" ")),a.append(c)),c}function EffectCards(i){let{swiper:e,extendParams:s,on:o}=i;s({cardsEffect:{slideShadows:!0,rotate:!0,perSlideRotate:2,perSlideOffset:8}}),effectInit({effect:"cards",swiper:e,on:o,setTranslate:()=>{const{slides:d,activeIndex:h,rtlTranslate:g}=e,j=e.params.cardsEffect,{startTranslate:$,isTouched:_}=e.touchEventsData,et=g?-e.translate:e.translate;for(let tt=0;tt<d.length;tt+=1){const it=d[tt],ot=it.progress,at=Math.min(Math.max(ot,-4),4);let rt=it.swiperSlideOffset;e.params.centeredSlides&&!e.params.cssMode&&(e.wrapperEl.style.transform=`translateX(${e.minTranslate()}px)`),e.params.centeredSlides&&e.params.cssMode&&(rt-=d[0].swiperSlideOffset);let st=e.params.cssMode?-rt-e.translate:-rt,lt=0;const mt=-100*Math.abs(at);let ft=1,gt=-j.perSlideRotate*at,dt=j.perSlideOffset-Math.abs(at)*.75;const ut=e.virtual&&e.params.virtual.enabled?e.virtual.from+tt:tt,ct=(ut===h||ut===h-1)&&at>0&&at<1&&(_||e.params.cssMode)&&et<$,_t=(ut===h||ut===h+1)&&at<0&&at>-1&&(_||e.params.cssMode)&&et>$;if(ct||_t){const Ot=(1-Math.abs((Math.abs(at)-.5)/.5))**.5;gt+=-28*at*Ot,ft+=-.5*Ot,dt+=96*Ot,lt=`${-25*Ot*Math.abs(at)}%`}if(at<0?st=`calc(${st}px ${g?"-":"+"} (${dt*Math.abs(at)}%))`:at>0?st=`calc(${st}px ${g?"-":"+"} (-${dt*Math.abs(at)}%))`:st=`${st}px`,!e.isHorizontal()){const Ot=lt;lt=st,st=Ot}const ht=at<0?`${1+(1-ft)*at}`:`${1-(1-ft)*at}`,Et=`
        translate3d(${st}, ${lt}, ${mt}px)
        rotateZ(${j.rotate?g?-gt:gt:0}deg)
        scale(${ht})
      `;if(j.slideShadows){let Ot=it.querySelector(".swiper-slide-shadow");Ot||(Ot=createShadow("cards",it)),Ot&&(Ot.style.opacity=Math.min(Math.max((Math.abs(at)-.5)/.5,0),1))}it.style.zIndex=-Math.abs(Math.round(ot))+d.length;const yt=effectTarget(j,it);yt.style.transform=Et}},setTransition:d=>{const h=e.slides.map(g=>getSlideTransformEl(g));h.forEach(g=>{g.style.transitionDuration=`${d}ms`,g.querySelectorAll(".swiper-slide-shadow").forEach(j=>{j.style.transitionDuration=`${d}ms`})}),effectVirtualTransitionEnd({swiper:e,duration:d,transformElements:h})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0,virtualTranslate:!e.params.cssMode})})}const slides=[{id:1,image:"https://raw.githubusercontent.com/samora254/Kitabu/main/Landing%20page-1.png"},{id:2,image:"https://raw.githubusercontent.com/samora254/Kitabu/main/Landing%20page-2.png"},{id:3,image:"https://raw.githubusercontent.com/samora254/Kitabu/main/Landing%20page-3.png"}],Landing=()=>{const i=useNavigate(),e=reactExports.useRef(null),s=()=>{i("/signup")},o=()=>{e.current&&e.current.slideNext()};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-500 via-orange-400 to-orange-300",children:jsxRuntimeExports.jsx("div",{className:"relative h-screen max-w-md mx-auto flex flex-col",children:jsxRuntimeExports.jsx(Swiper,{modules:[Pagination,Autoplay],pagination:{clickable:!0},autoplay:{delay:5e3},loop:!0,className:"h-full w-full",onSwiper:a=>{e.current=a},children:slides.map(a=>jsxRuntimeExports.jsx(SwiperSlide,{children:jsxRuntimeExports.jsxs("div",{onClick:o,className:"relative w-full h-full flex flex-col items-center justify-center cursor-pointer",children:[jsxRuntimeExports.jsx("img",{src:a.image,alt:`Slide ${a.id}`,className:"w-full h-full object-cover",loading:"lazy"}),a.id===3&&jsxRuntimeExports.jsx("div",{className:"absolute bottom-24 left-0 right-0 flex flex-col items-center space-y-4 px-4",children:jsxRuntimeExports.jsx("button",{onClick:s,className:"w-full max-w-xs bg-black text-white py-4 rounded-lg font-medium hover:bg-gray-900 transition-colors shadow-lg",children:"Start Learning Now"})})]})},a.id))})})})},TopicNavigation=({currentTopic:i,totalTopics:e,topicTitle:s,onPrevious:o,onNext:a})=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:o,disabled:i===1,className:"p-3 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Previous topic",children:jsxRuntimeExports.jsx(Arrow,{direction:"left",className:"text-gray-700"})}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold",children:["Topic ",i," of ",e]}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-600",children:s})]},i),jsxRuntimeExports.jsx("button",{onClick:a,disabled:i===e,className:"p-3 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Next topic",children:jsxRuntimeExports.jsx(Arrow,{direction:"right",className:"text-gray-700"})})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 h-2 rounded-full",children:jsxRuntimeExports.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${i/e*100}%`}})})]}),GradeContext=reactExports.createContext(void 0);function GradeProvider({children:i}){const e={selectedGrade:8};return jsxRuntimeExports.jsx(GradeContext.Provider,{value:e,children:i})}function useGrade(){const i=reactExports.useContext(GradeContext);if(i===void 0)throw new Error("useGrade must be used within a GradeProvider");return i}const grade8Mathematics=[{id:"numbers-and-counting",title:"Numbers and Counting",description:"Understanding and working with numbers up to 10,000,000",gradeLevel:8,learningObjectives:["Count and identify numbers up to 10,000,000","Order numbers in ascending and descending order","Understand place value up to ten-millions","Compare and order large numbers using symbols","Identify prime and composite numbers"],subtopics:[{id:"counting-objects",title:"Counting Objects",content:"Learn to count and work with numbers up to 10,000,000.",examples:["Counting by ones, tens, hundreds, thousands","Skip counting patterns","Number sequences to 10,000,000"],exercises:[{id:"count-1",question:"What is the value of 7 in 7,564,321?",options:["7","70","700","7,000,000"],correctAnswer:3,explanation:"In 7,564,321, the 7 is in the millions place, so its value is 7,000,000.",difficulty:"medium"}]},{id:"prime-numbers",title:"Prime and Composite Numbers",content:"Understanding prime and composite numbers.",examples:["Identifying prime numbers","Finding factors","Understanding multiples"],exercises:[{id:"prime-1",question:"Which number is prime?",options:["15","21","23","25"],correctAnswer:2,explanation:"23 is prime because its only factors are 1 and itself.",difficulty:"medium"}]}]},{id:"algebra-and-patterns",title:"Algebra and Patterns",description:"Advanced algebraic concepts and pattern recognition",gradeLevel:8,learningObjectives:["Identify and create complex number patterns","Use algebraic expressions and equations","Solve equations with variables","Understand and solve inequalities"],subtopics:[{id:"algebraic-expressions",title:"Algebraic Expressions",content:"Working with variables and expressions.",examples:["Simplifying expressions","Solving equations","Understanding inequalities"],exercises:[{id:"algebra-1",question:"Solve for x: 3x + 7 = 22",options:["3","5","7","15"],correctAnswer:1,explanation:"Subtract 7 from both sides: 3x = 15, then divide by 3: x = 5",difficulty:"medium"}]}]},{id:"geometry-and-trigonometry",title:"Geometry and Trigonometry",description:"Advanced geometric concepts and basic trigonometry",gradeLevel:8,learningObjectives:["Understand complex geometric shapes and their properties","Apply Pythagoras theorem","Learn basic trigonometric ratios","Solve geometric problems"],subtopics:[{id:"trigonometry",title:"Basic Trigonometry",content:"Introduction to trigonometric concepts.",examples:["Sine, cosine, tangent","Right-angled triangles","Angle measurements"],exercises:[{id:"trig-1",question:"In a right triangle, what is the sine of an angle?",options:["Adjacent/Hypotenuse","Opposite/Adjacent","Opposite/Hypotenuse","Hypotenuse/Adjacent"],correctAnswer:2,explanation:"The sine of an angle is the ratio of the opposite side to the hypotenuse.",difficulty:"medium"}]}]}],grade8English=[{id:"listening-and-speaking",title:"Listening and Speaking",description:"Advanced communication skills and public speaking",gradeLevel:8,learningObjectives:["Master complex listening comprehension","Develop confident public speaking skills","Participate effectively in debates","Build advanced vocabulary"],subtopics:[{id:"active-listening",title:"Active Listening",content:"Developing advanced listening skills and response techniques.",examples:["Note-taking during lectures","Summarizing spoken content","Responding to complex instructions"],exercises:[{id:"listen-1",question:"What is the most effective way to show active listening?",options:["Interrupting frequently","Making eye contact and nodding","Looking away","Talking over others"],correctAnswer:1,explanation:"Making eye contact and nodding shows engagement and understanding while listening.",difficulty:"medium"}]},{id:"public-speaking",title:"Public Speaking",content:"Mastering presentation and speech delivery.",examples:["Formal presentations","Impromptu speeches","Debate techniques"],exercises:[{id:"speak-1",question:"What is the most important aspect of a persuasive speech?",options:["Speaking quickly","Using complex words","Clear arguments with evidence","Being loud"],correctAnswer:2,explanation:"A persuasive speech needs clear arguments supported by evidence to convince the audience.",difficulty:"medium"}]}]},{id:"reading-and-comprehension",title:"Reading and Comprehension",description:"Advanced reading analysis and critical thinking",gradeLevel:8,learningObjectives:["Analyze complex texts critically","Make advanced inferences","Evaluate multiple perspectives","Master reading techniques"],subtopics:[{id:"critical-reading",title:"Critical Reading",content:"Advanced text analysis and evaluation.",examples:["Identifying author bias","Analyzing text structure","Evaluating arguments"],exercises:[{id:"read-1",question:"What indicates potential bias in a text?",options:["Clear headings","Emotional language","Proper punctuation","Page numbers"],correctAnswer:1,explanation:"Emotional language often indicates bias as it attempts to influence readers' feelings rather than present objective facts.",difficulty:"medium"}]}]},{id:"writing-and-composition",title:"Writing and Composition",description:"Advanced writing techniques and styles",gradeLevel:8,learningObjectives:["Master various writing styles","Develop strong arguments","Create compelling narratives","Perfect technical writing"],subtopics:[{id:"advanced-writing",title:"Advanced Writing Techniques",content:"Mastering different writing styles and purposes.",examples:["Argumentative essays","Research papers","Creative writing"],exercises:[{id:"write-1",question:"What makes an effective thesis statement?",options:["Being very long","Clear, specific argument","Using many adjectives","Being very general"],correctAnswer:1,explanation:"An effective thesis statement presents a clear, specific argument that guides the entire paper.",difficulty:"medium"}]}]}],grade8Kiswahili=[{id:"kusoma-na-kuandika",title:"Kusoma na Kuandika",description:"Kujifunza kusoma na kuandika kwa ufasaha zaidi",gradeLevel:8,learningObjectives:["Kutambua na kutumia herufi na sauti za Kiswahili kwa usahihi","Kusoma na kuandika maneno na misemo mbalimbali","Kutunga sentensi tata na kupanua msamiati","Kuandika hadithi fupi na maelezo"],subtopics:[{id:"utambuzi-wa-herufi",title:"Utambuzi wa Herufi na Sauti",content:"Kujifunza kutumia herufi, sauti, na alama za kiimla kwa usahihi.",examples:["Matumizi ya herufi na sauti","Silabi na maneno","Alama za uandishi"],exercises:[{id:"herufi-1",question:`Ni herufi gani inayotumika kuandika sauti ya "ng'?"`,options:["ng","ng'","n","g"],correctAnswer:1,explanation:`Sauti ya "ng'" inaandikwa kwa herufi "ng'" na alama ya mkato.`,difficulty:"medium"}]}]},{id:"kusikiliza-na-kuzungumza",title:"Kusikiliza na Kuzungumza",description:"Kuimarisha stadi za mawasiliano ya mdomo",gradeLevel:8,learningObjectives:["Kushiriki katika mazungumzo tata","Kusikiliza na kusimulia hadithi ndefu","Kuboresha matamshi na lafudhi","Kushiriki katika majadiliano"],subtopics:[{id:"mawasiliano",title:"Mawasiliano ya Kwanza",content:"Kujifunza kushiriki katika mazungumzo tata.",examples:["Mazungumzo rasmi","Majadiliano ya kikundi","Hotuba na maelezo"],exercises:[{id:"mazungumzo-1",question:"Ni njia ipi bora ya kuanza hotuba rasmi?",options:["Jambo","Mheshimiwa Mwenyekiti...","Habari yako","Mambo"],correctAnswer:1,explanation:"Hotuba rasmi huanza kwa kutaja cheo cha mgeni rasmi.",difficulty:"medium"}]}]},{id:"sarufi",title:"Sarufi",description:"Kujifunza kanuni za lugha ya Kiswahili",gradeLevel:8,learningObjectives:["Kutumia majina katika hali mbalimbali","Kutumia vitenzi katika nyakati tofauti","Kutumia vivumishi na viunganishi","Kuimarisha matumizi ya lugha"],subtopics:[{id:"neno-jina",title:"Neno Jina",content:"Kujifunza matumizi ya majina katika hali mbalimbali.",examples:["Ngeli za majina","Umoja na wingi","Majina ya milki"],exercises:[{id:"majina-1",question:'Ni ngeli ipi sahihi ya neno "mtu"?',options:["KI-VI","M-WA","M-MI","JI-MA"],correctAnswer:1,explanation:'Neno "mtu" liko katika ngeli ya M-WA (mtu-watu).',difficulty:"medium"}]}]}],grade8Science=[{id:"living-and-non-living-things",title:"Living and Non-Living Things",description:"Understanding characteristics and classifications of living things",gradeLevel:8,learningObjectives:["Identify detailed characteristics of living and non-living things","Classify living things into plants and animals","Explore habitats and ecosystems","Understand life cycles and interactions","Study endangered species and conservation"],subtopics:[{id:"characteristics",title:"Sifa za Vito na Vivyo Vivu",content:"Detailed study of characteristics distinguishing living from non-living things.",examples:["Growth and reproduction","Response to environment","Need for food and water"],exercises:[{id:"living-1",question:"Which characteristic is unique to living things?",options:["Takes up space","Has color","Reproduces","Has shape"],correctAnswer:2,explanation:"Only living things can reproduce and create offspring.",difficulty:"medium"}]},{id:"ecosystems",title:"Mazingira ya Vito",content:"Understanding different habitats and ecosystem interactions.",examples:["Food chains and webs","Predator-prey relationships","Symbiotic relationships"],exercises:[{id:"eco-1",question:"What type of relationship exists when two species benefit from each other?",options:["Predation","Competition","Mutualism","Parasitism"],correctAnswer:2,explanation:"Mutualism is a relationship where both species benefit from the interaction.",difficulty:"medium"}]}]},{id:"biotechnology-and-genetics",title:"Biotechnology and Genetic Engineering",description:"Understanding modern biological technologies and their applications",gradeLevel:8,learningObjectives:["Understand basics of biotechnology","Learn about genetic engineering","Explore biotechnology applications","Study ethical implications"],subtopics:[{id:"genetic-engineering",title:"Ubunifu wa Kijeni",content:"Introduction to genetic engineering and its applications.",examples:["DNA structure","Genetic modification","Medical applications"],exercises:[{id:"biotech-1",question:"Which is an application of genetic engineering in agriculture?",options:["Building fences","Creating disease-resistant crops","Painting barns","Making fertilizer"],correctAnswer:1,explanation:"Genetic engineering is used to create crops that are resistant to diseases.",difficulty:"medium"}]}]},{id:"earth-and-space",title:"Earth and Space Sciences",description:"Understanding Earth structure and space concepts",gradeLevel:8,learningObjectives:["Learn about Earth's structure","Understand the solar system","Study natural disasters","Explore space technology"],subtopics:[{id:"earth-structure",title:"Mazingira ya Dunia",content:"Understanding Earth's layers and structure.",examples:["Core and mantle","Tectonic plates","Volcanic activity"],exercises:[{id:"earth-1",question:"What causes earthquakes?",options:["Wind","Rain","Tectonic plate movement","Temperature"],correctAnswer:2,explanation:"Earthquakes are caused by the movement and collision of tectonic plates.",difficulty:"medium"}]}]}],grade8Social=[{id:"family-and-community",title:"Family and Community",description:"Understanding family structures and community dynamics",gradeLevel:8,learningObjectives:["Explore diverse family structures and dynamics","Understand roles and responsibilities within families","Learn about community helpers and institutions","Study family challenges and solutions"],subtopics:[{id:"aina-za-familia",title:"Aina za Familia",content:"Exploring diverse family structures and dynamics.",examples:["Extended family systems","Family diversity","Family relationships"],exercises:[{id:"family-1",question:"What is the main benefit of extended family systems?",options:["Less responsibility","More support and resources","Fewer rules","Smaller homes"],correctAnswer:1,explanation:"Extended family systems provide more support and resources through shared responsibilities and mutual assistance.",difficulty:"medium"}]}]},{id:"government-and-leadership",title:"Government and Leadership",description:"Understanding government systems and leadership principles",gradeLevel:8,learningObjectives:["Learn about different forms of government","Understand government branches and functions","Study leadership qualities","Explore democratic principles"],subtopics:[{id:"nadharia-za-serikali",title:"Nadharia za Serikali",content:"Understanding different forms of government and their functions.",examples:["Democracy","Monarchy","Presidential system"],exercises:[{id:"govt-1",question:"What are the three branches of government in Kenya?",options:["Executive, Legislative, Judiciary","President, Parliament, Police","County, National, Local","Ministers, MPs, Judges"],correctAnswer:0,explanation:"Kenya's government has three branches: Executive (implements laws), Legislative (makes laws), and Judiciary (interprets laws).",difficulty:"medium"}]}]},{id:"economics-and-livelihoods",title:"Economics and Livelihoods",description:"Understanding economic concepts and financial literacy",gradeLevel:8,learningObjectives:["Learn basic economic concepts","Understand business and entrepreneurship","Study local and international trade","Explore sustainable economics"],subtopics:[{id:"misingi-ya-uchumi",title:"Misingi ya Uchumi",content:"Understanding basic economic concepts and principles.",examples:["Supply and demand","Market systems","Financial literacy"],exercises:[{id:"econ-1",question:"What is the basic principle of supply and demand?",options:["More supply increases prices","When demand increases and supply stays the same, prices tend to rise","Prices never change","Supply has no effect on prices"],correctAnswer:1,explanation:"When demand increases while supply remains constant, prices typically rise due to increased competition for limited resources.",difficulty:"medium"}]}]}],subjects$1={mathematics:{id:"mathematics",name:"Mathematics",description:"Advanced mathematics concepts and problem-solving",icon:"",color:"bg-red-500",topics:{8:grade8Mathematics}},english:{id:"english",name:"English",description:"Advanced English language and literature",icon:"",color:"bg-blue-500",topics:{8:grade8English}},kiswahili:{id:"kiswahili",name:"Kiswahili",description:"Advanced Kiswahili language and literature",icon:"",color:"bg-green-500",topics:{8:grade8Kiswahili}},science:{id:"science",name:"Science",description:"Advanced scientific concepts and experimentation",icon:"",color:"bg-purple-500",topics:{8:grade8Science}},social:{id:"social",name:"Social Studies",description:"Advanced social studies and citizenship",icon:"",color:"bg-yellow-500",topics:{8:grade8Social}}},getSubject=i=>subjects$1[i],getSubjectTopics=(i,e)=>{var s;return((s=subjects$1[i])==null?void 0:s.topics[e])||[]};function validateGrade(i){return i===8}function getSubjectContent(i,e){if(!validateGrade(i)||!e)return null;try{const s=getSubject(e);if(!s)return null;const o=getSubjectTopics(e,i);return{subject:s,topics:o,facts:[],quizzes:[]}}catch(s){return console.error("Error getting subject content:",s),null}}function useSubjectContent(i,e){const[s,o]=reactExports.useState(null),[a,c]=reactExports.useState(!0),[d,h]=reactExports.useState(null);return reactExports.useEffect(()=>{i&&e&&(async()=>{try{c(!0),h(null);const j=getSubjectContent(i,e);o(j)}catch(j){console.error("Error loading subject content:",j),h("Failed to load subject content")}finally{c(!1)}})()},[i,e]),{content:s,loading:a,error:d}}const LoadingSpinner=()=>jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-emerald-500 border-t-transparent"})}),ErrorMessage=({message:i,onRetry:e,onBack:s})=>jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("p",{className:"text-red-500 mb-4",children:i}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center",children:[e&&jsxRuntimeExports.jsx("button",{onClick:e,className:"bg-emerald-500 text-white px-4 py-2 rounded hover:bg-emerald-600 transition-colors",children:"Try Again"}),s&&jsxRuntimeExports.jsx("button",{onClick:s,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors",children:"Go Back"})]})]})}),Subject=()=>{const{subjectId:i}=useParams(),e=useNavigate(),{selectedGrade:s}=useGrade(),{content:o,loading:a,error:c}=useSubjectContent(s,i||""),[d,h]=reactExports.useState(0),g=()=>{e(`/brain-tease/${i}`)},j=()=>{e(`/quiz/${i}`)},$=()=>{var at;(at=o==null?void 0:o.topics)!=null&&at[d]&&e(`/learning/${i}/${o.topics[d].id}`)},_=()=>{e("/home")},et=()=>{o!=null&&o.topics&&d<o.topics.length-1&&h(at=>at+1)},tt=()=>{d>0&&h(at=>at-1)};if(a)return jsxRuntimeExports.jsx(LoadingSpinner,{});if(c||!o)return jsxRuntimeExports.jsx(ErrorMessage,{message:c||"Failed to load subject content"});const{subject:it,topics:ot}=o;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"bg-emerald-400 text-white p-6 relative",children:[jsxRuntimeExports.jsx("button",{onClick:_,className:"absolute top-6 left-4 text-white hover:text-gray-200 transition-colors","aria-label":"Back to Dashboard",children:""}),jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Grade ",s]}),jsxRuntimeExports.jsx("p",{className:"capitalize",children:it.name})]})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto p-4",children:[ot&&ot.length>0&&jsxRuntimeExports.jsx(TopicNavigation,{currentTopic:d+1,totalTopics:ot.length,topicTitle:ot[d].title,onPrevious:tt,onNext:et}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold",children:"Brain Tease"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"Warm up your mind with quick exercises"})]}),jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center text-2xl",children:""})]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"w-full bg-emerald-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-emerald-600 transition-colors",children:"Start Challenge"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold",children:"Let's Learn"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"Master the concepts with interactive lessons"})]}),jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center text-2xl",children:""})]}),jsxRuntimeExports.jsx("button",{onClick:$,className:"w-full bg-blue-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Start Learning"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold",children:"Take Quiz"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-sm",children:"Check your understanding with a quiz"})]}),jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""})]}),jsxRuntimeExports.jsx("button",{onClick:j,className:"w-full bg-purple-500 text-white py-3 px-4 rounded-lg font-medium hover:bg-purple-600 transition-colors",children:"Take Quiz"})]})]})]})]})};var module={};(function i(e,s,o,a){var c=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",h=function(){if(!e.OffscreenCanvas)return!1;var vt=new OffscreenCanvas(1,1),St=vt.getContext("2d");St.fillRect(0,0,1,1);var Pt=vt.transferToImageBitmap();try{St.createPattern(Pt,"no-repeat")}catch{return!1}return!0}();function g(){}function j(vt){var St=s.exports.Promise,Pt=St!==void 0?St:e.Promise;return typeof Pt=="function"?new Pt(vt):(vt(g,g),null)}var $=function(vt,St){return{transform:function(Pt){if(vt)return Pt;if(St.has(Pt))return St.get(Pt);var pt=new OffscreenCanvas(Pt.width,Pt.height),bt=pt.getContext("2d");return bt.drawImage(Pt,0,0),St.set(Pt,pt),pt},clear:function(){St.clear()}}}(h,new Map),_=function(){var vt=Math.floor(16.666666666666668),St,Pt,pt={},bt=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(St=function(Tt){var Ct=Math.random();return pt[Ct]=requestAnimationFrame(function kt(Mt){bt===Mt||bt+vt-1<Mt?(bt=Mt,delete pt[Ct],Tt()):pt[Ct]=requestAnimationFrame(kt)}),Ct},Pt=function(Tt){pt[Tt]&&cancelAnimationFrame(pt[Tt])}):(St=function(Tt){return setTimeout(Tt,vt)},Pt=function(Tt){return clearTimeout(Tt)}),{frame:St,cancel:Pt}}(),et=function(){var vt,St,Pt={};function pt(bt){function Tt(Ct,kt){bt.postMessage({options:Ct||{},callback:kt})}bt.init=function(kt){var Mt=kt.transferControlToOffscreen();bt.postMessage({canvas:Mt},[Mt])},bt.fire=function(kt,Mt,zt){if(St)return Tt(kt,null),St;var Kt=Math.random().toString(36).slice(2);return St=j(function(Yt){function rn(cn){cn.data.callback===Kt&&(delete Pt[Kt],bt.removeEventListener("message",rn),St=null,$.clear(),zt(),Yt())}bt.addEventListener("message",rn),Tt(kt,Kt),Pt[Kt]=rn.bind(null,{data:{callback:Kt}})}),St},bt.reset=function(){bt.postMessage({reset:!0});for(var kt in Pt)Pt[kt](),delete Pt[kt]}}return function(){if(vt)return vt;if(!o&&c){var bt=["var CONFETTI, SIZE = {}, module = {};","("+i.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{vt=new Worker(URL.createObjectURL(new Blob([bt])))}catch(Tt){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",Tt),null}pt(vt)}return vt}}(),tt={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function it(vt,St){return St?St(vt):vt}function ot(vt){return vt!=null}function at(vt,St,Pt){return it(vt&&ot(vt[St])?vt[St]:tt[St],Pt)}function rt(vt){return vt<0?0:Math.floor(vt)}function st(vt,St){return Math.floor(Math.random()*(St-vt))+vt}function lt(vt){return parseInt(vt,16)}function mt(vt){return vt.map(ft)}function ft(vt){var St=String(vt).replace(/[^0-9a-f]/gi,"");return St.length<6&&(St=St[0]+St[0]+St[1]+St[1]+St[2]+St[2]),{r:lt(St.substring(0,2)),g:lt(St.substring(2,4)),b:lt(St.substring(4,6))}}function gt(vt){var St=at(vt,"origin",Object);return St.x=at(St,"x",Number),St.y=at(St,"y",Number),St}function dt(vt){vt.width=document.documentElement.clientWidth,vt.height=document.documentElement.clientHeight}function ut(vt){var St=vt.getBoundingClientRect();vt.width=St.width,vt.height=St.height}function ct(vt){var St=document.createElement("canvas");return St.style.position="fixed",St.style.top="0px",St.style.left="0px",St.style.pointerEvents="none",St.style.zIndex=vt,St}function _t(vt,St,Pt,pt,bt,Tt,Ct,kt,Mt){vt.save(),vt.translate(St,Pt),vt.rotate(Tt),vt.scale(pt,bt),vt.arc(0,0,1,Ct,kt,Mt),vt.restore()}function ht(vt){var St=vt.angle*(Math.PI/180),Pt=vt.spread*(Math.PI/180);return{x:vt.x,y:vt.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:vt.startVelocity*.5+Math.random()*vt.startVelocity,angle2D:-St+(.5*Pt-Math.random()*Pt),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:vt.color,shape:vt.shape,tick:0,totalTicks:vt.ticks,decay:vt.decay,drift:vt.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:vt.gravity*3,ovalScalar:.6,scalar:vt.scalar,flat:vt.flat}}function Et(vt,St){St.x+=Math.cos(St.angle2D)*St.velocity+St.drift,St.y+=Math.sin(St.angle2D)*St.velocity+St.gravity,St.velocity*=St.decay,St.flat?(St.wobble=0,St.wobbleX=St.x+10*St.scalar,St.wobbleY=St.y+10*St.scalar,St.tiltSin=0,St.tiltCos=0,St.random=1):(St.wobble+=St.wobbleSpeed,St.wobbleX=St.x+10*St.scalar*Math.cos(St.wobble),St.wobbleY=St.y+10*St.scalar*Math.sin(St.wobble),St.tiltAngle+=.1,St.tiltSin=Math.sin(St.tiltAngle),St.tiltCos=Math.cos(St.tiltAngle),St.random=Math.random()+2);var Pt=St.tick++/St.totalTicks,pt=St.x+St.random*St.tiltCos,bt=St.y+St.random*St.tiltSin,Tt=St.wobbleX+St.random*St.tiltCos,Ct=St.wobbleY+St.random*St.tiltSin;if(vt.fillStyle="rgba("+St.color.r+", "+St.color.g+", "+St.color.b+", "+(1-Pt)+")",vt.beginPath(),d&&St.shape.type==="path"&&typeof St.shape.path=="string"&&Array.isArray(St.shape.matrix))vt.fill(Bt(St.shape.path,St.shape.matrix,St.x,St.y,Math.abs(Tt-pt)*.1,Math.abs(Ct-bt)*.1,Math.PI/10*St.wobble));else if(St.shape.type==="bitmap"){var kt=Math.PI/10*St.wobble,Mt=Math.abs(Tt-pt)*.1,zt=Math.abs(Ct-bt)*.1,Kt=St.shape.bitmap.width*St.scalar,Yt=St.shape.bitmap.height*St.scalar,rn=new DOMMatrix([Math.cos(kt)*Mt,Math.sin(kt)*Mt,-Math.sin(kt)*zt,Math.cos(kt)*zt,St.x,St.y]);rn.multiplySelf(new DOMMatrix(St.shape.matrix));var cn=vt.createPattern($.transform(St.shape.bitmap),"no-repeat");cn.setTransform(rn),vt.globalAlpha=1-Pt,vt.fillStyle=cn,vt.fillRect(St.x-Kt/2,St.y-Yt/2,Kt,Yt),vt.globalAlpha=1}else if(St.shape==="circle")vt.ellipse?vt.ellipse(St.x,St.y,Math.abs(Tt-pt)*St.ovalScalar,Math.abs(Ct-bt)*St.ovalScalar,Math.PI/10*St.wobble,0,2*Math.PI):_t(vt,St.x,St.y,Math.abs(Tt-pt)*St.ovalScalar,Math.abs(Ct-bt)*St.ovalScalar,Math.PI/10*St.wobble,0,2*Math.PI);else if(St.shape==="star")for(var sn=Math.PI/2*3,dn=4*St.scalar,Ht=8*St.scalar,Xt=St.x,It=St.y,Nt=5,Gt=Math.PI/Nt;Nt--;)Xt=St.x+Math.cos(sn)*Ht,It=St.y+Math.sin(sn)*Ht,vt.lineTo(Xt,It),sn+=Gt,Xt=St.x+Math.cos(sn)*dn,It=St.y+Math.sin(sn)*dn,vt.lineTo(Xt,It),sn+=Gt;else vt.moveTo(Math.floor(St.x),Math.floor(St.y)),vt.lineTo(Math.floor(St.wobbleX),Math.floor(bt)),vt.lineTo(Math.floor(Tt),Math.floor(Ct)),vt.lineTo(Math.floor(pt),Math.floor(St.wobbleY));return vt.closePath(),vt.fill(),St.tick<St.totalTicks}function yt(vt,St,Pt,pt,bt){var Tt=St.slice(),Ct=vt.getContext("2d"),kt,Mt,zt=j(function(Kt){function Yt(){kt=Mt=null,Ct.clearRect(0,0,pt.width,pt.height),$.clear(),bt(),Kt()}function rn(){o&&!(pt.width===a.width&&pt.height===a.height)&&(pt.width=vt.width=a.width,pt.height=vt.height=a.height),!pt.width&&!pt.height&&(Pt(vt),pt.width=vt.width,pt.height=vt.height),Ct.clearRect(0,0,pt.width,pt.height),Tt=Tt.filter(function(cn){return Et(Ct,cn)}),Tt.length?kt=_.frame(rn):Yt()}kt=_.frame(rn),Mt=Yt});return{addFettis:function(Kt){return Tt=Tt.concat(Kt),zt},canvas:vt,promise:zt,reset:function(){kt&&_.cancel(kt),Mt&&Mt()}}}function Ot(vt,St){var Pt=!vt,pt=!!at(St||{},"resize"),bt=!1,Tt=at(St,"disableForReducedMotion",Boolean),Ct=c&&!!at(St||{},"useWorker"),kt=Ct?et():null,Mt=Pt?dt:ut,zt=vt&&kt?!!vt.__confetti_initialized:!1,Kt=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Yt;function rn(sn,dn,Ht){for(var Xt=at(sn,"particleCount",rt),It=at(sn,"angle",Number),Nt=at(sn,"spread",Number),Gt=at(sn,"startVelocity",Number),tn=at(sn,"decay",Number),fn=at(sn,"gravity",Number),yn=at(sn,"drift",Number),gn=at(sn,"colors",mt),Qt=at(sn,"ticks",Number),Wt=at(sn,"shapes"),Zt=at(sn,"scalar"),xn=!!at(sn,"flat"),An=gt(sn),Cn=Xt,Sn=[],Pn=vt.width*An.x,Vn=vt.height*An.y;Cn--;)Sn.push(ht({x:Pn,y:Vn,angle:It,spread:Nt,startVelocity:Gt,color:gn[Cn%gn.length],shape:Wt[st(0,Wt.length)],ticks:Qt,decay:tn,gravity:fn,drift:yn,scalar:Zt,flat:xn}));return Yt?Yt.addFettis(Sn):(Yt=yt(vt,Sn,Mt,dn,Ht),Yt.promise)}function cn(sn){var dn=Tt||at(sn,"disableForReducedMotion",Boolean),Ht=at(sn,"zIndex",Number);if(dn&&Kt)return j(function(Gt){Gt()});Pt&&Yt?vt=Yt.canvas:Pt&&!vt&&(vt=ct(Ht),document.body.appendChild(vt)),pt&&!zt&&Mt(vt);var Xt={width:vt.width,height:vt.height};kt&&!zt&&kt.init(vt),zt=!0,kt&&(vt.__confetti_initialized=!0);function It(){if(kt){var Gt={getBoundingClientRect:function(){if(!Pt)return vt.getBoundingClientRect()}};Mt(Gt),kt.postMessage({resize:{width:Gt.width,height:Gt.height}});return}Xt.width=Xt.height=null}function Nt(){Yt=null,pt&&(bt=!1,e.removeEventListener("resize",It)),Pt&&vt&&(document.body.contains(vt)&&document.body.removeChild(vt),vt=null,zt=!1)}return pt&&!bt&&(bt=!0,e.addEventListener("resize",It,!1)),kt?kt.fire(sn,Xt,Nt):rn(sn,Xt,Nt)}return cn.reset=function(){kt&&kt.reset(),Yt&&Yt.reset()},cn}var Dt;function $t(){return Dt||(Dt=Ot(null,{useWorker:!0,resize:!0})),Dt}function Bt(vt,St,Pt,pt,bt,Tt,Ct){var kt=new Path2D(vt),Mt=new Path2D;Mt.addPath(kt,new DOMMatrix(St));var zt=new Path2D;return zt.addPath(Mt,new DOMMatrix([Math.cos(Ct)*bt,Math.sin(Ct)*bt,-Math.sin(Ct)*Tt,Math.cos(Ct)*Tt,Pt,pt])),zt}function Vt(vt){if(!d)throw new Error("path confetti are not supported in this browser");var St,Pt;typeof vt=="string"?St=vt:(St=vt.path,Pt=vt.matrix);var pt=new Path2D(St),bt=document.createElement("canvas"),Tt=bt.getContext("2d");if(!Pt){for(var Ct=1e3,kt=Ct,Mt=Ct,zt=0,Kt=0,Yt,rn,cn=0;cn<Ct;cn+=2)for(var sn=0;sn<Ct;sn+=2)Tt.isPointInPath(pt,cn,sn,"nonzero")&&(kt=Math.min(kt,cn),Mt=Math.min(Mt,sn),zt=Math.max(zt,cn),Kt=Math.max(Kt,sn));Yt=zt-kt,rn=Kt-Mt;var dn=10,Ht=Math.min(dn/Yt,dn/rn);Pt=[Ht,0,0,Ht,-Math.round(Yt/2+kt)*Ht,-Math.round(rn/2+Mt)*Ht]}return{type:"path",path:St,matrix:Pt}}function Rt(vt){var St,Pt=1,pt="#000000",bt='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof vt=="string"?St=vt:(St=vt.text,Pt="scalar"in vt?vt.scalar:Pt,bt="fontFamily"in vt?vt.fontFamily:bt,pt="color"in vt?vt.color:pt);var Tt=10*Pt,Ct=""+Tt+"px "+bt,kt=new OffscreenCanvas(Tt,Tt),Mt=kt.getContext("2d");Mt.font=Ct;var zt=Mt.measureText(St),Kt=Math.ceil(zt.actualBoundingBoxRight+zt.actualBoundingBoxLeft),Yt=Math.ceil(zt.actualBoundingBoxAscent+zt.actualBoundingBoxDescent),rn=2,cn=zt.actualBoundingBoxLeft+rn,sn=zt.actualBoundingBoxAscent+rn;Kt+=rn+rn,Yt+=rn+rn,kt=new OffscreenCanvas(Kt,Yt),Mt=kt.getContext("2d"),Mt.font=Ct,Mt.fillStyle=pt,Mt.fillText(St,cn,sn);var dn=1/Pt;return{type:"bitmap",bitmap:kt.transferToImageBitmap(),matrix:[dn,0,0,dn,-Kt*dn/2,-Yt*dn/2]}}s.exports=function(){return $t().apply(this,arguments)},s.exports.reset=function(){$t().reset()},s.exports.create=Ot,s.exports.shapeFromPath=Vt,s.exports.shapeFromText=Rt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),module,!1);const confetti=module.exports;module.exports.create;var howler={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(i){(function(){var e=function(){this.init()};e.prototype={init:function(){var _=this||s;return _._counter=1e3,_._html5AudioPool=[],_.html5PoolSize=10,_._codecs={},_._howls=[],_._muted=!1,_._volume=1,_._canPlayEvent="canplaythrough",_._navigator=typeof window<"u"&&window.navigator?window.navigator:null,_.masterGain=null,_.noAudio=!1,_.usingWebAudio=!0,_.autoSuspend=!0,_.ctx=null,_.autoUnlock=!0,_._setup(),_},volume:function(_){var et=this||s;if(_=parseFloat(_),et.ctx||$(),typeof _<"u"&&_>=0&&_<=1){if(et._volume=_,et._muted)return et;et.usingWebAudio&&et.masterGain.gain.setValueAtTime(_,s.ctx.currentTime);for(var tt=0;tt<et._howls.length;tt++)if(!et._howls[tt]._webAudio)for(var it=et._howls[tt]._getSoundIds(),ot=0;ot<it.length;ot++){var at=et._howls[tt]._soundById(it[ot]);at&&at._node&&(at._node.volume=at._volume*_)}return et}return et._volume},mute:function(_){var et=this||s;et.ctx||$(),et._muted=_,et.usingWebAudio&&et.masterGain.gain.setValueAtTime(_?0:et._volume,s.ctx.currentTime);for(var tt=0;tt<et._howls.length;tt++)if(!et._howls[tt]._webAudio)for(var it=et._howls[tt]._getSoundIds(),ot=0;ot<it.length;ot++){var at=et._howls[tt]._soundById(it[ot]);at&&at._node&&(at._node.muted=_?!0:at._muted)}return et},stop:function(){for(var _=this||s,et=0;et<_._howls.length;et++)_._howls[et].stop();return _},unload:function(){for(var _=this||s,et=_._howls.length-1;et>=0;et--)_._howls[et].unload();return _.usingWebAudio&&_.ctx&&typeof _.ctx.close<"u"&&(_.ctx.close(),_.ctx=null,$()),_},codecs:function(_){return(this||s)._codecs[_.replace(/^x-/,"")]},_setup:function(){var _=this||s;if(_.state=_.ctx&&_.ctx.state||"suspended",_._autoSuspend(),!_.usingWebAudio)if(typeof Audio<"u")try{var et=new Audio;typeof et.oncanplaythrough>"u"&&(_._canPlayEvent="canplay")}catch{_.noAudio=!0}else _.noAudio=!0;try{var et=new Audio;et.muted&&(_.noAudio=!0)}catch{}return _.noAudio||_._setupCodecs(),_},_setupCodecs:function(){var _=this||s,et=null;try{et=typeof Audio<"u"?new Audio:null}catch{return _}if(!et||typeof et.canPlayType!="function")return _;var tt=et.canPlayType("audio/mpeg;").replace(/^no$/,""),it=_._navigator?_._navigator.userAgent:"",ot=it.match(/OPR\/(\d+)/g),at=ot&&parseInt(ot[0].split("/")[1],10)<33,rt=it.indexOf("Safari")!==-1&&it.indexOf("Chrome")===-1,st=it.match(/Version\/(.*?) /),lt=rt&&st&&parseInt(st[1],10)<15;return _._codecs={mp3:!!(!at&&(tt||et.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!tt,opus:!!et.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!et.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!et.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(et.canPlayType('audio/wav; codecs="1"')||et.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!et.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!et.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(et.canPlayType("audio/x-m4a;")||et.canPlayType("audio/m4a;")||et.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(et.canPlayType("audio/x-m4b;")||et.canPlayType("audio/m4b;")||et.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(et.canPlayType("audio/x-mp4;")||et.canPlayType("audio/mp4;")||et.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!lt&&et.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!lt&&et.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!et.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(et.canPlayType("audio/x-flac;")||et.canPlayType("audio/flac;")).replace(/^no$/,"")},_},_unlockAudio:function(){var _=this||s;if(!(_._audioUnlocked||!_.ctx)){_._audioUnlocked=!1,_.autoUnlock=!1,!_._mobileUnloaded&&_.ctx.sampleRate!==44100&&(_._mobileUnloaded=!0,_.unload()),_._scratchBuffer=_.ctx.createBuffer(1,1,22050);var et=function(tt){for(;_._html5AudioPool.length<_.html5PoolSize;)try{var it=new Audio;it._unlocked=!0,_._releaseHtml5Audio(it)}catch{_.noAudio=!0;break}for(var ot=0;ot<_._howls.length;ot++)if(!_._howls[ot]._webAudio)for(var at=_._howls[ot]._getSoundIds(),rt=0;rt<at.length;rt++){var st=_._howls[ot]._soundById(at[rt]);st&&st._node&&!st._node._unlocked&&(st._node._unlocked=!0,st._node.load())}_._autoResume();var lt=_.ctx.createBufferSource();lt.buffer=_._scratchBuffer,lt.connect(_.ctx.destination),typeof lt.start>"u"?lt.noteOn(0):lt.start(0),typeof _.ctx.resume=="function"&&_.ctx.resume(),lt.onended=function(){lt.disconnect(0),_._audioUnlocked=!0,document.removeEventListener("touchstart",et,!0),document.removeEventListener("touchend",et,!0),document.removeEventListener("click",et,!0),document.removeEventListener("keydown",et,!0);for(var mt=0;mt<_._howls.length;mt++)_._howls[mt]._emit("unlock")}};return document.addEventListener("touchstart",et,!0),document.addEventListener("touchend",et,!0),document.addEventListener("click",et,!0),document.addEventListener("keydown",et,!0),_}},_obtainHtml5Audio:function(){var _=this||s;if(_._html5AudioPool.length)return _._html5AudioPool.pop();var et=new Audio().play();return et&&typeof Promise<"u"&&(et instanceof Promise||typeof et.then=="function")&&et.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(_){var et=this||s;return _._unlocked&&et._html5AudioPool.push(_),et},_autoSuspend:function(){var _=this;if(!(!_.autoSuspend||!_.ctx||typeof _.ctx.suspend>"u"||!s.usingWebAudio)){for(var et=0;et<_._howls.length;et++)if(_._howls[et]._webAudio){for(var tt=0;tt<_._howls[et]._sounds.length;tt++)if(!_._howls[et]._sounds[tt]._paused)return _}return _._suspendTimer&&clearTimeout(_._suspendTimer),_._suspendTimer=setTimeout(function(){if(_.autoSuspend){_._suspendTimer=null,_.state="suspending";var it=function(){_.state="suspended",_._resumeAfterSuspend&&(delete _._resumeAfterSuspend,_._autoResume())};_.ctx.suspend().then(it,it)}},3e4),_}},_autoResume:function(){var _=this;if(!(!_.ctx||typeof _.ctx.resume>"u"||!s.usingWebAudio))return _.state==="running"&&_.ctx.state!=="interrupted"&&_._suspendTimer?(clearTimeout(_._suspendTimer),_._suspendTimer=null):_.state==="suspended"||_.state==="running"&&_.ctx.state==="interrupted"?(_.ctx.resume().then(function(){_.state="running";for(var et=0;et<_._howls.length;et++)_._howls[et]._emit("resume")}),_._suspendTimer&&(clearTimeout(_._suspendTimer),_._suspendTimer=null)):_.state==="suspending"&&(_._resumeAfterSuspend=!0),_}};var s=new e,o=function(_){var et=this;if(!_.src||_.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}et.init(_)};o.prototype={init:function(_){var et=this;return s.ctx||$(),et._autoplay=_.autoplay||!1,et._format=typeof _.format!="string"?_.format:[_.format],et._html5=_.html5||!1,et._muted=_.mute||!1,et._loop=_.loop||!1,et._pool=_.pool||5,et._preload=typeof _.preload=="boolean"||_.preload==="metadata"?_.preload:!0,et._rate=_.rate||1,et._sprite=_.sprite||{},et._src=typeof _.src!="string"?_.src:[_.src],et._volume=_.volume!==void 0?_.volume:1,et._xhr={method:_.xhr&&_.xhr.method?_.xhr.method:"GET",headers:_.xhr&&_.xhr.headers?_.xhr.headers:null,withCredentials:_.xhr&&_.xhr.withCredentials?_.xhr.withCredentials:!1},et._duration=0,et._state="unloaded",et._sounds=[],et._endTimers={},et._queue=[],et._playLock=!1,et._onend=_.onend?[{fn:_.onend}]:[],et._onfade=_.onfade?[{fn:_.onfade}]:[],et._onload=_.onload?[{fn:_.onload}]:[],et._onloaderror=_.onloaderror?[{fn:_.onloaderror}]:[],et._onplayerror=_.onplayerror?[{fn:_.onplayerror}]:[],et._onpause=_.onpause?[{fn:_.onpause}]:[],et._onplay=_.onplay?[{fn:_.onplay}]:[],et._onstop=_.onstop?[{fn:_.onstop}]:[],et._onmute=_.onmute?[{fn:_.onmute}]:[],et._onvolume=_.onvolume?[{fn:_.onvolume}]:[],et._onrate=_.onrate?[{fn:_.onrate}]:[],et._onseek=_.onseek?[{fn:_.onseek}]:[],et._onunlock=_.onunlock?[{fn:_.onunlock}]:[],et._onresume=[],et._webAudio=s.usingWebAudio&&!et._html5,typeof s.ctx<"u"&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(et),et._autoplay&&et._queue.push({event:"play",action:function(){et.play()}}),et._preload&&et._preload!=="none"&&et.load(),et},load:function(){var _=this,et=null;if(s.noAudio){_._emit("loaderror",null,"No audio support.");return}typeof _._src=="string"&&(_._src=[_._src]);for(var tt=0;tt<_._src.length;tt++){var it,ot;if(_._format&&_._format[tt])it=_._format[tt];else{if(ot=_._src[tt],typeof ot!="string"){_._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}it=/^data:audio\/([^;,]+);/i.exec(ot),it||(it=/\.([^.]+)$/.exec(ot.split("?",1)[0])),it&&(it=it[1].toLowerCase())}if(it||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),it&&s.codecs(it)){et=_._src[tt];break}}if(!et){_._emit("loaderror",null,"No codec support for selected audio sources.");return}return _._src=et,_._state="loading",window.location.protocol==="https:"&&et.slice(0,5)==="http:"&&(_._html5=!0,_._webAudio=!1),new a(_),_._webAudio&&d(_),_},play:function(_,et){var tt=this,it=null;if(typeof _=="number")it=_,_=null;else{if(typeof _=="string"&&tt._state==="loaded"&&!tt._sprite[_])return null;if(typeof _>"u"&&(_="__default",!tt._playLock)){for(var ot=0,at=0;at<tt._sounds.length;at++)tt._sounds[at]._paused&&!tt._sounds[at]._ended&&(ot++,it=tt._sounds[at]._id);ot===1?_=null:it=null}}var rt=it?tt._soundById(it):tt._inactiveSound();if(!rt)return null;if(it&&!_&&(_=rt._sprite||"__default"),tt._state!=="loaded"){rt._sprite=_,rt._ended=!1;var st=rt._id;return tt._queue.push({event:"play",action:function(){tt.play(st)}}),st}if(it&&!rt._paused)return et||tt._loadQueue("play"),rt._id;tt._webAudio&&s._autoResume();var lt=Math.max(0,rt._seek>0?rt._seek:tt._sprite[_][0]/1e3),mt=Math.max(0,(tt._sprite[_][0]+tt._sprite[_][1])/1e3-lt),ft=mt*1e3/Math.abs(rt._rate),gt=tt._sprite[_][0]/1e3,dt=(tt._sprite[_][0]+tt._sprite[_][1])/1e3;rt._sprite=_,rt._ended=!1;var ut=function(){rt._paused=!1,rt._seek=lt,rt._start=gt,rt._stop=dt,rt._loop=!!(rt._loop||tt._sprite[_][2])};if(lt>=dt){tt._ended(rt);return}var ct=rt._node;if(tt._webAudio){var _t=function(){tt._playLock=!1,ut(),tt._refreshBuffer(rt);var Ot=rt._muted||tt._muted?0:rt._volume;ct.gain.setValueAtTime(Ot,s.ctx.currentTime),rt._playStart=s.ctx.currentTime,typeof ct.bufferSource.start>"u"?rt._loop?ct.bufferSource.noteGrainOn(0,lt,86400):ct.bufferSource.noteGrainOn(0,lt,mt):rt._loop?ct.bufferSource.start(0,lt,86400):ct.bufferSource.start(0,lt,mt),ft!==1/0&&(tt._endTimers[rt._id]=setTimeout(tt._ended.bind(tt,rt),ft)),et||setTimeout(function(){tt._emit("play",rt._id),tt._loadQueue()},0)};s.state==="running"&&s.ctx.state!=="interrupted"?_t():(tt._playLock=!0,tt.once("resume",_t),tt._clearTimer(rt._id))}else{var ht=function(){ct.currentTime=lt,ct.muted=rt._muted||tt._muted||s._muted||ct.muted,ct.volume=rt._volume*s.volume(),ct.playbackRate=rt._rate;try{var Ot=ct.play();if(Ot&&typeof Promise<"u"&&(Ot instanceof Promise||typeof Ot.then=="function")?(tt._playLock=!0,ut(),Ot.then(function(){tt._playLock=!1,ct._unlocked=!0,et?tt._loadQueue():tt._emit("play",rt._id)}).catch(function(){tt._playLock=!1,tt._emit("playerror",rt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),rt._ended=!0,rt._paused=!0})):et||(tt._playLock=!1,ut(),tt._emit("play",rt._id)),ct.playbackRate=rt._rate,ct.paused){tt._emit("playerror",rt._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}_!=="__default"||rt._loop?tt._endTimers[rt._id]=setTimeout(tt._ended.bind(tt,rt),ft):(tt._endTimers[rt._id]=function(){tt._ended(rt),ct.removeEventListener("ended",tt._endTimers[rt._id],!1)},ct.addEventListener("ended",tt._endTimers[rt._id],!1))}catch(Dt){tt._emit("playerror",rt._id,Dt)}};ct.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(ct.src=tt._src,ct.load());var Et=window&&window.ejecta||!ct.readyState&&s._navigator.isCocoonJS;if(ct.readyState>=3||Et)ht();else{tt._playLock=!0,tt._state="loading";var yt=function(){tt._state="loaded",ht(),ct.removeEventListener(s._canPlayEvent,yt,!1)};ct.addEventListener(s._canPlayEvent,yt,!1),tt._clearTimer(rt._id)}}return rt._id},pause:function(_){var et=this;if(et._state!=="loaded"||et._playLock)return et._queue.push({event:"pause",action:function(){et.pause(_)}}),et;for(var tt=et._getSoundIds(_),it=0;it<tt.length;it++){et._clearTimer(tt[it]);var ot=et._soundById(tt[it]);if(ot&&!ot._paused&&(ot._seek=et.seek(tt[it]),ot._rateSeek=0,ot._paused=!0,et._stopFade(tt[it]),ot._node))if(et._webAudio){if(!ot._node.bufferSource)continue;typeof ot._node.bufferSource.stop>"u"?ot._node.bufferSource.noteOff(0):ot._node.bufferSource.stop(0),et._cleanBuffer(ot._node)}else(!isNaN(ot._node.duration)||ot._node.duration===1/0)&&ot._node.pause();arguments[1]||et._emit("pause",ot?ot._id:null)}return et},stop:function(_,et){var tt=this;if(tt._state!=="loaded"||tt._playLock)return tt._queue.push({event:"stop",action:function(){tt.stop(_)}}),tt;for(var it=tt._getSoundIds(_),ot=0;ot<it.length;ot++){tt._clearTimer(it[ot]);var at=tt._soundById(it[ot]);at&&(at._seek=at._start||0,at._rateSeek=0,at._paused=!0,at._ended=!0,tt._stopFade(it[ot]),at._node&&(tt._webAudio?at._node.bufferSource&&(typeof at._node.bufferSource.stop>"u"?at._node.bufferSource.noteOff(0):at._node.bufferSource.stop(0),tt._cleanBuffer(at._node)):(!isNaN(at._node.duration)||at._node.duration===1/0)&&(at._node.currentTime=at._start||0,at._node.pause(),at._node.duration===1/0&&tt._clearSound(at._node))),et||tt._emit("stop",at._id))}return tt},mute:function(_,et){var tt=this;if(tt._state!=="loaded"||tt._playLock)return tt._queue.push({event:"mute",action:function(){tt.mute(_,et)}}),tt;if(typeof et>"u")if(typeof _=="boolean")tt._muted=_;else return tt._muted;for(var it=tt._getSoundIds(et),ot=0;ot<it.length;ot++){var at=tt._soundById(it[ot]);at&&(at._muted=_,at._interval&&tt._stopFade(at._id),tt._webAudio&&at._node?at._node.gain.setValueAtTime(_?0:at._volume,s.ctx.currentTime):at._node&&(at._node.muted=s._muted?!0:_),tt._emit("mute",at._id))}return tt},volume:function(){var _=this,et=arguments,tt,it;if(et.length===0)return _._volume;if(et.length===1||et.length===2&&typeof et[1]>"u"){var ot=_._getSoundIds(),at=ot.indexOf(et[0]);at>=0?it=parseInt(et[0],10):tt=parseFloat(et[0])}else et.length>=2&&(tt=parseFloat(et[0]),it=parseInt(et[1],10));var rt;if(typeof tt<"u"&&tt>=0&&tt<=1){if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"volume",action:function(){_.volume.apply(_,et)}}),_;typeof it>"u"&&(_._volume=tt),it=_._getSoundIds(it);for(var st=0;st<it.length;st++)rt=_._soundById(it[st]),rt&&(rt._volume=tt,et[2]||_._stopFade(it[st]),_._webAudio&&rt._node&&!rt._muted?rt._node.gain.setValueAtTime(tt,s.ctx.currentTime):rt._node&&!rt._muted&&(rt._node.volume=tt*s.volume()),_._emit("volume",rt._id))}else return rt=it?_._soundById(it):_._sounds[0],rt?rt._volume:0;return _},fade:function(_,et,tt,it){var ot=this;if(ot._state!=="loaded"||ot._playLock)return ot._queue.push({event:"fade",action:function(){ot.fade(_,et,tt,it)}}),ot;_=Math.min(Math.max(0,parseFloat(_)),1),et=Math.min(Math.max(0,parseFloat(et)),1),tt=parseFloat(tt),ot.volume(_,it);for(var at=ot._getSoundIds(it),rt=0;rt<at.length;rt++){var st=ot._soundById(at[rt]);if(st){if(it||ot._stopFade(at[rt]),ot._webAudio&&!st._muted){var lt=s.ctx.currentTime,mt=lt+tt/1e3;st._volume=_,st._node.gain.setValueAtTime(_,lt),st._node.gain.linearRampToValueAtTime(et,mt)}ot._startFadeInterval(st,_,et,tt,at[rt],typeof it>"u")}}return ot},_startFadeInterval:function(_,et,tt,it,ot,at){var rt=this,st=et,lt=tt-et,mt=Math.abs(lt/.01),ft=Math.max(4,mt>0?it/mt:it),gt=Date.now();_._fadeTo=tt,_._interval=setInterval(function(){var dt=(Date.now()-gt)/it;gt=Date.now(),st+=lt*dt,st=Math.round(st*100)/100,lt<0?st=Math.max(tt,st):st=Math.min(tt,st),rt._webAudio?_._volume=st:rt.volume(st,_._id,!0),at&&(rt._volume=st),(tt<et&&st<=tt||tt>et&&st>=tt)&&(clearInterval(_._interval),_._interval=null,_._fadeTo=null,rt.volume(tt,_._id),rt._emit("fade",_._id))},ft)},_stopFade:function(_){var et=this,tt=et._soundById(_);return tt&&tt._interval&&(et._webAudio&&tt._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(tt._interval),tt._interval=null,et.volume(tt._fadeTo,_),tt._fadeTo=null,et._emit("fade",_)),et},loop:function(){var _=this,et=arguments,tt,it,ot;if(et.length===0)return _._loop;if(et.length===1)if(typeof et[0]=="boolean")tt=et[0],_._loop=tt;else return ot=_._soundById(parseInt(et[0],10)),ot?ot._loop:!1;else et.length===2&&(tt=et[0],it=parseInt(et[1],10));for(var at=_._getSoundIds(it),rt=0;rt<at.length;rt++)ot=_._soundById(at[rt]),ot&&(ot._loop=tt,_._webAudio&&ot._node&&ot._node.bufferSource&&(ot._node.bufferSource.loop=tt,tt&&(ot._node.bufferSource.loopStart=ot._start||0,ot._node.bufferSource.loopEnd=ot._stop,_.playing(at[rt])&&(_.pause(at[rt],!0),_.play(at[rt],!0)))));return _},rate:function(){var _=this,et=arguments,tt,it;if(et.length===0)it=_._sounds[0]._id;else if(et.length===1){var ot=_._getSoundIds(),at=ot.indexOf(et[0]);at>=0?it=parseInt(et[0],10):tt=parseFloat(et[0])}else et.length===2&&(tt=parseFloat(et[0]),it=parseInt(et[1],10));var rt;if(typeof tt=="number"){if(_._state!=="loaded"||_._playLock)return _._queue.push({event:"rate",action:function(){_.rate.apply(_,et)}}),_;typeof it>"u"&&(_._rate=tt),it=_._getSoundIds(it);for(var st=0;st<it.length;st++)if(rt=_._soundById(it[st]),rt){_.playing(it[st])&&(rt._rateSeek=_.seek(it[st]),rt._playStart=_._webAudio?s.ctx.currentTime:rt._playStart),rt._rate=tt,_._webAudio&&rt._node&&rt._node.bufferSource?rt._node.bufferSource.playbackRate.setValueAtTime(tt,s.ctx.currentTime):rt._node&&(rt._node.playbackRate=tt);var lt=_.seek(it[st]),mt=(_._sprite[rt._sprite][0]+_._sprite[rt._sprite][1])/1e3-lt,ft=mt*1e3/Math.abs(rt._rate);(_._endTimers[it[st]]||!rt._paused)&&(_._clearTimer(it[st]),_._endTimers[it[st]]=setTimeout(_._ended.bind(_,rt),ft)),_._emit("rate",rt._id)}}else return rt=_._soundById(it),rt?rt._rate:_._rate;return _},seek:function(){var _=this,et=arguments,tt,it;if(et.length===0)_._sounds.length&&(it=_._sounds[0]._id);else if(et.length===1){var ot=_._getSoundIds(),at=ot.indexOf(et[0]);at>=0?it=parseInt(et[0],10):_._sounds.length&&(it=_._sounds[0]._id,tt=parseFloat(et[0]))}else et.length===2&&(tt=parseFloat(et[0]),it=parseInt(et[1],10));if(typeof it>"u")return 0;if(typeof tt=="number"&&(_._state!=="loaded"||_._playLock))return _._queue.push({event:"seek",action:function(){_.seek.apply(_,et)}}),_;var rt=_._soundById(it);if(rt)if(typeof tt=="number"&&tt>=0){var st=_.playing(it);st&&_.pause(it,!0),rt._seek=tt,rt._ended=!1,_._clearTimer(it),!_._webAudio&&rt._node&&!isNaN(rt._node.duration)&&(rt._node.currentTime=tt);var lt=function(){st&&_.play(it,!0),_._emit("seek",it)};if(st&&!_._webAudio){var mt=function(){_._playLock?setTimeout(mt,0):lt()};setTimeout(mt,0)}else lt()}else if(_._webAudio){var ft=_.playing(it)?s.ctx.currentTime-rt._playStart:0,gt=rt._rateSeek?rt._rateSeek-rt._seek:0;return rt._seek+(gt+ft*Math.abs(rt._rate))}else return rt._node.currentTime;return _},playing:function(_){var et=this;if(typeof _=="number"){var tt=et._soundById(_);return tt?!tt._paused:!1}for(var it=0;it<et._sounds.length;it++)if(!et._sounds[it]._paused)return!0;return!1},duration:function(_){var et=this,tt=et._duration,it=et._soundById(_);return it&&(tt=et._sprite[it._sprite][1]/1e3),tt},state:function(){return this._state},unload:function(){for(var _=this,et=_._sounds,tt=0;tt<et.length;tt++)et[tt]._paused||_.stop(et[tt]._id),_._webAudio||(_._clearSound(et[tt]._node),et[tt]._node.removeEventListener("error",et[tt]._errorFn,!1),et[tt]._node.removeEventListener(s._canPlayEvent,et[tt]._loadFn,!1),et[tt]._node.removeEventListener("ended",et[tt]._endFn,!1),s._releaseHtml5Audio(et[tt]._node)),delete et[tt]._node,_._clearTimer(et[tt]._id);var it=s._howls.indexOf(_);it>=0&&s._howls.splice(it,1);var ot=!0;for(tt=0;tt<s._howls.length;tt++)if(s._howls[tt]._src===_._src||_._src.indexOf(s._howls[tt]._src)>=0){ot=!1;break}return c&&ot&&delete c[_._src],s.noAudio=!1,_._state="unloaded",_._sounds=[],_=null,null},on:function(_,et,tt,it){var ot=this,at=ot["_on"+_];return typeof et=="function"&&at.push(it?{id:tt,fn:et,once:it}:{id:tt,fn:et}),ot},off:function(_,et,tt){var it=this,ot=it["_on"+_],at=0;if(typeof et=="number"&&(tt=et,et=null),et||tt)for(at=0;at<ot.length;at++){var rt=tt===ot[at].id;if(et===ot[at].fn&&rt||!et&&rt){ot.splice(at,1);break}}else if(_)it["_on"+_]=[];else{var st=Object.keys(it);for(at=0;at<st.length;at++)st[at].indexOf("_on")===0&&Array.isArray(it[st[at]])&&(it[st[at]]=[])}return it},once:function(_,et,tt){var it=this;return it.on(_,et,tt,1),it},_emit:function(_,et,tt){for(var it=this,ot=it["_on"+_],at=ot.length-1;at>=0;at--)(!ot[at].id||ot[at].id===et||_==="load")&&(setTimeout((function(rt){rt.call(this,et,tt)}).bind(it,ot[at].fn),0),ot[at].once&&it.off(_,ot[at].fn,ot[at].id));return it._loadQueue(_),it},_loadQueue:function(_){var et=this;if(et._queue.length>0){var tt=et._queue[0];tt.event===_&&(et._queue.shift(),et._loadQueue()),_||tt.action()}return et},_ended:function(_){var et=this,tt=_._sprite;if(!et._webAudio&&_._node&&!_._node.paused&&!_._node.ended&&_._node.currentTime<_._stop)return setTimeout(et._ended.bind(et,_),100),et;var it=!!(_._loop||et._sprite[tt][2]);if(et._emit("end",_._id),!et._webAudio&&it&&et.stop(_._id,!0).play(_._id),et._webAudio&&it){et._emit("play",_._id),_._seek=_._start||0,_._rateSeek=0,_._playStart=s.ctx.currentTime;var ot=(_._stop-_._start)*1e3/Math.abs(_._rate);et._endTimers[_._id]=setTimeout(et._ended.bind(et,_),ot)}return et._webAudio&&!it&&(_._paused=!0,_._ended=!0,_._seek=_._start||0,_._rateSeek=0,et._clearTimer(_._id),et._cleanBuffer(_._node),s._autoSuspend()),!et._webAudio&&!it&&et.stop(_._id,!0),et},_clearTimer:function(_){var et=this;if(et._endTimers[_]){if(typeof et._endTimers[_]!="function")clearTimeout(et._endTimers[_]);else{var tt=et._soundById(_);tt&&tt._node&&tt._node.removeEventListener("ended",et._endTimers[_],!1)}delete et._endTimers[_]}return et},_soundById:function(_){for(var et=this,tt=0;tt<et._sounds.length;tt++)if(_===et._sounds[tt]._id)return et._sounds[tt];return null},_inactiveSound:function(){var _=this;_._drain();for(var et=0;et<_._sounds.length;et++)if(_._sounds[et]._ended)return _._sounds[et].reset();return new a(_)},_drain:function(){var _=this,et=_._pool,tt=0,it=0;if(!(_._sounds.length<et)){for(it=0;it<_._sounds.length;it++)_._sounds[it]._ended&&tt++;for(it=_._sounds.length-1;it>=0;it--){if(tt<=et)return;_._sounds[it]._ended&&(_._webAudio&&_._sounds[it]._node&&_._sounds[it]._node.disconnect(0),_._sounds.splice(it,1),tt--)}}},_getSoundIds:function(_){var et=this;if(typeof _>"u"){for(var tt=[],it=0;it<et._sounds.length;it++)tt.push(et._sounds[it]._id);return tt}else return[_]},_refreshBuffer:function(_){var et=this;return _._node.bufferSource=s.ctx.createBufferSource(),_._node.bufferSource.buffer=c[et._src],_._panner?_._node.bufferSource.connect(_._panner):_._node.bufferSource.connect(_._node),_._node.bufferSource.loop=_._loop,_._loop&&(_._node.bufferSource.loopStart=_._start||0,_._node.bufferSource.loopEnd=_._stop||0),_._node.bufferSource.playbackRate.setValueAtTime(_._rate,s.ctx.currentTime),et},_cleanBuffer:function(_){var et=this,tt=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(!_.bufferSource)return et;if(s._scratchBuffer&&_.bufferSource&&(_.bufferSource.onended=null,_.bufferSource.disconnect(0),tt))try{_.bufferSource.buffer=s._scratchBuffer}catch{}return _.bufferSource=null,et},_clearSound:function(_){var et=/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent);et||(_.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(_){this._parent=_,this.init()};a.prototype={init:function(){var _=this,et=_._parent;return _._muted=et._muted,_._loop=et._loop,_._volume=et._volume,_._rate=et._rate,_._seek=0,_._paused=!0,_._ended=!0,_._sprite="__default",_._id=++s._counter,et._sounds.push(_),_.create(),_},create:function(){var _=this,et=_._parent,tt=s._muted||_._muted||_._parent._muted?0:_._volume;return et._webAudio?(_._node=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),_._node.gain.setValueAtTime(tt,s.ctx.currentTime),_._node.paused=!0,_._node.connect(s.masterGain)):s.noAudio||(_._node=s._obtainHtml5Audio(),_._errorFn=_._errorListener.bind(_),_._node.addEventListener("error",_._errorFn,!1),_._loadFn=_._loadListener.bind(_),_._node.addEventListener(s._canPlayEvent,_._loadFn,!1),_._endFn=_._endListener.bind(_),_._node.addEventListener("ended",_._endFn,!1),_._node.src=et._src,_._node.preload=et._preload===!0?"auto":et._preload,_._node.volume=tt*s.volume(),_._node.load()),_},reset:function(){var _=this,et=_._parent;return _._muted=et._muted,_._loop=et._loop,_._volume=et._volume,_._rate=et._rate,_._seek=0,_._rateSeek=0,_._paused=!0,_._ended=!0,_._sprite="__default",_._id=++s._counter,_},_errorListener:function(){var _=this;_._parent._emit("loaderror",_._id,_._node.error?_._node.error.code:0),_._node.removeEventListener("error",_._errorFn,!1)},_loadListener:function(){var _=this,et=_._parent;et._duration=Math.ceil(_._node.duration*10)/10,Object.keys(et._sprite).length===0&&(et._sprite={__default:[0,et._duration*1e3]}),et._state!=="loaded"&&(et._state="loaded",et._emit("load"),et._loadQueue()),_._node.removeEventListener(s._canPlayEvent,_._loadFn,!1)},_endListener:function(){var _=this,et=_._parent;et._duration===1/0&&(et._duration=Math.ceil(_._node.duration*10)/10,et._sprite.__default[1]===1/0&&(et._sprite.__default[1]=et._duration*1e3),et._ended(_)),_._node.removeEventListener("ended",_._endFn,!1)}};var c={},d=function(_){var et=_._src;if(c[et]){_._duration=c[et].duration,j(_);return}if(/^data:[^;]+;base64,/.test(et)){for(var tt=atob(et.split(",")[1]),it=new Uint8Array(tt.length),ot=0;ot<tt.length;++ot)it[ot]=tt.charCodeAt(ot);g(it.buffer,_)}else{var at=new XMLHttpRequest;at.open(_._xhr.method,et,!0),at.withCredentials=_._xhr.withCredentials,at.responseType="arraybuffer",_._xhr.headers&&Object.keys(_._xhr.headers).forEach(function(rt){at.setRequestHeader(rt,_._xhr.headers[rt])}),at.onload=function(){var rt=(at.status+"")[0];if(rt!=="0"&&rt!=="2"&&rt!=="3"){_._emit("loaderror",null,"Failed loading audio file with status: "+at.status+".");return}g(at.response,_)},at.onerror=function(){_._webAudio&&(_._html5=!0,_._webAudio=!1,_._sounds=[],delete c[et],_.load())},h(at)}},h=function(_){try{_.send()}catch{_.onerror()}},g=function(_,et){var tt=function(){et._emit("loaderror",null,"Decoding audio data failed.")},it=function(ot){ot&&et._sounds.length>0?(c[et._src]=ot,j(et,ot)):tt()};typeof Promise<"u"&&s.ctx.decodeAudioData.length===1?s.ctx.decodeAudioData(_).then(it).catch(tt):s.ctx.decodeAudioData(_,it,tt)},j=function(_,et){et&&!_._duration&&(_._duration=et.duration),Object.keys(_._sprite).length===0&&(_._sprite={__default:[0,_._duration*1e3]}),_._state!=="loaded"&&(_._state="loaded",_._emit("load"),_._loadQueue())},$=function(){if(s.usingWebAudio){try{typeof AudioContext<"u"?s.ctx=new AudioContext:typeof webkitAudioContext<"u"?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch{s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var _=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),et=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),tt=et?parseInt(et[1],10):null;if(_&&tt&&tt<9){var it=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!it&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=typeof s.ctx.createGain>"u"?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};i.Howler=s,i.Howl=o,typeof commonjsGlobal$2<"u"?(commonjsGlobal$2.HowlerGlobal=e,commonjsGlobal$2.Howler=s,commonjsGlobal$2.Howl=o,commonjsGlobal$2.Sound=a):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=s,window.Howl=o,window.Sound=a)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(s){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var a=o._howls.length-1;a>=0;a--)o._howls[a].stereo(s);return o},HowlerGlobal.prototype.pos=function(s,o,a){var c=this;if(!c.ctx||!c.ctx.listener)return c;if(o=typeof o!="number"?c._pos[1]:o,a=typeof a!="number"?c._pos[2]:a,typeof s=="number")c._pos=[s,o,a],typeof c.ctx.listener.positionX<"u"?(c.ctx.listener.positionX.setTargetAtTime(c._pos[0],Howler.ctx.currentTime,.1),c.ctx.listener.positionY.setTargetAtTime(c._pos[1],Howler.ctx.currentTime,.1),c.ctx.listener.positionZ.setTargetAtTime(c._pos[2],Howler.ctx.currentTime,.1)):c.ctx.listener.setPosition(c._pos[0],c._pos[1],c._pos[2]);else return c._pos;return c},HowlerGlobal.prototype.orientation=function(s,o,a,c,d,h){var g=this;if(!g.ctx||!g.ctx.listener)return g;var j=g._orientation;if(o=typeof o!="number"?j[1]:o,a=typeof a!="number"?j[2]:a,c=typeof c!="number"?j[3]:c,d=typeof d!="number"?j[4]:d,h=typeof h!="number"?j[5]:h,typeof s=="number")g._orientation=[s,o,a,c,d,h],typeof g.ctx.listener.forwardX<"u"?(g.ctx.listener.forwardX.setTargetAtTime(s,Howler.ctx.currentTime,.1),g.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),g.ctx.listener.forwardZ.setTargetAtTime(a,Howler.ctx.currentTime,.1),g.ctx.listener.upX.setTargetAtTime(c,Howler.ctx.currentTime,.1),g.ctx.listener.upY.setTargetAtTime(d,Howler.ctx.currentTime,.1),g.ctx.listener.upZ.setTargetAtTime(h,Howler.ctx.currentTime,.1)):g.ctx.listener.setOrientation(s,o,a,c,d,h);else return j;return g},Howl.prototype.init=function(s){return function(o){var a=this;return a._orientation=o.orientation||[1,0,0],a._stereo=o.stereo||null,a._pos=o.pos||null,a._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},a._onstereo=o.onstereo?[{fn:o.onstereo}]:[],a._onpos=o.onpos?[{fn:o.onpos}]:[],a._onorientation=o.onorientation?[{fn:o.onorientation}]:[],s.call(this,o)}}(Howl.prototype.init),Howl.prototype.stereo=function(s,o){var a=this;if(!a._webAudio)return a;if(a._state!=="loaded")return a._queue.push({event:"stereo",action:function(){a.stereo(s,o)}}),a;var c=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof s=="number")a._stereo=s,a._pos=[s,0,0];else return a._stereo;for(var d=a._getSoundIds(o),h=0;h<d.length;h++){var g=a._soundById(d[h]);if(g)if(typeof s=="number")g._stereo=s,g._pos=[s,0,0],g._node&&(g._pannerAttr.panningModel="equalpower",(!g._panner||!g._panner.pan)&&e(g,c),c==="spatial"?typeof g._panner.positionX<"u"?(g._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),g._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),g._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):g._panner.setPosition(s,0,0):g._panner.pan.setValueAtTime(s,Howler.ctx.currentTime)),a._emit("stereo",g._id);else return g._stereo}return a},Howl.prototype.pos=function(s,o,a,c){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"pos",action:function(){d.pos(s,o,a,c)}}),d;if(o=typeof o!="number"?0:o,a=typeof a!="number"?-.5:a,typeof c>"u")if(typeof s=="number")d._pos=[s,o,a];else return d._pos;for(var h=d._getSoundIds(c),g=0;g<h.length;g++){var j=d._soundById(h[g]);if(j)if(typeof s=="number")j._pos=[s,o,a],j._node&&((!j._panner||j._panner.pan)&&e(j,"spatial"),typeof j._panner.positionX<"u"?(j._panner.positionX.setValueAtTime(s,Howler.ctx.currentTime),j._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),j._panner.positionZ.setValueAtTime(a,Howler.ctx.currentTime)):j._panner.setPosition(s,o,a)),d._emit("pos",j._id);else return j._pos}return d},Howl.prototype.orientation=function(s,o,a,c){var d=this;if(!d._webAudio)return d;if(d._state!=="loaded")return d._queue.push({event:"orientation",action:function(){d.orientation(s,o,a,c)}}),d;if(o=typeof o!="number"?d._orientation[1]:o,a=typeof a!="number"?d._orientation[2]:a,typeof c>"u")if(typeof s=="number")d._orientation=[s,o,a];else return d._orientation;for(var h=d._getSoundIds(c),g=0;g<h.length;g++){var j=d._soundById(h[g]);if(j)if(typeof s=="number")j._orientation=[s,o,a],j._node&&(j._panner||(j._pos||(j._pos=d._pos||[0,0,-.5]),e(j,"spatial")),typeof j._panner.orientationX<"u"?(j._panner.orientationX.setValueAtTime(s,Howler.ctx.currentTime),j._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),j._panner.orientationZ.setValueAtTime(a,Howler.ctx.currentTime)):j._panner.setOrientation(s,o,a)),d._emit("orientation",j._id);else return j._orientation}return d},Howl.prototype.pannerAttr=function(){var s=this,o=arguments,a,c,d;if(!s._webAudio)return s;if(o.length===0)return s._pannerAttr;if(o.length===1)if(typeof o[0]=="object")a=o[0],typeof c>"u"&&(a.pannerAttr||(a.pannerAttr={coneInnerAngle:a.coneInnerAngle,coneOuterAngle:a.coneOuterAngle,coneOuterGain:a.coneOuterGain,distanceModel:a.distanceModel,maxDistance:a.maxDistance,refDistance:a.refDistance,rolloffFactor:a.rolloffFactor,panningModel:a.panningModel}),s._pannerAttr={coneInnerAngle:typeof a.pannerAttr.coneInnerAngle<"u"?a.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:typeof a.pannerAttr.coneOuterAngle<"u"?a.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:typeof a.pannerAttr.coneOuterGain<"u"?a.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:typeof a.pannerAttr.distanceModel<"u"?a.pannerAttr.distanceModel:s._distanceModel,maxDistance:typeof a.pannerAttr.maxDistance<"u"?a.pannerAttr.maxDistance:s._maxDistance,refDistance:typeof a.pannerAttr.refDistance<"u"?a.pannerAttr.refDistance:s._refDistance,rolloffFactor:typeof a.pannerAttr.rolloffFactor<"u"?a.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:typeof a.pannerAttr.panningModel<"u"?a.pannerAttr.panningModel:s._panningModel});else return d=s._soundById(parseInt(o[0],10)),d?d._pannerAttr:s._pannerAttr;else o.length===2&&(a=o[0],c=parseInt(o[1],10));for(var h=s._getSoundIds(c),g=0;g<h.length;g++)if(d=s._soundById(h[g]),d){var j=d._pannerAttr;j={coneInnerAngle:typeof a.coneInnerAngle<"u"?a.coneInnerAngle:j.coneInnerAngle,coneOuterAngle:typeof a.coneOuterAngle<"u"?a.coneOuterAngle:j.coneOuterAngle,coneOuterGain:typeof a.coneOuterGain<"u"?a.coneOuterGain:j.coneOuterGain,distanceModel:typeof a.distanceModel<"u"?a.distanceModel:j.distanceModel,maxDistance:typeof a.maxDistance<"u"?a.maxDistance:j.maxDistance,refDistance:typeof a.refDistance<"u"?a.refDistance:j.refDistance,rolloffFactor:typeof a.rolloffFactor<"u"?a.rolloffFactor:j.rolloffFactor,panningModel:typeof a.panningModel<"u"?a.panningModel:j.panningModel};var $=d._panner;$||(d._pos||(d._pos=s._pos||[0,0,-.5]),e(d,"spatial"),$=d._panner),$.coneInnerAngle=j.coneInnerAngle,$.coneOuterAngle=j.coneOuterAngle,$.coneOuterGain=j.coneOuterGain,$.distanceModel=j.distanceModel,$.maxDistance=j.maxDistance,$.refDistance=j.refDistance,$.rolloffFactor=j.rolloffFactor,$.panningModel=j.panningModel}return s},Sound.prototype.init=function(s){return function(){var o=this,a=o._parent;o._orientation=a._orientation,o._stereo=a._stereo,o._pos=a._pos,o._pannerAttr=a._pannerAttr,s.call(this),o._stereo?a.stereo(o._stereo):o._pos&&a.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}}(Sound.prototype.init),Sound.prototype.reset=function(s){return function(){var o=this,a=o._parent;return o._orientation=a._orientation,o._stereo=a._stereo,o._pos=a._pos,o._pannerAttr=a._pannerAttr,o._stereo?a.stereo(o._stereo):o._pos?a.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,a._refreshBuffer(o)),s.call(this)}}(Sound.prototype.reset);var e=function(s,o){o=o||"spatial",o==="spatial"?(s._panner=Howler.ctx.createPanner(),s._panner.coneInnerAngle=s._pannerAttr.coneInnerAngle,s._panner.coneOuterAngle=s._pannerAttr.coneOuterAngle,s._panner.coneOuterGain=s._pannerAttr.coneOuterGain,s._panner.distanceModel=s._pannerAttr.distanceModel,s._panner.maxDistance=s._pannerAttr.maxDistance,s._panner.refDistance=s._pannerAttr.refDistance,s._panner.rolloffFactor=s._pannerAttr.rolloffFactor,s._panner.panningModel=s._pannerAttr.panningModel,typeof s._panner.positionX<"u"?(s._panner.positionX.setValueAtTime(s._pos[0],Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(s._pos[1],Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(s._pos[2],Howler.ctx.currentTime)):s._panner.setPosition(s._pos[0],s._pos[1],s._pos[2]),typeof s._panner.orientationX<"u"?(s._panner.orientationX.setValueAtTime(s._orientation[0],Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(s._orientation[1],Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(s._orientation[2],Howler.ctx.currentTime)):s._panner.setOrientation(s._orientation[0],s._orientation[1],s._orientation[2])):(s._panner=Howler.ctx.createStereoPanner(),s._panner.pan.setValueAtTime(s._stereo,Howler.ctx.currentTime)),s._panner.connect(s._node),s._paused||s._parent.pause(s._id,!0).play(s._id,!0)}})()})(howler);const facts={mathematics:["The word 'mathematics' comes from the Greek word 'mathema', meaning 'learning'","Zero was invented by ancient Indian mathematicians","The equals sign (=) was invented in 1557","A googol is a 1 followed by 100 zeros","Every even number greater than 2 can be expressed as the sum of two prime numbers"],english:["The most common letter in English is 'e'","The longest word without a vowel is 'rhythms'","Shakespeare invented over 1,700 words","The shortest complete sentence in English is 'Go!'","The most common word in English is 'the'"],kiswahili:["Swahili is spoken by over 100 million people","It's the official language in Tanzania, Kenya, and Uganda","Swahili has borrowed words from Arabic, English, and Portuguese","The word 'safari' comes from Swahili, meaning 'journey'","Swahili is the most widely spoken African language"],science:["The human body contains enough carbon to make 900 pencils","Honey never spoils. Archaeologists found 3000-year-old honey still edible","A day on Venus is longer than its year","Bananas are berries, but strawberries aren't","The average human body contains enough iron to make a 3-inch nail"],social:["The Great Wall of China is not visible from space","Ancient Egypt had female pharaohs","The shortest war in history lasted 38 minutes","The first Olympic Games were held in 776 BC","The Sahara Desert was once a lush grassland"]},BrainTease=()=>{const{subjectId:i}=useParams(),e=useNavigate(),[s,o]=reactExports.useState(!1),a=i&&facts[i]||[],c=new howler.Howl({src:["https://raw.githubusercontent.com/samora254/Kitabu/main/Applause%20Sound%20Effect.mp3"],volume:.5,html5:!0}),d=h=>{h.realIndex===a.length-1&&setTimeout(()=>{o(!0),i&&localStorage.setItem(`${i}-brain-tease-complete`,"true"),confetti({particleCount:100,spread:70,origin:{y:.6}}),c.play(),setTimeout(()=>{e(`/subject/${i}`)},3e3)},500)};return reactExports.useEffect(()=>()=>{c.unload()},[]),jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-100 to-purple-100 p-4",children:jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto pt-8",children:[jsxRuntimeExports.jsx(BackButton,{className:"mb-6 text-gray-600",customPath:`/subject/${i}`}),jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-center mb-8",children:"Did You Know?"}),jsxRuntimeExports.jsx(Swiper,{effect:"cards",grabCursor:!0,modules:[EffectCards],className:"h-[400px]",onSlideChange:d,children:a.map((h,g)=>jsxRuntimeExports.jsxs(SwiperSlide,{className:"bg-white rounded-2xl shadow-xl p-8 flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsx("p",{className:"text-gray-800 text-lg text-center leading-relaxed bg-gray-50 p-6 rounded-xl",children:h})}),jsxRuntimeExports.jsxs("div",{className:"text-center mt-4 text-gray-500 text-sm",children:["Swipe left to continue (",g+1,"/",a.length,")"]})]},g))}),jsxRuntimeExports.jsx(AnimatePresence,{children:s&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center bg-black/30 backdrop-blur-sm z-50",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.5,y:20},animate:{scale:1,y:0},exit:{scale:.5,y:20},className:"bg-white rounded-2xl shadow-2xl px-12 py-8 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold text-emerald-600 mb-2",children:"Now You Know! "}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-lg",children:"Great job completing this challenge!"})]})})})]})})},QuizProgress=({currentQuestion:i,totalQuestions:e,answeredQuestions:s})=>jsxRuntimeExports.jsx("div",{className:"flex space-x-1 mb-8",children:Array.from({length:e},(o,a)=>jsxRuntimeExports.jsx("div",{className:`h-1 flex-1 rounded-full ${a===i?"bg-red-500":s[a]?"bg-green-500":"bg-gray-200"}`},a))}),QuizOption=({text:i,selected:e,correct:s,onClick:o,disabled:a})=>{const c=()=>!e&&!a?"border-gray-200 hover:border-blue-500":e&&s===null?"border-blue-500 bg-blue-50":e&&s===!0?"border-green-500 bg-green-50":e&&s===!1?"border-red-500 bg-red-50":!e&&s===!0?"border-green-500 bg-green-50":"border-gray-200";return jsxRuntimeExports.jsx(motion.button,{whileHover:a?{}:{scale:1.02},whileTap:a?{}:{scale:.98},onClick:o,disabled:a,className:`w-full p-4 text-left rounded-lg border ${c()} transition-colors`,role:"option","aria-selected":e,"aria-disabled":a,children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{children:i}),e&&s!==null&&jsxRuntimeExports.jsx("span",{className:"text-xl",children:s?"":""})]})})},openai$1=new OpenAI({apiKey:"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",dangerouslyAllowBrowser:!0}),QUESTIONS_PER_QUIZ=10;async function getQuizQuestions(i,e){var s,o;try{const a=`Generate ${QUESTIONS_PER_QUIZ} multiple-choice questions for Grade 8 ${i} with 4 options each. Include explanations. Format as JSON array with fields: text, options (array), correctAnswer (number - index of correct option), explanation.`,d=(o=(s=(await openai$1.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:"You are an expert educational content creator specializing in creating high-quality quiz questions for Grade 8 students."},{role:"user",content:a}],temperature:.7})).choices[0])==null?void 0:s.message)==null?void 0:o.content;if(!d)throw new Error("No questions generated");return JSON.parse(d).map((g,j)=>({...g,id:j+1,type:"multiple-choice"}))}catch(a){throw console.error("Error getting quiz questions:",a),a}}const Quiz=()=>{const{subjectId:i}=useParams(),{selectedGrade:e}=useGrade(),s=useNavigate(),[o,a]=reactExports.useState([]),[c,d]=reactExports.useState(!0),[h,g]=reactExports.useState(null),[j,$]=reactExports.useState(0),[_,et]=reactExports.useState(null),[tt,it]=reactExports.useState(!1),[ot,at]=reactExports.useState(0),[rt,st]=reactExports.useState([]),[lt,mt]=reactExports.useState(!1),[ft,gt]=reactExports.useState(!1),dt=new howler.Howl({src:["https://raw.githubusercontent.com/samora254/Kitabu/main/Applause%20Sound%20Effect.mp3"],volume:.5,html5:!0});reactExports.useEffect(()=>{(async()=>{if(!i||!e){g("Missing subject or grade information"),d(!1);return}try{const Ot=await getQuizQuestions(i,e);a(Ot),st(new Array(Ot.length).fill(!1))}catch(Ot){g(Ot instanceof Error?Ot.message:"Failed to load questions")}finally{d(!1)}})()},[i,e]);const ut=yt=>{tt||ft||et(yt)},ct=()=>{const yt=o[j];if(!_||!yt.options)return;it(!0),yt.options[yt.correctAnswer]===_&&at($t=>$t+1);const Dt=[...rt];Dt[j]=!0,st(Dt)},_t=()=>{j===o.length-1?(mt(!0),gt(!0),confetti({particleCount:100,spread:70,origin:{y:.6}}),dt.play(),i&&localStorage.setItem(`quiz-completed-${i}`,"true")):($(yt=>yt+1),et(null),it(!1))},ht=()=>{s(`/subject/${i}`)};if(reactExports.useEffect(()=>(i&&localStorage.getItem(`quiz-completed-${i}`)&&s(`/subject/${i}`),()=>{dt.unload()}),[i,s]),c)return jsxRuntimeExports.jsx(LoadingSpinner,{});if(h||!o.length)return jsxRuntimeExports.jsx(ErrorMessage,{message:h||"No questions available"});const Et=o[j];return Et.options?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto p-4",children:[jsxRuntimeExports.jsxs("div",{className:"mb-6 flex items-center",children:[jsxRuntimeExports.jsx(BackButton,{className:"text-gray-600",customPath:`/subject/${i}`}),jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold ml-4 capitalize",children:[i," Quiz - Grade ",e]})]}),jsxRuntimeExports.jsx(QuizProgress,{currentQuestion:j,totalQuestions:o.length,answeredQuestions:rt}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-gray-500 mb-4",children:["QUESTION ",j+1," OF ",o.length]}),jsxRuntimeExports.jsx("p",{className:"text-xl font-medium mb-6",children:Et.text}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Et.options.map((yt,Ot)=>jsxRuntimeExports.jsx(QuizOption,{text:yt,selected:_===yt,correct:tt?Ot===Et.correctAnswer:null,onClick:()=>ut(yt),disabled:tt},Ot))}),tt&&jsxRuntimeExports.jsxs("div",{className:`mt-6 p-4 rounded-lg ${_===Et.options[Et.correctAnswer]?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-2",children:_===Et.options[Et.correctAnswer]?"Great! That's correct!":"Oops! That's incorrect."}),jsxRuntimeExports.jsx("p",{children:Et.explanation})]}),jsxRuntimeExports.jsx("button",{onClick:tt?_t:ct,className:`w-full mt-6 py-3 px-4 rounded-lg font-medium text-white transition-colors ${_?tt?"bg-blue-500 hover:bg-blue-600":"bg-emerald-500 hover:bg-emerald-600":"bg-gray-300 cursor-not-allowed"}`,disabled:!_,children:tt?j===o.length-1?"Finish":"Next Question":"Check Answer"})]})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:lt&&jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-50",children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:.5,y:20},animate:{scale:1,y:0},exit:{scale:.5,y:20},className:"bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Quiz Complete! "}),jsxRuntimeExports.jsxs("div",{className:"text-6xl font-bold mb-4 text-green-500",children:[Math.round(ot/o.length*100),"%"]}),jsxRuntimeExports.jsxs("p",{className:"text-xl mb-2",children:["You got ",ot," out of ",o.length," questions correct"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-8",children:ot===o.length?"Perfect score! Outstanding work! ":ot>=o.length*.7?"Great job! Keep it up! ":"Good effort! Keep practicing! "}),jsxRuntimeExports.jsx("button",{onClick:ht,className:"w-full bg-blue-500 text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Back to Subject"})]})})})]}):jsxRuntimeExports.jsx(ErrorMessage,{message:"Question format is invalid"})},subjects=["Mathematics","English","Kiswahili","Science","Social Studies","Religious Education","Creative Arts","Physical Education","Life Skills"],Profile=()=>{const i=useNavigate(),[e,s]=reactExports.useState(!1),[o,a]=reactExports.useState(!1),[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState(""),[j,$]=reactExports.useState([]),[_,et]=reactExports.useState(!1),[tt,it]=reactExports.useState(""),[ot,at]=reactExports.useState(!1),[rt,st]=reactExports.useState({firstName:"",lastName:"",email:"",phoneNumber:"",selectedSubjects:[]}),[lt,mt]=reactExports.useState("");reactExports.useEffect(()=>{(async()=>{if(auth.currentUser){const _t=await getDoc(doc(db,"users",auth.currentUser.uid));if(_t.exists()){const ht=_t.data();st({firstName:ht.firstName||"",lastName:ht.lastName||"",email:ht.email||"",phoneNumber:ht.phoneNumber||"",selectedSubjects:ht.selectedSubjects||[]}),$(ht.selectedSubjects||[])}}})()},[]);const ft=ct=>{$(_t=>_t.includes(ct)?_t.filter(ht=>ht!==ct):[..._t,ct])},gt=async()=>{if(j.length<6){g("Please select at least 6 subjects");return}s(!0);try{const ct=auth.currentUser;if(!ct)throw new Error("No user logged in");await updateProfile(ct,{displayName:`${rt.firstName} ${rt.lastName}`}),ct.email!==rt.email&&await updateEmail(ct,rt.email),lt&&await updatePassword(ct,lt),await updateDoc(doc(db,"users",ct.uid),{firstName:rt.firstName,lastName:rt.lastName,email:rt.email,phoneNumber:rt.phoneNumber,selectedSubjects:j}),a(!0),at(!1),setTimeout(()=>a(!1),2e3),g("")}catch(ct){console.error("Save Error:",ct),ct.code==="auth/requires-recent-login"?et(!0):g(ct.message)}finally{s(!1)}},dt=async()=>{try{await signOut(auth),i("/signin")}catch(ct){console.error("Logout Error:",ct),g("Failed to log out. Please try again.")}},ut=async()=>{var ct;if((ct=auth.currentUser)!=null&&ct.email){if(!tt){g("Password cannot be empty.");return}try{const _t=EmailAuthProvider.credential(auth.currentUser.email,tt);await reauthenticateWithCredential(auth.currentUser,_t),et(!1),it(""),gt()}catch(_t){console.error("Reauthentication Error:",_t),g("Invalid password. Please try again.")}}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-md mx-auto p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(BackButton,{className:"mr-4"}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold",children:"Profile"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>i("/home"),className:"text-gray-500","aria-label":"Close profile",children:""})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[h&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 text-red-500 p-3 rounded-lg",children:h}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-4xl",children:""})}),jsxRuntimeExports.jsx("button",{onClick:()=>{},className:"absolute bottom-0 right-0 bg-blue-500 text-white p-2 rounded-full hover:bg-blue-600",children:""})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:`${rt.firstName} ${rt.lastName}`,onChange:ct=>{const[_t="",ht=""]=ct.target.value.split(" ");st(Et=>({...Et,firstName:_t,lastName:ht}))},disabled:!ot,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),jsxRuntimeExports.jsx("input",{type:"email",value:rt.email,onChange:ct=>st(_t=>({..._t,email:ct.target.value})),disabled:!ot,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),jsxRuntimeExports.jsx("input",{type:c?"text":"password",value:lt,onChange:ct=>mt(ct.target.value),disabled:!ot,placeholder:"Enter new password to change",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-8",children:c?"":""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold mb-2",children:"Select Your Subjects"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Choose at least 6 subjects"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-3",children:subjects.map(ct=>jsxRuntimeExports.jsx("button",{onClick:()=>ot&&ft(ct),className:`p-3 rounded-lg text-left transition-colors ${j.includes(ct)?"bg-blue-500 text-white":"bg-gray-100 text-gray-800"} ${!ot&&"cursor-not-allowed opacity-75"}`,disabled:!ot,children:ct},ct))}),j.length<6&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Please select at least 6 subjects"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[ot?jsxRuntimeExports.jsx("button",{onClick:gt,disabled:e||o,className:`w-full py-3 rounded-lg font-medium transition-colors ${o?"bg-green-500 text-white":"bg-blue-500 text-white hover:bg-blue-600"}`,children:e?"Saving...":o?"Saved!":"Save Changes"}):jsxRuntimeExports.jsx("button",{onClick:()=>at(!0),className:"w-full bg-blue-500 text-white py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Edit Profile"}),jsxRuntimeExports.jsx("button",{onClick:dt,className:"w-full bg-red-500 text-white py-3 rounded-lg font-medium hover:bg-red-600 transition-colors",children:"Logout"})]})]})]})}),_&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold mb-4",children:"Verify Your Password"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"For security reasons, please enter your current password to continue."}),jsxRuntimeExports.jsx("input",{type:"password",value:tt,onChange:ct=>it(ct.target.value),placeholder:"Current password",className:"w-full px-3 py-2 border rounded-lg mb-4"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:ut,className:"flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600",children:"Verify"}),jsxRuntimeExports.jsx("button",{onClick:()=>{et(!1),it("")},className:"flex-1 bg-gray-200 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})})]})},LessonSection=({id:i,title:e,content:s,isCompleted:o,isExpanded:a,onToggle:c,onComplete:d})=>jsxRuntimeExports.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>c(i),className:"w-full px-4 py-3 flex justify-between items-center bg-gray-50 hover:bg-gray-100",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center mr-3 ${o?"bg-emerald-500 border-emerald-500":"border-gray-300"}`,children:o&&jsxRuntimeExports.jsx("span",{className:"text-white text-sm",children:""})}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:e})]}),jsxRuntimeExports.jsx("span",{className:"transform transition-transform duration-200 text-xl",children:a?"":"+"})]}),jsxRuntimeExports.jsx(AnimatePresence,{children:a&&jsxRuntimeExports.jsx(motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"border-t",children:jsxRuntimeExports.jsxs("div",{className:"p-4 whitespace-pre-line",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:s}),!o&&jsxRuntimeExports.jsx("button",{onClick:d,className:"bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors",children:"Mark as Complete"})]})})})]}),LessonCard=({id:i,title:e,sections:s,isLocked:o,expandedSection:a,onToggleSection:c,onMarkComplete:d})=>{const h=()=>s.filter(j=>j.isCompleted).length/s.length*100;return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold",children:e}),jsxRuntimeExports.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${h()}%`}})})]}),o&&jsxRuntimeExports.jsx("span",{className:"text-xl ml-4",children:""})]}),!o&&jsxRuntimeExports.jsx("div",{className:"space-y-4",children:s.map(g=>jsxRuntimeExports.jsx(LessonSection,{...g,isExpanded:a===g.id,onToggle:c,onComplete:()=>d(i,g.id)},g.id))})]})},openai=new OpenAI({apiKey:"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",dangerouslyAllowBrowser:!0});async function generateLearningContent(i,e){var s,o;try{return((o=(s=(await openai.chat.completions.create({model:"gpt-4",messages:[{role:"system",content:"You are an expert teacher creating educational content for Grade 8 students. Create clear, engaging, and accurate content."},{role:"user",content:`Create a detailed lesson about ${e} for Grade 8 ${i}. Include explanations, examples, and key points. Format the content with clear sections and bullet points.`}],temperature:.7})).choices[0])==null?void 0:s.message)==null?void 0:o.content)||"Content generation failed"}catch(a){throw console.error("Error generating learning content:",a),a}}const Learning=()=>{const{subjectId:i,topicId:e}=useParams(),[s,o]=reactExports.useState(""),[a,c]=reactExports.useState(!0),[d,h]=reactExports.useState(null),[g,j]=reactExports.useState(null),[$,_]=reactExports.useState({});reactExports.useEffect(()=>{(async()=>{if(!i||!e){h("Missing subject or topic information"),c(!1);return}try{const ot=await generateLearningContent(i,e);o(ot),h(null)}catch(ot){h(ot instanceof Error?ot.message:"Failed to load content")}finally{c(!1)}})()},[i,e]);const et=async(it,ot)=>{_(at=>({...at,[ot]:!0}))};if(a)return jsxRuntimeExports.jsx(LoadingSpinner,{});if(d)return jsxRuntimeExports.jsx(ErrorMessage,{message:d});const tt=s.split(`

`).map((it,ot)=>({id:ot,title:it.split(`
`)[0],content:it.split(`
`).slice(1).join(`
`),isCompleted:$[ot]||!1}));return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"bg-emerald-500 text-white p-6 relative",children:[jsxRuntimeExports.jsx(BackButton,{className:"absolute top-6 left-4 text-white"}),jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold mb-2",children:[i," Learning"]}),jsxRuntimeExports.jsxs("p",{className:"text-white/80",children:["Topic: ",e]})]})]}),jsxRuntimeExports.jsx("div",{className:"max-w-md mx-auto p-4",children:jsxRuntimeExports.jsx(LessonCard,{id:1,title:"Today's Lesson",sections:tt,expandedSection:g,onToggleSection:j,onMarkComplete:et})})]})},yr=class yr{constructor(){qn(this,"currentSound",null)}static getInstance(){return yr.instance||(yr.instance=new yr),yr.instance}setCurrentSound(e){this.currentSound&&this.currentSound!==e&&this.currentSound.stop(),this.currentSound=e}stopAll(){this.currentSound&&(this.currentSound.stop(),this.currentSound=null)}};qn(yr,"instance");let AudioManager=yr;const audioManager=AudioManager.getInstance(),AudioBook=({title:i,author:e,audioUrl:s,duration:o,date:a})=>{const[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState("00:00"),[j,$]=reactExports.useState(0),[_,et]=reactExports.useState(null),tt=reactExports.useRef(null),it=reactExports.useRef(null);reactExports.useEffect(()=>{const ft="https://raw.githubusercontent.com/samora254/Kitabu/main/Trial-audio.mp3";try{tt.current=new howler.Howl({src:[s||ft],html5:!0,preload:!0,onload:()=>{et(null)},onloaderror:()=>{console.error("Error loading audio file, falling back to default"),s!==ft&&(tt.current=new howler.Howl({src:[ft],html5:!0,preload:!0}))},onplay:()=>{d(!0),tt.current&&audioManager.setCurrentSound(tt.current)},onpause:()=>d(!1),onstop:()=>{d(!1),$(0),g("00:00")},onend:()=>{d(!1),$(0),g("00:00")},onseek:()=>{ot()}})}catch(gt){et("Failed to load audio"),console.error("Audio initialization error:",gt)}return()=>{tt.current&&tt.current.unload()}},[s]),reactExports.useEffect(()=>{let ft;return c&&(ft=setInterval(ot,1e3)),()=>{ft&&clearInterval(ft)}},[c]);const ot=()=>{if(tt.current)try{const ft=tt.current.seek(),gt=tt.current.duration();gt>0&&($(ft/gt*100),g(at(ft)))}catch(ft){console.error("Error updating progress:",ft)}},at=ft=>{const gt=Math.floor(ft/60),dt=Math.floor(ft%60);return`${gt.toString().padStart(2,"0")}:${dt.toString().padStart(2,"0")}`},rt=()=>{if(tt.current)try{c?tt.current.pause():tt.current.play()}catch(ft){console.error("Playback error:",ft),et("Failed to play audio")}},st=ft=>{if(!(!tt.current||!it.current))try{const gt=it.current.getBoundingClientRect(),ut=(ft.clientX-gt.left)/gt.width,_t=tt.current.duration()*ut;tt.current.seek(_t),$(ut*100)}catch(gt){console.error("Seek error:",gt)}},lt=()=>{if(tt.current)try{tt.current.seek(0)}catch(ft){console.error("Previous track error:",ft)}},mt=()=>{if(tt.current)try{tt.current.seek(tt.current.duration())}catch(ft){console.error("Next track error:",ft)}};return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-2",children:i}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-4",children:["By ",e,", ",a]}),_&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg mb-4",children:_}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{ref:it,className:"h-2 bg-gray-200 rounded-full cursor-pointer",onClick:st,children:jsxRuntimeExports.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-300",style:{width:`${j}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[jsxRuntimeExports.jsx("span",{children:h}),jsxRuntimeExports.jsx("span",{children:o})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[jsxRuntimeExports.jsx("button",{onClick:lt,className:"p-2 hover:text-green-500 transition-colors","aria-label":"Previous",children:""}),jsxRuntimeExports.jsx("button",{onClick:rt,className:"w-12 h-12 rounded-full bg-green-500 text-white flex items-center justify-center hover:bg-green-600 transition-colors","aria-label":c?"Pause":"Play",children:c?"":""}),jsxRuntimeExports.jsx("button",{onClick:mt,className:"p-2 hover:text-green-500 transition-colors","aria-label":"Next",children:""})]})]})]})},SAMPLE_AUDIO="https://raw.githubusercontent.com/samora254/Kitabu/main/Trial-audio.mp3",audioBooks=[{id:"g8-math-1",title:"Advanced Mathematics",author:"Dennis Musau",coverImage:"/covers/math-8.jpg",audioUrl:SAMPLE_AUDIO,duration:"03:09",grade:8,date:"Oct 28th 2024 4:45 PM"},{id:"g8-eng-1",title:"Literature Studies",author:"Dennis Musau",coverImage:"/covers/eng-8.jpg",audioUrl:SAMPLE_AUDIO,duration:"03:09",grade:8,date:"Oct 28th 2024 4:45 PM"},{id:"g8-kis-1",title:"Uhakiki wa Fasihi",author:"Dennis Musau",coverImage:"/covers/kis-8.jpg",audioUrl:SAMPLE_AUDIO,duration:"03:09",grade:8,date:"Oct 28th 2024 4:45 PM"},{id:"g8-sci-1",title:"Physics Fundamentals",author:"Dennis Musau",coverImage:"/covers/sci-8.jpg",audioUrl:SAMPLE_AUDIO,duration:"03:09",grade:8,date:"Oct 28th 2024 4:45 PM"}],AudioBooks=()=>{const{selectedGrade:i}=useGrade(),[e,s]=reactExports.useState(""),o=audioBooks.filter(a=>a.grade===i).filter(a=>a.title.toLowerCase().includes(e.toLowerCase())||a.author.toLowerCase().includes(e.toLowerCase()));return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"bg-green-500 text-white p-6 relative",children:[jsxRuntimeExports.jsx(BackButton,{className:"absolute top-6 left-4 text-white"}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Audio Books"}),jsxRuntimeExports.jsxs("p",{className:"text-white/80",children:["Grade ",i]})]})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[jsxRuntimeExports.jsx("div",{className:"mb-6",children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search books...",value:e,onChange:a=>s(a.target.value),className:"w-full px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-green-500"})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.length>0?o.map(a=>jsxRuntimeExports.jsx(AudioBook,{...a},a.id)):jsxRuntimeExports.jsx("div",{className:"col-span-2 text-center py-8 text-gray-500",children:"No audio books found for this grade level."})})]})]})};function commonjsRequire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(i,e)=>{var Bn;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=Rt,e.bytesToString=Yt,e.createValidAbsoluteUrl=St,e.getModificationDate=Zt,e.getUuid=Pn,e.getVerbosityLevel=Dt,e.info=$t,e.isArrayBuffer=Qt,e.isArrayEqual=Wt,e.isNodeJS=void 0,e.normalizeUnicode=Sn,e.objectFromMap=dn,e.objectSize=sn,e.setVerbosityLevel=Ot,e.shadow=Pt,e.string32=cn,e.stringToBytes=rn,e.stringToPDFString=fn,e.stringToUTF8String=yn,e.unreachable=Vt,e.utf8StringToString=gn,e.warn=Bt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const o=[1,0,0,1,0,0];e.IDENTITY_MATRIX=o;const a=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=a;const c=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=c;const d=1.35;e.LINE_FACTOR=d;const h=.35;e.LINE_DESCENT_FACTOR=h;const g=h/d;e.BASELINE_FACTOR=g;const j={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=j;const $={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=$;const _="pdfjs_internal_editor_";e.AnnotationEditorPrefix=_;const et={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=et;const tt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=tt;const it={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=it;const ot={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=ot;const at={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=at;const rt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=rt;const st={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=st;const lt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=lt;const mt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=mt;const ft={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=ft;const gt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=gt;const dt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=dt;const ut={O:"PageOpen",C:"PageClose"};e.PageActionEventType=ut;const ct={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=ct;const _t={NONE:0,BINARY:1};e.CMapCompressionType=_t;const ht={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=ht;const Et={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Et;let yt=ct.WARNINGS;function Ot(mn){Number.isInteger(mn)&&(yt=mn)}function Dt(){return yt}function $t(mn){yt>=ct.INFOS&&console.log(`Info: ${mn}`)}function Bt(mn){yt>=ct.WARNINGS&&console.log(`Warning: ${mn}`)}function Vt(mn){throw new Error(mn)}function Rt(mn,en){mn||Vt(en)}function vt(mn){switch(mn==null?void 0:mn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function St(mn,en=null,nn=null){if(!mn)return null;try{if(nn&&typeof mn=="string"){if(nn.addDefaultProtocol&&mn.startsWith("www.")){const zn=mn.match(/\./g);(zn==null?void 0:zn.length)>=2&&(mn=`http://${mn}`)}if(nn.tryConvertEncoding)try{mn=yn(mn)}catch{}}const Tn=en?new URL(mn,en):new URL(mn);if(vt(Tn))return Tn}catch{}return null}function Pt(mn,en,nn,Tn=!1){return Object.defineProperty(mn,en,{value:nn,enumerable:!Tn,configurable:!0,writable:!1}),nn}const pt=function(){function en(nn,Tn){this.constructor===en&&Vt("Cannot initialize BaseException."),this.message=nn,this.name=Tn}return en.prototype=new Error,en.constructor=en,en}();e.BaseException=pt;class bt extends pt{constructor(en,nn){super(en,"PasswordException"),this.code=nn}}e.PasswordException=bt;class Tt extends pt{constructor(en,nn){super(en,"UnknownErrorException"),this.details=nn}}e.UnknownErrorException=Tt;class Ct extends pt{constructor(en){super(en,"InvalidPDFException")}}e.InvalidPDFException=Ct;class kt extends pt{constructor(en){super(en,"MissingPDFException")}}e.MissingPDFException=kt;class Mt extends pt{constructor(en,nn){super(en,"UnexpectedResponseException"),this.status=nn}}e.UnexpectedResponseException=Mt;class zt extends pt{constructor(en){super(en,"FormatError")}}e.FormatError=zt;class Kt extends pt{constructor(en){super(en,"AbortException")}}e.AbortException=Kt;function Yt(mn){(typeof mn!="object"||(mn==null?void 0:mn.length)===void 0)&&Vt("Invalid argument for bytesToString");const en=mn.length,nn=8192;if(en<nn)return String.fromCharCode.apply(null,mn);const Tn=[];for(let zn=0;zn<en;zn+=nn){const Un=Math.min(zn+nn,en),Ut=mn.subarray(zn,Un);Tn.push(String.fromCharCode.apply(null,Ut))}return Tn.join("")}function rn(mn){typeof mn!="string"&&Vt("Invalid argument for stringToBytes");const en=mn.length,nn=new Uint8Array(en);for(let Tn=0;Tn<en;++Tn)nn[Tn]=mn.charCodeAt(Tn)&255;return nn}function cn(mn){return String.fromCharCode(mn>>24&255,mn>>16&255,mn>>8&255,mn&255)}function sn(mn){return Object.keys(mn).length}function dn(mn){const en=Object.create(null);for(const[nn,Tn]of mn)en[nn]=Tn;return en}function Ht(){const mn=new Uint8Array(4);return mn[0]=1,new Uint32Array(mn.buffer,0,1)[0]===1}function Xt(){try{return new Function(""),!0}catch{return!1}}class It{static get isLittleEndian(){return Pt(this,"isLittleEndian",Ht())}static get isEvalSupported(){return Pt(this,"isEvalSupported",Xt())}static get isOffscreenCanvasSupported(){return Pt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Pt(this,"platform",{isWin:!1,isMac:!1}):Pt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var en,nn;return Pt(this,"isCSSRoundSupported",(nn=(en=globalThis.CSS)==null?void 0:en.supports)==null?void 0:nn.call(en,"width: round(1.5px, 1px)"))}}e.FeatureTest=It;const Nt=[...Array(256).keys()].map(mn=>mn.toString(16).padStart(2,"0"));class Gt{static makeHexColor(en,nn,Tn){return`#${Nt[en]}${Nt[nn]}${Nt[Tn]}`}static scaleMinMax(en,nn){let Tn;en[0]?(en[0]<0&&(Tn=nn[0],nn[0]=nn[1],nn[1]=Tn),nn[0]*=en[0],nn[1]*=en[0],en[3]<0&&(Tn=nn[2],nn[2]=nn[3],nn[3]=Tn),nn[2]*=en[3],nn[3]*=en[3]):(Tn=nn[0],nn[0]=nn[2],nn[2]=Tn,Tn=nn[1],nn[1]=nn[3],nn[3]=Tn,en[1]<0&&(Tn=nn[2],nn[2]=nn[3],nn[3]=Tn),nn[2]*=en[1],nn[3]*=en[1],en[2]<0&&(Tn=nn[0],nn[0]=nn[1],nn[1]=Tn),nn[0]*=en[2],nn[1]*=en[2]),nn[0]+=en[4],nn[1]+=en[4],nn[2]+=en[5],nn[3]+=en[5]}static transform(en,nn){return[en[0]*nn[0]+en[2]*nn[1],en[1]*nn[0]+en[3]*nn[1],en[0]*nn[2]+en[2]*nn[3],en[1]*nn[2]+en[3]*nn[3],en[0]*nn[4]+en[2]*nn[5]+en[4],en[1]*nn[4]+en[3]*nn[5]+en[5]]}static applyTransform(en,nn){const Tn=en[0]*nn[0]+en[1]*nn[2]+nn[4],zn=en[0]*nn[1]+en[1]*nn[3]+nn[5];return[Tn,zn]}static applyInverseTransform(en,nn){const Tn=nn[0]*nn[3]-nn[1]*nn[2],zn=(en[0]*nn[3]-en[1]*nn[2]+nn[2]*nn[5]-nn[4]*nn[3])/Tn,Un=(-en[0]*nn[1]+en[1]*nn[0]+nn[4]*nn[1]-nn[5]*nn[0])/Tn;return[zn,Un]}static getAxialAlignedBoundingBox(en,nn){const Tn=this.applyTransform(en,nn),zn=this.applyTransform(en.slice(2,4),nn),Un=this.applyTransform([en[0],en[3]],nn),Ut=this.applyTransform([en[2],en[1]],nn);return[Math.min(Tn[0],zn[0],Un[0],Ut[0]),Math.min(Tn[1],zn[1],Un[1],Ut[1]),Math.max(Tn[0],zn[0],Un[0],Ut[0]),Math.max(Tn[1],zn[1],Un[1],Ut[1])]}static inverseTransform(en){const nn=en[0]*en[3]-en[1]*en[2];return[en[3]/nn,-en[1]/nn,-en[2]/nn,en[0]/nn,(en[2]*en[5]-en[4]*en[3])/nn,(en[4]*en[1]-en[5]*en[0])/nn]}static singularValueDecompose2dScale(en){const nn=[en[0],en[2],en[1],en[3]],Tn=en[0]*nn[0]+en[1]*nn[2],zn=en[0]*nn[1]+en[1]*nn[3],Un=en[2]*nn[0]+en[3]*nn[2],Ut=en[2]*nn[1]+en[3]*nn[3],pn=(Tn+Ut)/2,bn=Math.sqrt((Tn+Ut)**2-4*(Tn*Ut-Un*zn))/2,In=pn+bn||1,Fn=pn-bn||1;return[Math.sqrt(In),Math.sqrt(Fn)]}static normalizeRect(en){const nn=en.slice(0);return en[0]>en[2]&&(nn[0]=en[2],nn[2]=en[0]),en[1]>en[3]&&(nn[1]=en[3],nn[3]=en[1]),nn}static intersect(en,nn){const Tn=Math.max(Math.min(en[0],en[2]),Math.min(nn[0],nn[2])),zn=Math.min(Math.max(en[0],en[2]),Math.max(nn[0],nn[2]));if(Tn>zn)return null;const Un=Math.max(Math.min(en[1],en[3]),Math.min(nn[1],nn[3])),Ut=Math.min(Math.max(en[1],en[3]),Math.max(nn[1],nn[3]));return Un>Ut?null:[Tn,Un,zn,Ut]}static bezierBoundingBox(en,nn,Tn,zn,Un,Ut,pn,bn){const In=[],Fn=[[],[]];let Rn,jt,Lt,qt,an,hn,_n,En;for(let jn=0;jn<2;++jn){if(jn===0?(jt=6*en-12*Tn+6*Un,Rn=-3*en+9*Tn-9*Un+3*pn,Lt=3*Tn-3*en):(jt=6*nn-12*zn+6*Ut,Rn=-3*nn+9*zn-9*Ut+3*bn,Lt=3*zn-3*nn),Math.abs(Rn)<1e-12){if(Math.abs(jt)<1e-12)continue;qt=-Lt/jt,0<qt&&qt<1&&In.push(qt);continue}_n=jt*jt-4*Lt*Rn,En=Math.sqrt(_n),!(_n<0)&&(an=(-jt+En)/(2*Rn),0<an&&an<1&&In.push(an),hn=(-jt-En)/(2*Rn),0<hn&&hn<1&&In.push(hn))}let On=In.length,Mn;const wn=On;for(;On--;)qt=In[On],Mn=1-qt,Fn[0][On]=Mn*Mn*Mn*en+3*Mn*Mn*qt*Tn+3*Mn*qt*qt*Un+qt*qt*qt*pn,Fn[1][On]=Mn*Mn*Mn*nn+3*Mn*Mn*qt*zn+3*Mn*qt*qt*Ut+qt*qt*qt*bn;return Fn[0][wn]=en,Fn[1][wn]=nn,Fn[0][wn+1]=pn,Fn[1][wn+1]=bn,Fn[0].length=Fn[1].length=wn+2,[Math.min(...Fn[0]),Math.min(...Fn[1]),Math.max(...Fn[0]),Math.max(...Fn[1])]}}e.Util=Gt;const tn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function fn(mn){if(mn[0]>=""){let nn;if(mn[0]===""&&mn[1]===""?nn="utf-16be":mn[0]===""&&mn[1]===""?nn="utf-16le":mn[0]===""&&mn[1]===""&&mn[2]===""&&(nn="utf-8"),nn)try{const Tn=new TextDecoder(nn,{fatal:!0}),zn=rn(mn);return Tn.decode(zn)}catch(Tn){Bt(`stringToPDFString: "${Tn}".`)}}const en=[];for(let nn=0,Tn=mn.length;nn<Tn;nn++){const zn=tn[mn.charCodeAt(nn)];en.push(zn?String.fromCharCode(zn):mn.charAt(nn))}return en.join("")}function yn(mn){return decodeURIComponent(escape(mn))}function gn(mn){return unescape(encodeURIComponent(mn))}function Qt(mn){return typeof mn=="object"&&(mn==null?void 0:mn.byteLength)!==void 0}function Wt(mn,en){if(mn.length!==en.length)return!1;for(let nn=0,Tn=mn.length;nn<Tn;nn++)if(mn[nn]!==en[nn])return!1;return!0}function Zt(mn=new Date){return[mn.getUTCFullYear().toString(),(mn.getUTCMonth()+1).toString().padStart(2,"0"),mn.getUTCDate().toString().padStart(2,"0"),mn.getUTCHours().toString().padStart(2,"0"),mn.getUTCMinutes().toString().padStart(2,"0"),mn.getUTCSeconds().toString().padStart(2,"0")].join("")}class xn{constructor(){on(this,Bn,!1);this.promise=new Promise((en,nn)=>{this.resolve=Tn=>{ln(this,Bn,!0),en(Tn)},this.reject=Tn=>{ln(this,Bn,!0),nn(Tn)}})}get settled(){return At(this,Bn)}}Bn=new WeakMap,e.PromiseCapability=xn;let An=null,Cn=null;function Sn(mn){return An||(An=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Cn=new Map([["","t"]])),mn.replaceAll(An,(en,nn,Tn)=>nn?nn.normalize("NFKC"):Cn.get(Tn))}function Pn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const mn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(mn);else for(let en=0;en<32;en++)mn[en]=Math.floor(Math.random()*255);return Yt(mn)}const Vn="pdfjs_internal_id_";e.AnnotationPrefix=Vn},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var i,s,o,a,Ar,ts,h,g,j,$,_,et,tt,it,ot,ns,rt,st,Ss,mt,ft;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(dt){if(typeof dt=="string"||dt instanceof URL?dt={url:dt}:(0,_util.isArrayBuffer)(dt)&&(dt={data:dt}),typeof dt!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!dt.url&&!dt.data&&!dt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const ut=new PDFDocumentLoadingTask,{docId:ct}=ut,_t=dt.url?getUrlProp(dt.url):null,ht=dt.data?getDataProp(dt.data):null,Et=dt.httpHeaders||null,yt=dt.withCredentials===!0,Ot=dt.password??null,Dt=dt.range instanceof PDFDataRangeTransport?dt.range:null,$t=Number.isInteger(dt.rangeChunkSize)&&dt.rangeChunkSize>0?dt.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Bt=dt.worker instanceof PDFWorker?dt.worker:null;const Vt=dt.verbosity,Rt=typeof dt.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(dt.docBaseUrl)?dt.docBaseUrl:null,vt=typeof dt.cMapUrl=="string"?dt.cMapUrl:null,St=dt.cMapPacked!==!1,Pt=dt.CMapReaderFactory||DefaultCMapReaderFactory,pt=typeof dt.standardFontDataUrl=="string"?dt.standardFontDataUrl:null,bt=dt.StandardFontDataFactory||DefaultStandardFontDataFactory,Tt=dt.stopAtErrors!==!0,Ct=Number.isInteger(dt.maxImageSize)&&dt.maxImageSize>-1?dt.maxImageSize:-1,kt=dt.isEvalSupported!==!1,Mt=typeof dt.isOffscreenCanvasSupported=="boolean"?dt.isOffscreenCanvasSupported:!_util.isNodeJS,zt=Number.isInteger(dt.canvasMaxAreaInBytes)?dt.canvasMaxAreaInBytes:-1,Kt=typeof dt.disableFontFace=="boolean"?dt.disableFontFace:_util.isNodeJS,Yt=dt.fontExtraProperties===!0,rn=dt.enableXfa===!0,cn=dt.ownerDocument||globalThis.document,sn=dt.disableRange===!0,dn=dt.disableStream===!0,Ht=dt.disableAutoFetch===!0,Xt=dt.pdfBug===!0,It=Dt?Dt.length:dt.length??NaN,Nt=typeof dt.useSystemFonts=="boolean"?dt.useSystemFonts:!_util.isNodeJS&&!Kt,Gt=typeof dt.useWorkerFetch=="boolean"?dt.useWorkerFetch:Pt===_display_utils.DOMCMapReaderFactory&&bt===_display_utils.DOMStandardFontDataFactory&&vt&&pt&&(0,_display_utils.isValidFetchUrl)(vt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(pt,document.baseURI),tn=dt.canvasFactory||new DefaultCanvasFactory({ownerDocument:cn}),fn=dt.filterFactory||new DefaultFilterFactory({docId:ct,ownerDocument:cn}),yn=null;(0,_util.setVerbosityLevel)(Vt);const gn={canvasFactory:tn,filterFactory:fn};if(Gt||(gn.cMapReaderFactory=new Pt({baseUrl:vt,isCompressed:St}),gn.standardFontDataFactory=new bt({baseUrl:pt})),!Bt){const Zt={verbosity:Vt,port:_worker_options.GlobalWorkerOptions.workerPort};Bt=Zt.port?PDFWorker.fromPort(Zt):new PDFWorker(Zt),ut._worker=Bt}const Qt={docId:ct,apiVersion:"3.11.174",data:ht,password:Ot,disableAutoFetch:Ht,rangeChunkSize:$t,length:It,docBaseUrl:Rt,enableXfa:rn,evaluatorOptions:{maxImageSize:Ct,disableFontFace:Kt,ignoreErrors:Tt,isEvalSupported:kt,isOffscreenCanvasSupported:Mt,canvasMaxAreaInBytes:zt,fontExtraProperties:Yt,useSystemFonts:Nt,cMapUrl:Gt?vt:null,standardFontDataUrl:Gt?pt:null}},Wt={ignoreErrors:Tt,isEvalSupported:kt,disableFontFace:Kt,fontExtraProperties:Yt,enableXfa:rn,ownerDocument:cn,disableAutoFetch:Ht,pdfBug:Xt,styleElement:yn};return Bt.promise.then(function(){if(ut.destroyed)throw new Error("Loading aborted");const Zt=_fetchDocument(Bt,Qt),xn=new Promise(function(An){let Cn;Dt?Cn=new _transport_stream.PDFDataTransportStream({length:It,initialData:Dt.initialData,progressiveDone:Dt.progressiveDone,contentDispositionFilename:Dt.contentDispositionFilename,disableRange:sn,disableStream:dn},Dt):ht||(Cn=(Pn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Pn):(0,_display_utils.isValidFetchUrl)(Pn.url)?new _displayFetch_stream.PDFFetchStream(Pn):new _displayNetwork.PDFNetworkStream(Pn))({url:_t,length:It,httpHeaders:Et,withCredentials:yt,rangeChunkSize:$t,disableRange:sn,disableStream:dn})),An(Cn)});return Promise.all([Zt,xn]).then(function([An,Cn]){if(ut.destroyed)throw new Error("Loading aborted");const Sn=new _message_handler.MessageHandler(ct,An,Bt.port),Pn=new WorkerTransport(Sn,ut,Cn,Wt,gn);ut._transport=Pn,Sn.send("Ready",null)})}).catch(ut._capability.reject),ut}async function _fetchDocument(dt,ut){if(dt.destroyed)throw new Error("Worker was destroyed");const ct=await dt.messageHandler.sendWithPromise("GetDocRequest",ut,ut.data?[ut.data.buffer]:null);if(dt.destroyed)throw new Error("Worker was destroyed");return ct}function getUrlProp(dt){if(dt instanceof URL)return dt.href;try{return new URL(dt,window.location).href}catch{if(_util.isNodeJS&&typeof dt=="string")return dt}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(dt){if(_util.isNodeJS&&typeof Buffer<"u"&&dt instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(dt instanceof Uint8Array&&dt.byteLength===dt.buffer.byteLength)return dt;if(typeof dt=="string")return(0,_util.stringToBytes)(dt);if(typeof dt=="object"&&!isNaN(dt==null?void 0:dt.length)||(0,_util.isArrayBuffer)(dt))return new Uint8Array(dt);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const e=class e{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Fr(e,i)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var ut,ct,_t;this.destroyed=!0;try{(ut=this._worker)!=null&&ut.port&&(this._worker._pendingDestroy=!0),await((ct=this._transport)==null?void 0:ct.destroy())}catch(ht){throw(_t=this._worker)!=null&&_t.port&&delete this._worker._pendingDestroy,ht}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};i=new WeakMap,on(e,i,0);let PDFDocumentLoadingTask=e;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(ut,ct,_t=!1,ht=null){this.length=ut,this.initialData=ct,this.progressiveDone=_t,this.contentDispositionFilename=ht,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(ut){this._rangeListeners.push(ut)}addProgressListener(ut){this._progressListeners.push(ut)}addProgressiveReadListener(ut){this._progressiveReadListeners.push(ut)}addProgressiveDoneListener(ut){this._progressiveDoneListeners.push(ut)}onDataRange(ut,ct){for(const _t of this._rangeListeners)_t(ut,ct)}onDataProgress(ut,ct){this._readyCapability.promise.then(()=>{for(const _t of this._progressListeners)_t(ut,ct)})}onDataProgressiveRead(ut){this._readyCapability.promise.then(()=>{for(const ct of this._progressiveReadListeners)ct(ut)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const ut of this._progressiveDoneListeners)ut()})}transportReady(){this._readyCapability.resolve()}requestDataRange(ut,ct){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(ut,ct){this._pdfInfo=ut,this._transport=ct,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(_t=>{if(!_t)return _t;const ht=[];for(const Et in _t)ht.push(..._t[Et]);return ht}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(ut){return this._transport.getPage(ut)}getPageIndex(ut){return this._transport.getPageIndex(ut)}getDestinations(){return this._transport.getDestinations()}getDestination(ut){return this._transport.getDestination(ut)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(ut=!1){return this._transport.startCleanup(ut||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(ut,ct,_t,ht=!1){on(this,a);on(this,s,null);on(this,o,!1);this._pageIndex=ut,this._pageInfo=ct,this._transport=_t,this._stats=ht?new _display_utils.StatTimer:null,this._pdfBug=ht,this.commonObjs=_t.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:ut,rotation:ct=this.rotate,offsetX:_t=0,offsetY:ht=0,dontFlip:Et=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:ut,rotation:ct,offsetX:_t,offsetY:ht,dontFlip:Et})}getAnnotations({intent:ut="display"}={}){const ct=this._transport.getRenderingIntent(ut);return this._transport.getAnnotations(this._pageIndex,ct.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var ut;return((ut=this._transport._htmlForXfa)==null?void 0:ut.children[this._pageIndex])||null}render({canvasContext:ut,viewport:ct,intent:_t="display",annotationMode:ht=_util.AnnotationMode.ENABLE,transform:Et=null,background:yt=null,optionalContentConfigPromise:Ot=null,annotationCanvasMap:Dt=null,pageColors:$t=null,printAnnotationStorage:Bt=null}){var bt,Tt;(bt=this._stats)==null||bt.time("Overall");const Vt=this._transport.getRenderingIntent(_t,ht,Bt);ln(this,o,!1),Jt(this,a,ts).call(this),Ot||(Ot=this._transport.getOptionalContentConfig());let Rt=this._intentStates.get(Vt.cacheKey);Rt||(Rt=Object.create(null),this._intentStates.set(Vt.cacheKey,Rt)),Rt.streamReaderCancelTimeout&&(clearTimeout(Rt.streamReaderCancelTimeout),Rt.streamReaderCancelTimeout=null);const vt=!!(Vt.renderingIntent&_util.RenderingIntentFlag.PRINT);Rt.displayReadyCapability||(Rt.displayReadyCapability=new _util.PromiseCapability,Rt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Tt=this._stats)==null||Tt.time("Page Request"),this._pumpOperatorList(Vt));const St=Ct=>{var kt,Mt;Rt.renderTasks.delete(Pt),(this._maybeCleanupAfterRender||vt)&&ln(this,o,!0),Jt(this,a,Ar).call(this,!vt),Ct?(Pt.capability.reject(Ct),this._abortOperatorList({intentState:Rt,reason:Ct instanceof Error?Ct:new Error(Ct)})):Pt.capability.resolve(),(kt=this._stats)==null||kt.timeEnd("Rendering"),(Mt=this._stats)==null||Mt.timeEnd("Overall")},Pt=new InternalRenderTask({callback:St,params:{canvasContext:ut,viewport:ct,transform:Et,background:yt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Dt,operatorList:Rt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!vt,pdfBug:this._pdfBug,pageColors:$t});(Rt.renderTasks||(Rt.renderTasks=new Set)).add(Pt);const pt=Pt.task;return Promise.all([Rt.displayReadyCapability.promise,Ot]).then(([Ct,kt])=>{var Mt;if(this.destroyed){St();return}(Mt=this._stats)==null||Mt.time("Rendering"),Pt.initializeGraphics({transparency:Ct,optionalContentConfig:kt}),Pt.operatorListChanged()}).catch(St),pt}getOperatorList({intent:ut="display",annotationMode:ct=_util.AnnotationMode.ENABLE,printAnnotationStorage:_t=null}={}){var Dt;function ht(){yt.operatorList.lastChunk&&(yt.opListReadCapability.resolve(yt.operatorList),yt.renderTasks.delete(Ot))}const Et=this._transport.getRenderingIntent(ut,ct,_t,!0);let yt=this._intentStates.get(Et.cacheKey);yt||(yt=Object.create(null),this._intentStates.set(Et.cacheKey,yt));let Ot;return yt.opListReadCapability||(Ot=Object.create(null),Ot.operatorListChanged=ht,yt.opListReadCapability=new _util.PromiseCapability,(yt.renderTasks||(yt.renderTasks=new Set)).add(Ot),yt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Dt=this._stats)==null||Dt.time("Page Request"),this._pumpOperatorList(Et)),yt.opListReadCapability.promise}streamTextContent({includeMarkedContent:ut=!1,disableNormalization:ct=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:ut===!0,disableNormalization:ct===!0},{highWaterMark:100,size(ht){return ht.items.length}})}getTextContent(ut={}){if(this._transport._htmlForXfa)return this.getXfa().then(_t=>_xfa_text.XfaText.textContent(_t));const ct=this.streamTextContent(ut);return new Promise(function(_t,ht){function Et(){yt.read().then(function({value:Dt,done:$t}){if($t){_t(Ot);return}Object.assign(Ot.styles,Dt.styles),Ot.items.push(...Dt.items),Et()},ht)}const yt=ct.getReader(),Ot={items:[],styles:Object.create(null)};Et()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const ut=[];for(const ct of this._intentStates.values())if(this._abortOperatorList({intentState:ct,reason:new Error("Page was destroyed."),force:!0}),!ct.opListReadCapability)for(const _t of ct.renderTasks)ut.push(_t.completed),_t.cancel();return this.objs.clear(),ln(this,o,!1),Jt(this,a,ts).call(this),Promise.all(ut)}cleanup(ut=!1){ln(this,o,!0);const ct=Jt(this,a,Ar).call(this,!1);return ut&&ct&&this._stats&&(this._stats=new _display_utils.StatTimer),ct}_startRenderPage(ut,ct){var ht,Et;const _t=this._intentStates.get(ct);_t&&((ht=this._stats)==null||ht.timeEnd("Page Request"),(Et=_t.displayReadyCapability)==null||Et.resolve(ut))}_renderPageChunk(ut,ct){for(let _t=0,ht=ut.length;_t<ht;_t++)ct.operatorList.fnArray.push(ut.fnArray[_t]),ct.operatorList.argsArray.push(ut.argsArray[_t]);ct.operatorList.lastChunk=ut.lastChunk,ct.operatorList.separateAnnots=ut.separateAnnots;for(const _t of ct.renderTasks)_t.operatorListChanged();ut.lastChunk&&Jt(this,a,Ar).call(this,!0)}_pumpOperatorList({renderingIntent:ut,cacheKey:ct,annotationStorageSerializable:_t}){const{map:ht,transfers:Et}=_t,Ot=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:ut,cacheKey:ct,annotationStorage:ht},Et).getReader(),Dt=this._intentStates.get(ct);Dt.streamReader=Ot;const $t=()=>{Ot.read().then(({value:Bt,done:Vt})=>{if(Vt){Dt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Bt,Dt),$t())},Bt=>{if(Dt.streamReader=null,!this._transport.destroyed){if(Dt.operatorList){Dt.operatorList.lastChunk=!0;for(const Vt of Dt.renderTasks)Vt.operatorListChanged();Jt(this,a,Ar).call(this,!0)}if(Dt.displayReadyCapability)Dt.displayReadyCapability.reject(Bt);else if(Dt.opListReadCapability)Dt.opListReadCapability.reject(Bt);else throw Bt}})};$t()}_abortOperatorList({intentState:ut,reason:ct,force:_t=!1}){if(ut.streamReader){if(ut.streamReaderCancelTimeout&&(clearTimeout(ut.streamReaderCancelTimeout),ut.streamReaderCancelTimeout=null),!_t){if(ut.renderTasks.size>0)return;if(ct instanceof _display_utils.RenderingCancelledException){let ht=RENDERING_CANCELLED_TIMEOUT;ct.extraDelay>0&&ct.extraDelay<1e3&&(ht+=ct.extraDelay),ut.streamReaderCancelTimeout=setTimeout(()=>{ut.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:ut,reason:ct,force:!0})},ht);return}}if(ut.streamReader.cancel(new _util.AbortException(ct.message)).catch(()=>{}),ut.streamReader=null,!this._transport.destroyed){for(const[ht,Et]of this._intentStates)if(Et===ut){this._intentStates.delete(ht);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,o=new WeakMap,a=new WeakSet,Ar=function(ut=!1){if(Jt(this,a,ts).call(this),!At(this,o)||this.destroyed)return!1;if(ut)return ln(this,s,setTimeout(()=>{ln(this,s,null),Jt(this,a,Ar).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:ct,operatorList:_t}of this._intentStates.values())if(ct.size>0||!_t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ln(this,o,!1),!0},ts=function(){At(this,s)&&(clearTimeout(At(this,s)),ln(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){on(this,h,new Set);on(this,g,Promise.resolve())}postMessage(ut,ct){const _t={data:structuredClone(ut,ct?{transfer:ct}:null)};At(this,g).then(()=>{for(const ht of At(this,h))ht.call(this,_t)})}addEventListener(ut,ct){At(this,h).add(ct)}removeEventListener(ut,ct){At(this,h).delete(ct)}terminate(){At(this,h).clear()}}h=new WeakMap,g=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const dt=(j=document==null?void 0:document.currentScript)==null?void 0:j.src;dt&&(PDFWorkerUtil.fallbackWorkerSrc=dt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(dt,ut){let ct;try{if(ct=new URL(dt),!ct.origin||ct.origin==="null")return!1}catch{return!1}const _t=new URL(ut,ct);return ct.origin===_t.origin},PDFWorkerUtil.createCDNWrapper=function(dt){const ut=`importScripts("${dt}");`;return URL.createObjectURL(new Blob([ut]))}}const _PDFWorker=class _PDFWorker{constructor({name:dt=null,port:ut=null,verbosity:ct=(0,_util.getVerbosityLevel)()}={}){var _t;if(this.name=dt,this.destroyed=!1,this.verbosity=ct,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,ut){if((_t=At(_PDFWorker,$))!=null&&_t.has(ut))throw new Error("Cannot use more than one PDFWorker per port.");(At(_PDFWorker,$)||ln(_PDFWorker,$,new WeakMap)).set(ut,this),this._initializeFromPort(ut);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(dt){this._port=dt,this._messageHandler=new _message_handler.MessageHandler("main","worker",dt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:dt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,dt)||(dt=PDFWorkerUtil.createCDNWrapper(new URL(dt,window.location).href));const ut=new Worker(dt),ct=new _message_handler.MessageHandler("main","worker",ut),_t=()=>{ut.removeEventListener("error",ht),ct.destroy(),ut.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},ht=()=>{this._webWorker||_t()};ut.addEventListener("error",ht),ct.on("test",yt=>{if(ut.removeEventListener("error",ht),this.destroyed){_t();return}yt?(this._messageHandler=ct,this._port=ut,this._webWorker=ut,this._readyCapability.resolve(),ct.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),ct.destroy(),ut.terminate())}),ct.on("ready",yt=>{if(ut.removeEventListener("error",ht),this.destroyed){_t();return}try{Et()}catch{this._setupFakeWorker()}});const Et=()=>{const yt=new Uint8Array;ct.send("test",yt,[yt.buffer])};Et();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(dt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const ut=new LoopbackPort;this._port=ut;const ct=`fake${PDFWorkerUtil.fakeWorkerId++}`,_t=new _message_handler.MessageHandler(ct+"_worker",ct,ut);dt.setup(_t,ut);const ht=new _message_handler.MessageHandler(ct,ct+"_worker",ut);this._messageHandler=ht,this._readyCapability.resolve(),ht.send("configure",{verbosity:this.verbosity})}).catch(dt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${dt.message}".`))})}destroy(){var dt;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(dt=At(_PDFWorker,$))==null||dt.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(dt){var ct;if(!(dt!=null&&dt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const ut=(ct=At(this,$))==null?void 0:ct.get(dt.port);if(ut){if(ut._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return ut}return new _PDFWorker(dt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var dt;try{return((dt=globalThis.pdfjsWorker)==null?void 0:dt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};$=new WeakMap,on(_PDFWorker,$);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(ut,ct,_t,ht,Et){on(this,ot);on(this,_,new Map);on(this,et,new Map);on(this,tt,new Map);on(this,it,null);this.messageHandler=ut,this.loadingTask=ct,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:ht.ownerDocument,styleElement:ht.styleElement}),this._params=ht,this.canvasFactory=Et.canvasFactory,this.filterFactory=Et.filterFactory,this.cMapReaderFactory=Et.cMapReaderFactory,this.standardFontDataFactory=Et.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=_t,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(ut,ct=_util.AnnotationMode.ENABLE,_t=null,ht=!1){let Et=_util.RenderingIntentFlag.DISPLAY,yt=_annotation_storage.SerializableEmpty;switch(ut){case"any":Et=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Et=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${ut}`)}switch(ct){case _util.AnnotationMode.DISABLE:Et+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Et+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Et+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,yt=(Et&_util.RenderingIntentFlag.PRINT&&_t instanceof _annotation_storage.PrintAnnotationStorage?_t:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${ct}`)}return ht&&(Et+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Et,cacheKey:`${Et}_${yt.hash}`,annotationStorageSerializable:yt}}destroy(){var _t;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(_t=At(this,it))==null||_t.reject(new Error("Worker was destroyed during onPassword callback"));const ut=[];for(const ht of At(this,et).values())ut.push(ht._destroy());At(this,et).clear(),At(this,tt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const ct=this.messageHandler.sendWithPromise("Terminate",null);return ut.push(ct),Promise.all(ut).then(()=>{var ht;this.commonObjs.clear(),this.fontLoader.clear(),At(this,_).clear(),this.filterFactory.destroy(),(ht=this._networkStream)==null||ht.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:ut,loadingTask:ct}=this;ut.on("GetReader",(_t,ht)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Et=>{this._lastProgress={loaded:Et.loaded,total:Et.total}},ht.onPull=()=>{this._fullReader.read().then(function({value:Et,done:yt}){if(yt){ht.close();return}(0,_util.assert)(Et instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(Et),1,[Et])}).catch(Et=>{ht.error(Et)})},ht.onCancel=Et=>{this._fullReader.cancel(Et),ht.ready.catch(yt=>{if(!this.destroyed)throw yt})}}),ut.on("ReaderHeadersReady",_t=>{const ht=new _util.PromiseCapability,Et=this._fullReader;return Et.headersReady.then(()=>{var yt;(!Et.isStreamingSupported||!Et.isRangeSupported)&&(this._lastProgress&&((yt=ct.onProgress)==null||yt.call(ct,this._lastProgress)),Et.onProgress=Ot=>{var Dt;(Dt=ct.onProgress)==null||Dt.call(ct,{loaded:Ot.loaded,total:Ot.total})}),ht.resolve({isStreamingSupported:Et.isStreamingSupported,isRangeSupported:Et.isRangeSupported,contentLength:Et.contentLength})},ht.reject),ht.promise}),ut.on("GetRangeReader",(_t,ht)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Et=this._networkStream.getRangeReader(_t.begin,_t.end);if(!Et){ht.close();return}ht.onPull=()=>{Et.read().then(function({value:yt,done:Ot}){if(Ot){ht.close();return}(0,_util.assert)(yt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),ht.enqueue(new Uint8Array(yt),1,[yt])}).catch(yt=>{ht.error(yt)})},ht.onCancel=yt=>{Et.cancel(yt),ht.ready.catch(Ot=>{if(!this.destroyed)throw Ot})}}),ut.on("GetDoc",({pdfInfo:_t})=>{this._numPages=_t.numPages,this._htmlForXfa=_t.htmlForXfa,delete _t.htmlForXfa,ct._capability.resolve(new PDFDocumentProxy(_t,this))}),ut.on("DocException",function(_t){let ht;switch(_t.name){case"PasswordException":ht=new _util.PasswordException(_t.message,_t.code);break;case"InvalidPDFException":ht=new _util.InvalidPDFException(_t.message);break;case"MissingPDFException":ht=new _util.MissingPDFException(_t.message);break;case"UnexpectedResponseException":ht=new _util.UnexpectedResponseException(_t.message,_t.status);break;case"UnknownErrorException":ht=new _util.UnknownErrorException(_t.message,_t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}ct._capability.reject(ht)}),ut.on("PasswordRequest",_t=>{if(ln(this,it,new _util.PromiseCapability),ct.onPassword){const ht=Et=>{Et instanceof Error?At(this,it).reject(Et):At(this,it).resolve({password:Et})};try{ct.onPassword(ht,_t.code)}catch(Et){At(this,it).reject(Et)}}else At(this,it).reject(new _util.PasswordException(_t.message,_t.code));return At(this,it).promise}),ut.on("DataLoaded",_t=>{var ht;(ht=ct.onProgress)==null||ht.call(ct,{loaded:_t.length,total:_t.length}),this.downloadInfoCapability.resolve(_t)}),ut.on("StartRenderPage",_t=>{if(this.destroyed)return;At(this,et).get(_t.pageIndex)._startRenderPage(_t.transparency,_t.cacheKey)}),ut.on("commonobj",([_t,ht,Et])=>{var yt;if(!this.destroyed&&!this.commonObjs.has(_t))switch(ht){case"Font":const Ot=this._params;if("error"in Et){const Bt=Et.error;(0,_util.warn)(`Error during font loading: ${Bt}`),this.commonObjs.resolve(_t,Bt);break}const Dt=Ot.pdfBug&&((yt=globalThis.FontInspector)!=null&&yt.enabled)?(Bt,Vt)=>globalThis.FontInspector.fontAdded(Bt,Vt):null,$t=new _font_loader.FontFaceObject(Et,{isEvalSupported:Ot.isEvalSupported,disableFontFace:Ot.disableFontFace,ignoreErrors:Ot.ignoreErrors,inspectFont:Dt});this.fontLoader.bind($t).catch(Bt=>ut.sendWithPromise("FontFallback",{id:_t})).finally(()=>{!Ot.fontExtraProperties&&$t.data&&($t.data=null),this.commonObjs.resolve(_t,$t)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(_t,Et);break;default:throw new Error(`Got unknown common object type ${ht}`)}}),ut.on("obj",([_t,ht,Et,yt])=>{var Dt;if(this.destroyed)return;const Ot=At(this,et).get(ht);if(!Ot.objs.has(_t))switch(Et){case"Image":if(Ot.objs.resolve(_t,yt),yt){let $t;if(yt.bitmap){const{width:Bt,height:Vt}=yt;$t=Bt*Vt*4}else $t=((Dt=yt.data)==null?void 0:Dt.length)||0;$t>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Ot._maybeCleanupAfterRender=!0)}break;case"Pattern":Ot.objs.resolve(_t,yt);break;default:throw new Error(`Got unknown object type ${Et}`)}}),ut.on("DocProgress",_t=>{var ht;this.destroyed||(ht=ct.onProgress)==null||ht.call(ct,{loaded:_t.loaded,total:_t.total})}),ut.on("FetchBuiltInCMap",_t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(_t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),ut.on("FetchStandardFontData",_t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(_t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var _t;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:ut,transfers:ct}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:ut,filename:((_t=this._fullReader)==null?void 0:_t.filename)??null},ct).finally(()=>{this.annotationStorage.resetModified()})}getPage(ut){if(!Number.isInteger(ut)||ut<=0||ut>this._numPages)return Promise.reject(new Error("Invalid page request."));const ct=ut-1,_t=At(this,tt).get(ct);if(_t)return _t;const ht=this.messageHandler.sendWithPromise("GetPage",{pageIndex:ct}).then(Et=>{if(this.destroyed)throw new Error("Transport destroyed");const yt=new PDFPageProxy(ct,Et,this,this._params.pdfBug);return At(this,et).set(ct,yt),yt});return At(this,tt).set(ct,ht),ht}getPageIndex(ut){return typeof ut!="object"||ut===null||!Number.isInteger(ut.num)||ut.num<0||!Number.isInteger(ut.gen)||ut.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:ut.num,gen:ut.gen})}getAnnotations(ut,ct){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:ut,intent:ct})}getFieldObjects(){return Jt(this,ot,ns).call(this,"GetFieldObjects")}hasJSActions(){return Jt(this,ot,ns).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(ut){return typeof ut!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:ut})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Jt(this,ot,ns).call(this,"GetDocJSActions")}getPageJSActions(ut){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:ut})}getStructTree(ut){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:ut})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(ut=>new _optional_content_config.OptionalContentConfig(ut))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const ut="GetMetadata",ct=At(this,_).get(ut);if(ct)return ct;const _t=this.messageHandler.sendWithPromise(ut,null).then(ht=>{var Et,yt;return{info:ht[0],metadata:ht[1]?new _metadata.Metadata(ht[1]):null,contentDispositionFilename:((Et=this._fullReader)==null?void 0:Et.filename)??null,contentLength:((yt=this._fullReader)==null?void 0:yt.contentLength)??null}});return At(this,_).set(ut,_t),_t}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(ut=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const ct of At(this,et).values())if(!ct.cleanup())throw new Error(`startCleanup: Page ${ct.pageNumber} is currently rendering.`);this.commonObjs.clear(),ut||this.fontLoader.clear(),At(this,_).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:ut,enableXfa:ct}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:ut,enableXfa:ct})}}_=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,ot=new WeakSet,ns=function(ut,ct=null){const _t=At(this,_).get(ut);if(_t)return _t;const ht=this.messageHandler.sendWithPromise(ut,ct);return At(this,_).set(ut,ht),ht};class PDFObjects{constructor(){on(this,st);on(this,rt,Object.create(null))}get(ut,ct=null){if(ct){const ht=Jt(this,st,Ss).call(this,ut);return ht.capability.promise.then(()=>ct(ht.data)),null}const _t=At(this,rt)[ut];if(!(_t!=null&&_t.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${ut}.`);return _t.data}has(ut){const ct=At(this,rt)[ut];return(ct==null?void 0:ct.capability.settled)||!1}resolve(ut,ct=null){const _t=Jt(this,st,Ss).call(this,ut);_t.data=ct,_t.capability.resolve()}clear(){var ut;for(const ct in At(this,rt)){const{data:_t}=At(this,rt)[ct];(ut=_t==null?void 0:_t.bitmap)==null||ut.close()}ln(this,rt,Object.create(null))}}rt=new WeakMap,st=new WeakSet,Ss=function(ut){var ct;return(ct=At(this,rt))[ut]||(ct[ut]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(ut){on(this,mt,null);ln(this,mt,ut),this.onContinue=null}get promise(){return At(this,mt).capability.promise}cancel(ut=0){At(this,mt).cancel(null,ut)}get separateAnnots(){const{separateAnnots:ut}=At(this,mt).operatorList;if(!ut)return!1;const{annotationCanvasMap:ct}=At(this,mt);return ut.form||ut.canvas&&(ct==null?void 0:ct.size)>0}}mt=new WeakMap,exports.RenderTask=RenderTask;const gt=class gt{constructor({callback:ut,params:ct,objs:_t,commonObjs:ht,annotationCanvasMap:Et,operatorList:yt,pageIndex:Ot,canvasFactory:Dt,filterFactory:$t,useRequestAnimationFrame:Bt=!1,pdfBug:Vt=!1,pageColors:Rt=null}){this.callback=ut,this.params=ct,this.objs=_t,this.commonObjs=ht,this.annotationCanvasMap=Et,this.operatorListIdx=null,this.operatorList=yt,this._pageIndex=Ot,this.canvasFactory=Dt,this.filterFactory=$t,this._pdfBug=Vt,this.pageColors=Rt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Bt===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=ct.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:ut=!1,optionalContentConfig:ct}){var Ot,Dt;if(this.cancelled)return;if(this._canvas){if(At(gt,ft).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");At(gt,ft).add(this._canvas)}this._pdfBug&&((Ot=globalThis.StepperManager)!=null&&Ot.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:_t,viewport:ht,transform:Et,background:yt}=this.params;this.gfx=new _canvas.CanvasGraphics(_t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:ct},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Et,viewport:ht,transparency:ut,background:yt}),this.operatorListIdx=0,this.graphicsReady=!0,(Dt=this.graphicsReadyCallback)==null||Dt.call(this)}cancel(ut=null,ct=0){var _t;this.running=!1,this.cancelled=!0,(_t=this.gfx)==null||_t.endDrawing(),At(gt,ft).delete(this._canvas),this.callback(ut||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,ct))}operatorListChanged(){var ut;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(ut=this.stepper)==null||ut.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),At(gt,ft).delete(this._canvas),this.callback())))}};ft=new WeakMap,on(gt,ft,new WeakSet);let InternalRenderTask=gt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(i,e,s)=>{var j,$,_,$o,tt;Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var o=s(1),a=s(4),c=s(8);const d=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=d;class h{constructor(){on(this,_);on(this,j,!1);on(this,$,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(ot,at){const rt=At(this,$).get(ot);return rt===void 0?at:Object.assign(at,rt)}getRawValue(ot){return At(this,$).get(ot)}remove(ot){if(At(this,$).delete(ot),At(this,$).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const at of At(this,$).values())if(at instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(ot,at){const rt=At(this,$).get(ot);let st=!1;if(rt!==void 0)for(const[lt,mt]of Object.entries(at))rt[lt]!==mt&&(st=!0,rt[lt]=mt);else st=!0,At(this,$).set(ot,at);st&&Jt(this,_,$o).call(this),at instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(at.constructor._type)}has(ot){return At(this,$).has(ot)}getAll(){return At(this,$).size>0?(0,o.objectFromMap)(At(this,$)):null}setAll(ot){for(const[at,rt]of Object.entries(ot))this.setValue(at,rt)}get size(){return At(this,$).size}resetModified(){At(this,j)&&(ln(this,j,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new g(this)}get serializable(){if(At(this,$).size===0)return d;const ot=new Map,at=new c.MurmurHash3_64,rt=[],st=Object.create(null);let lt=!1;for(const[mt,ft]of At(this,$)){const gt=ft instanceof a.AnnotationEditor?ft.serialize(!1,st):ft;gt&&(ot.set(mt,gt),at.update(`${mt}:${JSON.stringify(gt)}`),lt||(lt=!!gt.bitmap))}if(lt)for(const mt of ot.values())mt.bitmap&&rt.push(mt.bitmap);return ot.size>0?{map:ot,hash:at.hexdigest(),transfers:rt}:d}}j=new WeakMap,$=new WeakMap,_=new WeakSet,$o=function(){At(this,j)||(ln(this,j,!0),typeof this.onSetModified=="function"&&this.onSetModified())},e.AnnotationStorage=h;class g extends h{constructor(at){super();on(this,tt);const{map:rt,hash:st,transfers:lt}=at.serializable,mt=structuredClone(rt,lt?{transfer:lt}:null);ln(this,tt,{map:mt,hash:st,transfers:lt})}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return At(this,tt)}}tt=new WeakMap,e.PrintAnnotationStorage=g},(i,e,s)=>{var g,j,$,_,et,tt,it,ot,at,rt,st,lt,mt,ft,gt,Ts,Ps,ct,Rs,Is,Uo,zo,Wo,Cs,Go;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var o=s(5),a=s(1),c=s(6);const Bt=class Bt{constructor(Rt){on(this,gt);on(this,g,"");on(this,j,!1);on(this,$,null);on(this,_,null);on(this,et,null);on(this,tt,!1);on(this,it,null);on(this,ot,this.focusin.bind(this));on(this,at,this.focusout.bind(this));on(this,rt,!1);on(this,st,!1);on(this,lt,!1);qn(this,"_initialOptions",Object.create(null));qn(this,"_uiManager",null);qn(this,"_focusEventsAllowed",!0);qn(this,"_l10nPromise",null);on(this,mt,!1);on(this,ft,Bt._zIndex++);this.constructor===Bt&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Rt.parent,this.id=Rt.id,this.width=this.height=null,this.pageIndex=Rt.parent.pageIndex,this.name=Rt.name,this.div=null,this._uiManager=Rt.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Rt.isCentered,this._structTreeParentId=null;const{rotation:vt,rawDims:{pageWidth:St,pageHeight:Pt,pageX:pt,pageY:bt}}=this.parent.viewport;this.rotation=vt,this.pageRotation=(360+vt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[St,Pt],this.pageTranslation=[pt,bt];const[Tt,Ct]=this.parentDimensions;this.x=Rt.x/Tt,this.y=Rt.y/Ct,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Rt){const vt=new h({id:Rt.parent.getNextId(),parent:Rt.parent,uiManager:Rt._uiManager});vt.annotationElementId=Rt.annotationElementId,vt.deleted=!0,vt._uiManager.addToAnnotationStorage(vt)}static initialize(Rt,vt=null){if(Bt._l10nPromise||(Bt._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Pt=>[Pt,Rt.get(Pt)]))),vt!=null&&vt.strings)for(const Pt of vt.strings)Bt._l10nPromise.set(Pt,Rt.get(Pt));if(Bt._borderLineWidth!==-1)return;const St=getComputedStyle(document.documentElement);Bt._borderLineWidth=parseFloat(St.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Rt,vt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Rt){return!1}static paste(Rt,vt){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return At(this,mt)}set _isDraggable(Rt){var vt;ln(this,mt,Rt),(vt=this.div)==null||vt.classList.toggle("draggable",Rt)}center(){const[Rt,vt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*vt/(Rt*2),this.y+=this.width*Rt/(vt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*vt/(Rt*2),this.y-=this.width*Rt/(vt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Rt){this._uiManager.addCommands(Rt)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=At(this,ft)}setParent(Rt){Rt!==null&&(this.pageIndex=Rt.pageIndex,this.pageDimensions=Rt.pageDimensions),this.parent=Rt}focusin(Rt){this._focusEventsAllowed&&(At(this,rt)?ln(this,rt,!1):this.parent.setSelected(this))}focusout(Rt){var St;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const vt=Rt.relatedTarget;vt!=null&&vt.closest(`#${this.id}`)||(Rt.preventDefault(),(St=this.parent)!=null&&St.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Rt,vt,St,Pt){const[pt,bt]=this.parentDimensions;[St,Pt]=this.screenToPageTranslation(St,Pt),this.x=(Rt+St)/pt,this.y=(vt+Pt)/bt,this.fixAndSetPosition()}translate(Rt,vt){Jt(this,gt,Ts).call(this,this.parentDimensions,Rt,vt)}translateInPage(Rt,vt){Jt(this,gt,Ts).call(this,this.pageDimensions,Rt,vt),this.div.scrollIntoView({block:"nearest"})}drag(Rt,vt){const[St,Pt]=this.parentDimensions;if(this.x+=Rt/St,this.y+=vt/Pt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:kt,y:Mt}=this.div.getBoundingClientRect();this.parent.findNewParent(this,kt,Mt)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:pt,y:bt}=this;const[Tt,Ct]=Jt(this,gt,Ps).call(this);pt+=Tt,bt+=Ct,this.div.style.left=`${(100*pt).toFixed(2)}%`,this.div.style.top=`${(100*bt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Rt,vt]=this.pageDimensions;let{x:St,y:Pt,width:pt,height:bt}=this;switch(pt*=Rt,bt*=vt,St*=Rt,Pt*=vt,this.rotation){case 0:St=Math.max(0,Math.min(Rt-pt,St)),Pt=Math.max(0,Math.min(vt-bt,Pt));break;case 90:St=Math.max(0,Math.min(Rt-bt,St)),Pt=Math.min(vt,Math.max(pt,Pt));break;case 180:St=Math.min(Rt,Math.max(pt,St)),Pt=Math.min(vt,Math.max(bt,Pt));break;case 270:St=Math.min(Rt,Math.max(bt,St)),Pt=Math.max(0,Math.min(vt-pt,Pt));break}this.x=St/=Rt,this.y=Pt/=vt;const[Tt,Ct]=Jt(this,gt,Ps).call(this);St+=Tt,Pt+=Ct;const{style:kt}=this.div;kt.left=`${(100*St).toFixed(2)}%`,kt.top=`${(100*Pt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Rt,vt){var St;return Jt(St=Bt,ct,Rs).call(St,Rt,vt,this.parentRotation)}pageTranslationToScreen(Rt,vt){var St;return Jt(St=Bt,ct,Rs).call(St,Rt,vt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Rt,pageDimensions:[vt,St]}=this,Pt=vt*Rt,pt=St*Rt;return a.FeatureTest.isCSSRoundSupported?[Math.round(Pt),Math.round(pt)]:[Pt,pt]}setDims(Rt,vt){var pt;const[St,Pt]=this.parentDimensions;this.div.style.width=`${(100*Rt/St).toFixed(2)}%`,At(this,tt)||(this.div.style.height=`${(100*vt/Pt).toFixed(2)}%`),(pt=At(this,$))==null||pt.classList.toggle("small",Rt<Bt.SMALL_EDITOR_SIZE||vt<Bt.SMALL_EDITOR_SIZE)}fixDims(){const{style:Rt}=this.div,{height:vt,width:St}=Rt,Pt=St.endsWith("%"),pt=!At(this,tt)&&vt.endsWith("%");if(Pt&&pt)return;const[bt,Tt]=this.parentDimensions;Pt||(Rt.width=`${(100*parseFloat(St)/bt).toFixed(2)}%`),!At(this,tt)&&!pt&&(Rt.height=`${(100*parseFloat(vt)/Tt).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(At(this,$))return;const Rt=ln(this,$,document.createElement("button"));Rt.className="altText";const vt=await Bt._l10nPromise.get("editor_alt_text_button_label");Rt.textContent=vt,Rt.setAttribute("aria-label",vt),Rt.tabIndex="0",Rt.addEventListener("contextmenu",c.noContextMenu),Rt.addEventListener("pointerdown",St=>St.stopPropagation()),Rt.addEventListener("click",St=>{St.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Rt.addEventListener("keydown",St=>{St.target===Rt&&St.key==="Enter"&&(St.preventDefault(),this._uiManager.editAltText(this))}),Jt(this,gt,Cs).call(this),this.div.append(Rt),Bt.SMALL_EDITOR_SIZE||(Bt.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Rt.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:At(this,g),decorative:At(this,j)}}set altTextData({altText:Rt,decorative:vt}){At(this,g)===Rt&&At(this,j)===vt||(ln(this,g,Rt),ln(this,j,vt),Jt(this,gt,Cs).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",At(this,ot)),this.div.addEventListener("focusout",At(this,at));const[Rt,vt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*vt/Rt).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Rt/vt).toFixed(2)}%`);const[St,Pt]=this.getInitialTranslation();return this.translate(St,Pt),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Rt){const{isMac:vt}=a.FeatureTest.platform;if(Rt.button!==0||Rt.ctrlKey&&vt){Rt.preventDefault();return}ln(this,rt,!0),Jt(this,gt,Go).call(this,Rt)}moveInDOM(){var Rt;(Rt=this.parent)==null||Rt.moveEditorInDOM(this)}_setParentAndPosition(Rt,vt,St){Rt.changeParent(this),this.x=vt,this.y=St,this.fixAndSetPosition()}getRect(Rt,vt){const St=this.parentScale,[Pt,pt]=this.pageDimensions,[bt,Tt]=this.pageTranslation,Ct=Rt/St,kt=vt/St,Mt=this.x*Pt,zt=this.y*pt,Kt=this.width*Pt,Yt=this.height*pt;switch(this.rotation){case 0:return[Mt+Ct+bt,pt-zt-kt-Yt+Tt,Mt+Ct+Kt+bt,pt-zt-kt+Tt];case 90:return[Mt+kt+bt,pt-zt+Ct+Tt,Mt+kt+Yt+bt,pt-zt+Ct+Kt+Tt];case 180:return[Mt-Ct-Kt+bt,pt-zt+kt+Tt,Mt-Ct+bt,pt-zt+kt+Yt+Tt];case 270:return[Mt-kt-Yt+bt,pt-zt-Ct-Kt+Tt,Mt-kt+bt,pt-zt-Ct+Tt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Rt,vt){const[St,Pt,pt,bt]=Rt,Tt=pt-St,Ct=bt-Pt;switch(this.rotation){case 0:return[St,vt-bt,Tt,Ct];case 90:return[St,vt-Pt,Ct,Tt];case 180:return[pt,vt-Pt,Tt,Ct];case 270:return[pt,vt-bt,Ct,Tt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ln(this,lt,!0)}disableEditMode(){ln(this,lt,!1)}isInEditMode(){return At(this,lt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Rt,vt;(Rt=this.div)==null||Rt.addEventListener("focusin",At(this,ot)),(vt=this.div)==null||vt.addEventListener("focusout",At(this,at))}serialize(Rt=!1,vt=null){(0,a.unreachable)("An editor must be serializable")}static deserialize(Rt,vt,St){const Pt=new this.prototype.constructor({parent:vt,id:vt.getNextId(),uiManager:St});Pt.rotation=Rt.rotation;const[pt,bt]=Pt.pageDimensions,[Tt,Ct,kt,Mt]=Pt.getRectInCurrentCoords(Rt.rect,bt);return Pt.x=Tt/pt,Pt.y=Ct/bt,Pt.width=kt/pt,Pt.height=Mt/bt,Pt}remove(){var Rt;this.div.removeEventListener("focusin",At(this,ot)),this.div.removeEventListener("focusout",At(this,at)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Rt=At(this,$))==null||Rt.remove(),ln(this,$,null),ln(this,_,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Jt(this,gt,Uo).call(this),At(this,it).classList.remove("hidden"))}select(){var Rt;this.makeResizable(),(Rt=this.div)==null||Rt.classList.add("selectedEditor")}unselect(){var Rt,vt,St;(Rt=At(this,it))==null||Rt.classList.add("hidden"),(vt=this.div)==null||vt.classList.remove("selectedEditor"),(St=this.div)!=null&&St.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Rt,vt){}disableEditing(){At(this,$)&&(At(this,$).hidden=!0)}enableEditing(){At(this,$)&&(At(this,$).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return At(this,st)}set isEditing(Rt){ln(this,st,Rt),this.parent&&(Rt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Rt,vt){ln(this,tt,!0);const St=Rt/vt,{style:Pt}=this.div;Pt.aspectRatio=St,Pt.height="auto"}static get MIN_SIZE(){return 16}};g=new WeakMap,j=new WeakMap,$=new WeakMap,_=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,ot=new WeakMap,at=new WeakMap,rt=new WeakMap,st=new WeakMap,lt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakSet,Ts=function([Rt,vt],St,Pt){[St,Pt]=this.screenToPageTranslation(St,Pt),this.x+=St/Rt,this.y+=Pt/vt,this.fixAndSetPosition()},Ps=function(){const[Rt,vt]=this.parentDimensions,{_borderLineWidth:St}=Bt,Pt=St/Rt,pt=St/vt;switch(this.rotation){case 90:return[-Pt,pt];case 180:return[Pt,pt];case 270:return[Pt,-pt];default:return[-Pt,-pt]}},ct=new WeakSet,Rs=function(Rt,vt,St){switch(St){case 90:return[vt,-Rt];case 180:return[-Rt,-vt];case 270:return[-vt,Rt];default:return[Rt,vt]}},Is=function(Rt){switch(Rt){case 90:{const[vt,St]=this.pageDimensions;return[0,-vt/St,St/vt,0]}case 180:return[-1,0,0,-1];case 270:{const[vt,St]=this.pageDimensions;return[0,vt/St,-St/vt,0]}default:return[1,0,0,1]}},Uo=function(){if(At(this,it))return;ln(this,it,document.createElement("div")),At(this,it).classList.add("resizers");const Rt=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Rt.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const vt of Rt){const St=document.createElement("div");At(this,it).append(St),St.classList.add("resizer",vt),St.addEventListener("pointerdown",Jt(this,gt,zo).bind(this,vt)),St.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(At(this,it))},zo=function(Rt,vt){vt.preventDefault();const{isMac:St}=a.FeatureTest.platform;if(vt.button!==0||vt.ctrlKey&&St)return;const Pt=Jt(this,gt,Wo).bind(this,Rt),pt=this._isDraggable;this._isDraggable=!1;const bt={passive:!0,capture:!0};window.addEventListener("pointermove",Pt,bt);const Tt=this.x,Ct=this.y,kt=this.width,Mt=this.height,zt=this.parent.div.style.cursor,Kt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(vt.target).cursor;const Yt=()=>{this._isDraggable=pt,window.removeEventListener("pointerup",Yt),window.removeEventListener("blur",Yt),window.removeEventListener("pointermove",Pt,bt),this.parent.div.style.cursor=zt,this.div.style.cursor=Kt;const rn=this.x,cn=this.y,sn=this.width,dn=this.height;rn===Tt&&cn===Ct&&sn===kt&&dn===Mt||this.addCommands({cmd:()=>{this.width=sn,this.height=dn,this.x=rn,this.y=cn;const[Ht,Xt]=this.parentDimensions;this.setDims(Ht*sn,Xt*dn),this.fixAndSetPosition()},undo:()=>{this.width=kt,this.height=Mt,this.x=Tt,this.y=Ct;const[Ht,Xt]=this.parentDimensions;this.setDims(Ht*kt,Xt*Mt),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Yt),window.addEventListener("blur",Yt)},Wo=function(Rt,vt){const[St,Pt]=this.parentDimensions,pt=this.x,bt=this.y,Tt=this.width,Ct=this.height,kt=Bt.MIN_SIZE/St,Mt=Bt.MIN_SIZE/Pt,zt=Sn=>Math.round(Sn*1e4)/1e4,Kt=Jt(this,gt,Is).call(this,this.rotation),Yt=(Sn,Pn)=>[Kt[0]*Sn+Kt[2]*Pn,Kt[1]*Sn+Kt[3]*Pn],rn=Jt(this,gt,Is).call(this,360-this.rotation),cn=(Sn,Pn)=>[rn[0]*Sn+rn[2]*Pn,rn[1]*Sn+rn[3]*Pn];let sn,dn,Ht=!1,Xt=!1;switch(Rt){case"topLeft":Ht=!0,sn=(Sn,Pn)=>[0,0],dn=(Sn,Pn)=>[Sn,Pn];break;case"topMiddle":sn=(Sn,Pn)=>[Sn/2,0],dn=(Sn,Pn)=>[Sn/2,Pn];break;case"topRight":Ht=!0,sn=(Sn,Pn)=>[Sn,0],dn=(Sn,Pn)=>[0,Pn];break;case"middleRight":Xt=!0,sn=(Sn,Pn)=>[Sn,Pn/2],dn=(Sn,Pn)=>[0,Pn/2];break;case"bottomRight":Ht=!0,sn=(Sn,Pn)=>[Sn,Pn],dn=(Sn,Pn)=>[0,0];break;case"bottomMiddle":sn=(Sn,Pn)=>[Sn/2,Pn],dn=(Sn,Pn)=>[Sn/2,0];break;case"bottomLeft":Ht=!0,sn=(Sn,Pn)=>[0,Pn],dn=(Sn,Pn)=>[Sn,0];break;case"middleLeft":Xt=!0,sn=(Sn,Pn)=>[0,Pn/2],dn=(Sn,Pn)=>[Sn,Pn/2];break}const It=sn(Tt,Ct),Nt=dn(Tt,Ct);let Gt=Yt(...Nt);const tn=zt(pt+Gt[0]),fn=zt(bt+Gt[1]);let yn=1,gn=1,[Qt,Wt]=this.screenToPageTranslation(vt.movementX,vt.movementY);if([Qt,Wt]=cn(Qt/St,Wt/Pt),Ht){const Sn=Math.hypot(Tt,Ct);yn=gn=Math.max(Math.min(Math.hypot(Nt[0]-It[0]-Qt,Nt[1]-It[1]-Wt)/Sn,1/Tt,1/Ct),kt/Tt,Mt/Ct)}else Xt?yn=Math.max(kt,Math.min(1,Math.abs(Nt[0]-It[0]-Qt)))/Tt:gn=Math.max(Mt,Math.min(1,Math.abs(Nt[1]-It[1]-Wt)))/Ct;const Zt=zt(Tt*yn),xn=zt(Ct*gn);Gt=Yt(...dn(Zt,xn));const An=tn-Gt[0],Cn=fn-Gt[1];this.width=Zt,this.height=xn,this.x=An,this.y=Cn,this.setDims(St*Zt,Pt*xn),this.fixAndSetPosition()},Cs=async function(){var St;const Rt=At(this,$);if(!Rt)return;if(!At(this,g)&&!At(this,j)){Rt.classList.remove("done"),(St=At(this,_))==null||St.remove();return}Bt._l10nPromise.get("editor_alt_text_edit_button_label").then(Pt=>{Rt.setAttribute("aria-label",Pt)});let vt=At(this,_);if(!vt){ln(this,_,vt=document.createElement("span")),vt.className="tooltip",vt.setAttribute("role","tooltip");const Pt=vt.id=`alt-text-tooltip-${this.id}`;Rt.setAttribute("aria-describedby",Pt);const pt=100;Rt.addEventListener("mouseenter",()=>{ln(this,et,setTimeout(()=>{ln(this,et,null),At(this,_).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},pt))}),Rt.addEventListener("mouseleave",()=>{var bt;clearTimeout(At(this,et)),ln(this,et,null),(bt=At(this,_))==null||bt.classList.remove("show")})}Rt.classList.add("done"),vt.innerText=At(this,j)?await Bt._l10nPromise.get("editor_alt_text_decorative_tooltip"):At(this,g),vt.parentNode||Rt.append(vt)},Go=function(Rt){if(!this._isDraggable)return;const vt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let St,Pt;vt&&(St={passive:!0,capture:!0},Pt=bt=>{const[Tt,Ct]=this.screenToPageTranslation(bt.movementX,bt.movementY);this._uiManager.dragSelectedEditors(Tt,Ct)},window.addEventListener("pointermove",Pt,St));const pt=()=>{if(window.removeEventListener("pointerup",pt),window.removeEventListener("blur",pt),vt&&window.removeEventListener("pointermove",Pt,St),ln(this,rt,!1),!this._uiManager.endDragSession()){const{isMac:bt}=a.FeatureTest.platform;Rt.ctrlKey&&!bt||Rt.shiftKey||Rt.metaKey&&bt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",pt),window.addEventListener("blur",pt)},on(Bt,ct),qn(Bt,"_borderLineWidth",-1),qn(Bt,"_colorManager",new o.ColorManager),qn(Bt,"_zIndex",1),qn(Bt,"SMALL_EDITOR_SIZE",0);let d=Bt;e.AnnotationEditor=d;class h extends d{constructor(Rt){super(Rt),this.annotationElementId=Rt.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(i,e,s)=>{var tt,it,ot,at,rt,ks,mt,ft,gt,dt,ut,Ho,ht,Et,yt,Ot,Dt,$t,Bt,Vt,Rt,vt,St,Pt,pt,bt,Tt,Ct,kt,Mt,zt,Kt,Yt,rn,cn,sn,dn,Ht,Xt,It,Nt,Gt,tn,fn,yn,gn,Qt,qo,Ms,Ds,rs,Os,Ls,sr,Vr,Ko,Xo,Fs,Nr,Vs;Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=c,e.opacityToHex=d;var o=s(1),a=s(6);function c(Un,Ut,pn){for(const bn of pn)Ut.addEventListener(bn,Un[bn].bind(Un))}function d(Un){return Math.round(Math.min(255,Math.max(1,255*Un))).toString(16).padStart(2,"0")}class h{constructor(){on(this,tt,0)}getId(){return`${o.AnnotationEditorPrefix}${Fr(this,tt)._++}`}}tt=new WeakMap;const lt=class lt{constructor(){on(this,rt);on(this,it,(0,o.getUuid)());on(this,ot,0);on(this,at,null)}static get _isSVGFittingCanvas(){const Ut='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',bn=new OffscreenCanvas(1,3).getContext("2d"),In=new Image;In.src=Ut;const Fn=In.decode().then(()=>(bn.drawImage(In,0,0,1,1,0,0,1,3),new Uint32Array(bn.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",Fn)}async getFromFile(Ut){const{lastModified:pn,name:bn,size:In,type:Fn}=Ut;return Jt(this,rt,ks).call(this,`${pn}_${bn}_${In}_${Fn}`,Ut)}async getFromUrl(Ut){return Jt(this,rt,ks).call(this,Ut,Ut)}async getFromId(Ut){At(this,at)||ln(this,at,new Map);const pn=At(this,at).get(Ut);return pn?pn.bitmap?(pn.refCounter+=1,pn):pn.file?this.getFromFile(pn.file):this.getFromUrl(pn.url):null}getSvgUrl(Ut){const pn=At(this,at).get(Ut);return pn!=null&&pn.isSvg?pn.svgUrl:null}deleteId(Ut){At(this,at)||ln(this,at,new Map);const pn=At(this,at).get(Ut);pn&&(pn.refCounter-=1,pn.refCounter===0&&(pn.bitmap=null))}isValidId(Ut){return Ut.startsWith(`image_${At(this,it)}_`)}};it=new WeakMap,ot=new WeakMap,at=new WeakMap,rt=new WeakSet,ks=async function(Ut,pn){At(this,at)||ln(this,at,new Map);let bn=At(this,at).get(Ut);if(bn===null)return null;if(bn!=null&&bn.bitmap)return bn.refCounter+=1,bn;try{bn||(bn={bitmap:null,id:`image_${At(this,it)}_${Fr(this,ot)._++}`,refCounter:0,isSvg:!1});let In;if(typeof pn=="string"){bn.url=pn;const Fn=await fetch(pn);if(!Fn.ok)throw new Error(Fn.statusText);In=await Fn.blob()}else In=bn.file=pn;if(In.type==="image/svg+xml"){const Fn=lt._isSVGFittingCanvas,Rn=new FileReader,jt=new Image,Lt=new Promise((qt,an)=>{jt.onload=()=>{bn.bitmap=jt,bn.isSvg=!0,qt()},Rn.onload=async()=>{const hn=bn.svgUrl=Rn.result;jt.src=await Fn?`${hn}#svgView(preserveAspectRatio(none))`:hn},jt.onerror=Rn.onerror=an});Rn.readAsDataURL(In),await Lt}else bn.bitmap=await createImageBitmap(In);bn.refCounter=1}catch(In){console.error(In),bn=null}return At(this,at).set(Ut,bn),bn&&At(this,at).set(bn.id,bn),bn};let g=lt;class j{constructor(Ut=128){on(this,mt,[]);on(this,ft,!1);on(this,gt);on(this,dt,-1);ln(this,gt,Ut)}add({cmd:Ut,undo:pn,mustExec:bn,type:In=NaN,overwriteIfSameType:Fn=!1,keepUndo:Rn=!1}){if(bn&&Ut(),At(this,ft))return;const jt={cmd:Ut,undo:pn,type:In};if(At(this,dt)===-1){At(this,mt).length>0&&(At(this,mt).length=0),ln(this,dt,0),At(this,mt).push(jt);return}if(Fn&&At(this,mt)[At(this,dt)].type===In){Rn&&(jt.undo=At(this,mt)[At(this,dt)].undo),At(this,mt)[At(this,dt)]=jt;return}const Lt=At(this,dt)+1;Lt===At(this,gt)?At(this,mt).splice(0,1):(ln(this,dt,Lt),Lt<At(this,mt).length&&At(this,mt).splice(Lt)),At(this,mt).push(jt)}undo(){At(this,dt)!==-1&&(ln(this,ft,!0),At(this,mt)[At(this,dt)].undo(),ln(this,ft,!1),ln(this,dt,At(this,dt)-1))}redo(){At(this,dt)<At(this,mt).length-1&&(ln(this,dt,At(this,dt)+1),ln(this,ft,!0),At(this,mt)[At(this,dt)].cmd(),ln(this,ft,!1))}hasSomethingToUndo(){return At(this,dt)!==-1}hasSomethingToRedo(){return At(this,dt)<At(this,mt).length-1}destroy(){ln(this,mt,null)}}mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,dt=new WeakMap,e.CommandManager=j;class ${constructor(Ut){on(this,ut);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:pn}=o.FeatureTest.platform;for(const[bn,In,Fn={}]of Ut)for(const Rn of bn){const jt=Rn.startsWith("mac+");pn&&jt?(this.callbacks.set(Rn.slice(4),{callback:In,options:Fn}),this.allKeys.add(Rn.split("+").at(-1))):!pn&&!jt&&(this.callbacks.set(Rn,{callback:In,options:Fn}),this.allKeys.add(Rn.split("+").at(-1)))}}exec(Ut,pn){if(!this.allKeys.has(pn.key))return;const bn=this.callbacks.get(Jt(this,ut,Ho).call(this,pn));if(!bn)return;const{callback:In,options:{bubbles:Fn=!1,args:Rn=[],checker:jt=null}}=bn;jt&&!jt(Ut,pn)||(In.bind(Ut,...Rn)(),Fn||(pn.stopPropagation(),pn.preventDefault()))}}ut=new WeakSet,Ho=function(Ut){Ut.altKey&&this.buffer.push("alt"),Ut.ctrlKey&&this.buffer.push("ctrl"),Ut.metaKey&&this.buffer.push("meta"),Ut.shiftKey&&this.buffer.push("shift"),this.buffer.push(Ut.key);const pn=this.buffer.join("+");return this.buffer.length=0,pn},e.KeyboardManager=$;const _t=class _t{get _colors(){const Ut=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(Ut),(0,o.shadow)(this,"_colors",Ut)}convert(Ut){const pn=(0,a.getRGB)(Ut);if(!window.matchMedia("(forced-colors: active)").matches)return pn;for(const[bn,In]of this._colors)if(In.every((Fn,Rn)=>Fn===pn[Rn]))return _t._colorsMapping.get(bn);return pn}getHexCode(Ut){const pn=this._colors.get(Ut);return pn?o.Util.makeHexColor(...pn):Ut}};qn(_t,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let _=_t;e.ColorManager=_;const zn=class zn{constructor(Ut,pn,bn,In,Fn,Rn){on(this,Qt);on(this,ht,null);on(this,Et,new Map);on(this,yt,new Map);on(this,Ot,null);on(this,Dt,null);on(this,$t,new j);on(this,Bt,0);on(this,Vt,new Set);on(this,Rt,null);on(this,vt,null);on(this,St,new Set);on(this,Pt,null);on(this,pt,new h);on(this,bt,!1);on(this,Tt,!1);on(this,Ct,null);on(this,kt,o.AnnotationEditorType.NONE);on(this,Mt,new Set);on(this,zt,null);on(this,Kt,this.blur.bind(this));on(this,Yt,this.focus.bind(this));on(this,rn,this.copy.bind(this));on(this,cn,this.cut.bind(this));on(this,sn,this.paste.bind(this));on(this,dn,this.keydown.bind(this));on(this,Ht,this.onEditingAction.bind(this));on(this,Xt,this.onPageChanging.bind(this));on(this,It,this.onScaleChanging.bind(this));on(this,Nt,this.onRotationChanging.bind(this));on(this,Gt,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});on(this,tn,[0,0]);on(this,fn,null);on(this,yn,null);on(this,gn,null);ln(this,yn,Ut),ln(this,gn,pn),ln(this,Ot,bn),this._eventBus=In,this._eventBus._on("editingaction",At(this,Ht)),this._eventBus._on("pagechanging",At(this,Xt)),this._eventBus._on("scalechanging",At(this,It)),this._eventBus._on("rotationchanging",At(this,Nt)),ln(this,Dt,Fn.annotationStorage),ln(this,Pt,Fn.filterFactory),ln(this,zt,Rn),this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const Ut=zn.prototype,pn=Fn=>{const{activeElement:Rn}=document;return Rn&&At(Fn,yn).contains(Rn)&&Fn.hasSomethingToControl()},bn=this.TRANSLATE_SMALL,In=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new $([[["ctrl+a","mac+meta+a"],Ut.selectAll],[["ctrl+z","mac+meta+z"],Ut.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],Ut.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],Ut.delete],[["Escape","mac+Escape"],Ut.unselectAll],[["ArrowLeft","mac+ArrowLeft"],Ut.translateSelectedEditors,{args:[-bn,0],checker:pn}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ut.translateSelectedEditors,{args:[-In,0],checker:pn}],[["ArrowRight","mac+ArrowRight"],Ut.translateSelectedEditors,{args:[bn,0],checker:pn}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ut.translateSelectedEditors,{args:[In,0],checker:pn}],[["ArrowUp","mac+ArrowUp"],Ut.translateSelectedEditors,{args:[0,-bn],checker:pn}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ut.translateSelectedEditors,{args:[0,-In],checker:pn}],[["ArrowDown","mac+ArrowDown"],Ut.translateSelectedEditors,{args:[0,bn],checker:pn}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ut.translateSelectedEditors,{args:[0,In],checker:pn}]]))}destroy(){Jt(this,Qt,rs).call(this),Jt(this,Qt,Ms).call(this),this._eventBus._off("editingaction",At(this,Ht)),this._eventBus._off("pagechanging",At(this,Xt)),this._eventBus._off("scalechanging",At(this,It)),this._eventBus._off("rotationchanging",At(this,Nt));for(const Ut of At(this,yt).values())Ut.destroy();At(this,yt).clear(),At(this,Et).clear(),At(this,St).clear(),ln(this,ht,null),At(this,Mt).clear(),At(this,$t).destroy(),At(this,Ot).destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",At(this,zt)?At(this,Pt).addHCMFilter(At(this,zt).foreground,At(this,zt).background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(At(this,yn)).direction)}editAltText(Ut){var pn;(pn=At(this,Ot))==null||pn.editAltText(this,Ut)}onPageChanging({pageNumber:Ut}){ln(this,Bt,Ut-1)}focusMainContainer(){At(this,yn).focus()}findParent(Ut,pn){for(const bn of At(this,yt).values()){const{x:In,y:Fn,width:Rn,height:jt}=bn.div.getBoundingClientRect();if(Ut>=In&&Ut<=In+Rn&&pn>=Fn&&pn<=Fn+jt)return bn}return null}disableUserSelect(Ut=!1){At(this,gn).classList.toggle("noUserSelect",Ut)}addShouldRescale(Ut){At(this,St).add(Ut)}removeShouldRescale(Ut){At(this,St).delete(Ut)}onScaleChanging({scale:Ut}){this.commitOrRemove(),this.viewParameters.realScale=Ut*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const pn of At(this,St))pn.onScaleChanging()}onRotationChanging({pagesRotation:Ut}){this.commitOrRemove(),this.viewParameters.rotation=Ut}addToAnnotationStorage(Ut){!Ut.isEmpty()&&At(this,Dt)&&!At(this,Dt).has(Ut.id)&&At(this,Dt).setValue(Ut.id,Ut)}blur(){if(!this.hasSelection)return;const{activeElement:Ut}=document;for(const pn of At(this,Mt))if(pn.div.contains(Ut)){ln(this,Ct,[pn,Ut]),pn._focusEventsAllowed=!1;break}}focus(){if(!At(this,Ct))return;const[Ut,pn]=At(this,Ct);ln(this,Ct,null),pn.addEventListener("focusin",()=>{Ut._focusEventsAllowed=!0},{once:!0}),pn.focus()}addEditListeners(){Jt(this,Qt,Ds).call(this),Jt(this,Qt,Os).call(this)}removeEditListeners(){Jt(this,Qt,rs).call(this),Jt(this,Qt,Ls).call(this)}copy(Ut){var bn;if(Ut.preventDefault(),(bn=At(this,ht))==null||bn.commitOrRemove(),!this.hasSelection)return;const pn=[];for(const In of At(this,Mt)){const Fn=In.serialize(!0);Fn&&pn.push(Fn)}pn.length!==0&&Ut.clipboardData.setData("application/pdfjs",JSON.stringify(pn))}cut(Ut){this.copy(Ut),this.delete()}paste(Ut){Ut.preventDefault();const{clipboardData:pn}=Ut;for(const Fn of pn.items)for(const Rn of At(this,vt))if(Rn.isHandlingMimeForPasting(Fn.type)){Rn.paste(Fn,this.currentLayer);return}let bn=pn.getData("application/pdfjs");if(!bn)return;try{bn=JSON.parse(bn)}catch(Fn){(0,o.warn)(`paste: "${Fn.message}".`);return}if(!Array.isArray(bn))return;this.unselectAll();const In=this.currentLayer;try{const Fn=[];for(const Lt of bn){const qt=In.deserialize(Lt);if(!qt)return;Fn.push(qt)}const Rn=()=>{for(const Lt of Fn)Jt(this,Qt,Fs).call(this,Lt);Jt(this,Qt,Vs).call(this,Fn)},jt=()=>{for(const Lt of Fn)Lt.remove()};this.addCommands({cmd:Rn,undo:jt,mustExec:!0})}catch(Fn){(0,o.warn)(`paste: "${Fn.message}".`)}}keydown(Ut){var pn;(pn=this.getActive())!=null&&pn.shouldGetKeyboardEvents()||zn._keyboardManager.exec(this,Ut)}onEditingAction(Ut){["undo","redo","delete","selectAll"].includes(Ut.name)&&this[Ut.name]()}setEditingState(Ut){Ut?(Jt(this,Qt,qo).call(this),Jt(this,Qt,Ds).call(this),Jt(this,Qt,Os).call(this),Jt(this,Qt,sr).call(this,{isEditing:At(this,kt)!==o.AnnotationEditorType.NONE,isEmpty:Jt(this,Qt,Nr).call(this),hasSomethingToUndo:At(this,$t).hasSomethingToUndo(),hasSomethingToRedo:At(this,$t).hasSomethingToRedo(),hasSelectedEditor:!1})):(Jt(this,Qt,Ms).call(this),Jt(this,Qt,rs).call(this),Jt(this,Qt,Ls).call(this),Jt(this,Qt,sr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(Ut){if(!At(this,vt)){ln(this,vt,Ut);for(const pn of At(this,vt))Jt(this,Qt,Vr).call(this,pn.defaultPropertiesToUpdate)}}getId(){return At(this,pt).getId()}get currentLayer(){return At(this,yt).get(At(this,Bt))}getLayer(Ut){return At(this,yt).get(Ut)}get currentPageIndex(){return At(this,Bt)}addLayer(Ut){At(this,yt).set(Ut.pageIndex,Ut),At(this,bt)?Ut.enable():Ut.disable()}removeLayer(Ut){At(this,yt).delete(Ut.pageIndex)}updateMode(Ut,pn=null){if(At(this,kt)!==Ut){if(ln(this,kt,Ut),Ut===o.AnnotationEditorType.NONE){this.setEditingState(!1),Jt(this,Qt,Xo).call(this);return}this.setEditingState(!0),Jt(this,Qt,Ko).call(this),this.unselectAll();for(const bn of At(this,yt).values())bn.updateMode(Ut);if(pn){for(const bn of At(this,Et).values())if(bn.annotationElementId===pn){this.setSelected(bn),bn.enterInEditMode();break}}}}updateToolbar(Ut){Ut!==At(this,kt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:Ut})}updateParams(Ut,pn){if(At(this,vt)){if(Ut===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(Ut);return}for(const bn of At(this,Mt))bn.updateParams(Ut,pn);for(const bn of At(this,vt))bn.updateDefaultParams(Ut,pn)}}enableWaiting(Ut=!1){if(At(this,Tt)!==Ut){ln(this,Tt,Ut);for(const pn of At(this,yt).values())Ut?pn.disableClick():pn.enableClick(),pn.div.classList.toggle("waiting",Ut)}}getEditors(Ut){const pn=[];for(const bn of At(this,Et).values())bn.pageIndex===Ut&&pn.push(bn);return pn}getEditor(Ut){return At(this,Et).get(Ut)}addEditor(Ut){At(this,Et).set(Ut.id,Ut)}removeEditor(Ut){var pn;At(this,Et).delete(Ut.id),this.unselect(Ut),(!Ut.annotationElementId||!At(this,Vt).has(Ut.annotationElementId))&&((pn=At(this,Dt))==null||pn.remove(Ut.id))}addDeletedAnnotationElement(Ut){At(this,Vt).add(Ut.annotationElementId),Ut.deleted=!0}isDeletedAnnotationElement(Ut){return At(this,Vt).has(Ut)}removeDeletedAnnotationElement(Ut){At(this,Vt).delete(Ut.annotationElementId),Ut.deleted=!1}setActiveEditor(Ut){At(this,ht)!==Ut&&(ln(this,ht,Ut),Ut&&Jt(this,Qt,Vr).call(this,Ut.propertiesToUpdate))}toggleSelected(Ut){if(At(this,Mt).has(Ut)){At(this,Mt).delete(Ut),Ut.unselect(),Jt(this,Qt,sr).call(this,{hasSelectedEditor:this.hasSelection});return}At(this,Mt).add(Ut),Ut.select(),Jt(this,Qt,Vr).call(this,Ut.propertiesToUpdate),Jt(this,Qt,sr).call(this,{hasSelectedEditor:!0})}setSelected(Ut){for(const pn of At(this,Mt))pn!==Ut&&pn.unselect();At(this,Mt).clear(),At(this,Mt).add(Ut),Ut.select(),Jt(this,Qt,Vr).call(this,Ut.propertiesToUpdate),Jt(this,Qt,sr).call(this,{hasSelectedEditor:!0})}isSelected(Ut){return At(this,Mt).has(Ut)}unselect(Ut){Ut.unselect(),At(this,Mt).delete(Ut),Jt(this,Qt,sr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return At(this,Mt).size!==0}undo(){At(this,$t).undo(),Jt(this,Qt,sr).call(this,{hasSomethingToUndo:At(this,$t).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Jt(this,Qt,Nr).call(this)})}redo(){At(this,$t).redo(),Jt(this,Qt,sr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:At(this,$t).hasSomethingToRedo(),isEmpty:Jt(this,Qt,Nr).call(this)})}addCommands(Ut){At(this,$t).add(Ut),Jt(this,Qt,sr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Jt(this,Qt,Nr).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Ut=[...At(this,Mt)],pn=()=>{for(const In of Ut)In.remove()},bn=()=>{for(const In of Ut)Jt(this,Qt,Fs).call(this,In)};this.addCommands({cmd:pn,undo:bn,mustExec:!0})}commitOrRemove(){var Ut;(Ut=At(this,ht))==null||Ut.commitOrRemove()}hasSomethingToControl(){return At(this,ht)||this.hasSelection}selectAll(){for(const Ut of At(this,Mt))Ut.commit();Jt(this,Qt,Vs).call(this,At(this,Et).values())}unselectAll(){if(At(this,ht)){At(this,ht).commitOrRemove();return}if(this.hasSelection){for(const Ut of At(this,Mt))Ut.unselect();At(this,Mt).clear(),Jt(this,Qt,sr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(Ut,pn,bn=!1){if(bn||this.commitOrRemove(),!this.hasSelection)return;At(this,tn)[0]+=Ut,At(this,tn)[1]+=pn;const[In,Fn]=At(this,tn),Rn=[...At(this,Mt)],jt=1e3;At(this,fn)&&clearTimeout(At(this,fn)),ln(this,fn,setTimeout(()=>{ln(this,fn,null),At(this,tn)[0]=At(this,tn)[1]=0,this.addCommands({cmd:()=>{for(const Lt of Rn)At(this,Et).has(Lt.id)&&Lt.translateInPage(In,Fn)},undo:()=>{for(const Lt of Rn)At(this,Et).has(Lt.id)&&Lt.translateInPage(-In,-Fn)},mustExec:!1})},jt));for(const Lt of Rn)Lt.translateInPage(Ut,pn)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),ln(this,Rt,new Map);for(const Ut of At(this,Mt))At(this,Rt).set(Ut,{savedX:Ut.x,savedY:Ut.y,savedPageIndex:Ut.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!At(this,Rt))return!1;this.disableUserSelect(!1);const Ut=At(this,Rt);ln(this,Rt,null);let pn=!1;for(const[{x:In,y:Fn,pageIndex:Rn},jt]of Ut)jt.newX=In,jt.newY=Fn,jt.newPageIndex=Rn,pn||(pn=In!==jt.savedX||Fn!==jt.savedY||Rn!==jt.savedPageIndex);if(!pn)return!1;const bn=(In,Fn,Rn,jt)=>{if(At(this,Et).has(In.id)){const Lt=At(this,yt).get(jt);Lt?In._setParentAndPosition(Lt,Fn,Rn):(In.pageIndex=jt,In.x=Fn,In.y=Rn)}};return this.addCommands({cmd:()=>{for(const[In,{newX:Fn,newY:Rn,newPageIndex:jt}]of Ut)bn(In,Fn,Rn,jt)},undo:()=>{for(const[In,{savedX:Fn,savedY:Rn,savedPageIndex:jt}]of Ut)bn(In,Fn,Rn,jt)},mustExec:!0}),!0}dragSelectedEditors(Ut,pn){if(At(this,Rt))for(const bn of At(this,Rt).keys())bn.drag(Ut,pn)}rebuild(Ut){if(Ut.parent===null){const pn=this.getLayer(Ut.pageIndex);pn?(pn.changeParent(Ut),pn.addOrRebuild(Ut)):(this.addEditor(Ut),this.addToAnnotationStorage(Ut),Ut.rebuild())}else Ut.parent.addOrRebuild(Ut)}isActive(Ut){return At(this,ht)===Ut}getActive(){return At(this,ht)}getMode(){return At(this,kt)}get imageManager(){return(0,o.shadow)(this,"imageManager",new g)}};ht=new WeakMap,Et=new WeakMap,yt=new WeakMap,Ot=new WeakMap,Dt=new WeakMap,$t=new WeakMap,Bt=new WeakMap,Vt=new WeakMap,Rt=new WeakMap,vt=new WeakMap,St=new WeakMap,Pt=new WeakMap,pt=new WeakMap,bt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,kt=new WeakMap,Mt=new WeakMap,zt=new WeakMap,Kt=new WeakMap,Yt=new WeakMap,rn=new WeakMap,cn=new WeakMap,sn=new WeakMap,dn=new WeakMap,Ht=new WeakMap,Xt=new WeakMap,It=new WeakMap,Nt=new WeakMap,Gt=new WeakMap,tn=new WeakMap,fn=new WeakMap,yn=new WeakMap,gn=new WeakMap,Qt=new WeakSet,qo=function(){window.addEventListener("focus",At(this,Yt)),window.addEventListener("blur",At(this,Kt))},Ms=function(){window.removeEventListener("focus",At(this,Yt)),window.removeEventListener("blur",At(this,Kt))},Ds=function(){window.addEventListener("keydown",At(this,dn),{capture:!0})},rs=function(){window.removeEventListener("keydown",At(this,dn),{capture:!0})},Os=function(){document.addEventListener("copy",At(this,rn)),document.addEventListener("cut",At(this,cn)),document.addEventListener("paste",At(this,sn))},Ls=function(){document.removeEventListener("copy",At(this,rn)),document.removeEventListener("cut",At(this,cn)),document.removeEventListener("paste",At(this,sn))},sr=function(Ut){Object.entries(Ut).some(([bn,In])=>At(this,Gt)[bn]!==In)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(At(this,Gt),Ut)})},Vr=function(Ut){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:Ut})},Ko=function(){if(!At(this,bt)){ln(this,bt,!0);for(const Ut of At(this,yt).values())Ut.enable()}},Xo=function(){if(this.unselectAll(),At(this,bt)){ln(this,bt,!1);for(const Ut of At(this,yt).values())Ut.disable()}},Fs=function(Ut){const pn=At(this,yt).get(Ut.pageIndex);pn?pn.addOrRebuild(Ut):this.addEditor(Ut)},Nr=function(){if(At(this,Et).size===0)return!0;if(At(this,Et).size===1)for(const Ut of At(this,Et).values())return Ut.isEmpty();return!1},Vs=function(Ut){At(this,Mt).clear();for(const pn of Ut)pn.isEmpty()||(At(this,Mt).add(pn),pn.select());Jt(this,Qt,sr).call(this,{hasSelectedEditor:!0})},qn(zn,"TRANSLATE_SMALL",1),qn(zn,"TRANSLATE_BIG",10);let et=zn;e.AnnotationEditorUIManager=et},(i,e,s)=>{var Bt,Vt,Rt,vt,St,Pt,pt,bt,Tt,Ct,kt,Mt,br,wr,Ns,is,ss,jr,Br;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=dt,e.getColorValues=Et,e.getCurrentTransform=yt,e.getCurrentTransformInverse=Ot,e.getFilenameFromUrl=rt,e.getPdfFilenameFromUrl=st,e.getRGB=ht,e.getXfaPageViewport=_t,e.isDataScheme=ot,e.isPdfFile=at,e.isValidFetchUrl=mt,e.loadScript=gt,e.noContextMenu=ft,e.setLayerDimensions=Dt;var o=s(7),a=s(1);const c="http://www.w3.org/2000/svg",$t=class $t{};qn($t,"CSS",96),qn($t,"PDF",72),qn($t,"PDF_TO_CSS_UNITS",$t.CSS/$t.PDF);let d=$t;e.PixelsPerInch=d;class h extends o.BaseFilterFactory{constructor({docId:It,ownerDocument:Nt=globalThis.document}={}){super();on(this,Mt);on(this,Bt);on(this,Vt);on(this,Rt);on(this,vt);on(this,St);on(this,Pt);on(this,pt);on(this,bt);on(this,Tt);on(this,Ct);on(this,kt,0);ln(this,Rt,It),ln(this,vt,Nt)}addFilter(It){if(!It)return"none";let Nt=At(this,Mt,br).get(It);if(Nt)return Nt;let Gt,tn,fn,yn;if(It.length===1){const Zt=It[0],xn=new Array(256);for(let An=0;An<256;An++)xn[An]=Zt[An]/255;yn=Gt=tn=fn=xn.join(",")}else{const[Zt,xn,An]=It,Cn=new Array(256),Sn=new Array(256),Pn=new Array(256);for(let Vn=0;Vn<256;Vn++)Cn[Vn]=Zt[Vn]/255,Sn[Vn]=xn[Vn]/255,Pn[Vn]=An[Vn]/255;Gt=Cn.join(","),tn=Sn.join(","),fn=Pn.join(","),yn=`${Gt}${tn}${fn}`}if(Nt=At(this,Mt,br).get(yn),Nt)return At(this,Mt,br).set(It,Nt),Nt;const gn=`g_${At(this,Rt)}_transfer_map_${Fr(this,kt)._++}`,Qt=`url(#${gn})`;At(this,Mt,br).set(It,Qt),At(this,Mt,br).set(yn,Qt);const Wt=Jt(this,Mt,is).call(this,gn);return Jt(this,Mt,jr).call(this,Gt,tn,fn,Wt),Qt}addHCMFilter(It,Nt){var xn;const Gt=`${It}-${Nt}`;if(At(this,Pt)===Gt)return At(this,pt);if(ln(this,Pt,Gt),ln(this,pt,"none"),(xn=At(this,St))==null||xn.remove(),!It||!Nt)return At(this,pt);const tn=Jt(this,Mt,Br).call(this,It);It=a.Util.makeHexColor(...tn);const fn=Jt(this,Mt,Br).call(this,Nt);if(Nt=a.Util.makeHexColor(...fn),At(this,Mt,wr).style.color="",It==="#000000"&&Nt==="#ffffff"||It===Nt)return At(this,pt);const yn=new Array(256);for(let An=0;An<=255;An++){const Cn=An/255;yn[An]=Cn<=.03928?Cn/12.92:((Cn+.055)/1.055)**2.4}const gn=yn.join(","),Qt=`g_${At(this,Rt)}_hcm_filter`,Wt=ln(this,bt,Jt(this,Mt,is).call(this,Qt));Jt(this,Mt,jr).call(this,gn,gn,gn,Wt),Jt(this,Mt,Ns).call(this,Wt);const Zt=(An,Cn)=>{const Sn=tn[An]/255,Pn=fn[An]/255,Vn=new Array(Cn+1);for(let Bn=0;Bn<=Cn;Bn++)Vn[Bn]=Sn+Bn/Cn*(Pn-Sn);return Vn.join(",")};return Jt(this,Mt,jr).call(this,Zt(0,5),Zt(1,5),Zt(2,5),Wt),ln(this,pt,`url(#${Qt})`),At(this,pt)}addHighlightHCMFilter(It,Nt,Gt,tn){var Pn;const fn=`${It}-${Nt}-${Gt}-${tn}`;if(At(this,Tt)===fn)return At(this,Ct);if(ln(this,Tt,fn),ln(this,Ct,"none"),(Pn=At(this,bt))==null||Pn.remove(),!It||!Nt)return At(this,Ct);const[yn,gn]=[It,Nt].map(Jt(this,Mt,Br).bind(this));let Qt=Math.round(.2126*yn[0]+.7152*yn[1]+.0722*yn[2]),Wt=Math.round(.2126*gn[0]+.7152*gn[1]+.0722*gn[2]),[Zt,xn]=[Gt,tn].map(Jt(this,Mt,Br).bind(this));Wt<Qt&&([Qt,Wt,Zt,xn]=[Wt,Qt,xn,Zt]),At(this,Mt,wr).style.color="";const An=(Vn,Bn,mn)=>{const en=new Array(256),nn=(Wt-Qt)/mn,Tn=Vn/255,zn=(Bn-Vn)/(255*mn);let Un=0;for(let Ut=0;Ut<=mn;Ut++){const pn=Math.round(Qt+Ut*nn),bn=Tn+Ut*zn;for(let In=Un;In<=pn;In++)en[In]=bn;Un=pn+1}for(let Ut=Un;Ut<256;Ut++)en[Ut]=en[Un-1];return en.join(",")},Cn=`g_${At(this,Rt)}_hcm_highlight_filter`,Sn=ln(this,bt,Jt(this,Mt,is).call(this,Cn));return Jt(this,Mt,Ns).call(this,Sn),Jt(this,Mt,jr).call(this,An(Zt[0],xn[0],5),An(Zt[1],xn[1],5),An(Zt[2],xn[2],5),Sn),ln(this,Ct,`url(#${Cn})`),At(this,Ct)}destroy(It=!1){It&&(At(this,pt)||At(this,Ct))||(At(this,Vt)&&(At(this,Vt).parentNode.parentNode.remove(),ln(this,Vt,null)),At(this,Bt)&&(At(this,Bt).clear(),ln(this,Bt,null)),ln(this,kt,0))}}Bt=new WeakMap,Vt=new WeakMap,Rt=new WeakMap,vt=new WeakMap,St=new WeakMap,Pt=new WeakMap,pt=new WeakMap,bt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,kt=new WeakMap,Mt=new WeakSet,br=function(){return At(this,Bt)||ln(this,Bt,new Map)},wr=function(){if(!At(this,Vt)){const It=At(this,vt).createElement("div"),{style:Nt}=It;Nt.visibility="hidden",Nt.contain="strict",Nt.width=Nt.height=0,Nt.position="absolute",Nt.top=Nt.left=0,Nt.zIndex=-1;const Gt=At(this,vt).createElementNS(c,"svg");Gt.setAttribute("width",0),Gt.setAttribute("height",0),ln(this,Vt,At(this,vt).createElementNS(c,"defs")),It.append(Gt),Gt.append(At(this,Vt)),At(this,vt).body.append(It)}return At(this,Vt)},Ns=function(It){const Nt=At(this,vt).createElementNS(c,"feColorMatrix");Nt.setAttribute("type","matrix"),Nt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),It.append(Nt)},is=function(It){const Nt=At(this,vt).createElementNS(c,"filter");return Nt.setAttribute("color-interpolation-filters","sRGB"),Nt.setAttribute("id",It),At(this,Mt,wr).append(Nt),Nt},ss=function(It,Nt,Gt){const tn=At(this,vt).createElementNS(c,Nt);tn.setAttribute("type","discrete"),tn.setAttribute("tableValues",Gt),It.append(tn)},jr=function(It,Nt,Gt,tn){const fn=At(this,vt).createElementNS(c,"feComponentTransfer");tn.append(fn),Jt(this,Mt,ss).call(this,fn,"feFuncR",It),Jt(this,Mt,ss).call(this,fn,"feFuncG",Nt),Jt(this,Mt,ss).call(this,fn,"feFuncB",Gt)},Br=function(It){return At(this,Mt,wr).style.color=It,ht(getComputedStyle(At(this,Mt,wr)).getPropertyValue("color"))},e.DOMFilterFactory=h;class g extends o.BaseCanvasFactory{constructor({ownerDocument:Xt=globalThis.document}={}){super(),this._document=Xt}_createCanvas(Xt,It){const Nt=this._document.createElement("canvas");return Nt.width=Xt,Nt.height=It,Nt}}e.DOMCanvasFactory=g;async function j(Ht,Xt=!1){if(mt(Ht,document.baseURI)){const It=await fetch(Ht);if(!It.ok)throw new Error(It.statusText);return Xt?new Uint8Array(await It.arrayBuffer()):(0,a.stringToBytes)(await It.text())}return new Promise((It,Nt)=>{const Gt=new XMLHttpRequest;Gt.open("GET",Ht,!0),Xt&&(Gt.responseType="arraybuffer"),Gt.onreadystatechange=()=>{if(Gt.readyState===XMLHttpRequest.DONE){if(Gt.status===200||Gt.status===0){let tn;if(Xt&&Gt.response?tn=new Uint8Array(Gt.response):!Xt&&Gt.responseText&&(tn=(0,a.stringToBytes)(Gt.responseText)),tn){It(tn);return}}Nt(new Error(Gt.statusText))}},Gt.send(null)})}class $ extends o.BaseCMapReaderFactory{_fetchData(Xt,It){return j(Xt,this.isCompressed).then(Nt=>({cMapData:Nt,compressionType:It}))}}e.DOMCMapReaderFactory=$;class _ extends o.BaseStandardFontDataFactory{_fetchData(Xt){return j(Xt,!0)}}e.DOMStandardFontDataFactory=_;class et extends o.BaseSVGFactory{_createSVG(Xt){return document.createElementNS(c,Xt)}}e.DOMSVGFactory=et;class tt{constructor({viewBox:Xt,scale:It,rotation:Nt,offsetX:Gt=0,offsetY:tn=0,dontFlip:fn=!1}){this.viewBox=Xt,this.scale=It,this.rotation=Nt,this.offsetX=Gt,this.offsetY=tn;const yn=(Xt[2]+Xt[0])/2,gn=(Xt[3]+Xt[1])/2;let Qt,Wt,Zt,xn;switch(Nt%=360,Nt<0&&(Nt+=360),Nt){case 180:Qt=-1,Wt=0,Zt=0,xn=1;break;case 90:Qt=0,Wt=1,Zt=1,xn=0;break;case 270:Qt=0,Wt=-1,Zt=-1,xn=0;break;case 0:Qt=1,Wt=0,Zt=0,xn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}fn&&(Zt=-Zt,xn=-xn);let An,Cn,Sn,Pn;Qt===0?(An=Math.abs(gn-Xt[1])*It+Gt,Cn=Math.abs(yn-Xt[0])*It+tn,Sn=(Xt[3]-Xt[1])*It,Pn=(Xt[2]-Xt[0])*It):(An=Math.abs(yn-Xt[0])*It+Gt,Cn=Math.abs(gn-Xt[1])*It+tn,Sn=(Xt[2]-Xt[0])*It,Pn=(Xt[3]-Xt[1])*It),this.transform=[Qt*It,Wt*It,Zt*It,xn*It,An-Qt*It*yn-Zt*It*gn,Cn-Wt*It*yn-xn*It*gn],this.width=Sn,this.height=Pn}get rawDims(){const{viewBox:Xt}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:Xt[2]-Xt[0],pageHeight:Xt[3]-Xt[1],pageX:Xt[0],pageY:Xt[1]})}clone({scale:Xt=this.scale,rotation:It=this.rotation,offsetX:Nt=this.offsetX,offsetY:Gt=this.offsetY,dontFlip:tn=!1}={}){return new tt({viewBox:this.viewBox.slice(),scale:Xt,rotation:It,offsetX:Nt,offsetY:Gt,dontFlip:tn})}convertToViewportPoint(Xt,It){return a.Util.applyTransform([Xt,It],this.transform)}convertToViewportRectangle(Xt){const It=a.Util.applyTransform([Xt[0],Xt[1]],this.transform),Nt=a.Util.applyTransform([Xt[2],Xt[3]],this.transform);return[It[0],It[1],Nt[0],Nt[1]]}convertToPdfPoint(Xt,It){return a.Util.applyInverseTransform([Xt,It],this.transform)}}e.PageViewport=tt;class it extends a.BaseException{constructor(Xt,It=0){super(Xt,"RenderingCancelledException"),this.extraDelay=It}}e.RenderingCancelledException=it;function ot(Ht){const Xt=Ht.length;let It=0;for(;It<Xt&&Ht[It].trim()==="";)It++;return Ht.substring(It,It+5).toLowerCase()==="data:"}function at(Ht){return typeof Ht=="string"&&/\.pdf$/i.test(Ht)}function rt(Ht,Xt=!1){return Xt||([Ht]=Ht.split(/[#?]/,1)),Ht.substring(Ht.lastIndexOf("/")+1)}function st(Ht,Xt="document.pdf"){if(typeof Ht!="string")return Xt;if(ot(Ht))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),Xt;const It=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Nt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Gt=It.exec(Ht);let tn=Nt.exec(Gt[1])||Nt.exec(Gt[2])||Nt.exec(Gt[3]);if(tn&&(tn=tn[0],tn.includes("%")))try{tn=Nt.exec(decodeURIComponent(tn))[0]}catch{}return tn||Xt}class lt{constructor(){qn(this,"started",Object.create(null));qn(this,"times",[])}time(Xt){Xt in this.started&&(0,a.warn)(`Timer is already running for ${Xt}`),this.started[Xt]=Date.now()}timeEnd(Xt){Xt in this.started||(0,a.warn)(`Timer has not been started for ${Xt}`),this.times.push({name:Xt,start:this.started[Xt],end:Date.now()}),delete this.started[Xt]}toString(){const Xt=[];let It=0;for(const{name:Nt}of this.times)It=Math.max(Nt.length,It);for(const{name:Nt,start:Gt,end:tn}of this.times)Xt.push(`${Nt.padEnd(It)} ${tn-Gt}ms
`);return Xt.join("")}}e.StatTimer=lt;function mt(Ht,Xt){try{const{protocol:It}=Xt?new URL(Ht,Xt):new URL(Ht);return It==="http:"||It==="https:"}catch{return!1}}function ft(Ht){Ht.preventDefault()}function gt(Ht,Xt=!1){return new Promise((It,Nt)=>{const Gt=document.createElement("script");Gt.src=Ht,Gt.onload=function(tn){Xt&&Gt.remove(),It(tn)},Gt.onerror=function(){Nt(new Error(`Cannot load script at: ${Gt.src}`))},(document.head||document.documentElement).append(Gt)})}function dt(Ht){console.log("Deprecated API usage: "+Ht)}let ut;class ct{static toDateObject(Xt){if(!Xt||typeof Xt!="string")return null;ut||(ut=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const It=ut.exec(Xt);if(!It)return null;const Nt=parseInt(It[1],10);let Gt=parseInt(It[2],10);Gt=Gt>=1&&Gt<=12?Gt-1:0;let tn=parseInt(It[3],10);tn=tn>=1&&tn<=31?tn:1;let fn=parseInt(It[4],10);fn=fn>=0&&fn<=23?fn:0;let yn=parseInt(It[5],10);yn=yn>=0&&yn<=59?yn:0;let gn=parseInt(It[6],10);gn=gn>=0&&gn<=59?gn:0;const Qt=It[7]||"Z";let Wt=parseInt(It[8],10);Wt=Wt>=0&&Wt<=23?Wt:0;let Zt=parseInt(It[9],10)||0;return Zt=Zt>=0&&Zt<=59?Zt:0,Qt==="-"?(fn+=Wt,yn+=Zt):Qt==="+"&&(fn-=Wt,yn-=Zt),new Date(Date.UTC(Nt,Gt,tn,fn,yn,gn))}}e.PDFDateString=ct;function _t(Ht,{scale:Xt=1,rotation:It=0}){const{width:Nt,height:Gt}=Ht.attributes.style,tn=[0,0,parseInt(Nt),parseInt(Gt)];return new tt({viewBox:tn,scale:Xt,rotation:It})}function ht(Ht){if(Ht.startsWith("#")){const Xt=parseInt(Ht.slice(1),16);return[(Xt&16711680)>>16,(Xt&65280)>>8,Xt&255]}return Ht.startsWith("rgb(")?Ht.slice(4,-1).split(",").map(Xt=>parseInt(Xt)):Ht.startsWith("rgba(")?Ht.slice(5,-1).split(",").map(Xt=>parseInt(Xt)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Ht}"`),[0,0,0])}function Et(Ht){const Xt=document.createElement("span");Xt.style.visibility="hidden",document.body.append(Xt);for(const It of Ht.keys()){Xt.style.color=It;const Nt=window.getComputedStyle(Xt).color;Ht.set(It,ht(Nt))}Xt.remove()}function yt(Ht){const{a:Xt,b:It,c:Nt,d:Gt,e:tn,f:fn}=Ht.getTransform();return[Xt,It,Nt,Gt,tn,fn]}function Ot(Ht){const{a:Xt,b:It,c:Nt,d:Gt,e:tn,f:fn}=Ht.getTransform().invertSelf();return[Xt,It,Nt,Gt,tn,fn]}function Dt(Ht,Xt,It=!1,Nt=!0){if(Xt instanceof tt){const{pageWidth:Gt,pageHeight:tn}=Xt.rawDims,{style:fn}=Ht,yn=a.FeatureTest.isCSSRoundSupported,gn=`var(--scale-factor) * ${Gt}px`,Qt=`var(--scale-factor) * ${tn}px`,Wt=yn?`round(${gn}, 1px)`:`calc(${gn})`,Zt=yn?`round(${Qt}, 1px)`:`calc(${Qt})`;!It||Xt.rotation%180===0?(fn.width=Wt,fn.height=Zt):(fn.width=Zt,fn.height=Wt)}Nt&&Ht.setAttribute("data-main-rotation",Xt.rotation)}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var o=s(1);class a{constructor(){this.constructor===a&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter($){return"none"}addHCMFilter($,_){return"none"}addHighlightHCMFilter($,_,et,tt){return"none"}destroy($=!1){}}e.BaseFilterFactory=a;class c{constructor(){this.constructor===c&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create($,_){if($<=0||_<=0)throw new Error("Invalid canvas size");const et=this._createCanvas($,_);return{canvas:et,context:et.getContext("2d")}}reset($,_,et){if(!$.canvas)throw new Error("Canvas is not specified");if(_<=0||et<=0)throw new Error("Invalid canvas size");$.canvas.width=_,$.canvas.height=et}destroy($){if(!$.canvas)throw new Error("Canvas is not specified");$.canvas.width=0,$.canvas.height=0,$.canvas=null,$.context=null}_createCanvas($,_){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=c;class d{constructor({baseUrl:$=null,isCompressed:_=!0}){this.constructor===d&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=$,this.isCompressed=_}async fetch({name:$}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!$)throw new Error("CMap name must be specified.");const _=this.baseUrl+$+(this.isCompressed?".bcmap":""),et=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(_,et).catch(tt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${_}`)})}_fetchData($,_){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=d;class h{constructor({baseUrl:$=null}){this.constructor===h&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=$}async fetch({filename:$}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!$)throw new Error("Font filename must be specified.");const _=`${this.baseUrl}${$}`;return this._fetchData(_).catch(et=>{throw new Error(`Unable to load font data at: ${_}`)})}_fetchData($){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=h;class g{constructor(){this.constructor===g&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create($,_,et=!1){if($<=0||_<=0)throw new Error("Invalid SVG dimensions");const tt=this._createSVG("svg:svg");return tt.setAttribute("version","1.1"),et||(tt.setAttribute("width",`${$}px`),tt.setAttribute("height",`${_}px`)),tt.setAttribute("preserveAspectRatio","none"),tt.setAttribute("viewBox",`0 0 ${$} ${_}`),tt}createElement($){if(typeof $!="string")throw new Error("Invalid SVG element type");return this._createSVG($)}_createSVG($){(0,o.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=g},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var o=s(1);const a=3285377520,c=4294901760,d=65535;class h{constructor(j){this.h1=j?j&4294967295:a,this.h2=j?j&4294967295:a}update(j){let $,_;if(typeof j=="string"){$=new Uint8Array(j.length*2),_=0;for(let dt=0,ut=j.length;dt<ut;dt++){const ct=j.charCodeAt(dt);ct<=255?$[_++]=ct:($[_++]=ct>>>8,$[_++]=ct&255)}}else if((0,o.isArrayBuffer)(j))$=j.slice(),_=$.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const et=_>>2,tt=_-et*4,it=new Uint32Array($.buffer,0,et);let ot=0,at=0,rt=this.h1,st=this.h2;const lt=3432918353,mt=461845907,ft=lt&d,gt=mt&d;for(let dt=0;dt<et;dt++)dt&1?(ot=it[dt],ot=ot*lt&c|ot*ft&d,ot=ot<<15|ot>>>17,ot=ot*mt&c|ot*gt&d,rt^=ot,rt=rt<<13|rt>>>19,rt=rt*5+3864292196):(at=it[dt],at=at*lt&c|at*ft&d,at=at<<15|at>>>17,at=at*mt&c|at*gt&d,st^=at,st=st<<13|st>>>19,st=st*5+3864292196);switch(ot=0,tt){case 3:ot^=$[et*4+2]<<16;case 2:ot^=$[et*4+1]<<8;case 1:ot^=$[et*4],ot=ot*lt&c|ot*ft&d,ot=ot<<15|ot>>>17,ot=ot*mt&c|ot*gt&d,et&1?rt^=ot:st^=ot}this.h1=rt,this.h2=st}hexdigest(){let j=this.h1,$=this.h2;return j^=$>>>1,j=j*3981806797&c|j*36045&d,$=$*4283543511&c|(($<<16|j>>>16)*2950163797&c)>>>16,j^=$>>>1,j=j*444984403&c|j*60499&d,$=$*3301882366&c|(($<<16|j>>>16)*3120437893&c)>>>16,j^=$>>>1,(j>>>0).toString(16).padStart(8,"0")+($>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=h},(i,e,s)=>{var d;Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var o=s(1);class a{constructor({ownerDocument:g=globalThis.document,styleElement:j=null}){on(this,d,new Set);this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const j=this.styleElement.sheet;j.insertRule(g,j.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),At(this,d).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(!(!g||At(this,d).has(g.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:j,src:$,style:_}=g,et=new FontFace(j,$,_);this.addNativeFontFace(et);try{await et.load(),At(this,d).add(j)}catch{(0,o.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(et)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const $=g.createNativeFontFace();if($){this.addNativeFontFace($);try{await $.loaded}catch(_){throw(0,o.warn)(`Failed to load font '${$.family}': '${_}'.`),g.disableFontFace=!0,_}}return}const j=g.createFontFaceRule();if(j){if(this.insertRule(j),this.isSyncFontLoadingSupported)return;await new Promise($=>{const _=this._queueLoadingCallback($);this._prepareFontLoadEvent(g,_)})}}get isFontLoadingAPISupported(){var j;const g=!!((j=this._document)!=null&&j.fonts);return(0,o.shadow)(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){let g=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){function j(){for((0,o.assert)(!_.done,"completeRequest() cannot be called twice."),_.done=!0;$.length>0&&$[0].done;){const et=$.shift();setTimeout(et.callback,0)}}const{loadingRequests:$}=this,_={done:!1,complete:j,callback:g};return $.push(_),_}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,j){function $(ht,Et){return ht.charCodeAt(Et)<<24|ht.charCodeAt(Et+1)<<16|ht.charCodeAt(Et+2)<<8|ht.charCodeAt(Et+3)&255}function _(ht,Et,yt,Ot){const Dt=ht.substring(0,Et),$t=ht.substring(Et+yt);return Dt+Ot+$t}let et,tt;const it=this._document.createElement("canvas");it.width=1,it.height=1;const ot=it.getContext("2d");let at=0;function rt(ht,Et){if(++at>30){(0,o.warn)("Load test font never loaded."),Et();return}if(ot.font="30px "+ht,ot.fillText(".",0,20),ot.getImageData(0,0,1,1).data[3]>0){Et();return}setTimeout(rt.bind(null,ht,Et))}const st=`lt${Date.now()}${this.loadTestFontId++}`;let lt=this._loadTestFont;lt=_(lt,976,st.length,st);const ft=16,gt=1482184792;let dt=$(lt,ft);for(et=0,tt=st.length-3;et<tt;et+=4)dt=dt-gt+$(st,et)|0;et<st.length&&(dt=dt-gt+$(st+"XXX",et)|0),lt=_(lt,ft,4,(0,o.string32)(dt));const ut=`url(data:font/opentype;base64,${btoa(lt)});`,ct=`@font-face {font-family:"${st}";src:${ut}}`;this.insertRule(ct);const _t=this._document.createElement("div");_t.style.visibility="hidden",_t.style.width=_t.style.height="10px",_t.style.position="absolute",_t.style.top=_t.style.left="0px";for(const ht of[g.loadedName,st]){const Et=this._document.createElement("span");Et.textContent="Hi",Et.style.fontFamily=ht,_t.append(Et)}this._document.body.append(_t),rt(st,()=>{_t.remove(),j.complete()})}}d=new WeakMap,e.FontLoader=a;class c{constructor(g,{isEvalSupported:j=!0,disableFontFace:$=!1,ignoreErrors:_=!1,inspectFont:et=null}){this.compiledGlyphs=Object.create(null);for(const tt in g)this[tt]=g[tt];this.isEvalSupported=j!==!1,this.disableFontFace=$===!0,this.ignoreErrors=_===!0,this._inspectFont=et}createNativeFontFace(){var j;if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const $={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&($.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,$)}return(j=this._inspectFont)==null||j.call(this,this),g}createFontFaceRule(){var _;if(!this.data||this.disableFontFace)return null;const g=(0,o.bytesToString)(this.data),j=`url(data:${this.mimetype};base64,${btoa(g)});`;let $;if(!this.cssFontInfo)$=`@font-face {font-family:"${this.loadedName}";src:${j}}`;else{let et=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(et+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),$=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${et}src:${j}}`}return(_=this._inspectFont)==null||_.call(this,this,j),$}getPathGenerator(g,j){if(this.compiledGlyphs[j]!==void 0)return this.compiledGlyphs[j];let $;try{$=g.get(this.loadedName+"_path_"+j)}catch(_){if(!this.ignoreErrors)throw _;return(0,o.warn)(`getPathGenerator - ignoring character: "${_}".`),this.compiledGlyphs[j]=function(et,tt){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const _=[];for(const et of $){const tt=et.args!==void 0?et.args.join(","):"";_.push("c.",et.cmd,"(",tt,`);
`)}return this.compiledGlyphs[j]=new Function("c","size",_.join(""))}return this.compiledGlyphs[j]=function(_,et){for(const tt of $)tt.cmd==="scale"&&(tt.args=[et,-et]),_[tt.cmd].apply(_,tt.args)}}}e.FontFaceObject=c},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var o=s(7);s(1);const a=function(j){return new Promise(($,_)=>{require$$5.readFile(j,(tt,it)=>{if(tt||!it){_(new Error(tt));return}$(new Uint8Array(it))})})};class c extends o.BaseFilterFactory{}e.NodeFilterFactory=c;class d extends o.BaseCanvasFactory{_createCanvas($,_){return require$$5.createCanvas($,_)}}e.NodeCanvasFactory=d;class h extends o.BaseCMapReaderFactory{_fetchData($,_){return a($).then(et=>({cMapData:et,compressionType:_}))}}e.NodeCMapReaderFactory=h;class g extends o.BaseStandardFontDataFactory{_fetchData($){return a($)}}e.NodeStandardFontDataFactory=g},(i,e,s)=>{var Vt,js,Bs;Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var o=s(1),a=s(6),c=s(12),d=s(13);const h=16,g=100,j=4096,$=15,_=10,et=1e3,tt=16;function it(Pt,pt){if(Pt._removeMirroring)throw new Error("Context is already forwarding operations.");Pt.__originalSave=Pt.save,Pt.__originalRestore=Pt.restore,Pt.__originalRotate=Pt.rotate,Pt.__originalScale=Pt.scale,Pt.__originalTranslate=Pt.translate,Pt.__originalTransform=Pt.transform,Pt.__originalSetTransform=Pt.setTransform,Pt.__originalResetTransform=Pt.resetTransform,Pt.__originalClip=Pt.clip,Pt.__originalMoveTo=Pt.moveTo,Pt.__originalLineTo=Pt.lineTo,Pt.__originalBezierCurveTo=Pt.bezierCurveTo,Pt.__originalRect=Pt.rect,Pt.__originalClosePath=Pt.closePath,Pt.__originalBeginPath=Pt.beginPath,Pt._removeMirroring=()=>{Pt.save=Pt.__originalSave,Pt.restore=Pt.__originalRestore,Pt.rotate=Pt.__originalRotate,Pt.scale=Pt.__originalScale,Pt.translate=Pt.__originalTranslate,Pt.transform=Pt.__originalTransform,Pt.setTransform=Pt.__originalSetTransform,Pt.resetTransform=Pt.__originalResetTransform,Pt.clip=Pt.__originalClip,Pt.moveTo=Pt.__originalMoveTo,Pt.lineTo=Pt.__originalLineTo,Pt.bezierCurveTo=Pt.__originalBezierCurveTo,Pt.rect=Pt.__originalRect,Pt.closePath=Pt.__originalClosePath,Pt.beginPath=Pt.__originalBeginPath,delete Pt._removeMirroring},Pt.save=function(){pt.save(),this.__originalSave()},Pt.restore=function(){pt.restore(),this.__originalRestore()},Pt.translate=function(Tt,Ct){pt.translate(Tt,Ct),this.__originalTranslate(Tt,Ct)},Pt.scale=function(Tt,Ct){pt.scale(Tt,Ct),this.__originalScale(Tt,Ct)},Pt.transform=function(Tt,Ct,kt,Mt,zt,Kt){pt.transform(Tt,Ct,kt,Mt,zt,Kt),this.__originalTransform(Tt,Ct,kt,Mt,zt,Kt)},Pt.setTransform=function(Tt,Ct,kt,Mt,zt,Kt){pt.setTransform(Tt,Ct,kt,Mt,zt,Kt),this.__originalSetTransform(Tt,Ct,kt,Mt,zt,Kt)},Pt.resetTransform=function(){pt.resetTransform(),this.__originalResetTransform()},Pt.rotate=function(Tt){pt.rotate(Tt),this.__originalRotate(Tt)},Pt.clip=function(Tt){pt.clip(Tt),this.__originalClip(Tt)},Pt.moveTo=function(bt,Tt){pt.moveTo(bt,Tt),this.__originalMoveTo(bt,Tt)},Pt.lineTo=function(bt,Tt){pt.lineTo(bt,Tt),this.__originalLineTo(bt,Tt)},Pt.bezierCurveTo=function(bt,Tt,Ct,kt,Mt,zt){pt.bezierCurveTo(bt,Tt,Ct,kt,Mt,zt),this.__originalBezierCurveTo(bt,Tt,Ct,kt,Mt,zt)},Pt.rect=function(bt,Tt,Ct,kt){pt.rect(bt,Tt,Ct,kt),this.__originalRect(bt,Tt,Ct,kt)},Pt.closePath=function(){pt.closePath(),this.__originalClosePath()},Pt.beginPath=function(){pt.beginPath(),this.__originalBeginPath()}}class ot{constructor(pt){this.canvasFactory=pt,this.cache=Object.create(null)}getCanvas(pt,bt,Tt){let Ct;return this.cache[pt]!==void 0?(Ct=this.cache[pt],this.canvasFactory.reset(Ct,bt,Tt)):(Ct=this.canvasFactory.create(bt,Tt),this.cache[pt]=Ct),Ct}delete(pt){delete this.cache[pt]}clear(){for(const pt in this.cache){const bt=this.cache[pt];this.canvasFactory.destroy(bt),delete this.cache[pt]}}}function at(Pt,pt,bt,Tt,Ct,kt,Mt,zt,Kt,Yt){const[rn,cn,sn,dn,Ht,Xt]=(0,a.getCurrentTransform)(Pt);if(cn===0&&sn===0){const Gt=Mt*rn+Ht,tn=Math.round(Gt),fn=zt*dn+Xt,yn=Math.round(fn),gn=(Mt+Kt)*rn+Ht,Qt=Math.abs(Math.round(gn)-tn)||1,Wt=(zt+Yt)*dn+Xt,Zt=Math.abs(Math.round(Wt)-yn)||1;return Pt.setTransform(Math.sign(rn),0,0,Math.sign(dn),tn,yn),Pt.drawImage(pt,bt,Tt,Ct,kt,0,0,Qt,Zt),Pt.setTransform(rn,cn,sn,dn,Ht,Xt),[Qt,Zt]}if(rn===0&&dn===0){const Gt=zt*sn+Ht,tn=Math.round(Gt),fn=Mt*cn+Xt,yn=Math.round(fn),gn=(zt+Yt)*sn+Ht,Qt=Math.abs(Math.round(gn)-tn)||1,Wt=(Mt+Kt)*cn+Xt,Zt=Math.abs(Math.round(Wt)-yn)||1;return Pt.setTransform(0,Math.sign(cn),Math.sign(sn),0,tn,yn),Pt.drawImage(pt,bt,Tt,Ct,kt,0,0,Zt,Qt),Pt.setTransform(rn,cn,sn,dn,Ht,Xt),[Zt,Qt]}Pt.drawImage(pt,bt,Tt,Ct,kt,Mt,zt,Kt,Yt);const It=Math.hypot(rn,cn),Nt=Math.hypot(sn,dn);return[It*Kt,Nt*Yt]}function rt(Pt){const{width:pt,height:bt}=Pt;if(pt>et||bt>et)return null;const Tt=1e3,Ct=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),kt=pt+1;let Mt=new Uint8Array(kt*(bt+1)),zt,Kt,Yt;const rn=pt+7&-8;let cn=new Uint8Array(rn*bt),sn=0;for(const Nt of Pt.data){let Gt=128;for(;Gt>0;)cn[sn++]=Nt&Gt?0:255,Gt>>=1}let dn=0;for(sn=0,cn[sn]!==0&&(Mt[0]=1,++dn),Kt=1;Kt<pt;Kt++)cn[sn]!==cn[sn+1]&&(Mt[Kt]=cn[sn]?2:1,++dn),sn++;for(cn[sn]!==0&&(Mt[Kt]=2,++dn),zt=1;zt<bt;zt++){sn=zt*rn,Yt=zt*kt,cn[sn-rn]!==cn[sn]&&(Mt[Yt]=cn[sn]?1:8,++dn);let Nt=(cn[sn]?4:0)+(cn[sn-rn]?8:0);for(Kt=1;Kt<pt;Kt++)Nt=(Nt>>2)+(cn[sn+1]?4:0)+(cn[sn-rn+1]?8:0),Ct[Nt]&&(Mt[Yt+Kt]=Ct[Nt],++dn),sn++;if(cn[sn-rn]!==cn[sn]&&(Mt[Yt+Kt]=cn[sn]?2:4,++dn),dn>Tt)return null}for(sn=rn*(bt-1),Yt=zt*kt,cn[sn]!==0&&(Mt[Yt]=8,++dn),Kt=1;Kt<pt;Kt++)cn[sn]!==cn[sn+1]&&(Mt[Yt+Kt]=cn[sn]?4:8,++dn),sn++;if(cn[sn]!==0&&(Mt[Yt+Kt]=4,++dn),dn>Tt)return null;const Ht=new Int32Array([0,kt,-1,0,-kt,0,0,0,1]),Xt=new Path2D;for(zt=0;dn&&zt<=bt;zt++){let Nt=zt*kt;const Gt=Nt+pt;for(;Nt<Gt&&!Mt[Nt];)Nt++;if(Nt===Gt)continue;Xt.moveTo(Nt%kt,zt);const tn=Nt;let fn=Mt[Nt];do{const yn=Ht[fn];do Nt+=yn;while(!Mt[Nt]);const gn=Mt[Nt];gn!==5&&gn!==10?(fn=gn,Mt[Nt]=0):(fn=gn&51*fn>>4,Mt[Nt]&=fn>>2|fn<<2),Xt.lineTo(Nt%kt,Nt/kt|0),Mt[Nt]||--dn}while(tn!==Nt);--zt}return cn=null,Mt=null,function(Nt){Nt.save(),Nt.scale(1/pt,-1/bt),Nt.translate(0,-bt),Nt.fill(Xt),Nt.beginPath(),Nt.restore()}}class st{constructor(pt,bt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,pt,bt])}clone(){const pt=Object.create(this);return pt.clipBox=this.clipBox.slice(),pt}setCurrentPoint(pt,bt){this.x=pt,this.y=bt}updatePathMinMax(pt,bt,Tt){[bt,Tt]=o.Util.applyTransform([bt,Tt],pt),this.minX=Math.min(this.minX,bt),this.minY=Math.min(this.minY,Tt),this.maxX=Math.max(this.maxX,bt),this.maxY=Math.max(this.maxY,Tt)}updateRectMinMax(pt,bt){const Tt=o.Util.applyTransform(bt,pt),Ct=o.Util.applyTransform(bt.slice(2),pt);this.minX=Math.min(this.minX,Tt[0],Ct[0]),this.minY=Math.min(this.minY,Tt[1],Ct[1]),this.maxX=Math.max(this.maxX,Tt[0],Ct[0]),this.maxY=Math.max(this.maxY,Tt[1],Ct[1])}updateScalingPathMinMax(pt,bt){o.Util.scaleMinMax(pt,bt),this.minX=Math.min(this.minX,bt[0]),this.maxX=Math.max(this.maxX,bt[1]),this.minY=Math.min(this.minY,bt[2]),this.maxY=Math.max(this.maxY,bt[3])}updateCurvePathMinMax(pt,bt,Tt,Ct,kt,Mt,zt,Kt,Yt,rn){const cn=o.Util.bezierBoundingBox(bt,Tt,Ct,kt,Mt,zt,Kt,Yt);if(rn){rn[0]=Math.min(rn[0],cn[0],cn[2]),rn[1]=Math.max(rn[1],cn[0],cn[2]),rn[2]=Math.min(rn[2],cn[1],cn[3]),rn[3]=Math.max(rn[3],cn[1],cn[3]);return}this.updateRectMinMax(pt,cn)}getPathBoundingBox(pt=c.PathType.FILL,bt=null){const Tt=[this.minX,this.minY,this.maxX,this.maxY];if(pt===c.PathType.STROKE){bt||(0,o.unreachable)("Stroke bounding box must include transform.");const Ct=o.Util.singularValueDecompose2dScale(bt),kt=Ct[0]*this.lineWidth/2,Mt=Ct[1]*this.lineWidth/2;Tt[0]-=kt,Tt[1]-=Mt,Tt[2]+=kt,Tt[3]+=Mt}return Tt}updateClipFromPath(){const pt=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(pt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(pt){this.clipBox=pt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(pt=c.PathType.FILL,bt=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(pt,bt))}}function lt(Pt,pt){if(typeof ImageData<"u"&&pt instanceof ImageData){Pt.putImageData(pt,0,0);return}const bt=pt.height,Tt=pt.width,Ct=bt%tt,kt=(bt-Ct)/tt,Mt=Ct===0?kt:kt+1,zt=Pt.createImageData(Tt,tt);let Kt=0,Yt;const rn=pt.data,cn=zt.data;let sn,dn,Ht,Xt;if(pt.kind===o.ImageKind.GRAYSCALE_1BPP){const It=rn.byteLength,Nt=new Uint32Array(cn.buffer,0,cn.byteLength>>2),Gt=Nt.length,tn=Tt+7>>3,fn=4294967295,yn=o.FeatureTest.isLittleEndian?4278190080:255;for(sn=0;sn<Mt;sn++){for(Ht=sn<kt?tt:Ct,Yt=0,dn=0;dn<Ht;dn++){const gn=It-Kt;let Qt=0;const Wt=gn>tn?Tt:gn*8-7,Zt=Wt&-8;let xn=0,An=0;for(;Qt<Zt;Qt+=8)An=rn[Kt++],Nt[Yt++]=An&128?fn:yn,Nt[Yt++]=An&64?fn:yn,Nt[Yt++]=An&32?fn:yn,Nt[Yt++]=An&16?fn:yn,Nt[Yt++]=An&8?fn:yn,Nt[Yt++]=An&4?fn:yn,Nt[Yt++]=An&2?fn:yn,Nt[Yt++]=An&1?fn:yn;for(;Qt<Wt;Qt++)xn===0&&(An=rn[Kt++],xn=128),Nt[Yt++]=An&xn?fn:yn,xn>>=1}for(;Yt<Gt;)Nt[Yt++]=0;Pt.putImageData(zt,0,sn*tt)}}else if(pt.kind===o.ImageKind.RGBA_32BPP){for(dn=0,Xt=Tt*tt*4,sn=0;sn<kt;sn++)cn.set(rn.subarray(Kt,Kt+Xt)),Kt+=Xt,Pt.putImageData(zt,0,dn),dn+=tt;sn<Mt&&(Xt=Tt*Ct*4,cn.set(rn.subarray(Kt,Kt+Xt)),Pt.putImageData(zt,0,dn))}else if(pt.kind===o.ImageKind.RGB_24BPP)for(Ht=tt,Xt=Tt*Ht,sn=0;sn<Mt;sn++){for(sn>=kt&&(Ht=Ct,Xt=Tt*Ht),Yt=0,dn=Xt;dn--;)cn[Yt++]=rn[Kt++],cn[Yt++]=rn[Kt++],cn[Yt++]=rn[Kt++],cn[Yt++]=255;Pt.putImageData(zt,0,sn*tt)}else throw new Error(`bad image kind: ${pt.kind}`)}function mt(Pt,pt){if(pt.bitmap){Pt.drawImage(pt.bitmap,0,0);return}const bt=pt.height,Tt=pt.width,Ct=bt%tt,kt=(bt-Ct)/tt,Mt=Ct===0?kt:kt+1,zt=Pt.createImageData(Tt,tt);let Kt=0;const Yt=pt.data,rn=zt.data;for(let cn=0;cn<Mt;cn++){const sn=cn<kt?tt:Ct;({srcPos:Kt}=(0,d.convertBlackAndWhiteToRGBA)({src:Yt,srcPos:Kt,dest:rn,width:Tt,height:sn,nonBlackColor:0})),Pt.putImageData(zt,0,cn*tt)}}function ft(Pt,pt){const bt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Tt of bt)Pt[Tt]!==void 0&&(pt[Tt]=Pt[Tt]);Pt.setLineDash!==void 0&&(pt.setLineDash(Pt.getLineDash()),pt.lineDashOffset=Pt.lineDashOffset)}function gt(Pt){if(Pt.strokeStyle=Pt.fillStyle="#000000",Pt.fillRule="nonzero",Pt.globalAlpha=1,Pt.lineWidth=1,Pt.lineCap="butt",Pt.lineJoin="miter",Pt.miterLimit=10,Pt.globalCompositeOperation="source-over",Pt.font="10px sans-serif",Pt.setLineDash!==void 0&&(Pt.setLineDash([]),Pt.lineDashOffset=0),!o.isNodeJS){const{filter:pt}=Pt;pt!=="none"&&pt!==""&&(Pt.filter="none")}}function dt(Pt,pt,bt,Tt){const Ct=Pt.length;for(let kt=3;kt<Ct;kt+=4){const Mt=Pt[kt];if(Mt===0)Pt[kt-3]=pt,Pt[kt-2]=bt,Pt[kt-1]=Tt;else if(Mt<255){const zt=255-Mt;Pt[kt-3]=Pt[kt-3]*Mt+pt*zt>>8,Pt[kt-2]=Pt[kt-2]*Mt+bt*zt>>8,Pt[kt-1]=Pt[kt-1]*Mt+Tt*zt>>8}}}function ut(Pt,pt,bt){const Tt=Pt.length,Ct=1/255;for(let kt=3;kt<Tt;kt+=4){const Mt=bt?bt[Pt[kt]]:Pt[kt];pt[kt]=pt[kt]*Mt*Ct|0}}function ct(Pt,pt,bt){const Tt=Pt.length;for(let Ct=3;Ct<Tt;Ct+=4){const kt=Pt[Ct-3]*77+Pt[Ct-2]*152+Pt[Ct-1]*28;pt[Ct]=bt?pt[Ct]*bt[kt>>8]>>8:pt[Ct]*kt>>16}}function _t(Pt,pt,bt,Tt,Ct,kt,Mt,zt,Kt,Yt,rn){const cn=!!kt,sn=cn?kt[0]:0,dn=cn?kt[1]:0,Ht=cn?kt[2]:0,Xt=Ct==="Luminosity"?ct:ut,Nt=Math.min(Tt,Math.ceil(1048576/bt));for(let Gt=0;Gt<Tt;Gt+=Nt){const tn=Math.min(Nt,Tt-Gt),fn=Pt.getImageData(zt-Yt,Gt+(Kt-rn),bt,tn),yn=pt.getImageData(zt,Gt+Kt,bt,tn);cn&&dt(fn.data,sn,dn,Ht),Xt(fn.data,yn.data,Mt),pt.putImageData(yn,zt,Gt+Kt)}}function ht(Pt,pt,bt,Tt){const Ct=Tt[0],kt=Tt[1],Mt=Tt[2]-Ct,zt=Tt[3]-kt;Mt===0||zt===0||(_t(pt.context,bt,Mt,zt,pt.subtype,pt.backdrop,pt.transferMap,Ct,kt,pt.offsetX,pt.offsetY),Pt.save(),Pt.globalAlpha=1,Pt.globalCompositeOperation="source-over",Pt.setTransform(1,0,0,1,0,0),Pt.drawImage(bt.canvas,0,0),Pt.restore())}function Et(Pt,pt){const bt=o.Util.singularValueDecompose2dScale(Pt);bt[0]=Math.fround(bt[0]),bt[1]=Math.fround(bt[1]);const Tt=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return pt!==void 0?pt:bt[0]<=Tt||bt[1]<=Tt}const yt=["butt","round","square"],Ot=["miter","round","bevel"],Dt={},$t={},St=class St{constructor(pt,bt,Tt,Ct,kt,{optionalContentConfig:Mt,markedContentStack:zt=null},Kt,Yt){on(this,Vt);this.ctx=pt,this.current=new st(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=bt,this.objs=Tt,this.canvasFactory=Ct,this.filterFactory=kt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=zt||[],this.optionalContentConfig=Mt,this.cachedCanvases=new ot(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Kt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Yt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(pt,bt=null){return typeof pt=="string"?pt.startsWith("g_")?this.commonObjs.get(pt):this.objs.get(pt):bt}beginDrawing({transform:pt,viewport:bt,transparency:Tt=!1,background:Ct=null}){const kt=this.ctx.canvas.width,Mt=this.ctx.canvas.height,zt=this.ctx.fillStyle;if(this.ctx.fillStyle=Ct||"#ffffff",this.ctx.fillRect(0,0,kt,Mt),this.ctx.fillStyle=zt,Tt){const Kt=this.cachedCanvases.getCanvas("transparent",kt,Mt);this.compositeCtx=this.ctx,this.transparentCanvas=Kt.canvas,this.ctx=Kt.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),gt(this.ctx),pt&&(this.ctx.transform(...pt),this.outputScaleX=pt[0],this.outputScaleY=pt[0]),this.ctx.transform(...bt.transform),this.viewportScale=bt.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(pt,bt,Tt,Ct){const kt=pt.argsArray,Mt=pt.fnArray;let zt=bt||0;const Kt=kt.length;if(Kt===zt)return zt;const Yt=Kt-zt>_&&typeof Tt=="function",rn=Yt?Date.now()+$:0;let cn=0;const sn=this.commonObjs,dn=this.objs;let Ht;for(;;){if(Ct!==void 0&&zt===Ct.nextBreakPoint)return Ct.breakIt(zt,Tt),zt;if(Ht=Mt[zt],Ht!==o.OPS.dependency)this[Ht].apply(this,kt[zt]);else for(const Xt of kt[zt]){const It=Xt.startsWith("g_")?sn:dn;if(!It.has(Xt))return It.get(Xt,Tt),zt}if(zt++,zt===Kt)return zt;if(Yt&&++cn>_){if(Date.now()>rn)return Tt(),zt;cn=0}}}endDrawing(){Jt(this,Vt,js).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const pt of this._cachedBitmapsMap.values()){for(const bt of pt.values())typeof HTMLCanvasElement<"u"&&bt instanceof HTMLCanvasElement&&(bt.width=bt.height=0);pt.clear()}this._cachedBitmapsMap.clear(),Jt(this,Vt,Bs).call(this)}_scaleImage(pt,bt){const Tt=pt.width,Ct=pt.height;let kt=Math.max(Math.hypot(bt[0],bt[1]),1),Mt=Math.max(Math.hypot(bt[2],bt[3]),1),zt=Tt,Kt=Ct,Yt="prescale1",rn,cn;for(;kt>2&&zt>1||Mt>2&&Kt>1;){let sn=zt,dn=Kt;kt>2&&zt>1&&(sn=zt>=16384?Math.floor(zt/2)-1||1:Math.ceil(zt/2),kt/=zt/sn),Mt>2&&Kt>1&&(dn=Kt>=16384?Math.floor(Kt/2)-1||1:Math.ceil(Kt)/2,Mt/=Kt/dn),rn=this.cachedCanvases.getCanvas(Yt,sn,dn),cn=rn.context,cn.clearRect(0,0,sn,dn),cn.drawImage(pt,0,0,zt,Kt,0,0,sn,dn),pt=rn.canvas,zt=sn,Kt=dn,Yt=Yt==="prescale1"?"prescale2":"prescale1"}return{img:pt,paintWidth:zt,paintHeight:Kt}}_createMaskCanvas(pt){const bt=this.ctx,{width:Tt,height:Ct}=pt,kt=this.current.fillColor,Mt=this.current.patternFill,zt=(0,a.getCurrentTransform)(bt);let Kt,Yt,rn,cn;if((pt.bitmap||pt.data)&&pt.count>1){const Qt=pt.bitmap||pt.data.buffer;Yt=JSON.stringify(Mt?zt:[zt.slice(0,4),kt]),Kt=this._cachedBitmapsMap.get(Qt),Kt||(Kt=new Map,this._cachedBitmapsMap.set(Qt,Kt));const Wt=Kt.get(Yt);if(Wt&&!Mt){const Zt=Math.round(Math.min(zt[0],zt[2])+zt[4]),xn=Math.round(Math.min(zt[1],zt[3])+zt[5]);return{canvas:Wt,offsetX:Zt,offsetY:xn}}rn=Wt}rn||(cn=this.cachedCanvases.getCanvas("maskCanvas",Tt,Ct),mt(cn.context,pt));let sn=o.Util.transform(zt,[1/Tt,0,0,-1/Ct,0,0]);sn=o.Util.transform(sn,[1,0,0,1,0,-Ct]);const dn=o.Util.applyTransform([0,0],sn),Ht=o.Util.applyTransform([Tt,Ct],sn),Xt=o.Util.normalizeRect([dn[0],dn[1],Ht[0],Ht[1]]),It=Math.round(Xt[2]-Xt[0])||1,Nt=Math.round(Xt[3]-Xt[1])||1,Gt=this.cachedCanvases.getCanvas("fillCanvas",It,Nt),tn=Gt.context,fn=Math.min(dn[0],Ht[0]),yn=Math.min(dn[1],Ht[1]);tn.translate(-fn,-yn),tn.transform(...sn),rn||(rn=this._scaleImage(cn.canvas,(0,a.getCurrentTransformInverse)(tn)),rn=rn.img,Kt&&Mt&&Kt.set(Yt,rn)),tn.imageSmoothingEnabled=Et((0,a.getCurrentTransform)(tn),pt.interpolate),at(tn,rn,0,0,rn.width,rn.height,0,0,Tt,Ct),tn.globalCompositeOperation="source-in";const gn=o.Util.transform((0,a.getCurrentTransformInverse)(tn),[1,0,0,1,-fn,-yn]);return tn.fillStyle=Mt?kt.getPattern(bt,this,gn,c.PathType.FILL):kt,tn.fillRect(0,0,Tt,Ct),Kt&&!Mt&&(this.cachedCanvases.delete("fillCanvas"),Kt.set(Yt,Gt.canvas)),{canvas:Gt.canvas,offsetX:Math.round(fn),offsetY:Math.round(yn)}}setLineWidth(pt){pt!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=pt,this.ctx.lineWidth=pt}setLineCap(pt){this.ctx.lineCap=yt[pt]}setLineJoin(pt){this.ctx.lineJoin=Ot[pt]}setMiterLimit(pt){this.ctx.miterLimit=pt}setDash(pt,bt){const Tt=this.ctx;Tt.setLineDash!==void 0&&(Tt.setLineDash(pt),Tt.lineDashOffset=bt)}setRenderingIntent(pt){}setFlatness(pt){}setGState(pt){for(const[bt,Tt]of pt)switch(bt){case"LW":this.setLineWidth(Tt);break;case"LC":this.setLineCap(Tt);break;case"LJ":this.setLineJoin(Tt);break;case"ML":this.setMiterLimit(Tt);break;case"D":this.setDash(Tt[0],Tt[1]);break;case"RI":this.setRenderingIntent(Tt);break;case"FL":this.setFlatness(Tt);break;case"Font":this.setFont(Tt[0],Tt[1]);break;case"CA":this.current.strokeAlpha=Tt;break;case"ca":this.current.fillAlpha=Tt,this.ctx.globalAlpha=Tt;break;case"BM":this.ctx.globalCompositeOperation=Tt;break;case"SMask":this.current.activeSMask=Tt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Tt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const pt=this.inSMaskMode;this.current.activeSMask&&!pt?this.beginSMaskMode():!this.current.activeSMask&&pt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const pt=this.ctx.canvas.width,bt=this.ctx.canvas.height,Tt="smaskGroupAt"+this.groupLevel,Ct=this.cachedCanvases.getCanvas(Tt,pt,bt);this.suspendedCtx=this.ctx,this.ctx=Ct.context;const kt=this.ctx;kt.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),ft(this.suspendedCtx,kt),it(kt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ft(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(pt){if(!this.current.activeSMask)return;pt?(pt[0]=Math.floor(pt[0]),pt[1]=Math.floor(pt[1]),pt[2]=Math.ceil(pt[2]),pt[3]=Math.ceil(pt[3])):pt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const bt=this.current.activeSMask,Tt=this.suspendedCtx;ht(Tt,bt,this.ctx,pt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(ft(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const pt=this.current;this.stateStack.push(pt),this.current=pt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ft(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(pt,bt,Tt,Ct,kt,Mt){this.ctx.transform(pt,bt,Tt,Ct,kt,Mt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(pt,bt,Tt){const Ct=this.ctx,kt=this.current;let Mt=kt.x,zt=kt.y,Kt,Yt;const rn=(0,a.getCurrentTransform)(Ct),cn=rn[0]===0&&rn[3]===0||rn[1]===0&&rn[2]===0,sn=cn?Tt.slice(0):null;for(let dn=0,Ht=0,Xt=pt.length;dn<Xt;dn++)switch(pt[dn]|0){case o.OPS.rectangle:Mt=bt[Ht++],zt=bt[Ht++];const It=bt[Ht++],Nt=bt[Ht++],Gt=Mt+It,tn=zt+Nt;Ct.moveTo(Mt,zt),It===0||Nt===0?Ct.lineTo(Gt,tn):(Ct.lineTo(Gt,zt),Ct.lineTo(Gt,tn),Ct.lineTo(Mt,tn)),cn||kt.updateRectMinMax(rn,[Mt,zt,Gt,tn]),Ct.closePath();break;case o.OPS.moveTo:Mt=bt[Ht++],zt=bt[Ht++],Ct.moveTo(Mt,zt),cn||kt.updatePathMinMax(rn,Mt,zt);break;case o.OPS.lineTo:Mt=bt[Ht++],zt=bt[Ht++],Ct.lineTo(Mt,zt),cn||kt.updatePathMinMax(rn,Mt,zt);break;case o.OPS.curveTo:Kt=Mt,Yt=zt,Mt=bt[Ht+4],zt=bt[Ht+5],Ct.bezierCurveTo(bt[Ht],bt[Ht+1],bt[Ht+2],bt[Ht+3],Mt,zt),kt.updateCurvePathMinMax(rn,Kt,Yt,bt[Ht],bt[Ht+1],bt[Ht+2],bt[Ht+3],Mt,zt,sn),Ht+=6;break;case o.OPS.curveTo2:Kt=Mt,Yt=zt,Ct.bezierCurveTo(Mt,zt,bt[Ht],bt[Ht+1],bt[Ht+2],bt[Ht+3]),kt.updateCurvePathMinMax(rn,Kt,Yt,Mt,zt,bt[Ht],bt[Ht+1],bt[Ht+2],bt[Ht+3],sn),Mt=bt[Ht+2],zt=bt[Ht+3],Ht+=4;break;case o.OPS.curveTo3:Kt=Mt,Yt=zt,Mt=bt[Ht+2],zt=bt[Ht+3],Ct.bezierCurveTo(bt[Ht],bt[Ht+1],Mt,zt,Mt,zt),kt.updateCurvePathMinMax(rn,Kt,Yt,bt[Ht],bt[Ht+1],Mt,zt,Mt,zt,sn),Ht+=4;break;case o.OPS.closePath:Ct.closePath();break}cn&&kt.updateScalingPathMinMax(rn,sn),kt.setCurrentPoint(Mt,zt)}closePath(){this.ctx.closePath()}stroke(pt=!0){const bt=this.ctx,Tt=this.current.strokeColor;bt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Tt=="object"&&(Tt!=null&&Tt.getPattern)?(bt.save(),bt.strokeStyle=Tt.getPattern(bt,this,(0,a.getCurrentTransformInverse)(bt),c.PathType.STROKE),this.rescaleAndStroke(!1),bt.restore()):this.rescaleAndStroke(!0)),pt&&this.consumePath(this.current.getClippedPathBoundingBox()),bt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(pt=!0){const bt=this.ctx,Tt=this.current.fillColor,Ct=this.current.patternFill;let kt=!1;Ct&&(bt.save(),bt.fillStyle=Tt.getPattern(bt,this,(0,a.getCurrentTransformInverse)(bt),c.PathType.FILL),kt=!0);const Mt=this.current.getClippedPathBoundingBox();this.contentVisible&&Mt!==null&&(this.pendingEOFill?(bt.fill("evenodd"),this.pendingEOFill=!1):bt.fill()),kt&&bt.restore(),pt&&this.consumePath(Mt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Dt}eoClip(){this.pendingClip=$t}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const pt=this.pendingTextPaths,bt=this.ctx;if(pt===void 0){bt.beginPath();return}bt.save(),bt.beginPath();for(const Tt of pt)bt.setTransform(...Tt.transform),bt.translate(Tt.x,Tt.y),Tt.addToPath(bt,Tt.fontSize);bt.restore(),bt.clip(),bt.beginPath(),delete this.pendingTextPaths}setCharSpacing(pt){this.current.charSpacing=pt}setWordSpacing(pt){this.current.wordSpacing=pt}setHScale(pt){this.current.textHScale=pt/100}setLeading(pt){this.current.leading=-pt}setFont(pt,bt){var rn;const Tt=this.commonObjs.get(pt),Ct=this.current;if(!Tt)throw new Error(`Can't find font for ${pt}`);if(Ct.fontMatrix=Tt.fontMatrix||o.FONT_IDENTITY_MATRIX,(Ct.fontMatrix[0]===0||Ct.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+pt),bt<0?(bt=-bt,Ct.fontDirection=-1):Ct.fontDirection=1,this.current.font=Tt,this.current.fontSize=bt,Tt.isType3Font)return;const kt=Tt.loadedName||"sans-serif",Mt=((rn=Tt.systemFontInfo)==null?void 0:rn.css)||`"${kt}", ${Tt.fallbackName}`;let zt="normal";Tt.black?zt="900":Tt.bold&&(zt="bold");const Kt=Tt.italic?"italic":"normal";let Yt=bt;bt<h?Yt=h:bt>g&&(Yt=g),this.current.fontSizeScale=bt/Yt,this.ctx.font=`${Kt} ${zt} ${Yt}px ${Mt}`}setTextRenderingMode(pt){this.current.textRenderingMode=pt}setTextRise(pt){this.current.textRise=pt}moveText(pt,bt){this.current.x=this.current.lineX+=pt,this.current.y=this.current.lineY+=bt}setLeadingMoveText(pt,bt){this.setLeading(-bt),this.moveText(pt,bt)}setTextMatrix(pt,bt,Tt,Ct,kt,Mt){this.current.textMatrix=[pt,bt,Tt,Ct,kt,Mt],this.current.textMatrixScale=Math.hypot(pt,bt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(pt,bt,Tt,Ct){const kt=this.ctx,Mt=this.current,zt=Mt.font,Kt=Mt.textRenderingMode,Yt=Mt.fontSize/Mt.fontSizeScale,rn=Kt&o.TextRenderingMode.FILL_STROKE_MASK,cn=!!(Kt&o.TextRenderingMode.ADD_TO_PATH_FLAG),sn=Mt.patternFill&&!zt.missingFile;let dn;(zt.disableFontFace||cn||sn)&&(dn=zt.getPathGenerator(this.commonObjs,pt)),zt.disableFontFace||sn?(kt.save(),kt.translate(bt,Tt),kt.beginPath(),dn(kt,Yt),Ct&&kt.setTransform(...Ct),(rn===o.TextRenderingMode.FILL||rn===o.TextRenderingMode.FILL_STROKE)&&kt.fill(),(rn===o.TextRenderingMode.STROKE||rn===o.TextRenderingMode.FILL_STROKE)&&kt.stroke(),kt.restore()):((rn===o.TextRenderingMode.FILL||rn===o.TextRenderingMode.FILL_STROKE)&&kt.fillText(pt,bt,Tt),(rn===o.TextRenderingMode.STROKE||rn===o.TextRenderingMode.FILL_STROKE)&&kt.strokeText(pt,bt,Tt)),cn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,a.getCurrentTransform)(kt),x:bt,y:Tt,fontSize:Yt,addToPath:dn})}get isFontSubpixelAAEnabled(){const{context:pt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);pt.scale(1.5,1),pt.fillText("I",0,10);const bt=pt.getImageData(0,0,10,10).data;let Tt=!1;for(let Ct=3;Ct<bt.length;Ct+=4)if(bt[Ct]>0&&bt[Ct]<255){Tt=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",Tt)}showText(pt){const bt=this.current,Tt=bt.font;if(Tt.isType3Font)return this.showType3Text(pt);const Ct=bt.fontSize;if(Ct===0)return;const kt=this.ctx,Mt=bt.fontSizeScale,zt=bt.charSpacing,Kt=bt.wordSpacing,Yt=bt.fontDirection,rn=bt.textHScale*Yt,cn=pt.length,sn=Tt.vertical,dn=sn?1:-1,Ht=Tt.defaultVMetrics,Xt=Ct*bt.fontMatrix[0],It=bt.textRenderingMode===o.TextRenderingMode.FILL&&!Tt.disableFontFace&&!bt.patternFill;kt.save(),kt.transform(...bt.textMatrix),kt.translate(bt.x,bt.y+bt.textRise),Yt>0?kt.scale(rn,-1):kt.scale(rn,1);let Nt;if(bt.patternFill){kt.save();const gn=bt.fillColor.getPattern(kt,this,(0,a.getCurrentTransformInverse)(kt),c.PathType.FILL);Nt=(0,a.getCurrentTransform)(kt),kt.restore(),kt.fillStyle=gn}let Gt=bt.lineWidth;const tn=bt.textMatrixScale;if(tn===0||Gt===0){const gn=bt.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(gn===o.TextRenderingMode.STROKE||gn===o.TextRenderingMode.FILL_STROKE)&&(Gt=this.getSinglePixelWidth())}else Gt/=tn;if(Mt!==1&&(kt.scale(Mt,Mt),Gt/=Mt),kt.lineWidth=Gt,Tt.isInvalidPDFjsFont){const gn=[];let Qt=0;for(const Wt of pt)gn.push(Wt.unicode),Qt+=Wt.width;kt.fillText(gn.join(""),0,0),bt.x+=Qt*Xt*rn,kt.restore(),this.compose();return}let fn=0,yn;for(yn=0;yn<cn;++yn){const gn=pt[yn];if(typeof gn=="number"){fn+=dn*gn*Ct/1e3;continue}let Qt=!1;const Wt=(gn.isSpace?Kt:0)+zt,Zt=gn.fontChar,xn=gn.accent;let An,Cn,Sn=gn.width;if(sn){const Vn=gn.vmetric||Ht,Bn=-(gn.vmetric?Vn[1]:Sn*.5)*Xt,mn=Vn[2]*Xt;Sn=Vn?-Vn[0]:Sn,An=Bn/Mt,Cn=(fn+mn)/Mt}else An=fn/Mt,Cn=0;if(Tt.remeasure&&Sn>0){const Vn=kt.measureText(Zt).width*1e3/Ct*Mt;if(Sn<Vn&&this.isFontSubpixelAAEnabled){const Bn=Sn/Vn;Qt=!0,kt.save(),kt.scale(Bn,1),An/=Bn}else Sn!==Vn&&(An+=(Sn-Vn)/2e3*Ct/Mt)}if(this.contentVisible&&(gn.isInFont||Tt.missingFile)){if(It&&!xn)kt.fillText(Zt,An,Cn);else if(this.paintChar(Zt,An,Cn,Nt),xn){const Vn=An+Ct*xn.offset.x/Mt,Bn=Cn-Ct*xn.offset.y/Mt;this.paintChar(xn.fontChar,Vn,Bn,Nt)}}const Pn=sn?Sn*Xt-Wt*Yt:Sn*Xt+Wt*Yt;fn+=Pn,Qt&&kt.restore()}sn?bt.y-=fn:bt.x+=fn*rn,kt.restore(),this.compose()}showType3Text(pt){const bt=this.ctx,Tt=this.current,Ct=Tt.font,kt=Tt.fontSize,Mt=Tt.fontDirection,zt=Ct.vertical?1:-1,Kt=Tt.charSpacing,Yt=Tt.wordSpacing,rn=Tt.textHScale*Mt,cn=Tt.fontMatrix||o.FONT_IDENTITY_MATRIX,sn=pt.length,dn=Tt.textRenderingMode===o.TextRenderingMode.INVISIBLE;let Ht,Xt,It,Nt;if(!(dn||kt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,bt.save(),bt.transform(...Tt.textMatrix),bt.translate(Tt.x,Tt.y),bt.scale(rn,Mt),Ht=0;Ht<sn;++Ht){if(Xt=pt[Ht],typeof Xt=="number"){Nt=zt*Xt*kt/1e3,this.ctx.translate(Nt,0),Tt.x+=Nt*rn;continue}const Gt=(Xt.isSpace?Yt:0)+Kt,tn=Ct.charProcOperatorList[Xt.operatorListId];if(!tn){(0,o.warn)(`Type3 character "${Xt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Xt,this.save(),bt.scale(kt,kt),bt.transform(...cn),this.executeOperatorList(tn),this.restore()),It=o.Util.applyTransform([Xt.width,0],cn)[0]*kt+Gt,bt.translate(It,0),Tt.x+=It*rn}bt.restore(),this.processingType3=null}}setCharWidth(pt,bt){}setCharWidthAndBounds(pt,bt,Tt,Ct,kt,Mt){this.ctx.rect(Tt,Ct,kt-Tt,Mt-Ct),this.ctx.clip(),this.endPath()}getColorN_Pattern(pt){let bt;if(pt[0]==="TilingPattern"){const Tt=pt[1],Ct=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),kt={createCanvasGraphics:Mt=>new St(Mt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};bt=new c.TilingPattern(pt,Tt,this.ctx,kt,Ct)}else bt=this._getPattern(pt[1],pt[2]);return bt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(pt,bt,Tt){const Ct=o.Util.makeHexColor(pt,bt,Tt);this.ctx.strokeStyle=Ct,this.current.strokeColor=Ct}setFillRGBColor(pt,bt,Tt){const Ct=o.Util.makeHexColor(pt,bt,Tt);this.ctx.fillStyle=Ct,this.current.fillColor=Ct,this.current.patternFill=!1}_getPattern(pt,bt=null){let Tt;return this.cachedPatterns.has(pt)?Tt=this.cachedPatterns.get(pt):(Tt=(0,c.getShadingPattern)(this.getObject(pt)),this.cachedPatterns.set(pt,Tt)),bt&&(Tt.matrix=bt),Tt}shadingFill(pt){if(!this.contentVisible)return;const bt=this.ctx;this.save();const Tt=this._getPattern(pt);bt.fillStyle=Tt.getPattern(bt,this,(0,a.getCurrentTransformInverse)(bt),c.PathType.SHADING);const Ct=(0,a.getCurrentTransformInverse)(bt);if(Ct){const{width:kt,height:Mt}=bt.canvas,[zt,Kt,Yt,rn]=o.Util.getAxialAlignedBoundingBox([0,0,kt,Mt],Ct);this.ctx.fillRect(zt,Kt,Yt-zt,rn-Kt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(pt,bt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(pt)&&pt.length===6&&this.transform(...pt),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),bt)){const Tt=bt[2]-bt[0],Ct=bt[3]-bt[1];this.ctx.rect(bt[0],bt[1],Tt,Ct),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),bt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(pt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const bt=this.ctx;pt.isolated||(0,o.info)("TODO: Support non-isolated groups."),pt.knockout&&(0,o.warn)("Knockout groups not supported.");const Tt=(0,a.getCurrentTransform)(bt);if(pt.matrix&&bt.transform(...pt.matrix),!pt.bbox)throw new Error("Bounding box is required.");let Ct=o.Util.getAxialAlignedBoundingBox(pt.bbox,(0,a.getCurrentTransform)(bt));const kt=[0,0,bt.canvas.width,bt.canvas.height];Ct=o.Util.intersect(Ct,kt)||[0,0,0,0];const Mt=Math.floor(Ct[0]),zt=Math.floor(Ct[1]);let Kt=Math.max(Math.ceil(Ct[2])-Mt,1),Yt=Math.max(Math.ceil(Ct[3])-zt,1),rn=1,cn=1;Kt>j&&(rn=Kt/j,Kt=j),Yt>j&&(cn=Yt/j,Yt=j),this.current.startNewPathAndClipBox([0,0,Kt,Yt]);let sn="groupAt"+this.groupLevel;pt.smask&&(sn+="_smask_"+this.smaskCounter++%2);const dn=this.cachedCanvases.getCanvas(sn,Kt,Yt),Ht=dn.context;Ht.scale(1/rn,1/cn),Ht.translate(-Mt,-zt),Ht.transform(...Tt),pt.smask?this.smaskStack.push({canvas:dn.canvas,context:Ht,offsetX:Mt,offsetY:zt,scaleX:rn,scaleY:cn,subtype:pt.smask.subtype,backdrop:pt.smask.backdrop,transferMap:pt.smask.transferMap||null,startTransformInverse:null}):(bt.setTransform(1,0,0,1,0,0),bt.translate(Mt,zt),bt.scale(rn,cn),bt.save()),ft(bt,Ht),this.ctx=Ht,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(bt),this.groupLevel++}endGroup(pt){if(!this.contentVisible)return;this.groupLevel--;const bt=this.ctx,Tt=this.groupStack.pop();if(this.ctx=Tt,this.ctx.imageSmoothingEnabled=!1,pt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Ct=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Ct);const kt=o.Util.getAxialAlignedBoundingBox([0,0,bt.canvas.width,bt.canvas.height],Ct);this.ctx.drawImage(bt.canvas,0,0),this.ctx.restore(),this.compose(kt)}}beginAnnotation(pt,bt,Tt,Ct,kt){if(Jt(this,Vt,js).call(this),gt(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(bt)&&bt.length===4){const Mt=bt[2]-bt[0],zt=bt[3]-bt[1];if(kt&&this.annotationCanvasMap){Tt=Tt.slice(),Tt[4]-=bt[0],Tt[5]-=bt[1],bt=bt.slice(),bt[0]=bt[1]=0,bt[2]=Mt,bt[3]=zt;const[Kt,Yt]=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:rn}=this,cn=Math.ceil(Mt*this.outputScaleX*rn),sn=Math.ceil(zt*this.outputScaleY*rn);this.annotationCanvas=this.canvasFactory.create(cn,sn);const{canvas:dn,context:Ht}=this.annotationCanvas;this.annotationCanvasMap.set(pt,dn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ht,this.ctx.save(),this.ctx.setTransform(Kt,0,0,-Yt,0,zt*Yt),gt(this.ctx)}else gt(this.ctx),this.ctx.rect(bt[0],bt[1],Mt,zt),this.ctx.clip(),this.endPath()}this.current=new st(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Tt),this.transform(...Ct)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Jt(this,Vt,Bs).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(pt){if(!this.contentVisible)return;const bt=pt.count;pt=this.getObject(pt.data,pt),pt.count=bt;const Tt=this.ctx,Ct=this.processingType3;if(Ct&&(Ct.compiled===void 0&&(Ct.compiled=rt(pt)),Ct.compiled)){Ct.compiled(Tt);return}const kt=this._createMaskCanvas(pt),Mt=kt.canvas;Tt.save(),Tt.setTransform(1,0,0,1,0,0),Tt.drawImage(Mt,kt.offsetX,kt.offsetY),Tt.restore(),this.compose()}paintImageMaskXObjectRepeat(pt,bt,Tt=0,Ct=0,kt,Mt){if(!this.contentVisible)return;pt=this.getObject(pt.data,pt);const zt=this.ctx;zt.save();const Kt=(0,a.getCurrentTransform)(zt);zt.transform(bt,Tt,Ct,kt,0,0);const Yt=this._createMaskCanvas(pt);zt.setTransform(1,0,0,1,Yt.offsetX-Kt[4],Yt.offsetY-Kt[5]);for(let rn=0,cn=Mt.length;rn<cn;rn+=2){const sn=o.Util.transform(Kt,[bt,Tt,Ct,kt,Mt[rn],Mt[rn+1]]),[dn,Ht]=o.Util.applyTransform([0,0],sn);zt.drawImage(Yt.canvas,dn,Ht)}zt.restore(),this.compose()}paintImageMaskXObjectGroup(pt){if(!this.contentVisible)return;const bt=this.ctx,Tt=this.current.fillColor,Ct=this.current.patternFill;for(const kt of pt){const{data:Mt,width:zt,height:Kt,transform:Yt}=kt,rn=this.cachedCanvases.getCanvas("maskCanvas",zt,Kt),cn=rn.context;cn.save();const sn=this.getObject(Mt,kt);mt(cn,sn),cn.globalCompositeOperation="source-in",cn.fillStyle=Ct?Tt.getPattern(cn,this,(0,a.getCurrentTransformInverse)(bt),c.PathType.FILL):Tt,cn.fillRect(0,0,zt,Kt),cn.restore(),bt.save(),bt.transform(...Yt),bt.scale(1,-1),at(bt,rn.canvas,0,0,zt,Kt,0,-1,1,1),bt.restore()}this.compose()}paintImageXObject(pt){if(!this.contentVisible)return;const bt=this.getObject(pt);if(!bt){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(bt)}paintImageXObjectRepeat(pt,bt,Tt,Ct){if(!this.contentVisible)return;const kt=this.getObject(pt);if(!kt){(0,o.warn)("Dependent image isn't ready yet");return}const Mt=kt.width,zt=kt.height,Kt=[];for(let Yt=0,rn=Ct.length;Yt<rn;Yt+=2)Kt.push({transform:[bt,0,0,Tt,Ct[Yt],Ct[Yt+1]],x:0,y:0,w:Mt,h:zt});this.paintInlineImageXObjectGroup(kt,Kt)}applyTransferMapsToCanvas(pt){return this.current.transferMaps!=="none"&&(pt.filter=this.current.transferMaps,pt.drawImage(pt.canvas,0,0),pt.filter="none"),pt.canvas}applyTransferMapsToBitmap(pt){if(this.current.transferMaps==="none")return pt.bitmap;const{bitmap:bt,width:Tt,height:Ct}=pt,kt=this.cachedCanvases.getCanvas("inlineImage",Tt,Ct),Mt=kt.context;return Mt.filter=this.current.transferMaps,Mt.drawImage(bt,0,0),Mt.filter="none",kt.canvas}paintInlineImageXObject(pt){if(!this.contentVisible)return;const bt=pt.width,Tt=pt.height,Ct=this.ctx;if(this.save(),!o.isNodeJS){const{filter:zt}=Ct;zt!=="none"&&zt!==""&&(Ct.filter="none")}Ct.scale(1/bt,-1/Tt);let kt;if(pt.bitmap)kt=this.applyTransferMapsToBitmap(pt);else if(typeof HTMLElement=="function"&&pt instanceof HTMLElement||!pt.data)kt=pt;else{const Kt=this.cachedCanvases.getCanvas("inlineImage",bt,Tt).context;lt(Kt,pt),kt=this.applyTransferMapsToCanvas(Kt)}const Mt=this._scaleImage(kt,(0,a.getCurrentTransformInverse)(Ct));Ct.imageSmoothingEnabled=Et((0,a.getCurrentTransform)(Ct),pt.interpolate),at(Ct,Mt.img,0,0,Mt.paintWidth,Mt.paintHeight,0,-Tt,bt,Tt),this.compose(),this.restore()}paintInlineImageXObjectGroup(pt,bt){if(!this.contentVisible)return;const Tt=this.ctx;let Ct;if(pt.bitmap)Ct=pt.bitmap;else{const kt=pt.width,Mt=pt.height,Kt=this.cachedCanvases.getCanvas("inlineImage",kt,Mt).context;lt(Kt,pt),Ct=this.applyTransferMapsToCanvas(Kt)}for(const kt of bt)Tt.save(),Tt.transform(...kt.transform),Tt.scale(1,-1),at(Tt,Ct,kt.x,kt.y,kt.w,kt.h,0,-1,1,1),Tt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(pt){}markPointProps(pt,bt){}beginMarkedContent(pt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(pt,bt){pt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(bt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(pt){const bt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(pt);const Tt=this.ctx;this.pendingClip&&(bt||(this.pendingClip===$t?Tt.clip("evenodd"):Tt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Tt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const pt=(0,a.getCurrentTransform)(this.ctx);if(pt[1]===0&&pt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(pt[0]),Math.abs(pt[3]));else{const bt=Math.abs(pt[0]*pt[3]-pt[2]*pt[1]),Tt=Math.hypot(pt[0],pt[2]),Ct=Math.hypot(pt[1],pt[3]);this._cachedGetSinglePixelWidth=Math.max(Tt,Ct)/bt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:pt}=this.current,{a:bt,b:Tt,c:Ct,d:kt}=this.ctx.getTransform();let Mt,zt;if(Tt===0&&Ct===0){const Kt=Math.abs(bt),Yt=Math.abs(kt);if(Kt===Yt)if(pt===0)Mt=zt=1/Kt;else{const rn=Kt*pt;Mt=zt=rn<1?1/rn:1}else if(pt===0)Mt=1/Kt,zt=1/Yt;else{const rn=Kt*pt,cn=Yt*pt;Mt=rn<1?1/rn:1,zt=cn<1?1/cn:1}}else{const Kt=Math.abs(bt*kt-Tt*Ct),Yt=Math.hypot(bt,Tt),rn=Math.hypot(Ct,kt);if(pt===0)Mt=rn/Kt,zt=Yt/Kt;else{const cn=pt*Kt;Mt=rn>cn?rn/cn:1,zt=Yt>cn?Yt/cn:1}}this._cachedScaleForStroking[0]=Mt,this._cachedScaleForStroking[1]=zt}return this._cachedScaleForStroking}rescaleAndStroke(pt){const{ctx:bt}=this,{lineWidth:Tt}=this.current,[Ct,kt]=this.getScaleForStroking();if(bt.lineWidth=Tt||1,Ct===1&&kt===1){bt.stroke();return}const Mt=bt.getLineDash();if(pt&&bt.save(),bt.scale(Ct,kt),Mt.length>0){const zt=Math.max(Ct,kt);bt.setLineDash(Mt.map(Kt=>Kt/zt)),bt.lineDashOffset/=zt}bt.stroke(),pt&&bt.restore()}isContentVisible(){for(let pt=this.markedContentStack.length-1;pt>=0;pt--)if(!this.markedContentStack[pt].visible)return!1;return!0}};Vt=new WeakSet,js=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Bs=function(){if(this.pageColors){const pt=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(pt!=="none"){const bt=this.ctx.filter;this.ctx.filter=pt,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=bt}}};let Bt=St;e.CanvasGraphics=Bt;for(const Pt in o.OPS)Bt.prototype[Pt]!==void 0&&(Bt.prototype[o.OPS[Pt]]=Bt.prototype[Pt])},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=tt;var o=s(1),a=s(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=c;function d(rt,st){if(!st)return;const lt=st[2]-st[0],mt=st[3]-st[1],ft=new Path2D;ft.rect(st[0],st[1],lt,mt),rt.clip(ft)}class h{constructor(){this.constructor===h&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class g extends h{constructor(st){super(),this._type=st[1],this._bbox=st[2],this._colorStops=st[3],this._p0=st[4],this._p1=st[5],this._r0=st[6],this._r1=st[7],this.matrix=null}_createGradient(st){let lt;this._type==="axial"?lt=st.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(lt=st.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const mt of this._colorStops)lt.addColorStop(mt[0],mt[1]);return lt}getPattern(st,lt,mt,ft){let gt;if(ft===c.STROKE||ft===c.FILL){const dt=lt.current.getClippedPathBoundingBox(ft,(0,a.getCurrentTransform)(st))||[0,0,0,0],ut=Math.ceil(dt[2]-dt[0])||1,ct=Math.ceil(dt[3]-dt[1])||1,_t=lt.cachedCanvases.getCanvas("pattern",ut,ct,!0),ht=_t.context;ht.clearRect(0,0,ht.canvas.width,ht.canvas.height),ht.beginPath(),ht.rect(0,0,ht.canvas.width,ht.canvas.height),ht.translate(-dt[0],-dt[1]),mt=o.Util.transform(mt,[1,0,0,1,dt[0],dt[1]]),ht.transform(...lt.baseTransform),this.matrix&&ht.transform(...this.matrix),d(ht,this._bbox),ht.fillStyle=this._createGradient(ht),ht.fill(),gt=st.createPattern(_t.canvas,"no-repeat");const Et=new DOMMatrix(mt);gt.setTransform(Et)}else d(st,this._bbox),gt=this._createGradient(st);return gt}}function j(rt,st,lt,mt,ft,gt,dt,ut){const ct=st.coords,_t=st.colors,ht=rt.data,Et=rt.width*4;let yt;ct[lt+1]>ct[mt+1]&&(yt=lt,lt=mt,mt=yt,yt=gt,gt=dt,dt=yt),ct[mt+1]>ct[ft+1]&&(yt=mt,mt=ft,ft=yt,yt=dt,dt=ut,ut=yt),ct[lt+1]>ct[mt+1]&&(yt=lt,lt=mt,mt=yt,yt=gt,gt=dt,dt=yt);const Ot=(ct[lt]+st.offsetX)*st.scaleX,Dt=(ct[lt+1]+st.offsetY)*st.scaleY,$t=(ct[mt]+st.offsetX)*st.scaleX,Bt=(ct[mt+1]+st.offsetY)*st.scaleY,Vt=(ct[ft]+st.offsetX)*st.scaleX,Rt=(ct[ft+1]+st.offsetY)*st.scaleY;if(Dt>=Rt)return;const vt=_t[gt],St=_t[gt+1],Pt=_t[gt+2],pt=_t[dt],bt=_t[dt+1],Tt=_t[dt+2],Ct=_t[ut],kt=_t[ut+1],Mt=_t[ut+2],zt=Math.round(Dt),Kt=Math.round(Rt);let Yt,rn,cn,sn,dn,Ht,Xt,It;for(let Nt=zt;Nt<=Kt;Nt++){if(Nt<Bt){const gn=Nt<Dt?0:(Dt-Nt)/(Dt-Bt);Yt=Ot-(Ot-$t)*gn,rn=vt-(vt-pt)*gn,cn=St-(St-bt)*gn,sn=Pt-(Pt-Tt)*gn}else{let gn;Nt>Rt?gn=1:Bt===Rt?gn=0:gn=(Bt-Nt)/(Bt-Rt),Yt=$t-($t-Vt)*gn,rn=pt-(pt-Ct)*gn,cn=bt-(bt-kt)*gn,sn=Tt-(Tt-Mt)*gn}let Gt;Nt<Dt?Gt=0:Nt>Rt?Gt=1:Gt=(Dt-Nt)/(Dt-Rt),dn=Ot-(Ot-Vt)*Gt,Ht=vt-(vt-Ct)*Gt,Xt=St-(St-kt)*Gt,It=Pt-(Pt-Mt)*Gt;const tn=Math.round(Math.min(Yt,dn)),fn=Math.round(Math.max(Yt,dn));let yn=Et*Nt+tn*4;for(let gn=tn;gn<=fn;gn++)Gt=(Yt-gn)/(Yt-dn),Gt<0?Gt=0:Gt>1&&(Gt=1),ht[yn++]=rn-(rn-Ht)*Gt|0,ht[yn++]=cn-(cn-Xt)*Gt|0,ht[yn++]=sn-(sn-It)*Gt|0,ht[yn++]=255}}function $(rt,st,lt){const mt=st.coords,ft=st.colors;let gt,dt;switch(st.type){case"lattice":const ut=st.verticesPerRow,ct=Math.floor(mt.length/ut)-1,_t=ut-1;for(gt=0;gt<ct;gt++){let ht=gt*ut;for(let Et=0;Et<_t;Et++,ht++)j(rt,lt,mt[ht],mt[ht+1],mt[ht+ut],ft[ht],ft[ht+1],ft[ht+ut]),j(rt,lt,mt[ht+ut+1],mt[ht+1],mt[ht+ut],ft[ht+ut+1],ft[ht+1],ft[ht+ut])}break;case"triangles":for(gt=0,dt=mt.length;gt<dt;gt+=3)j(rt,lt,mt[gt],mt[gt+1],mt[gt+2],ft[gt],ft[gt+1],ft[gt+2]);break;default:throw new Error("illegal figure")}}class _ extends h{constructor(st){super(),this._coords=st[2],this._colors=st[3],this._figures=st[4],this._bounds=st[5],this._bbox=st[7],this._background=st[8],this.matrix=null}_createMeshCanvas(st,lt,mt){const ut=Math.floor(this._bounds[0]),ct=Math.floor(this._bounds[1]),_t=Math.ceil(this._bounds[2])-ut,ht=Math.ceil(this._bounds[3])-ct,Et=Math.min(Math.ceil(Math.abs(_t*st[0]*1.1)),3e3),yt=Math.min(Math.ceil(Math.abs(ht*st[1]*1.1)),3e3),Ot=_t/Et,Dt=ht/yt,$t={coords:this._coords,colors:this._colors,offsetX:-ut,offsetY:-ct,scaleX:1/Ot,scaleY:1/Dt},Bt=Et+2*2,Vt=yt+2*2,Rt=mt.getCanvas("mesh",Bt,Vt,!1),vt=Rt.context,St=vt.createImageData(Et,yt);if(lt){const pt=St.data;for(let bt=0,Tt=pt.length;bt<Tt;bt+=4)pt[bt]=lt[0],pt[bt+1]=lt[1],pt[bt+2]=lt[2],pt[bt+3]=255}for(const pt of this._figures)$(St,pt,$t);return vt.putImageData(St,2,2),{canvas:Rt.canvas,offsetX:ut-2*Ot,offsetY:ct-2*Dt,scaleX:Ot,scaleY:Dt}}getPattern(st,lt,mt,ft){d(st,this._bbox);let gt;if(ft===c.SHADING)gt=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(st));else if(gt=o.Util.singularValueDecompose2dScale(lt.baseTransform),this.matrix){const ut=o.Util.singularValueDecompose2dScale(this.matrix);gt=[gt[0]*ut[0],gt[1]*ut[1]]}const dt=this._createMeshCanvas(gt,ft===c.SHADING?null:this._background,lt.cachedCanvases);return ft!==c.SHADING&&(st.setTransform(...lt.baseTransform),this.matrix&&st.transform(...this.matrix)),st.translate(dt.offsetX,dt.offsetY),st.scale(dt.scaleX,dt.scaleY),st.createPattern(dt.canvas,"no-repeat")}}class et extends h{getPattern(){return"hotpink"}}function tt(rt){switch(rt[0]){case"RadialAxial":return new g(rt);case"Mesh":return new _(rt);case"Dummy":return new et}throw new Error(`Unknown IR type: ${rt[0]}`)}const it={COLORED:1,UNCOLORED:2},at=class at{constructor(st,lt,mt,ft,gt){this.operatorList=st[2],this.matrix=st[3]||[1,0,0,1,0,0],this.bbox=st[4],this.xstep=st[5],this.ystep=st[6],this.paintType=st[7],this.tilingType=st[8],this.color=lt,this.ctx=mt,this.canvasGraphicsFactory=ft,this.baseTransform=gt}createPatternCanvas(st){const lt=this.operatorList,mt=this.bbox,ft=this.xstep,gt=this.ystep,dt=this.paintType,ut=this.tilingType,ct=this.color,_t=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+ut);const ht=mt[0],Et=mt[1],yt=mt[2],Ot=mt[3],Dt=o.Util.singularValueDecompose2dScale(this.matrix),$t=o.Util.singularValueDecompose2dScale(this.baseTransform),Bt=[Dt[0]*$t[0],Dt[1]*$t[1]],Vt=this.getSizeAndScale(ft,this.ctx.canvas.width,Bt[0]),Rt=this.getSizeAndScale(gt,this.ctx.canvas.height,Bt[1]),vt=st.cachedCanvases.getCanvas("pattern",Vt.size,Rt.size,!0),St=vt.context,Pt=_t.createCanvasGraphics(St);Pt.groupLevel=st.groupLevel,this.setFillAndStrokeStyleToContext(Pt,dt,ct);let pt=ht,bt=Et,Tt=yt,Ct=Ot;return ht<0&&(pt=0,Tt+=Math.abs(ht)),Et<0&&(bt=0,Ct+=Math.abs(Et)),St.translate(-(Vt.scale*pt),-(Rt.scale*bt)),Pt.transform(Vt.scale,0,0,Rt.scale,0,0),St.save(),this.clipBbox(Pt,pt,bt,Tt,Ct),Pt.baseTransform=(0,a.getCurrentTransform)(Pt.ctx),Pt.executeOperatorList(lt),Pt.endDrawing(),{canvas:vt.canvas,scaleX:Vt.scale,scaleY:Rt.scale,offsetX:pt,offsetY:bt}}getSizeAndScale(st,lt,mt){st=Math.abs(st);const ft=Math.max(at.MAX_PATTERN_SIZE,lt);let gt=Math.ceil(st*mt);return gt>=ft?gt=ft:mt=gt/st,{scale:mt,size:gt}}clipBbox(st,lt,mt,ft,gt){const dt=ft-lt,ut=gt-mt;st.ctx.rect(lt,mt,dt,ut),st.current.updateRectMinMax((0,a.getCurrentTransform)(st.ctx),[lt,mt,ft,gt]),st.clip(),st.endPath()}setFillAndStrokeStyleToContext(st,lt,mt){const ft=st.ctx,gt=st.current;switch(lt){case it.COLORED:const dt=this.ctx;ft.fillStyle=dt.fillStyle,ft.strokeStyle=dt.strokeStyle,gt.fillColor=dt.fillStyle,gt.strokeColor=dt.strokeStyle;break;case it.UNCOLORED:const ut=o.Util.makeHexColor(mt[0],mt[1],mt[2]);ft.fillStyle=ut,ft.strokeStyle=ut,gt.fillColor=ut,gt.strokeColor=ut;break;default:throw new o.FormatError(`Unsupported paint type: ${lt}`)}}getPattern(st,lt,mt,ft){let gt=mt;ft!==c.SHADING&&(gt=o.Util.transform(gt,lt.baseTransform),this.matrix&&(gt=o.Util.transform(gt,this.matrix)));const dt=this.createPatternCanvas(lt);let ut=new DOMMatrix(gt);ut=ut.translate(dt.offsetX,dt.offsetY),ut=ut.scale(1/dt.scaleX,1/dt.scaleY);const ct=st.createPattern(dt.canvas,"repeat");return ct.setTransform(ut),ct}};qn(at,"MAX_PATTERN_SIZE",3e3);let ot=at;e.TilingPattern=ot},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=c,e.convertToRGBA=a,e.grayToRGBA=h;var o=s(1);function a(g){switch(g.kind){case o.ImageKind.GRAYSCALE_1BPP:return c(g);case o.ImageKind.RGB_24BPP:return d(g)}return null}function c({src:g,srcPos:j=0,dest:$,width:_,height:et,nonBlackColor:tt=4294967295,inverseDecode:it=!1}){const ot=o.FeatureTest.isLittleEndian?4278190080:255,[at,rt]=it?[tt,ot]:[ot,tt],st=_>>3,lt=_&7,mt=g.length;$=new Uint32Array($.buffer);let ft=0;for(let gt=0;gt<et;gt++){for(const ut=j+st;j<ut;j++){const ct=j<mt?g[j]:255;$[ft++]=ct&128?rt:at,$[ft++]=ct&64?rt:at,$[ft++]=ct&32?rt:at,$[ft++]=ct&16?rt:at,$[ft++]=ct&8?rt:at,$[ft++]=ct&4?rt:at,$[ft++]=ct&2?rt:at,$[ft++]=ct&1?rt:at}if(lt===0)continue;const dt=j<mt?g[j++]:255;for(let ut=0;ut<lt;ut++)$[ft++]=dt&1<<7-ut?rt:at}return{srcPos:j,destPos:ft}}function d({src:g,srcPos:j=0,dest:$,destPos:_=0,width:et,height:tt}){let it=0;const ot=g.length>>2,at=new Uint32Array(g.buffer,j,ot);if(o.FeatureTest.isLittleEndian){for(;it<ot-2;it+=3,_+=4){const rt=at[it],st=at[it+1],lt=at[it+2];$[_]=rt|4278190080,$[_+1]=rt>>>24|st<<8|4278190080,$[_+2]=st>>>16|lt<<16|4278190080,$[_+3]=lt>>>8|4278190080}for(let rt=it*4,st=g.length;rt<st;rt+=3)$[_++]=g[rt]|g[rt+1]<<8|g[rt+2]<<16|4278190080}else{for(;it<ot-2;it+=3,_+=4){const rt=at[it],st=at[it+1],lt=at[it+2];$[_]=rt|255,$[_+1]=rt<<24|st>>>8|255,$[_+2]=st<<16|lt>>>16|255,$[_+3]=lt<<8|255}for(let rt=it*4,st=g.length;rt<st;rt+=3)$[_++]=g[rt]<<24|g[rt+1]<<16|g[rt+2]<<8|255}return{srcPos:j,destPos:_}}function h(g,j){if(o.FeatureTest.isLittleEndian)for(let $=0,_=g.length;$<_;$++)j[$]=g[$]*65793|4278190080;else for(let $=0,_=g.length;$<_;$++)j[$]=g[$]*16843008|255}},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(i,e,s)=>{var g,Yo,Qo,os;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var o=s(1);const a={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function d(et){switch(et instanceof Error||typeof et=="object"&&et!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),et.name){case"AbortException":return new o.AbortException(et.message);case"MissingPDFException":return new o.MissingPDFException(et.message);case"PasswordException":return new o.PasswordException(et.message,et.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(et.message,et.status);case"UnknownErrorException":return new o.UnknownErrorException(et.message,et.details);default:return new o.UnknownErrorException(et.message,et.toString())}}class h{constructor(tt,it,ot){on(this,g);this.sourceName=tt,this.targetName=it,this.comObj=ot,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=at=>{const rt=at.data;if(rt.targetName!==this.sourceName)return;if(rt.stream){Jt(this,g,Qo).call(this,rt);return}if(rt.callback){const lt=rt.callbackId,mt=this.callbackCapabilities[lt];if(!mt)throw new Error(`Cannot resolve callback ${lt}`);if(delete this.callbackCapabilities[lt],rt.callback===a.DATA)mt.resolve(rt.data);else if(rt.callback===a.ERROR)mt.reject(d(rt.reason));else throw new Error("Unexpected callback case");return}const st=this.actionHandler[rt.action];if(!st)throw new Error(`Unknown action from worker: ${rt.action}`);if(rt.callbackId){const lt=this.sourceName,mt=rt.sourceName;new Promise(function(ft){ft(st(rt.data))}).then(function(ft){ot.postMessage({sourceName:lt,targetName:mt,callback:a.DATA,callbackId:rt.callbackId,data:ft})},function(ft){ot.postMessage({sourceName:lt,targetName:mt,callback:a.ERROR,callbackId:rt.callbackId,reason:d(ft)})});return}if(rt.streamId){Jt(this,g,Yo).call(this,rt);return}st(rt.data)},ot.addEventListener("message",this._onComObjOnMessage)}on(tt,it){const ot=this.actionHandler;if(ot[tt])throw new Error(`There is already an actionName called "${tt}"`);ot[tt]=it}send(tt,it,ot){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:tt,data:it},ot)}sendWithPromise(tt,it,ot){const at=this.callbackId++,rt=new o.PromiseCapability;this.callbackCapabilities[at]=rt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:tt,callbackId:at,data:it},ot)}catch(st){rt.reject(st)}return rt.promise}sendWithStream(tt,it,ot,at){const rt=this.streamId++,st=this.sourceName,lt=this.targetName,mt=this.comObj;return new ReadableStream({start:ft=>{const gt=new o.PromiseCapability;return this.streamControllers[rt]={controller:ft,startCall:gt,pullCall:null,cancelCall:null,isClosed:!1},mt.postMessage({sourceName:st,targetName:lt,action:tt,streamId:rt,data:it,desiredSize:ft.desiredSize},at),gt.promise},pull:ft=>{const gt=new o.PromiseCapability;return this.streamControllers[rt].pullCall=gt,mt.postMessage({sourceName:st,targetName:lt,stream:c.PULL,streamId:rt,desiredSize:ft.desiredSize}),gt.promise},cancel:ft=>{(0,o.assert)(ft instanceof Error,"cancel must have a valid reason");const gt=new o.PromiseCapability;return this.streamControllers[rt].cancelCall=gt,this.streamControllers[rt].isClosed=!0,mt.postMessage({sourceName:st,targetName:lt,stream:c.CANCEL,streamId:rt,reason:d(ft)}),gt.promise}},ot)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}g=new WeakSet,Yo=function(tt){const it=tt.streamId,ot=this.sourceName,at=tt.sourceName,rt=this.comObj,st=this,lt=this.actionHandler[tt.action],mt={enqueue(ft,gt=1,dt){if(this.isCancelled)return;const ut=this.desiredSize;this.desiredSize-=gt,ut>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),rt.postMessage({sourceName:ot,targetName:at,stream:c.ENQUEUE,streamId:it,chunk:ft},dt)},close(){this.isCancelled||(this.isCancelled=!0,rt.postMessage({sourceName:ot,targetName:at,stream:c.CLOSE,streamId:it}),delete st.streamSinks[it])},error(ft){(0,o.assert)(ft instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,rt.postMessage({sourceName:ot,targetName:at,stream:c.ERROR,streamId:it,reason:d(ft)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:tt.desiredSize,ready:null};mt.sinkCapability.resolve(),mt.ready=mt.sinkCapability.promise,this.streamSinks[it]=mt,new Promise(function(ft){ft(lt(tt.data,mt))}).then(function(){rt.postMessage({sourceName:ot,targetName:at,stream:c.START_COMPLETE,streamId:it,success:!0})},function(ft){rt.postMessage({sourceName:ot,targetName:at,stream:c.START_COMPLETE,streamId:it,reason:d(ft)})})},Qo=function(tt){const it=tt.streamId,ot=this.sourceName,at=tt.sourceName,rt=this.comObj,st=this.streamControllers[it],lt=this.streamSinks[it];switch(tt.stream){case c.START_COMPLETE:tt.success?st.startCall.resolve():st.startCall.reject(d(tt.reason));break;case c.PULL_COMPLETE:tt.success?st.pullCall.resolve():st.pullCall.reject(d(tt.reason));break;case c.PULL:if(!lt){rt.postMessage({sourceName:ot,targetName:at,stream:c.PULL_COMPLETE,streamId:it,success:!0});break}lt.desiredSize<=0&&tt.desiredSize>0&&lt.sinkCapability.resolve(),lt.desiredSize=tt.desiredSize,new Promise(function(mt){var ft;mt((ft=lt.onPull)==null?void 0:ft.call(lt))}).then(function(){rt.postMessage({sourceName:ot,targetName:at,stream:c.PULL_COMPLETE,streamId:it,success:!0})},function(mt){rt.postMessage({sourceName:ot,targetName:at,stream:c.PULL_COMPLETE,streamId:it,reason:d(mt)})});break;case c.ENQUEUE:if((0,o.assert)(st,"enqueue should have stream controller"),st.isClosed)break;st.controller.enqueue(tt.chunk);break;case c.CLOSE:if((0,o.assert)(st,"close should have stream controller"),st.isClosed)break;st.isClosed=!0,st.controller.close(),Jt(this,g,os).call(this,st,it);break;case c.ERROR:(0,o.assert)(st,"error should have stream controller"),st.controller.error(d(tt.reason)),Jt(this,g,os).call(this,st,it);break;case c.CANCEL_COMPLETE:tt.success?st.cancelCall.resolve():st.cancelCall.reject(d(tt.reason)),Jt(this,g,os).call(this,st,it);break;case c.CANCEL:if(!lt)break;new Promise(function(mt){var ft;mt((ft=lt.onCancel)==null?void 0:ft.call(lt,d(tt.reason)))}).then(function(){rt.postMessage({sourceName:ot,targetName:at,stream:c.CANCEL_COMPLETE,streamId:it,success:!0})},function(mt){rt.postMessage({sourceName:ot,targetName:at,stream:c.CANCEL_COMPLETE,streamId:it,reason:d(mt)})}),lt.sinkCapability.reject(d(tt.reason)),lt.isCancelled=!0,delete this.streamSinks[it];break;default:throw new Error("Unexpected stream case")}},os=async function(tt,it){var ot,at,rt;await Promise.allSettled([(ot=tt.startCall)==null?void 0:ot.promise,(at=tt.pullCall)==null?void 0:at.promise,(rt=tt.cancelCall)==null?void 0:rt.promise]),delete this.streamControllers[it]},e.MessageHandler=h},(i,e,s)=>{var c,d;Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var o=s(1);class a{constructor({parsedData:g,rawData:j}){on(this,c);on(this,d);ln(this,c,g),ln(this,d,j)}getRaw(){return At(this,d)}get(g){return At(this,c).get(g)??null}getAll(){return(0,o.objectFromMap)(At(this,c))}has(g){return At(this,c).has(g)}}c=new WeakMap,d=new WeakMap,e.Metadata=a},(i,e,s)=>{var g,j,$,_,et,tt,$s;Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var o=s(1),a=s(8);const c=Symbol("INTERNAL");class d{constructor(at,rt){on(this,g,!0);this.name=at,this.intent=rt}get visible(){return At(this,g)}_setVisible(at,rt){at!==c&&(0,o.unreachable)("Internal method `_setVisible` called."),ln(this,g,rt)}}g=new WeakMap;class h{constructor(at){on(this,tt);on(this,j,null);on(this,$,new Map);on(this,_,null);on(this,et,null);if(this.name=null,this.creator=null,at!==null){this.name=at.name,this.creator=at.creator,ln(this,et,at.order);for(const rt of at.groups)At(this,$).set(rt.id,new d(rt.name,rt.intent));if(at.baseState==="OFF")for(const rt of At(this,$).values())rt._setVisible(c,!1);for(const rt of at.on)At(this,$).get(rt)._setVisible(c,!0);for(const rt of at.off)At(this,$).get(rt)._setVisible(c,!1);ln(this,_,this.getHash())}}isVisible(at){if(At(this,$).size===0)return!0;if(!at)return(0,o.warn)("Optional content group not defined."),!0;if(at.type==="OCG")return At(this,$).has(at.id)?At(this,$).get(at.id).visible:((0,o.warn)(`Optional content group not found: ${at.id}`),!0);if(at.type==="OCMD"){if(at.expression)return Jt(this,tt,$s).call(this,at.expression);if(!at.policy||at.policy==="AnyOn"){for(const rt of at.ids){if(!At(this,$).has(rt))return(0,o.warn)(`Optional content group not found: ${rt}`),!0;if(At(this,$).get(rt).visible)return!0}return!1}else if(at.policy==="AllOn"){for(const rt of at.ids){if(!At(this,$).has(rt))return(0,o.warn)(`Optional content group not found: ${rt}`),!0;if(!At(this,$).get(rt).visible)return!1}return!0}else if(at.policy==="AnyOff"){for(const rt of at.ids){if(!At(this,$).has(rt))return(0,o.warn)(`Optional content group not found: ${rt}`),!0;if(!At(this,$).get(rt).visible)return!0}return!1}else if(at.policy==="AllOff"){for(const rt of at.ids){if(!At(this,$).has(rt))return(0,o.warn)(`Optional content group not found: ${rt}`),!0;if(At(this,$).get(rt).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${at.policy}.`),!0}return(0,o.warn)(`Unknown group type ${at.type}.`),!0}setVisibility(at,rt=!0){if(!At(this,$).has(at)){(0,o.warn)(`Optional content group not found: ${at}`);return}At(this,$).get(at)._setVisible(c,!!rt),ln(this,j,null)}get hasInitialVisibility(){return At(this,_)===null||this.getHash()===At(this,_)}getOrder(){return At(this,$).size?At(this,et)?At(this,et).slice():[...At(this,$).keys()]:null}getGroups(){return At(this,$).size>0?(0,o.objectFromMap)(At(this,$)):null}getGroup(at){return At(this,$).get(at)||null}getHash(){if(At(this,j)!==null)return At(this,j);const at=new a.MurmurHash3_64;for(const[rt,st]of At(this,$))at.update(`${rt}:${st.visible}`);return ln(this,j,at.hexdigest())}}j=new WeakMap,$=new WeakMap,_=new WeakMap,et=new WeakMap,tt=new WeakSet,$s=function(at){const rt=at.length;if(rt<2)return!0;const st=at[0];for(let lt=1;lt<rt;lt++){const mt=at[lt];let ft;if(Array.isArray(mt))ft=Jt(this,tt,$s).call(this,mt);else if(At(this,$).has(mt))ft=At(this,$).get(mt).visible;else return(0,o.warn)(`Optional content group not found: ${mt}`),!0;switch(st){case"And":if(!ft)return!1;break;case"Or":if(ft)return!0;break;case"Not":return!ft;default:return!0}}return st==="And"},e.OptionalContentConfig=h},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var o=s(1),a=s(6);class c{constructor({length:j,initialData:$,progressiveDone:_=!1,contentDispositionFilename:et=null,disableRange:tt=!1,disableStream:it=!1},ot){if((0,o.assert)(ot,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_,this._contentDispositionFilename=et,($==null?void 0:$.length)>0){const at=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;this._queuedChunks.push(at)}this._pdfDataRangeTransport=ot,this._isStreamingSupported=!it,this._isRangeSupported=!tt,this._contentLength=j,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((at,rt)=>{this._onReceiveData({begin:at,chunk:rt})}),this._pdfDataRangeTransport.addProgressListener((at,rt)=>{this._onProgress({loaded:at,total:rt})}),this._pdfDataRangeTransport.addProgressiveReadListener(at=>{this._onReceiveData({chunk:at})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:j,chunk:$}){const _=$ instanceof Uint8Array&&$.byteLength===$.buffer.byteLength?$.buffer:new Uint8Array($).buffer;if(j===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_);else{const et=this._rangeReaders.some(function(tt){return tt._begin!==j?!1:(tt._enqueue(_),!0)});(0,o.assert)(et,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var j;return((j=this._fullRequestReader)==null?void 0:j._loaded)??0}_onProgress(j){var $,_,et,tt;j.total===void 0?(_=($=this._rangeReaders[0])==null?void 0:$.onProgress)==null||_.call($,{loaded:j.loaded}):(tt=(et=this._fullRequestReader)==null?void 0:et.onProgress)==null||tt.call(et,{loaded:j.loaded,total:j.total})}_onProgressiveDone(){var j;(j=this._fullRequestReader)==null||j.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(j){const $=this._rangeReaders.indexOf(j);$>=0&&this._rangeReaders.splice($,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const j=this._queuedChunks;return this._queuedChunks=null,new d(this,j,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(j,$){if($<=this._progressiveDataLength)return null;const _=new h(this,j,$);return this._pdfDataRangeTransport.requestDataRange(j,$),this._rangeReaders.push(_),_}cancelAllRequests(j){var $;($=this._fullRequestReader)==null||$.cancel(j);for(const _ of this._rangeReaders.slice(0))_.cancel(j);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=c;class d{constructor(j,$,_=!1,et=null){this._stream=j,this._done=_||!1,this._filename=(0,a.isPdfFile)(et)?et:null,this._queuedChunks=$||[],this._loaded=0;for(const tt of this._queuedChunks)this._loaded+=tt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),j._fullRequestReader=this,this.onProgress=null}_enqueue(j){this._done||(this._requests.length>0?this._requests.shift().resolve({value:j,done:!1}):this._queuedChunks.push(j),this._loaded+=j.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const j=new o.PromiseCapability;return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class h{constructor(j,$,_){this._stream=j,this._begin=$,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(j){if(!this._done){if(this._requests.length===0)this._queuedChunk=j;else{this._requests.shift().resolve({value:j,done:!1});for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const $=this._queuedChunk;return this._queuedChunk=null,{value:$,done:!1}}if(this._done)return{value:void 0,done:!0};const j=new o.PromiseCapability;return this._requests.push(j),j.promise}cancel(j){this._done=!0;for(const $ of this._requests)$.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var o=s(1),a=s(20);function c(_,et,tt){return{method:"GET",headers:_,signal:tt.signal,mode:"cors",credentials:et?"include":"same-origin",redirect:"follow"}}function d(_){const et=new Headers;for(const tt in _){const it=_[tt];it!==void 0&&et.append(tt,it)}return et}function h(_){return _ instanceof Uint8Array?_.buffer:_ instanceof ArrayBuffer?_:((0,o.warn)(`getArrayBuffer - unexpected data format: ${_}`),new Uint8Array(_).buffer)}class g{constructor(et){this.source=et,this.isHttp=/^https?:/i.test(et.url),this.httpHeaders=this.isHttp&&et.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var et;return((et=this._fullRequestReader)==null?void 0:et._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new j(this),this._fullRequestReader}getRangeReader(et,tt){if(tt<=this._progressiveDataLength)return null;const it=new $(this,et,tt);return this._rangeRequestReaders.push(it),it}cancelAllRequests(et){var tt;(tt=this._fullRequestReader)==null||tt.cancel(et);for(const it of this._rangeRequestReaders.slice(0))it.cancel(et)}}e.PDFFetchStream=g;class j{constructor(et){this._stream=et,this._reader=null,this._loaded=0,this._filename=null;const tt=et.source;this._withCredentials=tt.withCredentials||!1,this._contentLength=tt.length,this._headersCapability=new o.PromiseCapability,this._disableRange=tt.disableRange||!1,this._rangeChunkSize=tt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!tt.disableStream,this._isRangeSupported=!tt.disableRange,this._headers=d(this._stream.httpHeaders);const it=tt.url;fetch(it,c(this._headers,this._withCredentials,this._abortController)).then(ot=>{if(!(0,a.validateResponseStatus)(ot.status))throw(0,a.createResponseStatusError)(ot.status,it);this._reader=ot.body.getReader(),this._headersCapability.resolve();const at=lt=>ot.headers.get(lt),{allowRangeRequests:rt,suggestedLength:st}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:at,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=rt,this._contentLength=st||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(at),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var it;await this._headersCapability.promise;const{value:et,done:tt}=await this._reader.read();return tt?{value:et,done:tt}:(this._loaded+=et.byteLength,(it=this.onProgress)==null||it.call(this,{loaded:this._loaded,total:this._contentLength}),{value:h(et),done:!1})}cancel(et){var tt;(tt=this._reader)==null||tt.cancel(et),this._abortController.abort()}}class ${constructor(et,tt,it){this._stream=et,this._reader=null,this._loaded=0;const ot=et.source;this._withCredentials=ot.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!ot.disableStream,this._abortController=new AbortController,this._headers=d(this._stream.httpHeaders),this._headers.append("Range",`bytes=${tt}-${it-1}`);const at=ot.url;fetch(at,c(this._headers,this._withCredentials,this._abortController)).then(rt=>{if(!(0,a.validateResponseStatus)(rt.status))throw(0,a.createResponseStatusError)(rt.status,at);this._readCapability.resolve(),this._reader=rt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var it;await this._readCapability.promise;const{value:et,done:tt}=await this._reader.read();return tt?{value:et,done:tt}:(this._loaded+=et.byteLength,(it=this.onProgress)==null||it.call(this,{loaded:this._loaded}),{value:h(et),done:!1})}cancel(et){var tt;(tt=this._reader)==null||tt.cancel(et),this._abortController.abort()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=g,e.extractFilenameFromHeader=h,e.validateRangeRequestCapabilities=d,e.validateResponseStatus=j;var o=s(1),a=s(21),c=s(6);function d({getResponseHeader:$,isHttp:_,rangeChunkSize:et,disableRange:tt}){const it={allowRangeRequests:!1,suggestedLength:void 0},ot=parseInt($("Content-Length"),10);return!Number.isInteger(ot)||(it.suggestedLength=ot,ot<=2*et)||tt||!_||$("Accept-Ranges")!=="bytes"||($("Content-Encoding")||"identity")!=="identity"||(it.allowRangeRequests=!0),it}function h($){const _=$("Content-Disposition");if(_){let et=(0,a.getFilenameFromContentDispositionHeader)(_);if(et.includes("%"))try{et=decodeURIComponent(et)}catch{}if((0,c.isPdfFile)(et))return et}return null}function g($,_){return $===404||$===0&&_.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+_+'".'):new o.UnexpectedResponseException(`Unexpected server response (${$}) while retrieving PDF "${_}".`,$)}function j($){return $===200||$===206}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=a;var o=s(1);function a(c){let d=!0,h=g("filename\\*","i").exec(c);if(h){h=h[1];let ot=et(h);return ot=unescape(ot),ot=tt(ot),ot=it(ot),$(ot)}if(h=_(c),h){const ot=it(h);return $(ot)}if(h=g("filename","i").exec(c),h){h=h[1];let ot=et(h);return ot=it(ot),$(ot)}function g(ot,at){return new RegExp("(?:^|;)\\s*"+ot+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',at)}function j(ot,at){if(ot){if(!/^[\x00-\xFF]+$/.test(at))return at;try{const rt=new TextDecoder(ot,{fatal:!0}),st=(0,o.stringToBytes)(at);at=rt.decode(st),d=!1}catch{}}return at}function $(ot){return d&&/[\x80-\xff]/.test(ot)&&(ot=j("utf-8",ot),d&&(ot=j("iso-8859-1",ot))),ot}function _(ot){const at=[];let rt;const st=g("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(rt=st.exec(ot))!==null;){let[,mt,ft,gt]=rt;if(mt=parseInt(mt,10),mt in at){if(mt===0)break;continue}at[mt]=[ft,gt]}const lt=[];for(let mt=0;mt<at.length&&mt in at;++mt){let[ft,gt]=at[mt];gt=et(gt),ft&&(gt=unescape(gt),mt===0&&(gt=tt(gt))),lt.push(gt)}return lt.join("")}function et(ot){if(ot.startsWith('"')){const at=ot.slice(1).split('\\"');for(let rt=0;rt<at.length;++rt){const st=at[rt].indexOf('"');st!==-1&&(at[rt]=at[rt].slice(0,st),at.length=rt+1),at[rt]=at[rt].replaceAll(/\\(.)/g,"$1")}ot=at.join('"')}return ot}function tt(ot){const at=ot.indexOf("'");if(at===-1)return ot;const rt=ot.slice(0,at),lt=ot.slice(at+1).replace(/^[^']*'/,"");return j(rt,lt)}function it(ot){return!ot.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(ot)?ot:ot.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(at,rt,st,lt){if(st==="q"||st==="Q")return lt=lt.replaceAll("_"," "),lt=lt.replaceAll(/=([0-9a-fA-F]{2})/g,function(mt,ft){return String.fromCharCode(parseInt(ft,16))}),j(rt,lt);try{lt=atob(lt)}catch{}return j(rt,lt)})}return""}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var o=s(1),a=s(20);const c=200,d=206;function h(et){const tt=et.response;return typeof tt!="string"?tt:(0,o.stringToBytes)(tt).buffer}class g{constructor(tt,it={}){this.url=tt,this.isHttp=/^https?:/i.test(tt),this.httpHeaders=this.isHttp&&it.httpHeaders||Object.create(null),this.withCredentials=it.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(tt,it,ot){const at={begin:tt,end:it};for(const rt in ot)at[rt]=ot[rt];return this.request(at)}requestFull(tt){return this.request(tt)}request(tt){const it=new XMLHttpRequest,ot=this.currXhrId++,at=this.pendingRequests[ot]={xhr:it};it.open("GET",this.url),it.withCredentials=this.withCredentials;for(const rt in this.httpHeaders){const st=this.httpHeaders[rt];st!==void 0&&it.setRequestHeader(rt,st)}return this.isHttp&&"begin"in tt&&"end"in tt?(it.setRequestHeader("Range",`bytes=${tt.begin}-${tt.end-1}`),at.expectedStatus=d):at.expectedStatus=c,it.responseType="arraybuffer",tt.onError&&(it.onerror=function(rt){tt.onError(it.status)}),it.onreadystatechange=this.onStateChange.bind(this,ot),it.onprogress=this.onProgress.bind(this,ot),at.onHeadersReceived=tt.onHeadersReceived,at.onDone=tt.onDone,at.onError=tt.onError,at.onProgress=tt.onProgress,it.send(null),ot}onProgress(tt,it){var at;const ot=this.pendingRequests[tt];ot&&((at=ot.onProgress)==null||at.call(ot,it))}onStateChange(tt,it){var mt,ft,gt;const ot=this.pendingRequests[tt];if(!ot)return;const at=ot.xhr;if(at.readyState>=2&&ot.onHeadersReceived&&(ot.onHeadersReceived(),delete ot.onHeadersReceived),at.readyState!==4||!(tt in this.pendingRequests))return;if(delete this.pendingRequests[tt],at.status===0&&this.isHttp){(mt=ot.onError)==null||mt.call(ot,at.status);return}const rt=at.status||c;if(!(rt===c&&ot.expectedStatus===d)&&rt!==ot.expectedStatus){(ft=ot.onError)==null||ft.call(ot,at.status);return}const lt=h(at);if(rt===d){const dt=at.getResponseHeader("Content-Range"),ut=/bytes (\d+)-(\d+)\/(\d+)/.exec(dt);ot.onDone({begin:parseInt(ut[1],10),chunk:lt})}else lt?ot.onDone({begin:0,chunk:lt}):(gt=ot.onError)==null||gt.call(ot,at.status)}getRequestXhr(tt){return this.pendingRequests[tt].xhr}isPendingRequest(tt){return tt in this.pendingRequests}abortRequest(tt){const it=this.pendingRequests[tt].xhr;delete this.pendingRequests[tt],it.abort()}}class j{constructor(tt){this._source=tt,this._manager=new g(tt.url,{httpHeaders:tt.httpHeaders,withCredentials:tt.withCredentials}),this._rangeChunkSize=tt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(tt){const it=this._rangeRequestReaders.indexOf(tt);it>=0&&this._rangeRequestReaders.splice(it,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new $(this._manager,this._source),this._fullRequestReader}getRangeReader(tt,it){const ot=new _(this._manager,tt,it);return ot.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(ot),ot}cancelAllRequests(tt){var it;(it=this._fullRequestReader)==null||it.cancel(tt);for(const ot of this._rangeRequestReaders.slice(0))ot.cancel(tt)}}e.PDFNetworkStream=j;class ${constructor(tt,it){this._manager=tt;const ot={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=it.url,this._fullRequestId=tt.requestFull(ot),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=it.disableRange||!1,this._contentLength=it.length,this._rangeChunkSize=it.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const tt=this._fullRequestId,it=this._manager.getRequestXhr(tt),ot=st=>it.getResponseHeader(st),{allowRangeRequests:at,suggestedLength:rt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:ot,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});at&&(this._isRangeSupported=!0),this._contentLength=rt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(ot),this._isRangeSupported&&this._manager.abortRequest(tt),this._headersReceivedCapability.resolve()}_onDone(tt){if(tt&&(this._requests.length>0?this._requests.shift().resolve({value:tt.chunk,done:!1}):this._cachedChunks.push(tt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const it of this._requests)it.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(tt){this._storedError=(0,a.createResponseStatusError)(tt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const it of this._requests)it.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(tt){var it;(it=this.onProgress)==null||it.call(this,{loaded:tt.loaded,total:tt.lengthComputable?tt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const tt=new o.PromiseCapability;return this._requests.push(tt),tt.promise}cancel(tt){this._done=!0,this._headersReceivedCapability.reject(tt);for(const it of this._requests)it.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _{constructor(tt,it,ot){this._manager=tt;const at={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=tt.url,this._requestId=tt.requestRange(it,ot,at),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var tt;(tt=this.onClosed)==null||tt.call(this,this)}_onDone(tt){const it=tt.chunk;this._requests.length>0?this._requests.shift().resolve({value:it,done:!1}):this._queuedChunk=it,this._done=!0;for(const ot of this._requests)ot.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(tt){this._storedError=(0,a.createResponseStatusError)(tt,this._url);for(const it of this._requests)it.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(tt){var it;this.isStreamingSupported||(it=this.onProgress)==null||it.call(this,{loaded:tt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const it=this._queuedChunk;return this._queuedChunk=null,{value:it,done:!1}}if(this._done)return{value:void 0,done:!0};const tt=new o.PromiseCapability;return this._requests.push(tt),tt.promise}cancel(tt){this._done=!0;for(const it of this._requests)it.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var o=s(1),a=s(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function d(ot){const at=require$$5,rt=at.parse(ot);return rt.protocol==="file:"||rt.host?rt:/^[a-z]:[/\\]/i.test(ot)?at.parse(`file:///${ot}`):(rt.host||(rt.protocol="file:"),rt)}class h{constructor(at){this.source=at,this.url=d(at.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&at.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var at;return((at=this._fullRequestReader)==null?void 0:at._loaded)??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new tt(this):new _(this),this._fullRequestReader}getRangeReader(at,rt){if(rt<=this._progressiveDataLength)return null;const st=this.isFsUrl?new it(this,at,rt):new et(this,at,rt);return this._rangeRequestReaders.push(st),st}cancelAllRequests(at){var rt;(rt=this._fullRequestReader)==null||rt.cancel(at);for(const st of this._rangeRequestReaders.slice(0))st.cancel(at)}}e.PDFNodeStream=h;class g{constructor(at){this._url=at.url,this._done=!1,this._storedError=null,this.onProgress=null;const rt=at.source;this._contentLength=rt.length,this._loaded=0,this._filename=null,this._disableRange=rt.disableRange||!1,this._rangeChunkSize=rt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!rt.disableStream,this._isRangeSupported=!rt.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var st;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const at=this._readableStream.read();return at===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=at.length,(st=this.onProgress)==null||st.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(at).buffer,done:!1})}cancel(at){if(!this._readableStream){this._error(at);return}this._readableStream.destroy(at)}_error(at){this._storedError=at,this._readCapability.resolve()}_setReadableStream(at){this._readableStream=at,at.on("readable",()=>{this._readCapability.resolve()}),at.on("end",()=>{at.destroy(),this._done=!0,this._readCapability.resolve()}),at.on("error",rt=>{this._error(rt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class j{constructor(at){this._url=at.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const rt=at.source;this._isStreamingSupported=!rt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var st;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const at=this._readableStream.read();return at===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=at.length,(st=this.onProgress)==null||st.call(this,{loaded:this._loaded}),{value:new Uint8Array(at).buffer,done:!1})}cancel(at){if(!this._readableStream){this._error(at);return}this._readableStream.destroy(at)}_error(at){this._storedError=at,this._readCapability.resolve()}_setReadableStream(at){this._readableStream=at,at.on("readable",()=>{this._readCapability.resolve()}),at.on("end",()=>{at.destroy(),this._done=!0,this._readCapability.resolve()}),at.on("error",rt=>{this._error(rt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function $(ot,at){return{protocol:ot.protocol,auth:ot.auth,host:ot.hostname,port:ot.port,path:ot.path,method:"GET",headers:at}}class _ extends g{constructor(at){super(at);const rt=st=>{if(st.statusCode===404){const gt=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=gt,this._headersCapability.reject(gt);return}this._headersCapability.resolve(),this._setReadableStream(st);const lt=gt=>this._readableStream.headers[gt.toLowerCase()],{allowRangeRequests:mt,suggestedLength:ft}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:lt,isHttp:at.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=mt,this._contentLength=ft||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(lt)};if(this._request=null,this._url.protocol==="http:"){const st=require$$5;this._request=st.request($(this._url,at.httpHeaders),rt)}else{const st=require$$5;this._request=st.request($(this._url,at.httpHeaders),rt)}this._request.on("error",st=>{this._storedError=st,this._headersCapability.reject(st)}),this._request.end()}}class et extends j{constructor(at,rt,st){super(at),this._httpHeaders={};for(const mt in at.httpHeaders){const ft=at.httpHeaders[mt];ft!==void 0&&(this._httpHeaders[mt]=ft)}this._httpHeaders.Range=`bytes=${rt}-${st-1}`;const lt=mt=>{if(mt.statusCode===404){const ft=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ft;return}this._setReadableStream(mt)};if(this._request=null,this._url.protocol==="http:"){const mt=require$$5;this._request=mt.request($(this._url,this._httpHeaders),lt)}else{const mt=require$$5;this._request=mt.request($(this._url,this._httpHeaders),lt)}this._request.on("error",mt=>{this._storedError=mt}),this._request.end()}}class tt extends g{constructor(at){super(at);let rt=decodeURIComponent(this._url.path);c.test(this._url.href)&&(rt=rt.replace(/^\//,""));const st=require$$5;st.lstat(rt,(lt,mt)=>{if(lt){lt.code==="ENOENT"&&(lt=new o.MissingPDFException(`Missing PDF "${rt}".`)),this._storedError=lt,this._headersCapability.reject(lt);return}this._contentLength=mt.size,this._setReadableStream(st.createReadStream(rt)),this._headersCapability.resolve()})}}class it extends j{constructor(at,rt,st){super(at);let lt=decodeURIComponent(this._url.path);c.test(this._url.href)&&(lt=lt.replace(/^\//,""));const mt=require$$5;this._setReadableStream(mt.createReadStream(lt,{start:rt,end:st-1}))}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var o=s(6),a=s(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},d="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/1999/xlink",g=["butt","round","square"],j=["miter","round","bevel"],$=function(mt,ft="",gt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!gt)return URL.createObjectURL(new Blob([mt],{type:ft}));const dt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ut=`data:${ft};base64,`;for(let ct=0,_t=mt.length;ct<_t;ct+=3){const ht=mt[ct]&255,Et=mt[ct+1]&255,yt=mt[ct+2]&255,Ot=ht>>2,Dt=(ht&3)<<4|Et>>4,$t=ct+1<_t?(Et&15)<<2|yt>>6:64,Bt=ct+2<_t?yt&63:64;ut+=dt[Ot]+dt[Dt]+dt[$t]+dt[Bt]}return ut},_=function(){const mt=new Uint8Array([137,80,78,71,13,10,26,10]),ft=12,gt=new Int32Array(256);for(let yt=0;yt<256;yt++){let Ot=yt;for(let Dt=0;Dt<8;Dt++)Ot=Ot&1?3988292384^Ot>>1&2147483647:Ot>>1&2147483647;gt[yt]=Ot}function dt(yt,Ot,Dt){let $t=-1;for(let Bt=Ot;Bt<Dt;Bt++){const Vt=($t^yt[Bt])&255,Rt=gt[Vt];$t=$t>>>8^Rt}return $t^-1}function ut(yt,Ot,Dt,$t){let Bt=$t;const Vt=Ot.length;Dt[Bt]=Vt>>24&255,Dt[Bt+1]=Vt>>16&255,Dt[Bt+2]=Vt>>8&255,Dt[Bt+3]=Vt&255,Bt+=4,Dt[Bt]=yt.charCodeAt(0)&255,Dt[Bt+1]=yt.charCodeAt(1)&255,Dt[Bt+2]=yt.charCodeAt(2)&255,Dt[Bt+3]=yt.charCodeAt(3)&255,Bt+=4,Dt.set(Ot,Bt),Bt+=Ot.length;const Rt=dt(Dt,$t+4,Bt);Dt[Bt]=Rt>>24&255,Dt[Bt+1]=Rt>>16&255,Dt[Bt+2]=Rt>>8&255,Dt[Bt+3]=Rt&255}function ct(yt,Ot,Dt){let $t=1,Bt=0;for(let Vt=Ot;Vt<Dt;++Vt)$t=($t+(yt[Vt]&255))%65521,Bt=(Bt+$t)%65521;return Bt<<16|$t}function _t(yt){if(!a.isNodeJS)return ht(yt);try{const Ot=parseInt(process.versions.node)>=8?yt:Buffer.from(yt),Dt=require$$5.deflateSync(Ot,{level:9});return Dt instanceof Uint8Array?Dt:new Uint8Array(Dt)}catch(Ot){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ot)}return ht(yt)}function ht(yt){let Ot=yt.length;const Dt=65535,$t=Math.ceil(Ot/Dt),Bt=new Uint8Array(2+Ot+$t*5+4);let Vt=0;Bt[Vt++]=120,Bt[Vt++]=156;let Rt=0;for(;Ot>Dt;)Bt[Vt++]=0,Bt[Vt++]=255,Bt[Vt++]=255,Bt[Vt++]=0,Bt[Vt++]=0,Bt.set(yt.subarray(Rt,Rt+Dt),Vt),Vt+=Dt,Rt+=Dt,Ot-=Dt;Bt[Vt++]=1,Bt[Vt++]=Ot&255,Bt[Vt++]=Ot>>8&255,Bt[Vt++]=~Ot&65535&255,Bt[Vt++]=(~Ot&65535)>>8&255,Bt.set(yt.subarray(Rt),Vt),Vt+=yt.length-Rt;const vt=ct(yt,0,yt.length);return Bt[Vt++]=vt>>24&255,Bt[Vt++]=vt>>16&255,Bt[Vt++]=vt>>8&255,Bt[Vt++]=vt&255,Bt}function Et(yt,Ot,Dt,$t){const Bt=yt.width,Vt=yt.height;let Rt,vt,St;const Pt=yt.data;switch(Ot){case a.ImageKind.GRAYSCALE_1BPP:vt=0,Rt=1,St=Bt+7>>3;break;case a.ImageKind.RGB_24BPP:vt=2,Rt=8,St=Bt*3;break;case a.ImageKind.RGBA_32BPP:vt=6,Rt=8,St=Bt*4;break;default:throw new Error("invalid format")}const pt=new Uint8Array((1+St)*Vt);let bt=0,Tt=0;for(let Yt=0;Yt<Vt;++Yt)pt[bt++]=0,pt.set(Pt.subarray(Tt,Tt+St),bt),Tt+=St,bt+=St;if(Ot===a.ImageKind.GRAYSCALE_1BPP&&$t){bt=0;for(let Yt=0;Yt<Vt;Yt++){bt++;for(let rn=0;rn<St;rn++)pt[bt++]^=255}}const Ct=new Uint8Array([Bt>>24&255,Bt>>16&255,Bt>>8&255,Bt&255,Vt>>24&255,Vt>>16&255,Vt>>8&255,Vt&255,Rt,vt,0,0,0]),kt=_t(pt),Mt=mt.length+ft*3+Ct.length+kt.length,zt=new Uint8Array(Mt);let Kt=0;return zt.set(mt,Kt),Kt+=mt.length,ut("IHDR",Ct,zt,Kt),Kt+=ft+Ct.length,ut("IDATA",kt,zt,Kt),Kt+=ft+kt.length,ut("IEND",new Uint8Array(0),zt,Kt),$(zt,"image/png",Dt)}return function(Ot,Dt,$t){const Bt=Ot.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:Ot.kind;return Et(Ot,Bt,Dt,$t)}}();class et{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(ft,gt){this.x=ft,this.y=gt}}function tt(mt){let ft=[];const gt=[];for(const dt of mt){if(dt.fn==="save"){ft.push({fnId:92,fn:"group",items:[]}),gt.push(ft),ft=ft.at(-1).items;continue}dt.fn==="restore"?ft=gt.pop():ft.push(dt)}return ft}function it(mt){if(Number.isInteger(mt))return mt.toString();const ft=mt.toFixed(10);let gt=ft.length-1;if(ft[gt]!=="0")return ft;do gt--;while(ft[gt]==="0");return ft.substring(0,ft[gt]==="."?gt:gt+1)}function ot(mt){if(mt[4]===0&&mt[5]===0){if(mt[1]===0&&mt[2]===0)return mt[0]===1&&mt[3]===1?"":`scale(${it(mt[0])} ${it(mt[3])})`;if(mt[0]===mt[3]&&mt[1]===-mt[2]){const ft=Math.acos(mt[0])*180/Math.PI;return`rotate(${it(ft)})`}}else if(mt[0]===1&&mt[1]===0&&mt[2]===0&&mt[3]===1)return`translate(${it(mt[4])} ${it(mt[5])})`;return`matrix(${it(mt[0])} ${it(mt[1])} ${it(mt[2])} ${it(mt[3])} ${it(mt[4])} ${it(mt[5])})`}let at=0,rt=0,st=0;class lt{constructor(ft,gt,dt=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new et,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=ft,this.objs=gt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!dt,this._operatorIdMapping=[];for(const ut in a.OPS)this._operatorIdMapping[a.OPS[ut]]=ut}getObject(ft,gt=null){return typeof ft=="string"?ft.startsWith("g_")?this.commonObjs.get(ft):this.objs.get(ft):gt}save(){this.transformStack.push(this.transformMatrix);const ft=this.current;this.extraStack.push(ft),this.current=ft.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(ft){this.save(),this.executeOpTree(ft),this.restore()}loadDependencies(ft){const gt=ft.fnArray,dt=ft.argsArray;for(let ut=0,ct=gt.length;ut<ct;ut++)if(gt[ut]===a.OPS.dependency)for(const _t of dt[ut]){const ht=_t.startsWith("g_")?this.commonObjs:this.objs,Et=new Promise(yt=>{ht.get(_t,yt)});this.current.dependencies.push(Et)}return Promise.all(this.current.dependencies)}transform(ft,gt,dt,ut,ct,_t){const ht=[ft,gt,dt,ut,ct,_t];this.transformMatrix=a.Util.transform(this.transformMatrix,ht),this.tgrp=null}getSVG(ft,gt){this.viewport=gt;const dt=this._initialize(gt);return this.loadDependencies(ft).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(ft)),dt))}convertOpList(ft){const gt=this._operatorIdMapping,dt=ft.argsArray,ut=ft.fnArray,ct=[];for(let _t=0,ht=ut.length;_t<ht;_t++){const Et=ut[_t];ct.push({fnId:Et,fn:gt[Et],args:dt[_t]})}return tt(ct)}executeOpTree(ft){for(const gt of ft){const dt=gt.fn,ut=gt.fnId,ct=gt.args;switch(ut|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(ct);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(ct[0],ct[1]);break;case a.OPS.setFont:this.setFont(ct);break;case a.OPS.showText:this.showText(ct[0]);break;case a.OPS.showSpacedText:this.showText(ct[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(ct[0],ct[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(ct[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(ct[0]);break;case a.OPS.setHScale:this.setHScale(ct[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);break;case a.OPS.setTextRise:this.setTextRise(ct[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(ct[0]);break;case a.OPS.setLineWidth:this.setLineWidth(ct[0]);break;case a.OPS.setLineJoin:this.setLineJoin(ct[0]);break;case a.OPS.setLineCap:this.setLineCap(ct[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(ct[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(ct[0],ct[1],ct[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ct[0],ct[1],ct[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(ct);break;case a.OPS.setFillColorN:this.setFillColorN(ct);break;case a.OPS.shadingFill:this.shadingFill(ct[0]);break;case a.OPS.setDash:this.setDash(ct[0],ct[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(ct[0]);break;case a.OPS.setFlatness:this.setFlatness(ct[0]);break;case a.OPS.setGState:this.setGState(ct[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(ct[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ct[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ct[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ct[0],ct[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(ct[0],ct[1],ct[2],ct[3],ct[4],ct[5]);break;case a.OPS.constructPath:this.constructPath(ct[0],ct[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(gt.items);break;default:(0,a.warn)(`Unimplemented operator ${dt}`);break}}}setWordSpacing(ft){this.current.wordSpacing=ft}setCharSpacing(ft){this.current.charSpacing=ft}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(ft,gt,dt,ut,ct,_t){const ht=this.current;ht.textMatrix=ht.lineMatrix=[ft,gt,dt,ut,ct,_t],ht.textMatrixScale=Math.hypot(ft,gt),ht.x=ht.lineX=0,ht.y=ht.lineY=0,ht.xcoords=[],ht.ycoords=[],ht.tspan=this.svgFactory.createElement("svg:tspan"),ht.tspan.setAttributeNS(null,"font-family",ht.fontFamily),ht.tspan.setAttributeNS(null,"font-size",`${it(ht.fontSize)}px`),ht.tspan.setAttributeNS(null,"y",it(-ht.y)),ht.txtElement=this.svgFactory.createElement("svg:text"),ht.txtElement.append(ht.tspan)}beginText(){const ft=this.current;ft.x=ft.lineX=0,ft.y=ft.lineY=0,ft.textMatrix=a.IDENTITY_MATRIX,ft.lineMatrix=a.IDENTITY_MATRIX,ft.textMatrixScale=1,ft.tspan=this.svgFactory.createElement("svg:tspan"),ft.txtElement=this.svgFactory.createElement("svg:text"),ft.txtgrp=this.svgFactory.createElement("svg:g"),ft.xcoords=[],ft.ycoords=[]}moveText(ft,gt){const dt=this.current;dt.x=dt.lineX+=ft,dt.y=dt.lineY+=gt,dt.xcoords=[],dt.ycoords=[],dt.tspan=this.svgFactory.createElement("svg:tspan"),dt.tspan.setAttributeNS(null,"font-family",dt.fontFamily),dt.tspan.setAttributeNS(null,"font-size",`${it(dt.fontSize)}px`),dt.tspan.setAttributeNS(null,"y",it(-dt.y))}showText(ft){const gt=this.current,dt=gt.font,ut=gt.fontSize;if(ut===0)return;const ct=gt.fontSizeScale,_t=gt.charSpacing,ht=gt.wordSpacing,Et=gt.fontDirection,yt=gt.textHScale*Et,Ot=dt.vertical,Dt=Ot?1:-1,$t=dt.defaultVMetrics,Bt=ut*gt.fontMatrix[0];let Vt=0;for(const St of ft){if(St===null){Vt+=Et*ht;continue}else if(typeof St=="number"){Vt+=Dt*St*ut/1e3;continue}const Pt=(St.isSpace?ht:0)+_t,pt=St.fontChar;let bt,Tt,Ct=St.width;if(Ot){let Mt;const zt=St.vmetric||$t;Mt=St.vmetric?zt[1]:Ct*.5,Mt=-Mt*Bt;const Kt=zt[2]*Bt;Ct=zt?-zt[0]:Ct,bt=Mt/ct,Tt=(Vt+Kt)/ct}else bt=Vt/ct,Tt=0;(St.isInFont||dt.missingFile)&&(gt.xcoords.push(gt.x+bt),Ot&&gt.ycoords.push(-gt.y+Tt),gt.tspan.textContent+=pt);const kt=Ot?Ct*Bt-Pt*Et:Ct*Bt+Pt*Et;Vt+=kt}gt.tspan.setAttributeNS(null,"x",gt.xcoords.map(it).join(" ")),Ot?gt.tspan.setAttributeNS(null,"y",gt.ycoords.map(it).join(" ")):gt.tspan.setAttributeNS(null,"y",it(-gt.y)),Ot?gt.y-=Vt:gt.x+=Vt*yt,gt.tspan.setAttributeNS(null,"font-family",gt.fontFamily),gt.tspan.setAttributeNS(null,"font-size",`${it(gt.fontSize)}px`),gt.fontStyle!==c.fontStyle&&gt.tspan.setAttributeNS(null,"font-style",gt.fontStyle),gt.fontWeight!==c.fontWeight&&gt.tspan.setAttributeNS(null,"font-weight",gt.fontWeight);const Rt=gt.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(Rt===a.TextRenderingMode.FILL||Rt===a.TextRenderingMode.FILL_STROKE?(gt.fillColor!==c.fillColor&&gt.tspan.setAttributeNS(null,"fill",gt.fillColor),gt.fillAlpha<1&&gt.tspan.setAttributeNS(null,"fill-opacity",gt.fillAlpha)):gt.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?gt.tspan.setAttributeNS(null,"fill","transparent"):gt.tspan.setAttributeNS(null,"fill","none"),Rt===a.TextRenderingMode.STROKE||Rt===a.TextRenderingMode.FILL_STROKE){const St=1/(gt.textMatrixScale||1);this._setStrokeAttributes(gt.tspan,St)}let vt=gt.textMatrix;gt.textRise!==0&&(vt=vt.slice(),vt[5]+=gt.textRise),gt.txtElement.setAttributeNS(null,"transform",`${ot(vt)} scale(${it(yt)}, -1)`),gt.txtElement.setAttributeNS(d,"xml:space","preserve"),gt.txtElement.append(gt.tspan),gt.txtgrp.append(gt.txtElement),this._ensureTransformGroup().append(gt.txtElement)}setLeadingMoveText(ft,gt){this.setLeading(-gt),this.moveText(ft,gt)}addFontStyle(ft){if(!ft.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const gt=$(ft.data,ft.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${ft.loadedName}"; src: url(${gt}); }
`}setFont(ft){const gt=this.current,dt=this.commonObjs.get(ft[0]);let ut=ft[1];gt.font=dt,this.embedFonts&&!dt.missingFile&&!this.embeddedFonts[dt.loadedName]&&(this.addFontStyle(dt),this.embeddedFonts[dt.loadedName]=dt),gt.fontMatrix=dt.fontMatrix||a.FONT_IDENTITY_MATRIX;let ct="normal";dt.black?ct="900":dt.bold&&(ct="bold");const _t=dt.italic?"italic":"normal";ut<0?(ut=-ut,gt.fontDirection=-1):gt.fontDirection=1,gt.fontSize=ut,gt.fontFamily=dt.loadedName,gt.fontWeight=ct,gt.fontStyle=_t,gt.tspan=this.svgFactory.createElement("svg:tspan"),gt.tspan.setAttributeNS(null,"y",it(-gt.y)),gt.xcoords=[],gt.ycoords=[]}endText(){var gt;const ft=this.current;ft.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&((gt=ft.txtElement)!=null&&gt.hasChildNodes())&&(ft.element=ft.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(ft){ft>0&&(this.current.lineWidth=ft)}setLineCap(ft){this.current.lineCap=g[ft]}setLineJoin(ft){this.current.lineJoin=j[ft]}setMiterLimit(ft){this.current.miterLimit=ft}setStrokeAlpha(ft){this.current.strokeAlpha=ft}setStrokeRGBColor(ft,gt,dt){this.current.strokeColor=a.Util.makeHexColor(ft,gt,dt)}setFillAlpha(ft){this.current.fillAlpha=ft}setFillRGBColor(ft,gt,dt){this.current.fillColor=a.Util.makeHexColor(ft,gt,dt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(ft){this.current.strokeColor=this._makeColorN_Pattern(ft)}setFillColorN(ft){this.current.fillColor=this._makeColorN_Pattern(ft)}shadingFill(ft){const{width:gt,height:dt}=this.viewport,ut=a.Util.inverseTransform(this.transformMatrix),[ct,_t,ht,Et]=a.Util.getAxialAlignedBoundingBox([0,0,gt,dt],ut),yt=this.svgFactory.createElement("svg:rect");yt.setAttributeNS(null,"x",ct),yt.setAttributeNS(null,"y",_t),yt.setAttributeNS(null,"width",ht-ct),yt.setAttributeNS(null,"height",Et-_t),yt.setAttributeNS(null,"fill",this._makeShadingPattern(ft)),this.current.fillAlpha<1&&yt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(yt)}_makeColorN_Pattern(ft){return ft[0]==="TilingPattern"?this._makeTilingPattern(ft):this._makeShadingPattern(ft)}_makeTilingPattern(ft){const gt=ft[1],dt=ft[2],ut=ft[3]||a.IDENTITY_MATRIX,[ct,_t,ht,Et]=ft[4],yt=ft[5],Ot=ft[6],Dt=ft[7],$t=`shading${st++}`,[Bt,Vt,Rt,vt]=a.Util.normalizeRect([...a.Util.applyTransform([ct,_t],ut),...a.Util.applyTransform([ht,Et],ut)]),[St,Pt]=a.Util.singularValueDecompose2dScale(ut),pt=yt*St,bt=Ot*Pt,Tt=this.svgFactory.createElement("svg:pattern");Tt.setAttributeNS(null,"id",$t),Tt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Tt.setAttributeNS(null,"width",pt),Tt.setAttributeNS(null,"height",bt),Tt.setAttributeNS(null,"x",`${Bt}`),Tt.setAttributeNS(null,"y",`${Vt}`);const Ct=this.svg,kt=this.transformMatrix,Mt=this.current.fillColor,zt=this.current.strokeColor,Kt=this.svgFactory.create(Rt-Bt,vt-Vt);if(this.svg=Kt,this.transformMatrix=ut,Dt===2){const Yt=a.Util.makeHexColor(...gt);this.current.fillColor=Yt,this.current.strokeColor=Yt}return this.executeOpTree(this.convertOpList(dt)),this.svg=Ct,this.transformMatrix=kt,this.current.fillColor=Mt,this.current.strokeColor=zt,Tt.append(Kt.childNodes[0]),this.defs.append(Tt),`url(#${$t})`}_makeShadingPattern(ft){switch(typeof ft=="string"&&(ft=this.objs.get(ft)),ft[0]){case"RadialAxial":const gt=`shading${st++}`,dt=ft[3];let ut;switch(ft[1]){case"axial":const ct=ft[4],_t=ft[5];ut=this.svgFactory.createElement("svg:linearGradient"),ut.setAttributeNS(null,"id",gt),ut.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ut.setAttributeNS(null,"x1",ct[0]),ut.setAttributeNS(null,"y1",ct[1]),ut.setAttributeNS(null,"x2",_t[0]),ut.setAttributeNS(null,"y2",_t[1]);break;case"radial":const ht=ft[4],Et=ft[5],yt=ft[6],Ot=ft[7];ut=this.svgFactory.createElement("svg:radialGradient"),ut.setAttributeNS(null,"id",gt),ut.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ut.setAttributeNS(null,"cx",Et[0]),ut.setAttributeNS(null,"cy",Et[1]),ut.setAttributeNS(null,"r",Ot),ut.setAttributeNS(null,"fx",ht[0]),ut.setAttributeNS(null,"fy",ht[1]),ut.setAttributeNS(null,"fr",yt);break;default:throw new Error(`Unknown RadialAxial type: ${ft[1]}`)}for(const ct of dt){const _t=this.svgFactory.createElement("svg:stop");_t.setAttributeNS(null,"offset",ct[0]),_t.setAttributeNS(null,"stop-color",ct[1]),ut.append(_t)}return this.defs.append(ut),`url(#${gt})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${ft[0]}`)}}setDash(ft,gt){this.current.dashArray=ft,this.current.dashPhase=gt}constructPath(ft,gt){const dt=this.current;let ut=dt.x,ct=dt.y,_t=[],ht=0;for(const Et of ft)switch(Et|0){case a.OPS.rectangle:ut=gt[ht++],ct=gt[ht++];const yt=gt[ht++],Ot=gt[ht++],Dt=ut+yt,$t=ct+Ot;_t.push("M",it(ut),it(ct),"L",it(Dt),it(ct),"L",it(Dt),it($t),"L",it(ut),it($t),"Z");break;case a.OPS.moveTo:ut=gt[ht++],ct=gt[ht++],_t.push("M",it(ut),it(ct));break;case a.OPS.lineTo:ut=gt[ht++],ct=gt[ht++],_t.push("L",it(ut),it(ct));break;case a.OPS.curveTo:ut=gt[ht+4],ct=gt[ht+5],_t.push("C",it(gt[ht]),it(gt[ht+1]),it(gt[ht+2]),it(gt[ht+3]),it(ut),it(ct)),ht+=6;break;case a.OPS.curveTo2:_t.push("C",it(ut),it(ct),it(gt[ht]),it(gt[ht+1]),it(gt[ht+2]),it(gt[ht+3])),ut=gt[ht+2],ct=gt[ht+3],ht+=4;break;case a.OPS.curveTo3:ut=gt[ht+2],ct=gt[ht+3],_t.push("C",it(gt[ht]),it(gt[ht+1]),it(ut),it(ct),it(ut),it(ct)),ht+=4;break;case a.OPS.closePath:_t.push("Z");break}_t=_t.join(" "),dt.path&&ft.length>0&&ft[0]!==a.OPS.rectangle&&ft[0]!==a.OPS.moveTo?_t=dt.path.getAttributeNS(null,"d")+_t:(dt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(dt.path)),dt.path.setAttributeNS(null,"d",_t),dt.path.setAttributeNS(null,"fill","none"),dt.element=dt.path,dt.setCurrentPoint(ut,ct)}endPath(){const ft=this.current;if(ft.path=null,!this.pendingClip)return;if(!ft.element){this.pendingClip=null;return}const gt=`clippath${at++}`,dt=this.svgFactory.createElement("svg:clipPath");dt.setAttributeNS(null,"id",gt),dt.setAttributeNS(null,"transform",ot(this.transformMatrix));const ut=ft.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ut.setAttributeNS(null,"clip-rule","evenodd"):ut.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,dt.append(ut),this.defs.append(dt),ft.activeClipUrl){ft.clipGroup=null;for(const ct of this.extraStack)ct.clipGroup=null;dt.setAttributeNS(null,"clip-path",ft.activeClipUrl)}ft.activeClipUrl=`url(#${gt})`,this.tgrp=null}clip(ft){this.pendingClip=ft}closePath(){const ft=this.current;if(ft.path){const gt=`${ft.path.getAttributeNS(null,"d")}Z`;ft.path.setAttributeNS(null,"d",gt)}}setLeading(ft){this.current.leading=-ft}setTextRise(ft){this.current.textRise=ft}setTextRenderingMode(ft){this.current.textRenderingMode=ft}setHScale(ft){this.current.textHScale=ft/100}setRenderingIntent(ft){}setFlatness(ft){}setGState(ft){for(const[gt,dt]of ft)switch(gt){case"LW":this.setLineWidth(dt);break;case"LC":this.setLineCap(dt);break;case"LJ":this.setLineJoin(dt);break;case"ML":this.setMiterLimit(dt);break;case"D":this.setDash(dt[0],dt[1]);break;case"RI":this.setRenderingIntent(dt);break;case"FL":this.setFlatness(dt);break;case"Font":this.setFont(dt);break;case"CA":this.setStrokeAlpha(dt);break;case"ca":this.setFillAlpha(dt);break;default:(0,a.warn)(`Unimplemented graphic state operator ${gt}`);break}}fill(){const ft=this.current;ft.element&&(ft.element.setAttributeNS(null,"fill",ft.fillColor),ft.element.setAttributeNS(null,"fill-opacity",ft.fillAlpha),this.endPath())}stroke(){const ft=this.current;ft.element&&(this._setStrokeAttributes(ft.element),ft.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(ft,gt=1){const dt=this.current;let ut=dt.dashArray;gt!==1&&ut.length>0&&(ut=ut.map(function(ct){return gt*ct})),ft.setAttributeNS(null,"stroke",dt.strokeColor),ft.setAttributeNS(null,"stroke-opacity",dt.strokeAlpha),ft.setAttributeNS(null,"stroke-miterlimit",it(dt.miterLimit)),ft.setAttributeNS(null,"stroke-linecap",dt.lineCap),ft.setAttributeNS(null,"stroke-linejoin",dt.lineJoin),ft.setAttributeNS(null,"stroke-width",it(gt*dt.lineWidth)+"px"),ft.setAttributeNS(null,"stroke-dasharray",ut.map(it).join(" ")),ft.setAttributeNS(null,"stroke-dashoffset",it(gt*dt.dashPhase)+"px")}eoFill(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var ft;(ft=this.current.element)==null||ft.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const ft=this.svgFactory.createElement("svg:rect");ft.setAttributeNS(null,"x","0"),ft.setAttributeNS(null,"y","0"),ft.setAttributeNS(null,"width","1px"),ft.setAttributeNS(null,"height","1px"),ft.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(ft)}paintImageXObject(ft){const gt=this.getObject(ft);if(!gt){(0,a.warn)(`Dependent image with object ID ${ft} is not ready yet`);return}this.paintInlineImageXObject(gt)}paintInlineImageXObject(ft,gt){const dt=ft.width,ut=ft.height,ct=_(ft,this.forceDataSchema,!!gt),_t=this.svgFactory.createElement("svg:rect");_t.setAttributeNS(null,"x","0"),_t.setAttributeNS(null,"y","0"),_t.setAttributeNS(null,"width",it(dt)),_t.setAttributeNS(null,"height",it(ut)),this.current.element=_t,this.clip("nonzero");const ht=this.svgFactory.createElement("svg:image");ht.setAttributeNS(h,"xlink:href",ct),ht.setAttributeNS(null,"x","0"),ht.setAttributeNS(null,"y",it(-ut)),ht.setAttributeNS(null,"width",it(dt)+"px"),ht.setAttributeNS(null,"height",it(ut)+"px"),ht.setAttributeNS(null,"transform",`scale(${it(1/dt)} ${it(-1/ut)})`),gt?gt.append(ht):this._ensureTransformGroup().append(ht)}paintImageMaskXObject(ft){const gt=this.getObject(ft.data,ft);if(gt.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const dt=this.current,ut=gt.width,ct=gt.height,_t=dt.fillColor;dt.maskId=`mask${rt++}`;const ht=this.svgFactory.createElement("svg:mask");ht.setAttributeNS(null,"id",dt.maskId);const Et=this.svgFactory.createElement("svg:rect");Et.setAttributeNS(null,"x","0"),Et.setAttributeNS(null,"y","0"),Et.setAttributeNS(null,"width",it(ut)),Et.setAttributeNS(null,"height",it(ct)),Et.setAttributeNS(null,"fill",_t),Et.setAttributeNS(null,"mask",`url(#${dt.maskId})`),this.defs.append(ht),this._ensureTransformGroup().append(Et),this.paintInlineImageXObject(gt,ht)}paintFormXObjectBegin(ft,gt){if(Array.isArray(ft)&&ft.length===6&&this.transform(ft[0],ft[1],ft[2],ft[3],ft[4],ft[5]),gt){const dt=gt[2]-gt[0],ut=gt[3]-gt[1],ct=this.svgFactory.createElement("svg:rect");ct.setAttributeNS(null,"x",gt[0]),ct.setAttributeNS(null,"y",gt[1]),ct.setAttributeNS(null,"width",it(dt)),ct.setAttributeNS(null,"height",it(ut)),this.current.element=ct,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(ft){const gt=this.svgFactory.create(ft.width,ft.height),dt=this.svgFactory.createElement("svg:defs");gt.append(dt),this.defs=dt;const ut=this.svgFactory.createElement("svg:g");return ut.setAttributeNS(null,"transform",ot(ft.transform)),gt.append(ut),this.svg=ut,gt}_ensureClipGroup(){if(!this.current.clipGroup){const ft=this.svgFactory.createElement("svg:g");ft.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(ft),this.current.clipGroup=ft}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",ot(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=lt},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(a){const c=[],d={items:c,styles:Object.create(null)};function h(g){var _;if(!g)return;let j=null;const $=g.name;if($==="#text")j=g.value;else if(s.shouldBuildText($))(_=g==null?void 0:g.attributes)!=null&&_.textContent?j=g.attributes.textContent:g.value&&(j=g.value);else return;if(j!==null&&c.push({str:j}),!!g.children)for(const et of g.children)h(et)}return h(a),d}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}e.XfaText=s},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=ot,e.updateTextLayer=at;var o=s(1),a=s(6);const c=1e5,d=30,h=.8,g=new Map;function j(rt,st){let lt;if(st&&o.FeatureTest.isOffscreenCanvasSupported)lt=new OffscreenCanvas(rt,rt).getContext("2d",{alpha:!1});else{const mt=document.createElement("canvas");mt.width=mt.height=rt,lt=mt.getContext("2d",{alpha:!1})}return lt}function $(rt,st){const lt=g.get(rt);if(lt)return lt;const mt=j(d,st);mt.font=`${d}px ${rt}`;const ft=mt.measureText("");let gt=ft.fontBoundingBoxAscent,dt=Math.abs(ft.fontBoundingBoxDescent);if(gt){const ct=gt/(gt+dt);return g.set(rt,ct),mt.canvas.width=mt.canvas.height=0,ct}mt.strokeStyle="red",mt.clearRect(0,0,d,d),mt.strokeText("g",0,0);let ut=mt.getImageData(0,0,d,d).data;dt=0;for(let ct=ut.length-1-3;ct>=0;ct-=4)if(ut[ct]>0){dt=Math.ceil(ct/4/d);break}mt.clearRect(0,0,d,d),mt.strokeText("A",0,d),ut=mt.getImageData(0,0,d,d).data,gt=0;for(let ct=0,_t=ut.length;ct<_t;ct+=4)if(ut[ct]>0){gt=d-Math.floor(ct/4/d);break}if(mt.canvas.width=mt.canvas.height=0,gt){const ct=gt/(gt+dt);return g.set(rt,ct),ct}return g.set(rt,h),h}function _(rt,st,lt){const mt=document.createElement("span"),ft={angle:0,canvasWidth:0,hasText:st.str!=="",hasEOL:st.hasEOL,fontSize:0};rt._textDivs.push(mt);const gt=o.Util.transform(rt._transform,st.transform);let dt=Math.atan2(gt[1],gt[0]);const ut=lt[st.fontName];ut.vertical&&(dt+=Math.PI/2);const ct=Math.hypot(gt[2],gt[3]),_t=ct*$(ut.fontFamily,rt._isOffscreenCanvasSupported);let ht,Et;dt===0?(ht=gt[4],Et=gt[5]-_t):(ht=gt[4]+_t*Math.sin(dt),Et=gt[5]-_t*Math.cos(dt));const yt="calc(var(--scale-factor)*",Ot=mt.style;rt._container===rt._rootContainer?(Ot.left=`${(100*ht/rt._pageWidth).toFixed(2)}%`,Ot.top=`${(100*Et/rt._pageHeight).toFixed(2)}%`):(Ot.left=`${yt}${ht.toFixed(2)}px)`,Ot.top=`${yt}${Et.toFixed(2)}px)`),Ot.fontSize=`${yt}${ct.toFixed(2)}px)`,Ot.fontFamily=ut.fontFamily,ft.fontSize=ct,mt.setAttribute("role","presentation"),mt.textContent=st.str,mt.dir=st.dir,rt._fontInspectorEnabled&&(mt.dataset.fontName=st.fontName),dt!==0&&(ft.angle=dt*(180/Math.PI));let Dt=!1;if(st.str.length>1)Dt=!0;else if(st.str!==" "&&st.transform[0]!==st.transform[3]){const $t=Math.abs(st.transform[0]),Bt=Math.abs(st.transform[3]);$t!==Bt&&Math.max($t,Bt)/Math.min($t,Bt)>1.5&&(Dt=!0)}Dt&&(ft.canvasWidth=ut.vertical?st.height:st.width),rt._textDivProperties.set(mt,ft),rt._isReadableStream&&rt._layoutText(mt)}function et(rt){const{div:st,scale:lt,properties:mt,ctx:ft,prevFontSize:gt,prevFontFamily:dt}=rt,{style:ut}=st;let ct="";if(mt.canvasWidth!==0&&mt.hasText){const{fontFamily:_t}=ut,{canvasWidth:ht,fontSize:Et}=mt;(gt!==Et||dt!==_t)&&(ft.font=`${Et*lt}px ${_t}`,rt.prevFontSize=Et,rt.prevFontFamily=_t);const{width:yt}=ft.measureText(st.textContent);yt>0&&(ct=`scaleX(${ht*lt/yt})`)}mt.angle!==0&&(ct=`rotate(${mt.angle}deg) ${ct}`),ct.length>0&&(ut.transform=ct)}function tt(rt){if(rt._canceled)return;const st=rt._textDivs,lt=rt._capability;if(st.length>c){lt.resolve();return}if(!rt._isReadableStream)for(const ft of st)rt._layoutText(ft);lt.resolve()}class it{constructor({textContentSource:st,container:lt,viewport:mt,textDivs:ft,textDivProperties:gt,textContentItemsStr:dt,isOffscreenCanvasSupported:ut}){var yt;this._textContentSource=st,this._isReadableStream=st instanceof ReadableStream,this._container=this._rootContainer=lt,this._textDivs=ft||[],this._textContentItemsStr=dt||[],this._isOffscreenCanvasSupported=ut,this._fontInspectorEnabled=!!((yt=globalThis.FontInspector)!=null&&yt.enabled),this._reader=null,this._textDivProperties=gt||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:mt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:j(0,ut)};const{pageWidth:ct,pageHeight:_t,pageX:ht,pageY:Et}=mt.rawDims;this._transform=[1,0,0,-1,-ht,Et+_t],this._pageWidth=ct,this._pageHeight=_t,(0,a.setLayerDimensions)(lt,mt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(st,lt){for(const mt of st){if(mt.str===void 0){if(mt.type==="beginMarkedContentProps"||mt.type==="beginMarkedContent"){const ft=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),mt.id!==null&&this._container.setAttribute("id",`${mt.id}`),ft.append(this._container)}else mt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(mt.str),_(this,mt,lt)}}_layoutText(st){const lt=this._layoutTextParams.properties=this._textDivProperties.get(st);if(this._layoutTextParams.div=st,et(this._layoutTextParams),lt.hasText&&this._container.append(st),lt.hasEOL){const mt=document.createElement("br");mt.setAttribute("role","presentation"),this._container.append(mt)}}_render(){const st=new o.PromiseCapability;let lt=Object.create(null);if(this._isReadableStream){const mt=()=>{this._reader.read().then(({value:ft,done:gt})=>{if(gt){st.resolve();return}Object.assign(lt,ft.styles),this._processItems(ft.items,lt),mt()},st.reject)};this._reader=this._textContentSource.getReader(),mt()}else if(this._textContentSource){const{items:mt,styles:ft}=this._textContentSource;this._processItems(mt,ft),st.resolve()}else throw new Error('No "textContentSource" parameter specified.');st.promise.then(()=>{lt=null,tt(this)},this._capability.reject)}}e.TextLayerRenderTask=it;function ot(rt){!rt.textContentSource&&(rt.textContent||rt.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),rt.textContentSource=rt.textContent||rt.textContentStream);const{container:st,viewport:lt}=rt,mt=getComputedStyle(st),ft=mt.getPropertyValue("visibility"),gt=parseFloat(mt.getPropertyValue("--scale-factor"));ft==="visible"&&(!gt||Math.abs(gt-lt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const dt=new it(rt);return dt._render(),dt}function at({container:rt,viewport:st,textDivs:lt,textDivProperties:mt,isOffscreenCanvasSupported:ft,mustRotate:gt=!0,mustRescale:dt=!0}){if(gt&&(0,a.setLayerDimensions)(rt,{rotation:st.rotation}),dt){const ut=j(0,ft),_t={prevFontSize:null,prevFontFamily:null,div:null,scale:st.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ut};for(const ht of lt)_t.properties=mt.get(ht),_t.div=ht,et(_t)}}},(i,e,s)=>{var $,_,et,tt,it,ot,at,rt,st,lt,mt,Us,as,zs,Ws;Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var o=s(1),a=s(4),c=s(28),d=s(33),h=s(6),g=s(34);const ct=class ct{constructor({uiManager:ht,pageIndex:Et,div:yt,accessibilityManager:Ot,annotationLayer:Dt,viewport:$t,l10n:Bt}){on(this,mt);on(this,$);on(this,_,!1);on(this,et,null);on(this,tt,this.pointerup.bind(this));on(this,it,this.pointerdown.bind(this));on(this,ot,new Map);on(this,at,!1);on(this,rt,!1);on(this,st,!1);on(this,lt);const Vt=[c.FreeTextEditor,d.InkEditor,g.StampEditor];if(!ct._initialized){ct._initialized=!0;for(const Rt of Vt)Rt.initialize(Bt)}ht.registerEditorTypes(Vt),ln(this,lt,ht),this.pageIndex=Et,this.div=yt,ln(this,$,Ot),ln(this,et,Dt),this.viewport=$t,At(this,lt).addLayer(this)}get isEmpty(){return At(this,ot).size===0}updateToolbar(ht){At(this,lt).updateToolbar(ht)}updateMode(ht=At(this,lt).getMode()){Jt(this,mt,Ws).call(this),ht===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ht!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",ht===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",ht===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",ht===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(ht){if(!ht&&At(this,lt).getMode()!==o.AnnotationEditorType.INK)return;if(!ht){for(const yt of At(this,ot).values())if(yt.isEmpty()){yt.setInBackground();return}}Jt(this,mt,as).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(ht){At(this,lt).setEditingState(ht)}addCommands(ht){At(this,lt).addCommands(ht)}enable(){this.div.style.pointerEvents="auto";const ht=new Set;for(const yt of At(this,ot).values())yt.enableEditing(),yt.annotationElementId&&ht.add(yt.annotationElementId);if(!At(this,et))return;const Et=At(this,et).getEditableAnnotations();for(const yt of Et){if(yt.hide(),At(this,lt).isDeletedAnnotationElement(yt.data.id)||ht.has(yt.data.id))continue;const Ot=this.deserialize(yt);Ot&&(this.addOrRebuild(Ot),Ot.enableEditing())}}disable(){var Et;ln(this,st,!0),this.div.style.pointerEvents="none";const ht=new Set;for(const yt of At(this,ot).values()){if(yt.disableEditing(),!yt.annotationElementId||yt.serialize()!==null){ht.add(yt.annotationElementId);continue}(Et=this.getEditableAnnotation(yt.annotationElementId))==null||Et.show(),yt.remove()}if(At(this,et)){const yt=At(this,et).getEditableAnnotations();for(const Ot of yt){const{id:Dt}=Ot.data;ht.has(Dt)||At(this,lt).isDeletedAnnotationElement(Dt)||Ot.show()}}Jt(this,mt,Ws).call(this),this.isEmpty&&(this.div.hidden=!0),ln(this,st,!1)}getEditableAnnotation(ht){var Et;return((Et=At(this,et))==null?void 0:Et.getEditableAnnotation(ht))||null}setActiveEditor(ht){At(this,lt).getActive()!==ht&&At(this,lt).setActiveEditor(ht)}enableClick(){this.div.addEventListener("pointerdown",At(this,it)),this.div.addEventListener("pointerup",At(this,tt))}disableClick(){this.div.removeEventListener("pointerdown",At(this,it)),this.div.removeEventListener("pointerup",At(this,tt))}attach(ht){At(this,ot).set(ht.id,ht);const{annotationElementId:Et}=ht;Et&&At(this,lt).isDeletedAnnotationElement(Et)&&At(this,lt).removeDeletedAnnotationElement(ht)}detach(ht){var Et;At(this,ot).delete(ht.id),(Et=At(this,$))==null||Et.removePointerInTextLayer(ht.contentDiv),!At(this,st)&&ht.annotationElementId&&At(this,lt).addDeletedAnnotationElement(ht)}remove(ht){this.detach(ht),At(this,lt).removeEditor(ht),ht.div.contains(document.activeElement)&&setTimeout(()=>{At(this,lt).focusMainContainer()},0),ht.div.remove(),ht.isAttachedToDOM=!1,At(this,rt)||this.addInkEditorIfNeeded(!1)}changeParent(ht){var Et;ht.parent!==this&&(ht.annotationElementId&&(At(this,lt).addDeletedAnnotationElement(ht.annotationElementId),a.AnnotationEditor.deleteAnnotationElement(ht),ht.annotationElementId=null),this.attach(ht),(Et=ht.parent)==null||Et.detach(ht),ht.setParent(this),ht.div&&ht.isAttachedToDOM&&(ht.div.remove(),this.div.append(ht.div)))}add(ht){if(this.changeParent(ht),At(this,lt).addEditor(ht),this.attach(ht),!ht.isAttachedToDOM){const Et=ht.render();this.div.append(Et),ht.isAttachedToDOM=!0}ht.fixAndSetPosition(),ht.onceAdded(),At(this,lt).addToAnnotationStorage(ht)}moveEditorInDOM(ht){var yt;if(!ht.isAttachedToDOM)return;const{activeElement:Et}=document;ht.div.contains(Et)&&(ht._focusEventsAllowed=!1,setTimeout(()=>{ht.div.contains(document.activeElement)?ht._focusEventsAllowed=!0:(ht.div.addEventListener("focusin",()=>{ht._focusEventsAllowed=!0},{once:!0}),Et.focus())},0)),ht._structTreeParentId=(yt=At(this,$))==null?void 0:yt.moveElementInDOM(this.div,ht.div,ht.contentDiv,!0)}addOrRebuild(ht){ht.needsToBeRebuilt()?ht.rebuild():this.add(ht)}addUndoableEditor(ht){const Et=()=>ht._uiManager.rebuild(ht),yt=()=>{ht.remove()};this.addCommands({cmd:Et,undo:yt,mustExec:!1})}getNextId(){return At(this,lt).getId()}pasteEditor(ht,Et){At(this,lt).updateToolbar(ht),At(this,lt).updateMode(ht);const{offsetX:yt,offsetY:Ot}=Jt(this,mt,zs).call(this),Dt=this.getNextId(),$t=Jt(this,mt,Us).call(this,{parent:this,id:Dt,x:yt,y:Ot,uiManager:At(this,lt),isCentered:!0,...Et});$t&&this.add($t)}deserialize(ht){switch(ht.annotationType??ht.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(ht,this,At(this,lt));case o.AnnotationEditorType.INK:return d.InkEditor.deserialize(ht,this,At(this,lt));case o.AnnotationEditorType.STAMP:return g.StampEditor.deserialize(ht,this,At(this,lt))}return null}addNewEditor(){Jt(this,mt,as).call(this,Jt(this,mt,zs).call(this),!0)}setSelected(ht){At(this,lt).setSelected(ht)}toggleSelected(ht){At(this,lt).toggleSelected(ht)}isSelected(ht){return At(this,lt).isSelected(ht)}unselect(ht){At(this,lt).unselect(ht)}pointerup(ht){const{isMac:Et}=o.FeatureTest.platform;if(!(ht.button!==0||ht.ctrlKey&&Et)&&ht.target===this.div&&At(this,at)){if(ln(this,at,!1),!At(this,_)){ln(this,_,!0);return}if(At(this,lt).getMode()===o.AnnotationEditorType.STAMP){At(this,lt).unselectAll();return}Jt(this,mt,as).call(this,ht,!1)}}pointerdown(ht){if(At(this,at)){ln(this,at,!1);return}const{isMac:Et}=o.FeatureTest.platform;if(ht.button!==0||ht.ctrlKey&&Et||ht.target!==this.div)return;ln(this,at,!0);const yt=At(this,lt).getActive();ln(this,_,!yt||yt.isEmpty())}findNewParent(ht,Et,yt){const Ot=At(this,lt).findParent(Et,yt);return Ot===null||Ot===this?!1:(Ot.changeParent(ht),!0)}destroy(){var ht,Et;((ht=At(this,lt).getActive())==null?void 0:ht.parent)===this&&(At(this,lt).commitOrRemove(),At(this,lt).setActiveEditor(null));for(const yt of At(this,ot).values())(Et=At(this,$))==null||Et.removePointerInTextLayer(yt.contentDiv),yt.setParent(null),yt.isAttachedToDOM=!1,yt.div.remove();this.div=null,At(this,ot).clear(),At(this,lt).removeLayer(this)}render({viewport:ht}){this.viewport=ht,(0,h.setLayerDimensions)(this.div,ht);for(const Et of At(this,lt).getEditors(this.pageIndex))this.add(Et);this.updateMode()}update({viewport:ht}){At(this,lt).commitOrRemove(),this.viewport=ht,(0,h.setLayerDimensions)(this.div,{rotation:ht.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:ht,pageHeight:Et}=this.viewport.rawDims;return[ht,Et]}};$=new WeakMap,_=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,ot=new WeakMap,at=new WeakMap,rt=new WeakMap,st=new WeakMap,lt=new WeakMap,mt=new WeakSet,Us=function(ht){switch(At(this,lt).getMode()){case o.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(ht);case o.AnnotationEditorType.INK:return new d.InkEditor(ht);case o.AnnotationEditorType.STAMP:return new g.StampEditor(ht)}return null},as=function(ht,Et){const yt=this.getNextId(),Ot=Jt(this,mt,Us).call(this,{parent:this,id:yt,x:ht.offsetX,y:ht.offsetY,uiManager:At(this,lt),isCentered:Et});return Ot&&this.add(Ot),Ot},zs=function(){const{x:ht,y:Et,width:yt,height:Ot}=this.div.getBoundingClientRect(),Dt=Math.max(0,ht),$t=Math.max(0,Et),Bt=Math.min(window.innerWidth,ht+yt),Vt=Math.min(window.innerHeight,Et+Ot),Rt=(Dt+Bt)/2-ht,vt=($t+Vt)/2-Et,[St,Pt]=this.viewport.rotation%180===0?[Rt,vt]:[vt,Rt];return{offsetX:St,offsetY:Pt}},Ws=function(){ln(this,rt,!0);for(const ht of At(this,ot).values())ht.isEmpty()&&ht.remove();ln(this,rt,!1)},qn(ct,"_initialized",!1);let j=ct;e.AnnotationEditorLayer=j},(i,e,s)=>{var g,j,$,_,et,tt,it,ot,at,rt,Jo,Zo,na,$r,Gs,ga,Hs;Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var o=s(1),a=s(5),c=s(4),d=s(29);const ct=class ct extends c.AnnotationEditor{constructor(Et){super({...Et,name:"freeTextEditor"});on(this,rt);on(this,g,this.editorDivBlur.bind(this));on(this,j,this.editorDivFocus.bind(this));on(this,$,this.editorDivInput.bind(this));on(this,_,this.editorDivKeydown.bind(this));on(this,et);on(this,tt,"");on(this,it,`${this.id}-editor`);on(this,ot);on(this,at,null);ln(this,et,Et.color||ct._defaultColor||c.AnnotationEditor._defaultLineColor),ln(this,ot,Et.fontSize||ct._defaultFontSize)}static get _keyboardManager(){const Et=ct.prototype,yt=$t=>$t.isEmpty(),Ot=a.AnnotationEditorUIManager.TRANSLATE_SMALL,Dt=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Et.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Et.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Et._translateEmpty,{args:[-Ot,0],checker:yt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Et._translateEmpty,{args:[-Dt,0],checker:yt}],[["ArrowRight","mac+ArrowRight"],Et._translateEmpty,{args:[Ot,0],checker:yt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Et._translateEmpty,{args:[Dt,0],checker:yt}],[["ArrowUp","mac+ArrowUp"],Et._translateEmpty,{args:[0,-Ot],checker:yt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Et._translateEmpty,{args:[0,-Dt],checker:yt}],[["ArrowDown","mac+ArrowDown"],Et._translateEmpty,{args:[0,Ot],checker:yt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Et._translateEmpty,{args:[0,Dt],checker:yt}]]))}static initialize(Et){c.AnnotationEditor.initialize(Et,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const yt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(yt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Et,yt){switch(Et){case o.AnnotationEditorParamsType.FREETEXT_SIZE:ct._defaultFontSize=yt;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:ct._defaultColor=yt;break}}updateParams(Et,yt){switch(Et){case o.AnnotationEditorParamsType.FREETEXT_SIZE:Jt(this,rt,Jo).call(this,yt);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:Jt(this,rt,Zo).call(this,yt);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,ct._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,ct._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,At(this,ot)],[o.AnnotationEditorParamsType.FREETEXT_COLOR,At(this,et)]]}_translateEmpty(Et,yt){this._uiManager.translateSelectedEditors(Et,yt,!0)}getInitialTranslation(){const Et=this.parentScale;return[-ct._internalPadding*Et,-(ct._internalPadding+At(this,ot))*Et]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",At(this,_)),this.editorDiv.addEventListener("focus",At(this,j)),this.editorDiv.addEventListener("blur",At(this,g)),this.editorDiv.addEventListener("input",At(this,$)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",At(this,it)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",At(this,_)),this.editorDiv.removeEventListener("focus",At(this,j)),this.editorDiv.removeEventListener("blur",At(this,g)),this.editorDiv.removeEventListener("input",At(this,$)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Et){this._focusEventsAllowed&&(super.focusin(Et),Et.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Et;if(this.width){Jt(this,rt,Hs).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Et=this._initialOptions)!=null&&Et.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Et=At(this,tt),yt=ln(this,tt,Jt(this,rt,na).call(this).trimEnd());if(Et===yt)return;const Ot=Dt=>{if(ln(this,tt,Dt),!Dt){this.remove();return}Jt(this,rt,Gs).call(this),this._uiManager.rebuild(this),Jt(this,rt,$r).call(this)};this.addCommands({cmd:()=>{Ot(yt)},undo:()=>{Ot(Et)},mustExec:!1}),Jt(this,rt,$r).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Et){this.enterInEditMode()}keydown(Et){Et.target===this.div&&Et.key==="Enter"&&(this.enterInEditMode(),Et.preventDefault())}editorDivKeydown(Et){ct._keyboardManager.exec(this,Et)}editorDivFocus(Et){this.isEditing=!0}editorDivBlur(Et){this.isEditing=!1}editorDivInput(Et){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Et,yt;this.width&&(Et=this.x,yt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",At(this,it)),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(Dt=>{var $t;return($t=this.editorDiv)==null?void 0:$t.setAttribute("aria-label",Dt)}),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(Dt=>{var $t;return($t=this.editorDiv)==null?void 0:$t.setAttribute("default-content",Dt)}),this.editorDiv.contentEditable=!0;const{style:Ot}=this.editorDiv;if(Ot.fontSize=`calc(${At(this,ot)}px * var(--scale-factor))`,Ot.color=At(this,et),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Dt,$t]=this.parentDimensions;if(this.annotationElementId){const{position:Bt}=At(this,at);let[Vt,Rt]=this.getInitialTranslation();[Vt,Rt]=this.pageTranslationToScreen(Vt,Rt);const[vt,St]=this.pageDimensions,[Pt,pt]=this.pageTranslation;let bt,Tt;switch(this.rotation){case 0:bt=Et+(Bt[0]-Pt)/vt,Tt=yt+this.height-(Bt[1]-pt)/St;break;case 90:bt=Et+(Bt[0]-Pt)/vt,Tt=yt-(Bt[1]-pt)/St,[Vt,Rt]=[Rt,-Vt];break;case 180:bt=Et-this.width+(Bt[0]-Pt)/vt,Tt=yt-(Bt[1]-pt)/St,[Vt,Rt]=[-Vt,-Rt];break;case 270:bt=Et+(Bt[0]-Pt-this.height*St)/vt,Tt=yt+(Bt[1]-pt-this.width*vt)/St,[Vt,Rt]=[-Rt,Vt];break}this.setAt(bt*Dt,Tt*$t,Vt,Rt)}else this.setAt(Et*Dt,yt*$t,this.width*Dt,this.height*$t);Jt(this,rt,Gs).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Et,yt,Ot){let Dt=null;if(Et instanceof d.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Bt,fontColor:Vt},rect:Rt,rotation:vt,id:St},textContent:Pt,textPosition:pt,parent:{page:{pageNumber:bt}}}=Et;if(!Pt||Pt.length===0)return null;Dt=Et={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(Vt),fontSize:Bt,value:Pt.join(`
`),position:pt,pageIndex:bt-1,rect:Rt,rotation:vt,id:St,deleted:!1}}const $t=super.deserialize(Et,yt,Ot);return ln($t,ot,Et.fontSize),ln($t,et,o.Util.makeHexColor(...Et.color)),ln($t,tt,Et.value),$t.annotationElementId=Et.id||null,ln($t,at,Dt),$t}serialize(Et=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const yt=ct._internalPadding*this.parentScale,Ot=this.getRect(yt,yt),Dt=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:At(this,et)),$t={annotationType:o.AnnotationEditorType.FREETEXT,color:Dt,fontSize:At(this,ot),value:At(this,tt),pageIndex:this.pageIndex,rect:Ot,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Et?$t:this.annotationElementId&&!Jt(this,rt,ga).call(this,$t)?null:($t.id=this.annotationElementId,$t)}};g=new WeakMap,j=new WeakMap,$=new WeakMap,_=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,ot=new WeakMap,at=new WeakMap,rt=new WeakSet,Jo=function(Et){const yt=Dt=>{this.editorDiv.style.fontSize=`calc(${Dt}px * var(--scale-factor))`,this.translate(0,-(Dt-At(this,ot))*this.parentScale),ln(this,ot,Dt),Jt(this,rt,$r).call(this)},Ot=At(this,ot);this.addCommands({cmd:()=>{yt(Et)},undo:()=>{yt(Ot)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Zo=function(Et){const yt=At(this,et);this.addCommands({cmd:()=>{ln(this,et,this.editorDiv.style.color=Et)},undo:()=>{ln(this,et,this.editorDiv.style.color=yt)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},na=function(){const Et=this.editorDiv.getElementsByTagName("div");if(Et.length===0)return this.editorDiv.innerText;const yt=[];for(const Ot of Et)yt.push(Ot.innerText.replace(/\r\n?|\n/,""));return yt.join(`
`)},$r=function(){const[Et,yt]=this.parentDimensions;let Ot;if(this.isAttachedToDOM)Ot=this.div.getBoundingClientRect();else{const{currentLayer:Dt,div:$t}=this,Bt=$t.style.display;$t.style.display="hidden",Dt.div.append(this.div),Ot=$t.getBoundingClientRect(),$t.remove(),$t.style.display=Bt}this.rotation%180===this.parentRotation%180?(this.width=Ot.width/Et,this.height=Ot.height/yt):(this.width=Ot.height/Et,this.height=Ot.width/yt),this.fixAndSetPosition()},Gs=function(){if(this.editorDiv.replaceChildren(),!!At(this,tt))for(const Et of At(this,tt).split(`
`)){const yt=document.createElement("div");yt.append(Et?document.createTextNode(Et):document.createElement("br")),this.editorDiv.append(yt)}},ga=function(Et){const{value:yt,fontSize:Ot,color:Dt,rect:$t,pageIndex:Bt}=At(this,at);return Et.value!==yt||Et.fontSize!==Ot||Et.rect.some((Vt,Rt)=>Math.abs(Vt-$t[Rt])>=1)||Et.color.some((Vt,Rt)=>Vt!==Dt[Rt])||Et.pageIndex!==Bt},Hs=function(Et=!1){if(!this.annotationElementId)return;if(Jt(this,rt,$r).call(this),!Et&&(this.width===0||this.height===0)){setTimeout(()=>Jt(this,rt,Hs).call(this,!0),0);return}const yt=ct._internalPadding*this.parentScale;At(this,at).rect=this.getRect(yt,yt)},qn(ct,"_freeTextDefaultContent",""),qn(ct,"_internalPadding",0),qn(ct,"_defaultColor",null),qn(ct,"_defaultFontSize",10),qn(ct,"_type","freetext");let h=ct;e.FreeTextEditor=h},(i,e,s)=>{var Tt,kt,_r,xa,Kt,Yt,rn,cn,sn,dn,Ht,Xt,It,Nt,Gt,tn,fn,yn,gn,Qt,Wt,Zt,ba,ls,qs,Ks,Pn,Vn,Bn,mn,en,nn,Tn,Xs,Un,Ut,pn,bn,$a,Ys;Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var o=s(1),a=s(6),c=s(3),d=s(30),h=s(31),g=s(32);const j=1e3,$=9,_=new WeakSet;function et(Rn){return{width:Rn[2]-Rn[0],height:Rn[3]-Rn[1]}}class tt{static create(jt){switch(jt.data.annotationType){case o.AnnotationType.LINK:return new ot(jt);case o.AnnotationType.TEXT:return new at(jt);case o.AnnotationType.WIDGET:switch(jt.data.fieldType){case"Tx":return new st(jt);case"Btn":return jt.data.radioButton?new ft(jt):jt.data.checkBox?new mt(jt):new gt(jt);case"Ch":return new dt(jt);case"Sig":return new lt(jt)}return new rt(jt);case o.AnnotationType.POPUP:return new ut(jt);case o.AnnotationType.FREETEXT:return new _t(jt);case o.AnnotationType.LINE:return new ht(jt);case o.AnnotationType.SQUARE:return new Et(jt);case o.AnnotationType.CIRCLE:return new yt(jt);case o.AnnotationType.POLYLINE:return new Ot(jt);case o.AnnotationType.CARET:return new $t(jt);case o.AnnotationType.INK:return new Bt(jt);case o.AnnotationType.POLYGON:return new Dt(jt);case o.AnnotationType.HIGHLIGHT:return new Vt(jt);case o.AnnotationType.UNDERLINE:return new Rt(jt);case o.AnnotationType.SQUIGGLY:return new vt(jt);case o.AnnotationType.STRIKEOUT:return new St(jt);case o.AnnotationType.STAMP:return new Pt(jt);case o.AnnotationType.FILEATTACHMENT:return new pt(jt);default:return new it(jt)}}}const Ct=class Ct{constructor(jt,{isRenderable:Lt=!1,ignoreBorder:qt=!1,createQuadrilaterals:an=!1}={}){on(this,Tt,!1);this.isRenderable=Lt,this.data=jt.data,this.layer=jt.layer,this.linkService=jt.linkService,this.downloadManager=jt.downloadManager,this.imageResourcesPath=jt.imageResourcesPath,this.renderForms=jt.renderForms,this.svgFactory=jt.svgFactory,this.annotationStorage=jt.annotationStorage,this.enableScripting=jt.enableScripting,this.hasJSActions=jt.hasJSActions,this._fieldObjects=jt.fieldObjects,this.parent=jt.parent,Lt&&(this.container=this._createContainer(qt)),an&&this._createQuadrilaterals()}static _hasPopupData({titleObj:jt,contentsObj:Lt,richText:qt}){return!!(jt!=null&&jt.str||Lt!=null&&Lt.str||qt!=null&&qt.str)}get hasPopupData(){return Ct._hasPopupData(this.data)}_createContainer(jt){const{data:Lt,parent:{page:qt,viewport:an}}=this,hn=document.createElement("section");hn.setAttribute("data-annotation-id",Lt.id),this instanceof rt||(hn.tabIndex=j),hn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&hn.setAttribute("aria-haspopup","dialog"),Lt.noRotate&&hn.classList.add("norotate");const{pageWidth:_n,pageHeight:En,pageX:On,pageY:Mn}=an.rawDims;if(!Lt.rect||this instanceof ut){const{rotation:Nn}=Lt;return!Lt.hasOwnCanvas&&Nn!==0&&this.setRotation(Nn,hn),hn}const{width:wn,height:jn}=et(Lt.rect),Dn=o.Util.normalizeRect([Lt.rect[0],qt.view[3]-Lt.rect[1]+qt.view[1],Lt.rect[2],qt.view[3]-Lt.rect[3]+qt.view[1]]);if(!jt&&Lt.borderStyle.width>0){hn.style.borderWidth=`${Lt.borderStyle.width}px`;const Nn=Lt.borderStyle.horizontalCornerRadius,$n=Lt.borderStyle.verticalCornerRadius;if(Nn>0||$n>0){const Gn=`calc(${Nn}px * var(--scale-factor)) / calc(${$n}px * var(--scale-factor))`;hn.style.borderRadius=Gn}else if(this instanceof ft){const Gn=`calc(${wn}px * var(--scale-factor)) / calc(${jn}px * var(--scale-factor))`;hn.style.borderRadius=Gn}switch(Lt.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:hn.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:hn.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:hn.style.borderBottomStyle="solid";break}const Wn=Lt.borderColor||null;Wn?(ln(this,Tt,!0),hn.style.borderColor=o.Util.makeHexColor(Wn[0]|0,Wn[1]|0,Wn[2]|0)):hn.style.borderWidth=0}hn.style.left=`${100*(Dn[0]-On)/_n}%`,hn.style.top=`${100*(Dn[1]-Mn)/En}%`;const{rotation:Ln}=Lt;return Lt.hasOwnCanvas||Ln===0?(hn.style.width=`${100*wn/_n}%`,hn.style.height=`${100*jn/En}%`):this.setRotation(Ln,hn),hn}setRotation(jt,Lt=this.container){if(!this.data.rect)return;const{pageWidth:qt,pageHeight:an}=this.parent.viewport.rawDims,{width:hn,height:_n}=et(this.data.rect);let En,On;jt%180===0?(En=100*hn/qt,On=100*_n/an):(En=100*_n/qt,On=100*hn/an),Lt.style.width=`${En}%`,Lt.style.height=`${On}%`,Lt.setAttribute("data-main-rotation",(360-jt)%360)}get _commonActions(){const jt=(Lt,qt,an)=>{const hn=an.detail[Lt],_n=hn[0],En=hn.slice(1);an.target.style[qt]=d.ColorConverters[`${_n}_HTML`](En),this.annotationStorage.setValue(this.data.id,{[qt]:d.ColorConverters[`${_n}_rgb`](En)})};return(0,o.shadow)(this,"_commonActions",{display:Lt=>{const{display:qt}=Lt.detail,an=qt%2===1;this.container.style.visibility=an?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:an,noPrint:qt===1||qt===2})},print:Lt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!Lt.detail.print})},hidden:Lt=>{const{hidden:qt}=Lt.detail;this.container.style.visibility=qt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:qt,noView:qt})},focus:Lt=>{setTimeout(()=>Lt.target.focus({preventScroll:!1}),0)},userName:Lt=>{Lt.target.title=Lt.detail.userName},readonly:Lt=>{Lt.target.disabled=Lt.detail.readonly},required:Lt=>{this._setRequired(Lt.target,Lt.detail.required)},bgColor:Lt=>{jt("bgColor","backgroundColor",Lt)},fillColor:Lt=>{jt("fillColor","backgroundColor",Lt)},fgColor:Lt=>{jt("fgColor","color",Lt)},textColor:Lt=>{jt("textColor","color",Lt)},borderColor:Lt=>{jt("borderColor","borderColor",Lt)},strokeColor:Lt=>{jt("strokeColor","borderColor",Lt)},rotation:Lt=>{const qt=Lt.detail.rotation;this.setRotation(qt),this.annotationStorage.setValue(this.data.id,{rotation:qt})}})}_dispatchEventFromSandbox(jt,Lt){const qt=this._commonActions;for(const an of Object.keys(Lt.detail)){const hn=jt[an]||qt[an];hn==null||hn(Lt)}}_setDefaultPropertiesFromJS(jt){if(!this.enableScripting)return;const Lt=this.annotationStorage.getRawValue(this.data.id);if(!Lt)return;const qt=this._commonActions;for(const[an,hn]of Object.entries(Lt)){const _n=qt[an];if(_n){const En={detail:{[an]:hn},target:jt};_n(En),delete Lt[an]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:jt}=this.data;if(!jt)return;const[Lt,qt,an,hn]=this.data.rect;if(jt.length===1){const[,{x:$n,y:Wn},{x:Gn,y:Jn}]=jt[0];if(an===$n&&hn===Wn&&Lt===Gn&&qt===Jn)return}const{style:_n}=this.container;let En;if(At(this,Tt)){const{borderColor:$n,borderWidth:Wn}=_n;_n.borderWidth=0,En=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${$n}" stroke-width="${Wn}">`],this.container.classList.add("hasBorder")}const On=an-Lt,Mn=hn-qt,{svgFactory:wn}=this,jn=wn.createElement("svg");jn.classList.add("quadrilateralsContainer"),jn.setAttribute("width",0),jn.setAttribute("height",0);const Dn=wn.createElement("defs");jn.append(Dn);const Ln=wn.createElement("clipPath"),Nn=`clippath_${this.data.id}`;Ln.setAttribute("id",Nn),Ln.setAttribute("clipPathUnits","objectBoundingBox"),Dn.append(Ln);for(const[,{x:$n,y:Wn},{x:Gn,y:Jn}]of jt){const Xn=wn.createElement("rect"),nr=(Gn-Lt)/On,ir=(hn-Wn)/Mn,or=($n-Gn)/On,Pr=(Wn-Jn)/Mn;Xn.setAttribute("x",nr),Xn.setAttribute("y",ir),Xn.setAttribute("width",or),Xn.setAttribute("height",Pr),Ln.append(Xn),En==null||En.push(`<rect vector-effect="non-scaling-stroke" x="${nr}" y="${ir}" width="${or}" height="${Pr}"/>`)}At(this,Tt)&&(En.push("</g></svg>')"),_n.backgroundImage=En.join("")),this.container.append(jn),this.container.style.clipPath=`url(#${Nn})`}_createPopup(){const{container:jt,data:Lt}=this;jt.setAttribute("aria-haspopup","dialog");const qt=new ut({data:{color:Lt.color,titleObj:Lt.titleObj,modificationDate:Lt.modificationDate,contentsObj:Lt.contentsObj,richText:Lt.richText,parentRect:Lt.rect,borderStyle:0,id:`popup_${Lt.id}`,rotation:Lt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(qt.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(jt,Lt=null){const qt=[];if(this._fieldObjects){const an=this._fieldObjects[jt];if(an)for(const{page:hn,id:_n,exportValues:En}of an){if(hn===-1||_n===Lt)continue;const On=typeof En=="string"?En:null,Mn=document.querySelector(`[data-element-id="${_n}"]`);if(Mn&&!_.has(Mn)){(0,o.warn)(`_getElementsByName - element not allowed: ${_n}`);continue}qt.push({id:_n,exportValue:On,domElement:Mn})}return qt}for(const an of document.getElementsByName(jt)){const{exportValue:hn}=an,_n=an.getAttribute("data-element-id");_n!==Lt&&_.has(an)&&qt.push({id:_n,exportValue:hn,domElement:an})}return qt}show(){var jt;this.container&&(this.container.hidden=!1),(jt=this.popup)==null||jt.maybeShow()}hide(){var jt;this.container&&(this.container.hidden=!0),(jt=this.popup)==null||jt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const jt=this.getElementsToTriggerPopup();if(Array.isArray(jt))for(const Lt of jt)Lt.classList.add("highlightArea");else jt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:jt,data:{id:Lt}}=this;this.container.addEventListener("dblclick",()=>{var qt;(qt=this.linkService.eventBus)==null||qt.dispatch("switchannotationeditormode",{source:this,mode:jt,editId:Lt})})}};Tt=new WeakMap;let it=Ct;class ot extends it{constructor(Lt,qt=null){super(Lt,{isRenderable:!0,ignoreBorder:!!(qt!=null&&qt.ignoreBorder),createQuadrilaterals:!0});on(this,kt);this.isTooltipOnly=Lt.data.isTooltipOnly}render(){const{data:Lt,linkService:qt}=this,an=document.createElement("a");an.setAttribute("data-element-id",Lt.id);let hn=!1;return Lt.url?(qt.addLinkAttributes(an,Lt.url,Lt.newWindow),hn=!0):Lt.action?(this._bindNamedAction(an,Lt.action),hn=!0):Lt.attachment?(this._bindAttachment(an,Lt.attachment),hn=!0):Lt.setOCGState?(Jt(this,kt,xa).call(this,an,Lt.setOCGState),hn=!0):Lt.dest?(this._bindLink(an,Lt.dest),hn=!0):(Lt.actions&&(Lt.actions.Action||Lt.actions["Mouse Up"]||Lt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(an,Lt),hn=!0),Lt.resetForm?(this._bindResetFormAction(an,Lt.resetForm),hn=!0):this.isTooltipOnly&&!hn&&(this._bindLink(an,""),hn=!0)),this.container.classList.add("linkAnnotation"),hn&&this.container.append(an),this.container}_bindLink(Lt,qt){Lt.href=this.linkService.getDestinationHash(qt),Lt.onclick=()=>(qt&&this.linkService.goToDestination(qt),!1),(qt||qt==="")&&Jt(this,kt,_r).call(this)}_bindNamedAction(Lt,qt){Lt.href=this.linkService.getAnchorUrl(""),Lt.onclick=()=>(this.linkService.executeNamedAction(qt),!1),Jt(this,kt,_r).call(this)}_bindAttachment(Lt,qt){Lt.href=this.linkService.getAnchorUrl(""),Lt.onclick=()=>{var an;return(an=this.downloadManager)==null||an.openOrDownloadData(this.container,qt.content,qt.filename),!1},Jt(this,kt,_r).call(this)}_bindJSAction(Lt,qt){Lt.href=this.linkService.getAnchorUrl("");const an=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const hn of Object.keys(qt.actions)){const _n=an.get(hn);_n&&(Lt[_n]=()=>{var En;return(En=this.linkService.eventBus)==null||En.dispatch("dispatcheventinsandbox",{source:this,detail:{id:qt.id,name:hn}}),!1})}Lt.onclick||(Lt.onclick=()=>!1),Jt(this,kt,_r).call(this)}_bindResetFormAction(Lt,qt){const an=Lt.onclick;if(an||(Lt.href=this.linkService.getAnchorUrl("")),Jt(this,kt,_r).call(this),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),an||(Lt.onclick=()=>!1);return}Lt.onclick=()=>{var jn;an==null||an();const{fields:hn,refs:_n,include:En}=qt,On=[];if(hn.length!==0||_n.length!==0){const Dn=new Set(_n);for(const Ln of hn){const Nn=this._fieldObjects[Ln]||[];for(const{id:$n}of Nn)Dn.add($n)}for(const Ln of Object.values(this._fieldObjects))for(const Nn of Ln)Dn.has(Nn.id)===En&&On.push(Nn)}else for(const Dn of Object.values(this._fieldObjects))On.push(...Dn);const Mn=this.annotationStorage,wn=[];for(const Dn of On){const{id:Ln}=Dn;switch(wn.push(Ln),Dn.type){case"text":{const $n=Dn.defaultValue||"";Mn.setValue(Ln,{value:$n});break}case"checkbox":case"radiobutton":{const $n=Dn.defaultValue===Dn.exportValues;Mn.setValue(Ln,{value:$n});break}case"combobox":case"listbox":{const $n=Dn.defaultValue||"";Mn.setValue(Ln,{value:$n});break}default:continue}const Nn=document.querySelector(`[data-element-id="${Ln}"]`);if(Nn){if(!_.has(Nn)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${Ln}`);continue}}else continue;Nn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((jn=this.linkService.eventBus)==null||jn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:wn,name:"ResetForm"}})),!1}}}kt=new WeakSet,_r=function(){this.container.setAttribute("data-internal-link","")},xa=function(Lt,qt){Lt.href=this.linkService.getAnchorUrl(""),Lt.onclick=()=>(this.linkService.executeSetOCGState(qt),!1),Jt(this,kt,_r).call(this)};class at extends it{constructor(jt){super(jt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const jt=document.createElement("img");return jt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",jt.alt="[{{type}} Annotation]",jt.dataset.l10nId="text_annotation_type",jt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(jt),this.container}}class rt extends it{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(jt){var Lt;this.data.hasOwnCanvas&&(((Lt=jt.previousSibling)==null?void 0:Lt.nodeName)==="CANVAS"&&(jt.previousSibling.hidden=!0),jt.hidden=!1)}_getKeyModifier(jt){const{isWin:Lt,isMac:qt}=o.FeatureTest.platform;return Lt&&jt.ctrlKey||qt&&jt.metaKey}_setEventListener(jt,Lt,qt,an,hn){qt.includes("mouse")?jt.addEventListener(qt,_n=>{var En;(En=this.linkService.eventBus)==null||En.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:an,value:hn(_n),shift:_n.shiftKey,modifier:this._getKeyModifier(_n)}})}):jt.addEventListener(qt,_n=>{var En;if(qt==="blur"){if(!Lt.focused||!_n.relatedTarget)return;Lt.focused=!1}else if(qt==="focus"){if(Lt.focused)return;Lt.focused=!0}hn&&((En=this.linkService.eventBus)==null||En.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:an,value:hn(_n)}}))})}_setEventListeners(jt,Lt,qt,an){var hn,_n,En;for(const[On,Mn]of qt)(Mn==="Action"||(hn=this.data.actions)!=null&&hn[Mn])&&((Mn==="Focus"||Mn==="Blur")&&(Lt||(Lt={focused:!1})),this._setEventListener(jt,Lt,On,Mn,an),Mn==="Focus"&&!((_n=this.data.actions)!=null&&_n.Blur)?this._setEventListener(jt,Lt,"blur","Blur",null):Mn==="Blur"&&!((En=this.data.actions)!=null&&En.Focus)&&this._setEventListener(jt,Lt,"focus","Focus",null))}_setBackgroundColor(jt){const Lt=this.data.backgroundColor||null;jt.style.backgroundColor=Lt===null?"transparent":o.Util.makeHexColor(Lt[0],Lt[1],Lt[2])}_setTextStyle(jt){const Lt=["left","center","right"],{fontColor:qt}=this.data.defaultAppearanceData,an=this.data.defaultAppearanceData.fontSize||$,hn=jt.style;let _n;const En=2,On=Mn=>Math.round(10*Mn)/10;if(this.data.multiLine){const Mn=Math.abs(this.data.rect[3]-this.data.rect[1]-En),wn=Math.round(Mn/(o.LINE_FACTOR*an))||1,jn=Mn/wn;_n=Math.min(an,On(jn/o.LINE_FACTOR))}else{const Mn=Math.abs(this.data.rect[3]-this.data.rect[1]-En);_n=Math.min(an,On(Mn/o.LINE_FACTOR))}hn.fontSize=`calc(${_n}px * var(--scale-factor))`,hn.color=o.Util.makeHexColor(qt[0],qt[1],qt[2]),this.data.textAlignment!==null&&(hn.textAlign=Lt[this.data.textAlignment])}_setRequired(jt,Lt){Lt?jt.setAttribute("required",!0):jt.removeAttribute("required"),jt.setAttribute("aria-required",Lt)}}class st extends rt{constructor(jt){const Lt=jt.renderForms||!jt.data.hasAppearance&&!!jt.data.fieldValue;super(jt,{isRenderable:Lt})}setPropertyOnSiblings(jt,Lt,qt,an){const hn=this.annotationStorage;for(const _n of this._getElementsByName(jt.name,jt.id))_n.domElement&&(_n.domElement[Lt]=qt),hn.setValue(_n.id,{[an]:qt})}render(){var an,hn;const jt=this.annotationStorage,Lt=this.data.id;this.container.classList.add("textWidgetAnnotation");let qt=null;if(this.renderForms){const _n=jt.getValue(Lt,{value:this.data.fieldValue});let En=_n.value||"";const On=jt.getValue(Lt,{charLimit:this.data.maxLen}).charLimit;On&&En.length>On&&(En=En.slice(0,On));let Mn=_n.formattedValue||((an=this.data.textContent)==null?void 0:an.join(`
`))||null;Mn&&this.data.comb&&(Mn=Mn.replaceAll(/\s+/g,""));const wn={userValue:En,formattedValue:Mn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(qt=document.createElement("textarea"),qt.textContent=Mn??En,this.data.doNotScroll&&(qt.style.overflowY="hidden")):(qt=document.createElement("input"),qt.type="text",qt.setAttribute("value",Mn??En),this.data.doNotScroll&&(qt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(qt.hidden=!0),_.add(qt),qt.setAttribute("data-element-id",Lt),qt.disabled=this.data.readOnly,qt.name=this.data.fieldName,qt.tabIndex=j,this._setRequired(qt,this.data.required),On&&(qt.maxLength=On),qt.addEventListener("input",Dn=>{jt.setValue(Lt,{value:Dn.target.value}),this.setPropertyOnSiblings(qt,"value",Dn.target.value,"value"),wn.formattedValue=null}),qt.addEventListener("resetform",Dn=>{const Ln=this.data.defaultFieldValue??"";qt.value=wn.userValue=Ln,wn.formattedValue=null});let jn=Dn=>{const{formattedValue:Ln}=wn;Ln!=null&&(Dn.target.value=Ln),Dn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){qt.addEventListener("focus",Ln=>{if(wn.focused)return;const{target:Nn}=Ln;wn.userValue&&(Nn.value=wn.userValue),wn.lastCommittedValue=Nn.value,wn.commitKey=1,wn.focused=!0}),qt.addEventListener("updatefromsandbox",Ln=>{this.showElementAndHideCanvas(Ln.target);const Nn={value($n){wn.userValue=$n.detail.value??"",jt.setValue(Lt,{value:wn.userValue.toString()}),$n.target.value=wn.userValue},formattedValue($n){const{formattedValue:Wn}=$n.detail;wn.formattedValue=Wn,Wn!=null&&$n.target!==document.activeElement&&($n.target.value=Wn),jt.setValue(Lt,{formattedValue:Wn})},selRange($n){$n.target.setSelectionRange(...$n.detail.selRange)},charLimit:$n=>{var Xn;const{charLimit:Wn}=$n.detail,{target:Gn}=$n;if(Wn===0){Gn.removeAttribute("maxLength");return}Gn.setAttribute("maxLength",Wn);let Jn=wn.userValue;!Jn||Jn.length<=Wn||(Jn=Jn.slice(0,Wn),Gn.value=wn.userValue=Jn,jt.setValue(Lt,{value:Jn}),(Xn=this.linkService.eventBus)==null||Xn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Lt,name:"Keystroke",value:Jn,willCommit:!0,commitKey:1,selStart:Gn.selectionStart,selEnd:Gn.selectionEnd}}))}};this._dispatchEventFromSandbox(Nn,Ln)}),qt.addEventListener("keydown",Ln=>{var Wn;wn.commitKey=1;let Nn=-1;if(Ln.key==="Escape"?Nn=0:Ln.key==="Enter"&&!this.data.multiLine?Nn=2:Ln.key==="Tab"&&(wn.commitKey=3),Nn===-1)return;const{value:$n}=Ln.target;wn.lastCommittedValue!==$n&&(wn.lastCommittedValue=$n,wn.userValue=$n,(Wn=this.linkService.eventBus)==null||Wn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Lt,name:"Keystroke",value:$n,willCommit:!0,commitKey:Nn,selStart:Ln.target.selectionStart,selEnd:Ln.target.selectionEnd}}))});const Dn=jn;jn=null,qt.addEventListener("blur",Ln=>{var $n;if(!wn.focused||!Ln.relatedTarget)return;wn.focused=!1;const{value:Nn}=Ln.target;wn.userValue=Nn,wn.lastCommittedValue!==Nn&&(($n=this.linkService.eventBus)==null||$n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Lt,name:"Keystroke",value:Nn,willCommit:!0,commitKey:wn.commitKey,selStart:Ln.target.selectionStart,selEnd:Ln.target.selectionEnd}})),Dn(Ln)}),(hn=this.data.actions)!=null&&hn.Keystroke&&qt.addEventListener("beforeinput",Ln=>{var ir;wn.lastCommittedValue=null;const{data:Nn,target:$n}=Ln,{value:Wn,selectionStart:Gn,selectionEnd:Jn}=$n;let Xn=Gn,nr=Jn;switch(Ln.inputType){case"deleteWordBackward":{const or=Wn.substring(0,Gn).match(/\w*[^\w]*$/);or&&(Xn-=or[0].length);break}case"deleteWordForward":{const or=Wn.substring(Gn).match(/^[^\w]*\w*/);or&&(nr+=or[0].length);break}case"deleteContentBackward":Gn===Jn&&(Xn-=1);break;case"deleteContentForward":Gn===Jn&&(nr+=1);break}Ln.preventDefault(),(ir=this.linkService.eventBus)==null||ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Lt,name:"Keystroke",value:Wn,change:Nn||"",willCommit:!1,selStart:Xn,selEnd:nr}})}),this._setEventListeners(qt,wn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ln=>Ln.target.value)}if(jn&&qt.addEventListener("blur",jn),this.data.comb){const Ln=(this.data.rect[2]-this.data.rect[0])/On;qt.classList.add("comb"),qt.style.letterSpacing=`calc(${Ln}px * var(--scale-factor) - 1ch)`}}else qt=document.createElement("div"),qt.textContent=this.data.fieldValue,qt.style.verticalAlign="middle",qt.style.display="table-cell";return this._setTextStyle(qt),this._setBackgroundColor(qt),this._setDefaultPropertiesFromJS(qt),this.container.append(qt),this.container}}class lt extends rt{constructor(jt){super(jt,{isRenderable:!!jt.data.hasOwnCanvas})}}class mt extends rt{constructor(jt){super(jt,{isRenderable:jt.renderForms})}render(){const jt=this.annotationStorage,Lt=this.data,qt=Lt.id;let an=jt.getValue(qt,{value:Lt.exportValue===Lt.fieldValue}).value;typeof an=="string"&&(an=an!=="Off",jt.setValue(qt,{value:an})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const hn=document.createElement("input");return _.add(hn),hn.setAttribute("data-element-id",qt),hn.disabled=Lt.readOnly,this._setRequired(hn,this.data.required),hn.type="checkbox",hn.name=Lt.fieldName,an&&hn.setAttribute("checked",!0),hn.setAttribute("exportValue",Lt.exportValue),hn.tabIndex=j,hn.addEventListener("change",_n=>{const{name:En,checked:On}=_n.target;for(const Mn of this._getElementsByName(En,qt)){const wn=On&&Mn.exportValue===Lt.exportValue;Mn.domElement&&(Mn.domElement.checked=wn),jt.setValue(Mn.id,{value:wn})}jt.setValue(qt,{value:On})}),hn.addEventListener("resetform",_n=>{const En=Lt.defaultFieldValue||"Off";_n.target.checked=En===Lt.exportValue}),this.enableScripting&&this.hasJSActions&&(hn.addEventListener("updatefromsandbox",_n=>{const En={value(On){On.target.checked=On.detail.value!=="Off",jt.setValue(qt,{value:On.target.checked})}};this._dispatchEventFromSandbox(En,_n)}),this._setEventListeners(hn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_n=>_n.target.checked)),this._setBackgroundColor(hn),this._setDefaultPropertiesFromJS(hn),this.container.append(hn),this.container}}class ft extends rt{constructor(jt){super(jt,{isRenderable:jt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const jt=this.annotationStorage,Lt=this.data,qt=Lt.id;let an=jt.getValue(qt,{value:Lt.fieldValue===Lt.buttonValue}).value;typeof an=="string"&&(an=an!==Lt.buttonValue,jt.setValue(qt,{value:an}));const hn=document.createElement("input");if(_.add(hn),hn.setAttribute("data-element-id",qt),hn.disabled=Lt.readOnly,this._setRequired(hn,this.data.required),hn.type="radio",hn.name=Lt.fieldName,an&&hn.setAttribute("checked",!0),hn.tabIndex=j,hn.addEventListener("change",_n=>{const{name:En,checked:On}=_n.target;for(const Mn of this._getElementsByName(En,qt))jt.setValue(Mn.id,{value:!1});jt.setValue(qt,{value:On})}),hn.addEventListener("resetform",_n=>{const En=Lt.defaultFieldValue;_n.target.checked=En!=null&&En===Lt.buttonValue}),this.enableScripting&&this.hasJSActions){const _n=Lt.buttonValue;hn.addEventListener("updatefromsandbox",En=>{const On={value:Mn=>{const wn=_n===Mn.detail.value;for(const jn of this._getElementsByName(Mn.target.name)){const Dn=wn&&jn.id===qt;jn.domElement&&(jn.domElement.checked=Dn),jt.setValue(jn.id,{value:Dn})}}};this._dispatchEventFromSandbox(On,En)}),this._setEventListeners(hn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],En=>En.target.checked)}return this._setBackgroundColor(hn),this._setDefaultPropertiesFromJS(hn),this.container.append(hn),this.container}}class gt extends ot{constructor(jt){super(jt,{ignoreBorder:jt.data.hasAppearance})}render(){const jt=super.render();jt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(jt.title=this.data.alternativeText);const Lt=jt.lastChild;return this.enableScripting&&this.hasJSActions&&Lt&&(this._setDefaultPropertiesFromJS(Lt),Lt.addEventListener("updatefromsandbox",qt=>{this._dispatchEventFromSandbox({},qt)})),jt}}class dt extends rt{constructor(jt){super(jt,{isRenderable:jt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const jt=this.annotationStorage,Lt=this.data.id,qt=jt.getValue(Lt,{value:this.data.fieldValue}),an=document.createElement("select");_.add(an),an.setAttribute("data-element-id",Lt),an.disabled=this.data.readOnly,this._setRequired(an,this.data.required),an.name=this.data.fieldName,an.tabIndex=j;let hn=this.data.combo&&this.data.options.length>0;this.data.combo||(an.size=this.data.options.length,this.data.multiSelect&&(an.multiple=!0)),an.addEventListener("resetform",wn=>{const jn=this.data.defaultFieldValue;for(const Dn of an.options)Dn.selected=Dn.value===jn});for(const wn of this.data.options){const jn=document.createElement("option");jn.textContent=wn.displayValue,jn.value=wn.exportValue,qt.value.includes(wn.exportValue)&&(jn.setAttribute("selected",!0),hn=!1),an.append(jn)}let _n=null;if(hn){const wn=document.createElement("option");wn.value=" ",wn.setAttribute("hidden",!0),wn.setAttribute("selected",!0),an.prepend(wn),_n=()=>{wn.remove(),an.removeEventListener("input",_n),_n=null},an.addEventListener("input",_n)}const En=wn=>{const jn=wn?"value":"textContent",{options:Dn,multiple:Ln}=an;return Ln?Array.prototype.filter.call(Dn,Nn=>Nn.selected).map(Nn=>Nn[jn]):Dn.selectedIndex===-1?null:Dn[Dn.selectedIndex][jn]};let On=En(!1);const Mn=wn=>{const jn=wn.target.options;return Array.prototype.map.call(jn,Dn=>({displayValue:Dn.textContent,exportValue:Dn.value}))};return this.enableScripting&&this.hasJSActions?(an.addEventListener("updatefromsandbox",wn=>{const jn={value(Dn){_n==null||_n();const Ln=Dn.detail.value,Nn=new Set(Array.isArray(Ln)?Ln:[Ln]);for(const $n of an.options)$n.selected=Nn.has($n.value);jt.setValue(Lt,{value:En(!0)}),On=En(!1)},multipleSelection(Dn){an.multiple=!0},remove(Dn){const Ln=an.options,Nn=Dn.detail.remove;Ln[Nn].selected=!1,an.remove(Nn),Ln.length>0&&Array.prototype.findIndex.call(Ln,Wn=>Wn.selected)===-1&&(Ln[0].selected=!0),jt.setValue(Lt,{value:En(!0),items:Mn(Dn)}),On=En(!1)},clear(Dn){for(;an.length!==0;)an.remove(0);jt.setValue(Lt,{value:null,items:[]}),On=En(!1)},insert(Dn){const{index:Ln,displayValue:Nn,exportValue:$n}=Dn.detail.insert,Wn=an.children[Ln],Gn=document.createElement("option");Gn.textContent=Nn,Gn.value=$n,Wn?Wn.before(Gn):an.append(Gn),jt.setValue(Lt,{value:En(!0),items:Mn(Dn)}),On=En(!1)},items(Dn){const{items:Ln}=Dn.detail;for(;an.length!==0;)an.remove(0);for(const Nn of Ln){const{displayValue:$n,exportValue:Wn}=Nn,Gn=document.createElement("option");Gn.textContent=$n,Gn.value=Wn,an.append(Gn)}an.options.length>0&&(an.options[0].selected=!0),jt.setValue(Lt,{value:En(!0),items:Mn(Dn)}),On=En(!1)},indices(Dn){const Ln=new Set(Dn.detail.indices);for(const Nn of Dn.target.options)Nn.selected=Ln.has(Nn.index);jt.setValue(Lt,{value:En(!0)}),On=En(!1)},editable(Dn){Dn.target.disabled=!Dn.detail.editable}};this._dispatchEventFromSandbox(jn,wn)}),an.addEventListener("input",wn=>{var Dn;const jn=En(!0);jt.setValue(Lt,{value:jn}),wn.preventDefault(),(Dn=this.linkService.eventBus)==null||Dn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Lt,name:"Keystroke",value:On,changeEx:jn,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(an,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],wn=>wn.target.value)):an.addEventListener("input",function(wn){jt.setValue(Lt,{value:En(!0)})}),this.data.combo&&this._setTextStyle(an),this._setBackgroundColor(an),this._setDefaultPropertiesFromJS(an),this.container.append(an),this.container}}class ut extends it{constructor(jt){const{data:Lt,elements:qt}=jt;super(jt,{isRenderable:it._hasPopupData(Lt)}),this.elements=qt}render(){this.container.classList.add("popupAnnotation");const jt=new ct({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),Lt=[];for(const qt of this.elements)qt.popup=jt,Lt.push(qt.data.id),qt.addHighlightArea();return this.container.setAttribute("aria-controls",Lt.map(qt=>`${o.AnnotationPrefix}${qt}`).join(",")),this.container}}class ct{constructor({container:jt,color:Lt,elements:qt,titleObj:an,modificationDate:hn,contentsObj:_n,richText:En,parent:On,rect:Mn,parentRect:wn,open:jn}){on(this,Zt);on(this,Kt,null);on(this,Yt,Jt(this,Zt,ba).bind(this));on(this,rn,Jt(this,Zt,Ks).bind(this));on(this,cn,Jt(this,Zt,qs).bind(this));on(this,sn,Jt(this,Zt,ls).bind(this));on(this,dn,null);on(this,Ht,null);on(this,Xt,null);on(this,It,null);on(this,Nt,null);on(this,Gt,null);on(this,tn,!1);on(this,fn,null);on(this,yn,null);on(this,gn,null);on(this,Qt,null);on(this,Wt,!1);var Ln;ln(this,Ht,jt),ln(this,Qt,an),ln(this,Xt,_n),ln(this,gn,En),ln(this,Nt,On),ln(this,dn,Lt),ln(this,yn,Mn),ln(this,Gt,wn),ln(this,It,qt);const Dn=a.PDFDateString.toDateObject(hn);Dn&&ln(this,Kt,On.l10n.get("annotation_date_string",{date:Dn.toLocaleDateString(),time:Dn.toLocaleTimeString()})),this.trigger=qt.flatMap(Nn=>Nn.getElementsToTriggerPopup());for(const Nn of this.trigger)Nn.addEventListener("click",At(this,sn)),Nn.addEventListener("mouseenter",At(this,cn)),Nn.addEventListener("mouseleave",At(this,rn)),Nn.classList.add("popupTriggerArea");for(const Nn of qt)(Ln=Nn.container)==null||Ln.addEventListener("keydown",At(this,Yt));At(this,Ht).hidden=!0,jn&&Jt(this,Zt,ls).call(this)}render(){if(At(this,fn))return;const{page:{view:jt},viewport:{rawDims:{pageWidth:Lt,pageHeight:qt,pageX:an,pageY:hn}}}=At(this,Nt),_n=ln(this,fn,document.createElement("div"));if(_n.className="popup",At(this,dn)){const Xn=_n.style.outlineColor=o.Util.makeHexColor(...At(this,dn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?_n.style.backgroundColor=`color-mix(in srgb, ${Xn} 30%, white)`:_n.style.backgroundColor=o.Util.makeHexColor(...At(this,dn).map(ir=>Math.floor(.7*(255-ir)+ir)))}const En=document.createElement("span");En.className="header";const On=document.createElement("h1");if(En.append(On),{dir:On.dir,str:On.textContent}=At(this,Qt),_n.append(En),At(this,Kt)){const Xn=document.createElement("span");Xn.classList.add("popupDate"),At(this,Kt).then(nr=>{Xn.textContent=nr}),En.append(Xn)}const Mn=At(this,Xt),wn=At(this,gn);if(wn!=null&&wn.str&&(!(Mn!=null&&Mn.str)||Mn.str===wn.str))g.XfaLayer.render({xfaHtml:wn.html,intent:"richText",div:_n}),_n.lastChild.classList.add("richText","popupContent");else{const Xn=this._formatContents(Mn);_n.append(Xn)}let jn=!!At(this,Gt),Dn=jn?At(this,Gt):At(this,yn);for(const Xn of At(this,It))if(!Dn||o.Util.intersect(Xn.data.rect,Dn)!==null){Dn=Xn.data.rect,jn=!0;break}const Ln=o.Util.normalizeRect([Dn[0],jt[3]-Dn[1]+jt[1],Dn[2],jt[3]-Dn[3]+jt[1]]),$n=jn?Dn[2]-Dn[0]+5:0,Wn=Ln[0]+$n,Gn=Ln[1],{style:Jn}=At(this,Ht);Jn.left=`${100*(Wn-an)/Lt}%`,Jn.top=`${100*(Gn-hn)/qt}%`,At(this,Ht).append(_n)}_formatContents({str:jt,dir:Lt}){const qt=document.createElement("p");qt.classList.add("popupContent"),qt.dir=Lt;const an=jt.split(/(?:\r\n?|\n)/);for(let hn=0,_n=an.length;hn<_n;++hn){const En=an[hn];qt.append(document.createTextNode(En)),hn<_n-1&&qt.append(document.createElement("br"))}return qt}forceHide(){ln(this,Wt,this.isVisible),At(this,Wt)&&(At(this,Ht).hidden=!0)}maybeShow(){At(this,Wt)&&(ln(this,Wt,!1),At(this,Ht).hidden=!1)}get isVisible(){return At(this,Ht).hidden===!1}}Kt=new WeakMap,Yt=new WeakMap,rn=new WeakMap,cn=new WeakMap,sn=new WeakMap,dn=new WeakMap,Ht=new WeakMap,Xt=new WeakMap,It=new WeakMap,Nt=new WeakMap,Gt=new WeakMap,tn=new WeakMap,fn=new WeakMap,yn=new WeakMap,gn=new WeakMap,Qt=new WeakMap,Wt=new WeakMap,Zt=new WeakSet,ba=function(jt){jt.altKey||jt.shiftKey||jt.ctrlKey||jt.metaKey||(jt.key==="Enter"||jt.key==="Escape"&&At(this,tn))&&Jt(this,Zt,ls).call(this)},ls=function(){ln(this,tn,!At(this,tn)),At(this,tn)?(Jt(this,Zt,qs).call(this),At(this,Ht).addEventListener("click",At(this,sn)),At(this,Ht).addEventListener("keydown",At(this,Yt))):(Jt(this,Zt,Ks).call(this),At(this,Ht).removeEventListener("click",At(this,sn)),At(this,Ht).removeEventListener("keydown",At(this,Yt)))},qs=function(){At(this,fn)||this.render(),this.isVisible?At(this,tn)&&At(this,Ht).classList.add("focused"):(At(this,Ht).hidden=!1,At(this,Ht).style.zIndex=parseInt(At(this,Ht).style.zIndex)+1e3)},Ks=function(){At(this,Ht).classList.remove("focused"),!(At(this,tn)||!this.isVisible)&&(At(this,Ht).hidden=!0,At(this,Ht).style.zIndex=parseInt(At(this,Ht).style.zIndex)-1e3)};class _t extends it{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=jt.data.textContent,this.textPosition=jt.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const jt=document.createElement("div");jt.classList.add("annotationTextContent"),jt.setAttribute("role","comment");for(const Lt of this.textContent){const qt=document.createElement("span");qt.textContent=Lt,jt.append(qt)}this.container.append(jt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=_t;class ht extends it{constructor(Lt){super(Lt,{isRenderable:!0,ignoreBorder:!0});on(this,Pn,null)}render(){this.container.classList.add("lineAnnotation");const Lt=this.data,{width:qt,height:an}=et(Lt.rect),hn=this.svgFactory.create(qt,an,!0),_n=ln(this,Pn,this.svgFactory.createElement("svg:line"));return _n.setAttribute("x1",Lt.rect[2]-Lt.lineCoordinates[0]),_n.setAttribute("y1",Lt.rect[3]-Lt.lineCoordinates[1]),_n.setAttribute("x2",Lt.rect[2]-Lt.lineCoordinates[2]),_n.setAttribute("y2",Lt.rect[3]-Lt.lineCoordinates[3]),_n.setAttribute("stroke-width",Lt.borderStyle.width||1),_n.setAttribute("stroke","transparent"),_n.setAttribute("fill","transparent"),hn.append(_n),this.container.append(hn),!Lt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return At(this,Pn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Pn=new WeakMap;class Et extends it{constructor(Lt){super(Lt,{isRenderable:!0,ignoreBorder:!0});on(this,Vn,null)}render(){this.container.classList.add("squareAnnotation");const Lt=this.data,{width:qt,height:an}=et(Lt.rect),hn=this.svgFactory.create(qt,an,!0),_n=Lt.borderStyle.width,En=ln(this,Vn,this.svgFactory.createElement("svg:rect"));return En.setAttribute("x",_n/2),En.setAttribute("y",_n/2),En.setAttribute("width",qt-_n),En.setAttribute("height",an-_n),En.setAttribute("stroke-width",_n||1),En.setAttribute("stroke","transparent"),En.setAttribute("fill","transparent"),hn.append(En),this.container.append(hn),!Lt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return At(this,Vn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vn=new WeakMap;class yt extends it{constructor(Lt){super(Lt,{isRenderable:!0,ignoreBorder:!0});on(this,Bn,null)}render(){this.container.classList.add("circleAnnotation");const Lt=this.data,{width:qt,height:an}=et(Lt.rect),hn=this.svgFactory.create(qt,an,!0),_n=Lt.borderStyle.width,En=ln(this,Bn,this.svgFactory.createElement("svg:ellipse"));return En.setAttribute("cx",qt/2),En.setAttribute("cy",an/2),En.setAttribute("rx",qt/2-_n/2),En.setAttribute("ry",an/2-_n/2),En.setAttribute("stroke-width",_n||1),En.setAttribute("stroke","transparent"),En.setAttribute("fill","transparent"),hn.append(En),this.container.append(hn),!Lt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return At(this,Bn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bn=new WeakMap;class Ot extends it{constructor(Lt){super(Lt,{isRenderable:!0,ignoreBorder:!0});on(this,mn,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Lt=this.data,{width:qt,height:an}=et(Lt.rect),hn=this.svgFactory.create(qt,an,!0);let _n=[];for(const On of Lt.vertices){const Mn=On.x-Lt.rect[0],wn=Lt.rect[3]-On.y;_n.push(Mn+","+wn)}_n=_n.join(" ");const En=ln(this,mn,this.svgFactory.createElement(this.svgElementName));return En.setAttribute("points",_n),En.setAttribute("stroke-width",Lt.borderStyle.width||1),En.setAttribute("stroke","transparent"),En.setAttribute("fill","transparent"),hn.append(En),this.container.append(hn),!Lt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return At(this,mn)}addHighlightArea(){this.container.classList.add("highlightArea")}}mn=new WeakMap;class Dt extends Ot{constructor(jt){super(jt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $t extends it{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Bt extends it{constructor(Lt){super(Lt,{isRenderable:!0,ignoreBorder:!0});on(this,en,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const Lt=this.data,{width:qt,height:an}=et(Lt.rect),hn=this.svgFactory.create(qt,an,!0);for(const _n of Lt.inkLists){let En=[];for(const Mn of _n){const wn=Mn.x-Lt.rect[0],jn=Lt.rect[3]-Mn.y;En.push(`${wn},${jn}`)}En=En.join(" ");const On=this.svgFactory.createElement(this.svgElementName);At(this,en).push(On),On.setAttribute("points",En),On.setAttribute("stroke-width",Lt.borderStyle.width||1),On.setAttribute("stroke","transparent"),On.setAttribute("fill","transparent"),!Lt.popupRef&&this.hasPopupData&&this._createPopup(),hn.append(On)}return this.container.append(hn),this.container}getElementsToTriggerPopup(){return At(this,en)}addHighlightArea(){this.container.classList.add("highlightArea")}}en=new WeakMap,e.InkAnnotationElement=Bt;class Vt extends it{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Rt extends it{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class vt extends it{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class St extends it{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Pt extends it{constructor(jt){super(jt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Pt;class pt extends it{constructor(Lt){var hn;super(Lt,{isRenderable:!0});on(this,Tn);on(this,nn,null);const{filename:qt,content:an}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(qt,!0),this.content=an,(hn=this.linkService.eventBus)==null||hn.dispatch("fileattachmentannotation",{source:this,filename:qt,content:an})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:Lt,data:qt}=this;let an;qt.hasAppearance||qt.fillAlpha===0?an=document.createElement("div"):(an=document.createElement("img"),an.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(qt.name)?"paperclip":"pushpin"}.svg`,qt.fillAlpha&&qt.fillAlpha<1&&(an.style=`filter: opacity(${Math.round(qt.fillAlpha*100)}%);`)),an.addEventListener("dblclick",Jt(this,Tn,Xs).bind(this)),ln(this,nn,an);const{isMac:hn}=o.FeatureTest.platform;return Lt.addEventListener("keydown",_n=>{_n.key==="Enter"&&(hn?_n.metaKey:_n.ctrlKey)&&Jt(this,Tn,Xs).call(this)}),!qt.popupRef&&this.hasPopupData?this._createPopup():an.classList.add("popupTriggerArea"),Lt.append(an),Lt}getElementsToTriggerPopup(){return At(this,nn)}addHighlightArea(){this.container.classList.add("highlightArea")}}nn=new WeakMap,Tn=new WeakSet,Xs=function(){var Lt;(Lt=this.downloadManager)==null||Lt.openOrDownloadData(this.container,this.content,this.filename)};class bt{constructor({div:jt,accessibilityManager:Lt,annotationCanvasMap:qt,l10n:an,page:hn,viewport:_n}){on(this,bn);on(this,Un,null);on(this,Ut,null);on(this,pn,new Map);this.div=jt,ln(this,Un,Lt),ln(this,Ut,qt),this.l10n=an,this.page=hn,this.viewport=_n,this.zIndex=0,this.l10n||(this.l10n=h.NullL10n)}async render(jt){const{annotations:Lt}=jt,qt=this.div;(0,a.setLayerDimensions)(qt,this.viewport);const an=new Map,hn={data:null,layer:qt,linkService:jt.linkService,downloadManager:jt.downloadManager,imageResourcesPath:jt.imageResourcesPath||"",renderForms:jt.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:jt.annotationStorage||new c.AnnotationStorage,enableScripting:jt.enableScripting===!0,hasJSActions:jt.hasJSActions,fieldObjects:jt.fieldObjects,parent:this,elements:null};for(const _n of Lt){if(_n.noHTML)continue;const En=_n.annotationType===o.AnnotationType.POPUP;if(En){const wn=an.get(_n.id);if(!wn)continue;hn.elements=wn}else{const{width:wn,height:jn}=et(_n.rect);if(wn<=0||jn<=0)continue}hn.data=_n;const On=tt.create(hn);if(!On.isRenderable)continue;if(!En&&_n.popupRef){const wn=an.get(_n.popupRef);wn?wn.push(On):an.set(_n.popupRef,[On])}On.annotationEditorType>0&&At(this,pn).set(On.data.id,On);const Mn=On.render();_n.hidden&&(Mn.style.visibility="hidden"),Jt(this,bn,$a).call(this,Mn,_n.id)}Jt(this,bn,Ys).call(this),await this.l10n.translate(qt)}update({viewport:jt}){const Lt=this.div;this.viewport=jt,(0,a.setLayerDimensions)(Lt,{rotation:jt.rotation}),Jt(this,bn,Ys).call(this),Lt.hidden=!1}getEditableAnnotations(){return Array.from(At(this,pn).values())}getEditableAnnotation(jt){return At(this,pn).get(jt)}}Un=new WeakMap,Ut=new WeakMap,pn=new WeakMap,bn=new WeakSet,$a=function(jt,Lt){var an;const qt=jt.firstChild||jt;qt.id=`${o.AnnotationPrefix}${Lt}`,this.div.append(jt),(an=At(this,Un))==null||an.moveElementInDOM(this.div,jt,qt,!1)},Ys=function(){if(!At(this,Ut))return;const jt=this.div;for(const[Lt,qt]of At(this,Ut)){const an=jt.querySelector(`[data-annotation-id="${Lt}"]`);if(!an)continue;const{firstChild:hn}=an;hn?hn.nodeName==="CANVAS"?hn.replaceWith(qt):hn.before(qt):an.append(qt)}At(this,Ut).clear()},e.AnnotationLayer=bt},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function o(c){return Math.max(0,Math.min(255,255*c))}class a{static CMYK_G([d,h,g,j]){return["G",1-Math.min(1,.3*d+.59*g+.11*h+j)]}static G_CMYK([d]){return["CMYK",0,0,0,1-d]}static G_RGB([d]){return["RGB",d,d,d]}static G_rgb([d]){return d=o(d),[d,d,d]}static G_HTML([d]){const h=s(d);return`#${h}${h}${h}`}static RGB_G([d,h,g]){return["G",.3*d+.59*h+.11*g]}static RGB_rgb(d){return d.map(o)}static RGB_HTML(d){return`#${d.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([d,h,g,j]){return["RGB",1-Math.min(1,d+j),1-Math.min(1,g+j),1-Math.min(1,h+j)]}static CMYK_rgb([d,h,g,j]){return[o(1-Math.min(1,d+j)),o(1-Math.min(1,g+j)),o(1-Math.min(1,h+j))]}static CMYK_HTML(d){const h=this.CMYK_RGB(d).slice(1);return this.RGB_HTML(h)}static RGB_CMYK([d,h,g]){const j=1-d,$=1-h,_=1-g,et=Math.min(j,$,_);return["CMYK",j,$,_,et]}}e.ColorConverters=a},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=o;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function o(d,h){switch(d){case"find_match_count":d=`find_match_count[${h.total===1?"one":"other"}]`;break;case"find_match_count_limit":d=`find_match_count_limit[${h.limit===1?"one":"other"}]`;break}return s[d]||""}function a(d,h){return h?d.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(g,j)=>j in h?h[j]:"{{"+j+"}}"):d}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(d,h=null,g=o(d,h)){return a(g,h)},async translate(d){}};e.NullL10n=c},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var o=s(25);class a{static setupStorage(d,h,g,j,$){const _=j.getValue(h,{value:null});switch(g.name){case"textarea":if(_.value!==null&&(d.textContent=_.value),$==="print")break;d.addEventListener("input",et=>{j.setValue(h,{value:et.target.value})});break;case"input":if(g.attributes.type==="radio"||g.attributes.type==="checkbox"){if(_.value===g.attributes.xfaOn?d.setAttribute("checked",!0):_.value===g.attributes.xfaOff&&d.removeAttribute("checked"),$==="print")break;d.addEventListener("change",et=>{j.setValue(h,{value:et.target.checked?et.target.getAttribute("xfaOn"):et.target.getAttribute("xfaOff")})})}else{if(_.value!==null&&d.setAttribute("value",_.value),$==="print")break;d.addEventListener("input",et=>{j.setValue(h,{value:et.target.value})})}break;case"select":if(_.value!==null){d.setAttribute("value",_.value);for(const et of g.children)et.attributes.value===_.value?et.attributes.selected=!0:et.attributes.hasOwnProperty("selected")&&delete et.attributes.selected}d.addEventListener("input",et=>{const tt=et.target.options,it=tt.selectedIndex===-1?"":tt[tt.selectedIndex].value;j.setValue(h,{value:it})});break}}static setAttributes({html:d,element:h,storage:g=null,intent:j,linkService:$}){const{attributes:_}=h,et=d instanceof HTMLAnchorElement;_.type==="radio"&&(_.name=`${_.name}-${j}`);for(const[tt,it]of Object.entries(_))if(it!=null)switch(tt){case"class":it.length&&d.setAttribute(tt,it.join(" "));break;case"dataId":break;case"id":d.setAttribute("data-element-id",it);break;case"style":Object.assign(d.style,it);break;case"textContent":d.textContent=it;break;default:(!et||tt!=="href"&&tt!=="newWindow")&&d.setAttribute(tt,it)}et&&$.addLinkAttributes(d,_.href,_.newWindow),g&&_.dataId&&this.setupStorage(d,_.dataId,h,g)}static render(d){var ot;const h=d.annotationStorage,g=d.linkService,j=d.xfaHtml,$=d.intent||"display",_=document.createElement(j.name);j.attributes&&this.setAttributes({html:_,element:j,intent:$,linkService:g});const et=[[j,-1,_]],tt=d.div;if(tt.append(_),d.viewport){const at=`matrix(${d.viewport.transform.join(",")})`;tt.style.transform=at}$!=="richText"&&tt.setAttribute("class","xfaLayer xfaFont");const it=[];for(;et.length>0;){const[at,rt,st]=et.at(-1);if(rt+1===at.children.length){et.pop();continue}const lt=at.children[++et.at(-1)[1]];if(lt===null)continue;const{name:mt}=lt;if(mt==="#text"){const gt=document.createTextNode(lt.value);it.push(gt),st.append(gt);continue}const ft=(ot=lt==null?void 0:lt.attributes)!=null&&ot.xmlns?document.createElementNS(lt.attributes.xmlns,mt):document.createElement(mt);if(st.append(ft),lt.attributes&&this.setAttributes({html:ft,element:lt,storage:h,intent:$,linkService:g}),lt.children&&lt.children.length>0)et.push([lt,-1,ft]);else if(lt.value){const gt=document.createTextNode(lt.value);o.XfaText.shouldBuildText(mt)&&it.push(gt),ft.append(gt)}}for(const at of tt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))at.setAttribute("readOnly",!0);return{textDivs:it}}static update(d){const h=`matrix(${d.viewport.transform.join(",")})`;d.div.style.transform=h,d.div.hidden=!1}}e.XfaLayer=a},(i,e,s)=>{var j,$,_,et,tt,it,ot,at,rt,st,lt,mt,ft,gt,dt,_l,yl,El,xl,Qs,Al,Js,wl,Sl,Tl,Pl,Rl,dr,Zs,cs,us,Sr,eo,ds,kt,Il,to,Cl,Ml,no,hs,Tr;Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var o=s(1),a=s(4),c=s(29),d=s(6),h=s(5);const dn=class dn extends a.AnnotationEditor{constructor(It){super({...It,name:"inkEditor"});on(this,dt);on(this,j,0);on(this,$,0);on(this,_,this.canvasPointermove.bind(this));on(this,et,this.canvasPointerleave.bind(this));on(this,tt,this.canvasPointerup.bind(this));on(this,it,this.canvasPointerdown.bind(this));on(this,ot,new Path2D);on(this,at,!1);on(this,rt,!1);on(this,st,!1);on(this,lt,null);on(this,mt,0);on(this,ft,0);on(this,gt,null);this.color=It.color||null,this.thickness=It.thickness||null,this.opacity=It.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(It){a.AnnotationEditor.initialize(It,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(It,Nt){switch(It){case o.AnnotationEditorParamsType.INK_THICKNESS:dn._defaultThickness=Nt;break;case o.AnnotationEditorParamsType.INK_COLOR:dn._defaultColor=Nt;break;case o.AnnotationEditorParamsType.INK_OPACITY:dn._defaultOpacity=Nt/100;break}}updateParams(It,Nt){switch(It){case o.AnnotationEditorParamsType.INK_THICKNESS:Jt(this,dt,_l).call(this,Nt);break;case o.AnnotationEditorParamsType.INK_COLOR:Jt(this,dt,yl).call(this,Nt);break;case o.AnnotationEditorParamsType.INK_OPACITY:Jt(this,dt,El).call(this,Nt);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,dn._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,dn._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(dn._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||dn._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||dn._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??dn._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Jt(this,dt,cs).call(this),Jt(this,dt,us).call(this)),this.isAttachedToDOM||(this.parent.add(this),Jt(this,dt,Sr).call(this)),Jt(this,dt,Tr).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,At(this,lt).disconnect(),ln(this,lt,null),super.remove())}setParent(It){!this.parent&&It?this._uiManager.removeShouldRescale(this):this.parent&&It===null&&this._uiManager.addShouldRescale(this),super.setParent(It)}onScaleChanging(){const[It,Nt]=this.parentDimensions,Gt=this.width*It,tn=this.height*Nt;this.setDimensions(Gt,tn)}enableEditMode(){At(this,at)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",At(this,it)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",At(this,it)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){At(this,at)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ln(this,at,!0),this.div.classList.add("disabled"),Jt(this,dt,Tr).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(It){this._focusEventsAllowed&&(super.focusin(It),this.enableEditMode())}canvasPointerdown(It){It.button!==0||!this.isInEditMode()||At(this,at)||(this.setInForeground(),It.preventDefault(),It.type!=="mouse"&&this.div.focus(),Jt(this,dt,Al).call(this,It.offsetX,It.offsetY))}canvasPointermove(It){It.preventDefault(),Jt(this,dt,Js).call(this,It.offsetX,It.offsetY)}canvasPointerup(It){It.preventDefault(),Jt(this,dt,Zs).call(this,It)}canvasPointerleave(It){Jt(this,dt,Zs).call(this,It)}get isResizable(){return!this.isEmpty()&&At(this,at)}render(){if(this.div)return this.div;let It,Nt;this.width&&(It=this.x,Nt=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(gn=>{var Qt;return(Qt=this.div)==null?void 0:Qt.setAttribute("aria-label",gn)});const[Gt,tn,fn,yn]=Jt(this,dt,xl).call(this);if(this.setAt(Gt,tn,0,0),this.setDims(fn,yn),Jt(this,dt,cs).call(this),this.width){const[gn,Qt]=this.parentDimensions;this.setAspectRatio(this.width*gn,this.height*Qt),this.setAt(It*gn,Nt*Qt,this.width*gn,this.height*Qt),ln(this,st,!0),Jt(this,dt,Sr).call(this),this.setDims(this.width*gn,this.height*Qt),Jt(this,dt,dr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Jt(this,dt,us).call(this),this.div}setDimensions(It,Nt){const Gt=Math.round(It),tn=Math.round(Nt);if(At(this,mt)===Gt&&At(this,ft)===tn)return;ln(this,mt,Gt),ln(this,ft,tn),this.canvas.style.visibility="hidden";const[fn,yn]=this.parentDimensions;this.width=It/fn,this.height=Nt/yn,this.fixAndSetPosition(),At(this,at)&&Jt(this,dt,eo).call(this,It,Nt),Jt(this,dt,Sr).call(this),Jt(this,dt,dr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(It,Nt,Gt){var Pn,Vn,Bn;if(It instanceof c.InkAnnotationElement)return null;const tn=super.deserialize(It,Nt,Gt);tn.thickness=It.thickness,tn.color=o.Util.makeHexColor(...It.color),tn.opacity=It.opacity;const[fn,yn]=tn.pageDimensions,gn=tn.width*fn,Qt=tn.height*yn,Wt=tn.parentScale,Zt=It.thickness/2;ln(tn,at,!0),ln(tn,mt,Math.round(gn)),ln(tn,ft,Math.round(Qt));const{paths:xn,rect:An,rotation:Cn}=It;for(let{bezier:mn}of xn){mn=Jt(Pn=dn,kt,Cl).call(Pn,mn,An,Cn);const en=[];tn.paths.push(en);let nn=Wt*(mn[0]-Zt),Tn=Wt*(mn[1]-Zt);for(let Un=2,Ut=mn.length;Un<Ut;Un+=6){const pn=Wt*(mn[Un]-Zt),bn=Wt*(mn[Un+1]-Zt),In=Wt*(mn[Un+2]-Zt),Fn=Wt*(mn[Un+3]-Zt),Rn=Wt*(mn[Un+4]-Zt),jt=Wt*(mn[Un+5]-Zt);en.push([[nn,Tn],[pn,bn],[In,Fn],[Rn,jt]]),nn=Rn,Tn=jt}const zn=Jt(this,kt,Il).call(this,en);tn.bezierPath2D.push(zn)}const Sn=Jt(Vn=tn,dt,no).call(Vn);return ln(tn,$,Math.max(a.AnnotationEditor.MIN_SIZE,Sn[2]-Sn[0])),ln(tn,j,Math.max(a.AnnotationEditor.MIN_SIZE,Sn[3]-Sn[1])),Jt(Bn=tn,dt,eo).call(Bn,gn,Qt),tn}serialize(){if(this.isEmpty())return null;const It=this.getRect(0,0),Nt=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:Nt,thickness:this.thickness,opacity:this.opacity,paths:Jt(this,dt,Ml).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,It),pageIndex:this.pageIndex,rect:It,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};j=new WeakMap,$=new WeakMap,_=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,ot=new WeakMap,at=new WeakMap,rt=new WeakMap,st=new WeakMap,lt=new WeakMap,mt=new WeakMap,ft=new WeakMap,gt=new WeakMap,dt=new WeakSet,_l=function(It){const Nt=this.thickness;this.addCommands({cmd:()=>{this.thickness=It,Jt(this,dt,Tr).call(this)},undo:()=>{this.thickness=Nt,Jt(this,dt,Tr).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},yl=function(It){const Nt=this.color;this.addCommands({cmd:()=>{this.color=It,Jt(this,dt,dr).call(this)},undo:()=>{this.color=Nt,Jt(this,dt,dr).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},El=function(It){It/=100;const Nt=this.opacity;this.addCommands({cmd:()=>{this.opacity=It,Jt(this,dt,dr).call(this)},undo:()=>{this.opacity=Nt,Jt(this,dt,dr).call(this)},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},xl=function(){const{parentRotation:It,parentDimensions:[Nt,Gt]}=this;switch(It){case 90:return[0,Gt,Gt,Nt];case 180:return[Nt,Gt,Nt,Gt];case 270:return[Nt,0,Gt,Nt];default:return[0,0,Nt,Gt]}},Qs=function(){const{ctx:It,color:Nt,opacity:Gt,thickness:tn,parentScale:fn,scaleFactor:yn}=this;It.lineWidth=tn*fn/yn,It.lineCap="round",It.lineJoin="round",It.miterLimit=10,It.strokeStyle=`${Nt}${(0,h.opacityToHex)(Gt)}`},Al=function(It,Nt){this.canvas.addEventListener("contextmenu",d.noContextMenu),this.canvas.addEventListener("pointerleave",At(this,et)),this.canvas.addEventListener("pointermove",At(this,_)),this.canvas.addEventListener("pointerup",At(this,tt)),this.canvas.removeEventListener("pointerdown",At(this,it)),this.isEditing=!0,At(this,st)||(ln(this,st,!0),Jt(this,dt,Sr).call(this),this.thickness||(this.thickness=dn._defaultThickness),this.color||(this.color=dn._defaultColor||a.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=dn._defaultOpacity)),this.currentPath.push([It,Nt]),ln(this,rt,!1),Jt(this,dt,Qs).call(this),ln(this,gt,()=>{Jt(this,dt,Tl).call(this),At(this,gt)&&window.requestAnimationFrame(At(this,gt))}),window.requestAnimationFrame(At(this,gt))},Js=function(It,Nt){const[Gt,tn]=this.currentPath.at(-1);if(this.currentPath.length>1&&It===Gt&&Nt===tn)return;const fn=this.currentPath;let yn=At(this,ot);if(fn.push([It,Nt]),ln(this,rt,!0),fn.length<=2){yn.moveTo(...fn[0]),yn.lineTo(It,Nt);return}fn.length===3&&(ln(this,ot,yn=new Path2D),yn.moveTo(...fn[0])),Jt(this,dt,Pl).call(this,yn,...fn.at(-3),...fn.at(-2),It,Nt)},wl=function(){if(this.currentPath.length===0)return;const It=this.currentPath.at(-1);At(this,ot).lineTo(...It)},Sl=function(It,Nt){ln(this,gt,null),It=Math.min(Math.max(It,0),this.canvas.width),Nt=Math.min(Math.max(Nt,0),this.canvas.height),Jt(this,dt,Js).call(this,It,Nt),Jt(this,dt,wl).call(this);let Gt;if(this.currentPath.length!==1)Gt=Jt(this,dt,Rl).call(this);else{const Qt=[It,Nt];Gt=[[Qt,Qt.slice(),Qt.slice(),Qt]]}const tn=At(this,ot),fn=this.currentPath;this.currentPath=[],ln(this,ot,new Path2D);const yn=()=>{this.allRawPaths.push(fn),this.paths.push(Gt),this.bezierPath2D.push(tn),this.rebuild()},gn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Jt(this,dt,cs).call(this),Jt(this,dt,us).call(this)),Jt(this,dt,Tr).call(this))};this.addCommands({cmd:yn,undo:gn,mustExec:!0})},Tl=function(){if(!At(this,rt))return;ln(this,rt,!1);const It=Math.ceil(this.thickness*this.parentScale),Nt=this.currentPath.slice(-3),Gt=Nt.map(yn=>yn[0]),tn=Nt.map(yn=>yn[1]);Math.min(...Gt)-It,Math.max(...Gt)+It,Math.min(...tn)-It,Math.max(...tn)+It;const{ctx:fn}=this;fn.save(),fn.clearRect(0,0,this.canvas.width,this.canvas.height);for(const yn of this.bezierPath2D)fn.stroke(yn);fn.stroke(At(this,ot)),fn.restore()},Pl=function(It,Nt,Gt,tn,fn,yn,gn){const Qt=(Nt+tn)/2,Wt=(Gt+fn)/2,Zt=(tn+yn)/2,xn=(fn+gn)/2;It.bezierCurveTo(Qt+2*(tn-Qt)/3,Wt+2*(fn-Wt)/3,Zt+2*(tn-Zt)/3,xn+2*(fn-xn)/3,Zt,xn)},Rl=function(){const It=this.currentPath;if(It.length<=2)return[[It[0],It[0],It.at(-1),It.at(-1)]];const Nt=[];let Gt,[tn,fn]=It[0];for(Gt=1;Gt<It.length-2;Gt++){const[An,Cn]=It[Gt],[Sn,Pn]=It[Gt+1],Vn=(An+Sn)/2,Bn=(Cn+Pn)/2,mn=[tn+2*(An-tn)/3,fn+2*(Cn-fn)/3],en=[Vn+2*(An-Vn)/3,Bn+2*(Cn-Bn)/3];Nt.push([[tn,fn],mn,en,[Vn,Bn]]),[tn,fn]=[Vn,Bn]}const[yn,gn]=It[Gt],[Qt,Wt]=It[Gt+1],Zt=[tn+2*(yn-tn)/3,fn+2*(gn-fn)/3],xn=[Qt+2*(yn-Qt)/3,Wt+2*(gn-Wt)/3];return Nt.push([[tn,fn],Zt,xn,[Qt,Wt]]),Nt},dr=function(){if(this.isEmpty()){Jt(this,dt,ds).call(this);return}Jt(this,dt,Qs).call(this);const{canvas:It,ctx:Nt}=this;Nt.setTransform(1,0,0,1,0,0),Nt.clearRect(0,0,It.width,It.height),Jt(this,dt,ds).call(this);for(const Gt of this.bezierPath2D)Nt.stroke(Gt)},Zs=function(It){this.canvas.removeEventListener("pointerleave",At(this,et)),this.canvas.removeEventListener("pointermove",At(this,_)),this.canvas.removeEventListener("pointerup",At(this,tt)),this.canvas.addEventListener("pointerdown",At(this,it)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",d.noContextMenu)},10),Jt(this,dt,Sl).call(this,It.offsetX,It.offsetY),this.addToAnnotationStorage(),this.setInBackground()},cs=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(It=>{var Nt;return(Nt=this.canvas)==null?void 0:Nt.setAttribute("aria-label",It)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},us=function(){ln(this,lt,new ResizeObserver(It=>{const Nt=It[0].contentRect;Nt.width&&Nt.height&&this.setDimensions(Nt.width,Nt.height)})),At(this,lt).observe(this.div)},Sr=function(){if(!At(this,st))return;const[It,Nt]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*It),this.canvas.height=Math.ceil(this.height*Nt),Jt(this,dt,ds).call(this)},eo=function(It,Nt){const Gt=Jt(this,dt,hs).call(this),tn=(It-Gt)/At(this,$),fn=(Nt-Gt)/At(this,j);this.scaleFactor=Math.min(tn,fn)},ds=function(){const It=Jt(this,dt,hs).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+It,this.translationY*this.scaleFactor+It)},kt=new WeakSet,Il=function(It){const Nt=new Path2D;for(let Gt=0,tn=It.length;Gt<tn;Gt++){const[fn,yn,gn,Qt]=It[Gt];Gt===0&&Nt.moveTo(...fn),Nt.bezierCurveTo(yn[0],yn[1],gn[0],gn[1],Qt[0],Qt[1])}return Nt},to=function(It,Nt,Gt){const[tn,fn,yn,gn]=Nt;switch(Gt){case 0:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2)It[Qt]+=tn,It[Qt+1]=gn-It[Qt+1];break;case 90:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2){const Zt=It[Qt];It[Qt]=It[Qt+1]+tn,It[Qt+1]=Zt+fn}break;case 180:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2)It[Qt]=yn-It[Qt],It[Qt+1]+=fn;break;case 270:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2){const Zt=It[Qt];It[Qt]=yn-It[Qt+1],It[Qt+1]=gn-Zt}break;default:throw new Error("Invalid rotation")}return It},Cl=function(It,Nt,Gt){const[tn,fn,yn,gn]=Nt;switch(Gt){case 0:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2)It[Qt]-=tn,It[Qt+1]=gn-It[Qt+1];break;case 90:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2){const Zt=It[Qt];It[Qt]=It[Qt+1]-fn,It[Qt+1]=Zt-tn}break;case 180:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2)It[Qt]=yn-It[Qt],It[Qt+1]-=fn;break;case 270:for(let Qt=0,Wt=It.length;Qt<Wt;Qt+=2){const Zt=It[Qt];It[Qt]=gn-It[Qt+1],It[Qt+1]=yn-Zt}break;default:throw new Error("Invalid rotation")}return It},Ml=function(It,Nt,Gt,tn){var Wt,Zt;const fn=[],yn=this.thickness/2,gn=It*Nt+yn,Qt=It*Gt+yn;for(const xn of this.paths){const An=[],Cn=[];for(let Sn=0,Pn=xn.length;Sn<Pn;Sn++){const[Vn,Bn,mn,en]=xn[Sn],nn=It*Vn[0]+gn,Tn=It*Vn[1]+Qt,zn=It*Bn[0]+gn,Un=It*Bn[1]+Qt,Ut=It*mn[0]+gn,pn=It*mn[1]+Qt,bn=It*en[0]+gn,In=It*en[1]+Qt;Sn===0&&(An.push(nn,Tn),Cn.push(nn,Tn)),An.push(zn,Un,Ut,pn,bn,In),Cn.push(zn,Un),Sn===Pn-1&&Cn.push(bn,In)}fn.push({bezier:Jt(Wt=dn,kt,to).call(Wt,An,tn,this.rotation),points:Jt(Zt=dn,kt,to).call(Zt,Cn,tn,this.rotation)})}return fn},no=function(){let It=1/0,Nt=-1/0,Gt=1/0,tn=-1/0;for(const fn of this.paths)for(const[yn,gn,Qt,Wt]of fn){const Zt=o.Util.bezierBoundingBox(...yn,...gn,...Qt,...Wt);It=Math.min(It,Zt[0]),Gt=Math.min(Gt,Zt[1]),Nt=Math.max(Nt,Zt[2]),tn=Math.max(tn,Zt[3])}return[It,Gt,Nt,tn]},hs=function(){return At(this,at)?Math.ceil(this.thickness*this.parentScale):0},Tr=function(It=!1){if(this.isEmpty())return;if(!At(this,at)){Jt(this,dt,dr).call(this);return}const Nt=Jt(this,dt,no).call(this),Gt=Jt(this,dt,hs).call(this);ln(this,$,Math.max(a.AnnotationEditor.MIN_SIZE,Nt[2]-Nt[0])),ln(this,j,Math.max(a.AnnotationEditor.MIN_SIZE,Nt[3]-Nt[1]));const tn=Math.ceil(Gt+At(this,$)*this.scaleFactor),fn=Math.ceil(Gt+At(this,j)*this.scaleFactor),[yn,gn]=this.parentDimensions;this.width=tn/yn,this.height=fn/gn,this.setAspectRatio(tn,fn);const Qt=this.translationX,Wt=this.translationY;this.translationX=-Nt[0],this.translationY=-Nt[1],Jt(this,dt,Sr).call(this),Jt(this,dt,dr).call(this),ln(this,mt,tn),ln(this,ft,fn),this.setDims(tn,fn);const Zt=It?Gt/this.scaleFactor/2:0;this.translate(Qt-this.translationX-Zt,Wt-this.translationY-Zt)},on(dn,kt),qn(dn,"_defaultColor",null),qn(dn,"_defaultOpacity",1),qn(dn,"_defaultThickness",1),qn(dn,"_type","ink");let g=dn;e.InkEditor=g},(i,e,s)=>{var g,j,$,_,et,tt,it,ot,at,rt,st,Ur,zr,fs,ro,Dl,Ol,io,ps,Ll;Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var o=s(1),a=s(4),c=s(6),d=s(29);const Et=class Et extends a.AnnotationEditor{constructor(Dt){super({...Dt,name:"stampEditor"});on(this,st);on(this,g,null);on(this,j,null);on(this,$,null);on(this,_,null);on(this,et,null);on(this,tt,null);on(this,it,null);on(this,ot,null);on(this,at,!1);on(this,rt,!1);ln(this,_,Dt.bitmapUrl),ln(this,et,Dt.bitmapFile)}static initialize(Dt){a.AnnotationEditor.initialize(Dt)}static get supportedTypes(){const Dt=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",Dt.map($t=>`image/${$t}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Dt){return this.supportedTypes.includes(Dt)}static paste(Dt,$t){$t.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:Dt.getAsFile()})}remove(){var Dt,$t;At(this,j)&&(ln(this,g,null),this._uiManager.imageManager.deleteId(At(this,j)),(Dt=At(this,tt))==null||Dt.remove(),ln(this,tt,null),($t=At(this,it))==null||$t.disconnect(),ln(this,it,null)),super.remove()}rebuild(){if(!this.parent){At(this,j)&&Jt(this,st,fs).call(this);return}super.rebuild(),this.div!==null&&(At(this,j)&&Jt(this,st,fs).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(At(this,$)||At(this,g)||At(this,_)||At(this,et))}get isResizable(){return!0}render(){if(this.div)return this.div;let Dt,$t;if(this.width&&(Dt=this.x,$t=this.y),super.render(),this.div.hidden=!0,At(this,g)?Jt(this,st,ro).call(this):Jt(this,st,fs).call(this),this.width){const[Bt,Vt]=this.parentDimensions;this.setAt(Dt*Bt,$t*Vt,this.width*Bt,this.height*Vt)}return this.div}static deserialize(Dt,$t,Bt){if(Dt instanceof d.StampAnnotationElement)return null;const Vt=super.deserialize(Dt,$t,Bt),{rect:Rt,bitmapUrl:vt,bitmapId:St,isSvg:Pt,accessibilityData:pt}=Dt;St&&Bt.imageManager.isValidId(St)?ln(Vt,j,St):ln(Vt,_,vt),ln(Vt,at,Pt);const[bt,Tt]=Vt.pageDimensions;return Vt.width=(Rt[2]-Rt[0])/bt,Vt.height=(Rt[3]-Rt[1])/Tt,pt&&(Vt.altTextData=pt),Vt}serialize(Dt=!1,$t=null){if(this.isEmpty())return null;const Bt={annotationType:o.AnnotationEditorType.STAMP,bitmapId:At(this,j),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:At(this,at),structTreeParentId:this._structTreeParentId};if(Dt)return Bt.bitmapUrl=Jt(this,st,ps).call(this,!0),Bt.accessibilityData=this.altTextData,Bt;const{decorative:Vt,altText:Rt}=this.altTextData;if(!Vt&&Rt&&(Bt.accessibilityData={type:"Figure",alt:Rt}),$t===null)return Bt;$t.stamps||($t.stamps=new Map);const vt=At(this,at)?(Bt.rect[2]-Bt.rect[0])*(Bt.rect[3]-Bt.rect[1]):null;if(!$t.stamps.has(At(this,j)))$t.stamps.set(At(this,j),{area:vt,serialized:Bt}),Bt.bitmap=Jt(this,st,ps).call(this,!1);else if(At(this,at)){const St=$t.stamps.get(At(this,j));vt>St.area&&(St.area=vt,St.serialized.bitmap.close(),St.serialized.bitmap=Jt(this,st,ps).call(this,!1))}return Bt}};g=new WeakMap,j=new WeakMap,$=new WeakMap,_=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,ot=new WeakMap,at=new WeakMap,rt=new WeakMap,st=new WeakSet,Ur=function(Dt,$t=!1){if(!Dt){this.remove();return}ln(this,g,Dt.bitmap),$t||(ln(this,j,Dt.id),ln(this,at,Dt.isSvg)),Jt(this,st,ro).call(this)},zr=function(){ln(this,$,null),this._uiManager.enableWaiting(!1),At(this,tt)&&this.div.focus()},fs=function(){if(At(this,j)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(At(this,j)).then($t=>Jt(this,st,Ur).call(this,$t,!0)).finally(()=>Jt(this,st,zr).call(this));return}if(At(this,_)){const $t=At(this,_);ln(this,_,null),this._uiManager.enableWaiting(!0),ln(this,$,this._uiManager.imageManager.getFromUrl($t).then(Bt=>Jt(this,st,Ur).call(this,Bt)).finally(()=>Jt(this,st,zr).call(this)));return}if(At(this,et)){const $t=At(this,et);ln(this,et,null),this._uiManager.enableWaiting(!0),ln(this,$,this._uiManager.imageManager.getFromFile($t).then(Bt=>Jt(this,st,Ur).call(this,Bt)).finally(()=>Jt(this,st,zr).call(this)));return}const Dt=document.createElement("input");Dt.type="file",Dt.accept=Et.supportedTypesStr,ln(this,$,new Promise($t=>{Dt.addEventListener("change",async()=>{if(!Dt.files||Dt.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Bt=await this._uiManager.imageManager.getFromFile(Dt.files[0]);Jt(this,st,Ur).call(this,Bt)}$t()}),Dt.addEventListener("cancel",()=>{this.remove(),$t()})}).finally(()=>Jt(this,st,zr).call(this))),Dt.click()},ro=function(){const{div:Dt}=this;let{width:$t,height:Bt}=At(this,g);const[Vt,Rt]=this.pageDimensions,vt=.75;if(this.width)$t=this.width*Vt,Bt=this.height*Rt;else if($t>vt*Vt||Bt>vt*Rt){const bt=Math.min(vt*Vt/$t,vt*Rt/Bt);$t*=bt,Bt*=bt}const[St,Pt]=this.parentDimensions;this.setDims($t*St/Vt,Bt*Pt/Rt),this._uiManager.enableWaiting(!1);const pt=ln(this,tt,document.createElement("canvas"));Dt.append(pt),Dt.hidden=!1,Jt(this,st,io).call(this,$t,Bt),Jt(this,st,Ll).call(this),At(this,rt)||(this.parent.addUndoableEditor(this),ln(this,rt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Dl=function(Dt,$t){var vt;const[Bt,Vt]=this.parentDimensions;this.width=Dt/Bt,this.height=$t/Vt,this.setDims(Dt,$t),(vt=this._initialOptions)!=null&&vt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,At(this,ot)!==null&&clearTimeout(At(this,ot)),ln(this,ot,setTimeout(()=>{ln(this,ot,null),Jt(this,st,io).call(this,Dt,$t)},200))},Ol=function(Dt,$t){const{width:Bt,height:Vt}=At(this,g);let Rt=Bt,vt=Vt,St=At(this,g);for(;Rt>2*Dt||vt>2*$t;){const Pt=Rt,pt=vt;Rt>2*Dt&&(Rt=Rt>=16384?Math.floor(Rt/2)-1:Math.ceil(Rt/2)),vt>2*$t&&(vt=vt>=16384?Math.floor(vt/2)-1:Math.ceil(vt/2));const bt=new OffscreenCanvas(Rt,vt);bt.getContext("2d").drawImage(St,0,0,Pt,pt,0,0,Rt,vt),St=bt.transferToImageBitmap()}return St},io=function(Dt,$t){Dt=Math.ceil(Dt),$t=Math.ceil($t);const Bt=At(this,tt);if(!Bt||Bt.width===Dt&&Bt.height===$t)return;Bt.width=Dt,Bt.height=$t;const Vt=At(this,at)?At(this,g):Jt(this,st,Ol).call(this,Dt,$t),Rt=Bt.getContext("2d");Rt.filter=this._uiManager.hcmFilter,Rt.drawImage(Vt,0,0,Vt.width,Vt.height,0,0,Dt,$t)},ps=function(Dt){if(Dt){if(At(this,at)){const Vt=this._uiManager.imageManager.getSvgUrl(At(this,j));if(Vt)return Vt}const $t=document.createElement("canvas");return{width:$t.width,height:$t.height}=At(this,g),$t.getContext("2d").drawImage(At(this,g),0,0),$t.toDataURL()}if(At(this,at)){const[$t,Bt]=this.pageDimensions,Vt=Math.round(this.width*$t*c.PixelsPerInch.PDF_TO_CSS_UNITS),Rt=Math.round(this.height*Bt*c.PixelsPerInch.PDF_TO_CSS_UNITS),vt=new OffscreenCanvas(Vt,Rt);return vt.getContext("2d").drawImage(At(this,g),0,0,At(this,g).width,At(this,g).height,0,0,Vt,Rt),vt.transferToImageBitmap()}return structuredClone(At(this,g))},Ll=function(){ln(this,it,new ResizeObserver(Dt=>{const $t=Dt[0].contentRect;$t.width&&$t.height&&Jt(this,st,Dl).call(this,$t.width,$t.height)})),At(this,it).observe(this.div)},qn(Et,"_type","stamp");let h=Et;e.StampEditor=h}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var e=__webpack_module_cache__[i];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[i]={exports:{}};return __webpack_modules__[i](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(i,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(i,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(i,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(i,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return d.AnnotationEditorUIManager}}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return h.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(i,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return g.GlobalWorkerOptions}}),Object.defineProperty(i,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(i,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return j.XfaLayer}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(i,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(i,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(i,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(i,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),d=__w_pdfjs_require__(5),h=__w_pdfjs_require__(29),g=__w_pdfjs_require__(14),j=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function i(o,a,c,d,h,g){if(g!==ReactPropTypesSecret){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}i.isRequired=i;function e(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(i,e,s){if(s||arguments.length===2)for(var o=0,a=e.length,c;o<a;o++)(c||!(o in e))&&(c||(c=Array.prototype.slice.call(e,0,o)),c[o]=e[o]);return i.concat(c||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(i,e){var s={};return allEvents.forEach(function(o){var a=i[o];a&&(e?s[o]=function(c){return a(c,e(o))}:s[o]=a)}),s}function makeCancellablePromise(i){var e=!1,s=new Promise(function(o,a){i.then(function(c){return!e&&o(c)}).catch(function(c){return!e&&a(c)})});return{promise:s,cancel:function(){e=!0}}}var prefix="Invariant failed";function invariant(i,e){if(!i)throw new Error(prefix)}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(i,e,s){for(s of i.keys())if(dequal(s,e))return s}function dequal(i,e){var s,o,a;if(i===e)return!0;if(i&&e&&(s=i.constructor)===e.constructor){if(s===Date)return i.getTime()===e.getTime();if(s===RegExp)return i.toString()===e.toString();if(s===Array){if((o=i.length)===e.length)for(;o--&&dequal(i[o],e[o]););return o===-1}if(s===Set){if(i.size!==e.size)return!1;for(o of i)if(a=o,a&&typeof a=="object"&&(a=find(e,a),!a)||!e.has(a))return!1;return!0}if(s===Map){if(i.size!==e.size)return!1;for(o of i)if(a=o[0],a&&typeof a=="object"&&(a=find(e,a),!a)||!dequal(o[1],e.get(a)))return!1;return!0}if(s===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(s===DataView){if((o=i.byteLength)===e.byteLength)for(;o--&&i.getInt8(o)===e.getInt8(o););return o===-1}if(ArrayBuffer.isView(i)){if((o=i.byteLength)===e.byteLength)for(;o--&&i[o]===e[o];);return o===-1}if(!s||typeof i=="object"){o=0;for(s in i)if(has.call(i,s)&&++o&&!has.call(e,s)||!(s in e)||!dequal(i[s],e[s]))return!1;return Object.keys(e).length===o}}return i!==i&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:i,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},i)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(s=>{invariant(this.pdfDocument),invariant(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(s):Array.isArray(e)?s(e):e.then(s)}).then(s=>{invariant(Array.isArray(s));const o=s[0];new Promise(a=>{invariant(this.pdfDocument),o instanceof Object?this.pdfDocument.getPageIndex(o).then(c=>{a(c)}).catch(()=>{invariant(!1)}):typeof o=="number"?a(o):invariant(!1)}).then(a=>{const c=a+1;invariant(this.pdfViewer),invariant(c>=1&&c<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:s,pageIndex:a,pageNumber:c})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const s=e-1;invariant(this.pdfViewer),invariant(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:s,pageNumber:e})}addLinkAttributes(e,s,o){e.href=s,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=o?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(i){return typeof i<"u"}function isProvided(i){return isDefined(i)&&i!==null}function isString(i){return typeof i=="string"}function isArrayBuffer(i){return i instanceof ArrayBuffer}function isBlob(i){return invariant(isBrowser),i instanceof Blob}function isDataURI(i){return isString(i)&&/^data:/.test(i)}function dataURItoByteString(i){invariant(isDataURI(i));const[e="",s=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(s):unescape(s)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(i){i&&i.cancel&&i.cancel()}function makePageCallback(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function isCancelException(i){return i.name==="RenderingCancelledException"}function loadFromFile(i){return new Promise((e,s)=>{const o=new FileReader;o.onload=()=>{if(!o.result)return s(new Error("Error while reading a file."));e(o.result)},o.onerror=a=>{if(!a.target)return s(new Error("Error while reading a file."));const{error:c}=a.target;if(!c)return s(new Error("Error while reading a file."));switch(c.code){case c.NOT_FOUND_ERR:return s(new Error("Error while reading a file: File not found."));case c.SECURITY_ERR:return s(new Error("Error while reading a file: Security error."));case c.ABORT_ERR:return s(new Error("Error while reading a file: Aborted."));default:return s(new Error("Error while reading a file."))}},o.readAsArrayBuffer(i)})}function reducer(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const i={};return allEvents.forEach(e=>{i[e]=PropTypes.func}),i})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function i(e,s,o){const{[s]:a,pageNumber:c,pdf:d}=e;if(!isDefined(d))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${s}\` of type \`${typeof a}\` supplied to \`${o}\`, expected \`number\`.`);if(a<0)return new Error(`Expected \`${s}\` to be greater or equal to 0.`);const{numPages:h}=d;if(a+1>h)return new Error(`Expected \`${s}\` to be less or equal to ${h-1}.`)}else if(!isDefined(c))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${o}\`.`);return null},isPageNumber=function i(e,s,o){const{[s]:a,pageIndex:c,pdf:d}=e;if(!isDefined(d))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${s}\` of type \`${typeof a}\` supplied to \`${o}\`, expected \`number\`.`);if(a<1)return new Error(`Expected \`${s}\` to be greater or equal to 1.`);const{numPages:h}=d;if(a>h)return new Error(`Expected \`${s}\` to be less or equal to ${h}.`)}else if(!isDefined(c))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${o}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(i,e,s,o){function a(c){return c instanceof s?c:new s(function(d){d(c)})}return new(s||(s=Promise))(function(c,d){function h($){try{j(o.next($))}catch(_){d(_)}}function g($){try{j(o.throw($))}catch(_){d(_)}}function j($){$.done?c($.value):a($.value).then(h,g)}j((o=o.apply(i,e||[])).next())})},__rest$1=function(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(s[o[a]]=i[o[a]]);return s};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(i,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const s=prompt("Enter the password to open this PDF file.");i(s);break}case PasswordResponses.INCORRECT_PASSWORD:{const s=prompt("Invalid password. Please try again.");i(s);break}}};function isParameterObject(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Document=reactExports.forwardRef(function i(e,s){var{children:o,className:a,error:c="Failed to load PDF file.",externalLinkRel:d,externalLinkTarget:h,file:g,inputRef:j,imageResourcesPath:$,loading:_="Loading PDF",noData:et="No PDF file specified.",onItemClick:tt,onLoadError:it,onLoadProgress:ot,onLoadSuccess:at,onPassword:rt=defaultOnPassword,onSourceError:st,onSourceSuccess:lt,options:mt,renderMode:ft,rotate:gt}=e,dt=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[ut,ct]=useResolver(),{value:_t,error:ht}=ut,[Et,yt]=useResolver(),{value:Ot,error:Dt}=Et,$t=reactExports.useRef(new LinkService),Bt=reactExports.useRef([]),Vt=reactExports.useRef(),Rt=reactExports.useRef();reactExports.useEffect(()=>{g&&g!==Vt.current&&isParameterObject(g)&&(warning$1(!dequal(g,Vt.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Vt.current=g)},[g]),reactExports.useEffect(()=>{mt&&mt!==Rt.current&&(warning$1(!dequal(mt,Rt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Rt.current=mt)},[mt]);const vt=reactExports.useRef({scrollPageIntoView:Ht=>{const{dest:Xt,pageNumber:It,pageIndex:Nt=It-1}=Ht;if(tt){tt({dest:Xt,pageIndex:Nt,pageNumber:It});return}const Gt=Bt.current[Nt];if(Gt){Gt.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${It} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(s,()=>({linkService:$t,pages:Bt,viewer:vt}),[]);function St(){lt&&lt()}function Pt(){ht&&(warning$1(!1,ht.toString()),st&&st(ht))}function pt(){ct({type:"RESET"})}reactExports.useEffect(pt,[g,ct]);const bt=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!g)return null;if(typeof g=="string")return isDataURI(g)?{data:dataURItoByteString(g)}:(displayCORSWarning(),{url:g});if(g instanceof PDFDataRangeTransport)return{range:g};if(isArrayBuffer(g))return{data:g};if(isBrowser&&isBlob(g))return{data:yield loadFromFile(g)};if(invariant(typeof g=="object"),invariant(isParameterObject(g)),"url"in g&&typeof g.url=="string"){if(isDataURI(g.url)){const{url:Ht}=g,Xt=__rest$1(g,["url"]),It=dataURItoByteString(Ht);return Object.assign({data:It},Xt)}displayCORSWarning()}return g}),[g]);reactExports.useEffect(()=>{const Ht=makeCancellablePromise(bt());return Ht.promise.then(Xt=>{ct({type:"RESOLVE",value:Xt})}).catch(Xt=>{ct({type:"REJECT",error:Xt})}),()=>{cancelRunningTask(Ht)}},[bt,ct]),reactExports.useEffect(()=>{if(!(typeof _t>"u")){if(_t===!1){Pt();return}St()}},[_t]);function Tt(){Ot&&(at&&at(Ot),Bt.current=new Array(Ot.numPages),$t.current.setDocument(Ot))}function Ct(){Dt&&(warning$1(!1,Dt.toString()),it&&it(Dt))}function kt(){yt({type:"RESET"})}reactExports.useEffect(kt,[yt,_t]);function Mt(){if(!_t)return;const Ht=Object.assign(Object.assign({},mt),{isEvalSupported:!1}),Xt=Object.assign(Object.assign({},_t),Ht),It=pdfjs.getDocument(Xt);ot&&(It.onProgress=ot),rt&&(It.onPassword=rt);const Nt=It;return Nt.promise.then(Gt=>{yt({type:"RESOLVE",value:Gt})}).catch(Gt=>{Nt.destroyed||yt({type:"REJECT",error:Gt})}),()=>{Nt.destroy()}}reactExports.useEffect(Mt,[mt,yt,_t]),reactExports.useEffect(()=>{if(!(typeof Ot>"u")){if(Ot===!1){Ct();return}Tt()}},[Ot]);function zt(){$t.current.setViewer(vt.current),$t.current.setExternalLinkRel(d),$t.current.setExternalLinkTarget(h)}reactExports.useEffect(zt,[d,h]);function Kt(Ht,Xt){Bt.current[Ht]=Xt}function Yt(Ht){delete Bt.current[Ht]}const rn=reactExports.useMemo(()=>({imageResourcesPath:$,linkService:$t.current,onItemClick:tt,pdf:Ot,registerPage:Kt,renderMode:ft,rotate:gt,unregisterPage:Yt}),[$,tt,Ot,ft,gt]),cn=reactExports.useMemo(()=>makeEventProps(dt,()=>Ot),[dt,Ot]);function sn(){return React.createElement(DocumentContext.Provider,{value:rn},o)}function dn(){return g?Ot==null?React.createElement(Message,{type:"loading"},typeof _=="function"?_():_):Ot===!1?React.createElement(Message,{type:"error"},typeof c=="function"?c():c):sn():React.createElement(Message,{type:"no-data"},typeof et=="function"?et():et)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",a),ref:j,style:{"--scale-factor":"1"}},cn),dn())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var s=i.filter(Boolean);if(s.length<=1){var o=s[0];return o||null}return function(c){s.forEach(function(d){typeof d=="function"?d(c):d&&(d.current=c)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(i){return i in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(i){return"children"in i}function isStructTreeNodeWithOnlyContentChild(i){return isStructTreeNode(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function getRoleAttributes(i){const e={};if(isStructTreeNode(i)){const{role:s}=i,o=s.match(HEADING_PATTERN);if(o)e.role="heading",e["aria-level"]=Number(o[1]);else if(isPdfRole(s)){const a=PDF_ROLE_TO_HTML_ROLE[s];a&&(e.role=a)}}return e}function getBaseAttributes(i){const e={};if(isStructTreeNode(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),isStructTreeNodeWithOnlyContentChild(i)){const[s]=i.children;if(s){const o=getBaseAttributes(s);return Object.assign(Object.assign({},e),o)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function getAttributes(i){return i?Object.assign(Object.assign({},getRoleAttributes(i)),getBaseAttributes(i)):null}function StructTreeItem({className:i,node:e}){const s=reactExports.useMemo(()=>getAttributes(e),[e]),o=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((a,c)=>React.createElement(StructTreeItem,{key:c,node:a})),[e]);return React.createElement("span",Object.assign({className:i},s),o)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const i=usePageContext();invariant(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:s}=i,[o,a]=useResolver(),{value:c,error:d}=o,{customTextRenderer:h,page:g}=i;function j(){c&&s&&s(c)}function $(){d&&(warning$1(!1,d.toString()),e&&e(d))}function _(){a({type:"RESET"})}reactExports.useEffect(_,[a,g]);function et(){if(h||!g)return;const tt=makeCancellablePromise(g.getStructTree()),it=tt;return tt.promise.then(ot=>{a({type:"RESOLVE",value:ot})}).catch(ot=>{a({type:"REJECT",error:ot})}),()=>cancelRunningTask(it)}return reactExports.useEffect(et,[h,g,a]),reactExports.useEffect(()=>{if(c!==void 0){if(c===!1){$();return}j()}},[c]),c?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:c}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(i){const e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},e),i),{_className:o,canvasBackground:a,devicePixelRatio:c=getDevicePixelRatio(),onRenderError:d,onRenderSuccess:h,page:g,renderForms:j,renderTextLayer:$,rotate:_,scale:et}=s,{canvasRef:tt}=i;invariant(g);const it=reactExports.useRef(null);function ot(){g&&h&&h(makePageCallback(g,et))}function at(ft){isCancelException(ft)||(warning$1(!1,ft.toString()),d&&d(ft))}const rt=reactExports.useMemo(()=>g.getViewport({scale:et*c,rotation:_}),[c,g,_,et]),st=reactExports.useMemo(()=>g.getViewport({scale:et,rotation:_}),[g,_,et]);function lt(){if(!g)return;g.cleanup();const{current:ft}=it;if(!ft)return;ft.width=rt.width,ft.height=rt.height,ft.style.width=`${Math.floor(st.width)}px`,ft.style.height=`${Math.floor(st.height)}px`,ft.style.visibility="hidden";const gt={annotationMode:j?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:ft.getContext("2d",{alpha:!1}),viewport:rt};a&&(gt.background=a);const dt=g.render(gt),ut=dt;return dt.promise.then(()=>{ft.style.visibility="",ot()}).catch(at),()=>cancelRunningTask(ut)}reactExports.useEffect(lt,[a,it,c,g,j,rt,st]);const mt=reactExports.useCallback(()=>{const{current:ft}=it;ft&&(ft.width=0,ft.height=0)},[it]);return reactExports.useEffect(()=>mt,[mt]),React.createElement("canvas",{className:`${o}__canvas`,dir:"ltr",ref:mergeRefs(tt,it),style:{display:"block",userSelect:"none"}},$?React.createElement(StructTree,null):null)}function PageSVG(){const i=usePageContext();invariant(i);const{_className:e,onRenderSuccess:s,onRenderError:o,page:a,rotate:c,scale:d}=i;invariant(a);const[h,g]=useResolver(),{value:j,error:$}=h;function _(){a&&s&&s(makePageCallback(a,d))}function et(){$&&(isCancelException($)||(warning$1(!1,$.toString()),o&&o($)))}const tt=reactExports.useMemo(()=>a.getViewport({scale:d,rotation:c}),[a,c,d]);function it(){g({type:"RESET"})}reactExports.useEffect(it,[a,g,tt]);function ot(){if(!a)return;const lt=makeCancellablePromise(a.getOperatorList());return lt.promise.then(mt=>{new pdfjs.SVGGraphics(a.commonObjs,a.objs).getSVG(mt,tt).then(gt=>{if(!(gt instanceof SVGElement))throw new Error("getSVG returned unexpected result.");g({type:"RESOLVE",value:gt})}).catch(gt=>{g({type:"REJECT",error:gt})})}).catch(mt=>{g({type:"REJECT",error:mt})}),()=>cancelRunningTask(lt)}reactExports.useEffect(ot,[a,g,tt]),reactExports.useEffect(()=>{if(j!==void 0){if(j===!1){et();return}_()}},[j]);function at(lt){if(!lt||!j)return;lt.firstElementChild||lt.appendChild(j);const{width:mt,height:ft}=tt;j.setAttribute("width",`${mt}`),j.setAttribute("height",`${ft}`)}const{width:rt,height:st}=tt;return React.createElement("div",{className:`${e}__svg`,ref:lt=>at(lt),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:rt,height:st,userSelect:"none"}})}function isTextItem(i){return"str"in i}function TextLayer(){const i=usePageContext();invariant(i);const{customTextRenderer:e,onGetTextError:s,onGetTextSuccess:o,onRenderTextLayerError:a,onRenderTextLayerSuccess:c,page:d,pageIndex:h,pageNumber:g,rotate:j,scale:$}=i;invariant(d);const[_,et]=useResolver(),{value:tt,error:it}=_,ot=reactExports.useRef(null),at=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function rt(){tt&&o&&o(tt)}function st(){it&&(warning$1(!1,it.toString()),s&&s(it))}function lt(){et({type:"RESET"})}reactExports.useEffect(lt,[d,et]);function mt(){if(!d)return;const ht=makeCancellablePromise(d.getTextContent()),Et=ht;return ht.promise.then(yt=>{et({type:"RESOLVE",value:yt})}).catch(yt=>{et({type:"REJECT",error:yt})}),()=>cancelRunningTask(Et)}reactExports.useEffect(mt,[d,et]),reactExports.useEffect(()=>{if(tt!==void 0){if(tt===!1){st();return}rt()}},[tt]);const ft=reactExports.useCallback(()=>{c&&c()},[c]),gt=reactExports.useCallback(ht=>{warning$1(!1,ht.toString()),a&&a(ht)},[a]);function dt(){const ht=at.current;ht&&ht.classList.add("active")}function ut(){const ht=at.current;ht&&ht.classList.remove("active")}const ct=reactExports.useMemo(()=>d.getViewport({scale:$,rotation:j}),[d,j,$]);function _t(){if(!d||!tt)return;const{current:ht}=ot;if(!ht)return;ht.innerHTML="";const Et=d.streamTextContent({includeMarkedContent:!0}),yt={container:ht,textContentSource:Et,viewport:ct},Ot=pdfjs.renderTextLayer(yt),Dt=Ot;return Ot.promise.then(()=>{const $t=document.createElement("div");$t.className="endOfContent",ht.append($t),at.current=$t;const Bt=ht.querySelectorAll('[role="presentation"]');if(e){let Vt=0;tt.items.forEach((Rt,vt)=>{if(!isTextItem(Rt))return;const St=Bt[Vt];if(!St)return;const Pt=e(Object.assign({pageIndex:h,pageNumber:g,itemIndex:vt},Rt));St.innerHTML=Pt,Vt+=Rt.str&&Rt.hasEOL?2:1})}ft()}).catch(gt),()=>cancelRunningTask(Dt)}return reactExports.useLayoutEffect(_t,[e,gt,ft,d,h,g,tt,ct]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:ut,onMouseDown:dt,ref:ot})}function AnnotationLayer(){const i=useDocumentContext(),e=usePageContext();invariant(e);const s=Object.assign(Object.assign({},i),e),{imageResourcesPath:o,linkService:a,onGetAnnotationsError:c,onGetAnnotationsSuccess:d,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:g,page:j,pdf:$,renderForms:_,rotate:et,scale:tt=1}=s;invariant($),invariant(j),invariant(a);const[it,ot]=useResolver(),{value:at,error:rt}=it,st=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function lt(){at&&d&&d(at)}function mt(){rt&&(warning$1(!1,rt.toString()),c&&c(rt))}function ft(){ot({type:"RESET"})}reactExports.useEffect(ft,[ot,j]);function gt(){if(!j)return;const ht=makeCancellablePromise(j.getAnnotations()),Et=ht;return ht.promise.then(yt=>{ot({type:"RESOLVE",value:yt})}).catch(yt=>{ot({type:"REJECT",error:yt})}),()=>{cancelRunningTask(Et)}}reactExports.useEffect(gt,[ot,j,_]),reactExports.useEffect(()=>{if(at!==void 0){if(at===!1){mt();return}lt()}},[at]);function dt(){g&&g()}function ut(ht){warning$1(!1,`${ht}`),h&&h(ht)}const ct=reactExports.useMemo(()=>j.getViewport({scale:tt,rotation:et}),[j,et,tt]);function _t(){if(!$||!j||!a||!at)return;const{current:ht}=st;if(!ht)return;const Et=ct.clone({dontFlip:!0}),yt={accessibilityManager:null,annotationCanvasMap:null,div:ht,l10n:null,page:j,viewport:Et},Ot={annotations:at,annotationStorage:$.annotationStorage,div:ht,downloadManager:null,imageResourcesPath:o,linkService:a,page:j,renderForms:_,viewport:Et};ht.innerHTML="";try{new pdfjs.AnnotationLayer(yt).render(Ot),dt()}catch(Dt){ut(Dt)}return()=>{}}return reactExports.useEffect(_t,[at,o,a,j,_,ct]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:st})}var __rest=function(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(s[o[a]]=i[o[a]]);return s};const defaultScale=1,Page=function i(e){const s=useDocumentContext(),o=Object.assign(Object.assign({},s),e),{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:c=!0,canvasBackground:d,canvasRef:h,children:g,className:j,customRenderer:$,customTextRenderer:_,devicePixelRatio:et,error:tt="Failed to load the page.",height:it,inputRef:ot,loading:at="Loading page",noData:rt="No page specified.",onGetAnnotationsError:st,onGetAnnotationsSuccess:lt,onGetStructTreeError:mt,onGetStructTreeSuccess:ft,onGetTextError:gt,onGetTextSuccess:dt,onLoadError:ut,onLoadSuccess:ct,onRenderAnnotationLayerError:_t,onRenderAnnotationLayerSuccess:ht,onRenderError:Et,onRenderSuccess:yt,onRenderTextLayerError:Ot,onRenderTextLayerSuccess:Dt,pageIndex:$t,pageNumber:Bt,pdf:Vt,registerPage:Rt,renderAnnotationLayer:vt=!0,renderForms:St=!1,renderMode:Pt="canvas",renderTextLayer:pt=!0,rotate:bt,scale:Tt=defaultScale,unregisterPage:Ct,width:kt}=o,Mt=__rest(o,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[zt,Kt]=useResolver(),{value:Yt,error:rn}=zt,cn=reactExports.useRef(null);invariant(Vt);const sn=isProvided(Bt)?Bt-1:$t??null,dn=Bt??(isProvided($t)?$t+1:null),Ht=bt??(Yt?Yt.rotate:null),Xt=reactExports.useMemo(()=>{if(!Yt)return null;let Pn=1;const Vn=Tt??defaultScale;if(kt||it){const Bn=Yt.getViewport({scale:1,rotation:Ht});kt?Pn=kt/Bn.width:it&&(Pn=it/Bn.height)}return Vn*Pn},[it,Yt,Ht,Tt,kt]);function It(){return()=>{isProvided(sn)&&c&&Ct&&Ct(sn)}}reactExports.useEffect(It,[c,Vt,sn,Ct]);function Nt(){if(ct){if(!Yt||!Xt)return;ct(makePageCallback(Yt,Xt))}if(c&&Rt){if(!isProvided(sn)||!cn.current)return;Rt(sn,cn.current)}}function Gt(){rn&&(warning$1(!1,rn.toString()),ut&&ut(rn))}function tn(){Kt({type:"RESET"})}reactExports.useEffect(tn,[Kt,Vt,sn]);function fn(){if(!Vt||!dn)return;const Pn=makeCancellablePromise(Vt.getPage(dn)),Vn=Pn;return Pn.promise.then(Bn=>{Kt({type:"RESOLVE",value:Bn})}).catch(Bn=>{Kt({type:"REJECT",error:Bn})}),()=>cancelRunningTask(Vn)}reactExports.useEffect(fn,[Kt,Vt,sn,dn,Rt]),reactExports.useEffect(()=>{if(Yt!==void 0){if(Yt===!1){Gt();return}Nt()}},[Yt,Xt]);const yn=reactExports.useMemo(()=>Yt&&isProvided(sn)&&dn&&isProvided(Ht)&&isProvided(Xt)?{_className:a,canvasBackground:d,customTextRenderer:_,devicePixelRatio:et,onGetAnnotationsError:st,onGetAnnotationsSuccess:lt,onGetStructTreeError:mt,onGetStructTreeSuccess:ft,onGetTextError:gt,onGetTextSuccess:dt,onRenderAnnotationLayerError:_t,onRenderAnnotationLayerSuccess:ht,onRenderError:Et,onRenderSuccess:yt,onRenderTextLayerError:Ot,onRenderTextLayerSuccess:Dt,page:Yt,pageIndex:sn,pageNumber:dn,renderForms:St,renderTextLayer:pt,rotate:Ht,scale:Xt}:null,[a,d,_,et,st,lt,mt,ft,gt,dt,_t,ht,Et,yt,Ot,Dt,Yt,sn,dn,St,pt,Ht,Xt]),gn=reactExports.useMemo(()=>makeEventProps(Mt,()=>Yt&&(Xt?makePageCallback(Yt,Xt):void 0)),[Mt,Yt,Xt]),Qt=`${sn}@${Xt}/${Ht}`,Wt=`${sn}/${Ht}`;function Zt(){switch(Pt){case"custom":return invariant($),React.createElement($,{key:`${Qt}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Wt}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Qt}_canvas`,canvasRef:h})}}function xn(){return pt?React.createElement(TextLayer,{key:`${Qt}_text`}):null}function An(){return vt?React.createElement(AnnotationLayer,{key:`${Qt}_annotations`}):null}function Cn(){return React.createElement(PageContext.Provider,{value:yn},Zt(),xn(),An(),g)}function Sn(){return dn?Vt===null||Yt===void 0||Yt===null?React.createElement(Message,{type:"loading"},typeof at=="function"?at():at):Vt===!1||Yt===!1?React.createElement(Message,{type:"error"},typeof tt=="function"?tt():tt):Cn():React.createElement(Message,{type:"no-data"},typeof rt=="function"?rt():rt)}return React.createElement("div",Object.assign({className:clsx(a,j),"data-page-number":dn,ref:mergeRefs(ot,cn),style:{"--scale-factor":`${Xt}`,backgroundColor:d||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},gn),Sn())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.js`;const PDFViewer=({pdfUrl:i,onClose:e})=>{const[s,o]=reactExports.useState(null),[a,c]=reactExports.useState(1),[d,h]=reactExports.useState(1),[g,j]=reactExports.useState(!1),$=({numPages:at})=>{o(at)},_=()=>{c(at=>Math.max(1,at-1))},et=()=>{c(at=>Math.min(s||at,at+1))},tt=()=>{h(at=>Math.min(2,at+.1))},it=()=>{h(at=>Math.max(.5,at-.1))},ot=()=>{document.fullscreenElement?(document.exitFullscreen(),j(!1)):(document.documentElement.requestFullscreen(),j(!0))};return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/90 z-50 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"text-gray-600 hover:text-gray-800",children:""}),jsxRuntimeExports.jsxs("div",{className:"text-gray-600",children:["Page ",a," of ",s]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:it,className:"p-2 text-gray-600 hover:text-gray-800",title:"Zoom Out",children:"-"}),jsxRuntimeExports.jsxs("span",{className:"text-gray-600",children:[Math.round(d*100),"%"]}),jsxRuntimeExports.jsx("button",{onClick:tt,className:"p-2 text-gray-600 hover:text-gray-800",title:"Zoom In",children:"+"}),jsxRuntimeExports.jsx("button",{onClick:ot,className:"p-2 text-gray-600 hover:text-gray-800",title:"Toggle Full Screen",children:g?"":""})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center",children:jsxRuntimeExports.jsx(Document,{file:i,onLoadSuccess:$,loading:jsxRuntimeExports.jsxs("div",{className:"text-white flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mr-2"}),"Loading PDF..."]}),error:jsxRuntimeExports.jsx("div",{className:"text-red-500",children:"Failed to load PDF. Please try again later."}),children:jsxRuntimeExports.jsx(Page,{pageNumber:a,scale:d,renderTextLayer:!0,renderAnnotationLayer:!0})})}),jsxRuntimeExports.jsxs("div",{className:"bg-white p-4 flex justify-center space-x-4",children:[jsxRuntimeExports.jsx("button",{onClick:_,disabled:a<=1,className:"px-4 py-2 bg-blue-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),jsxRuntimeExports.jsx("button",{onClick:et,disabled:a>=(s||1),className:"px-4 py-2 bg-blue-500 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})},SAMPLE_PDF="https://raw.githubusercontent.com/samora254/Kitabu/main/trial-pdf.pdf",books=[{id:"g8-math-1",title:"Grade 8 Mathematics",author:"Dennis Musau",coverImage:"/math.jpg",pdfUrl:SAMPLE_PDF,subject:"Mathematics",grade:8,description:"Comprehensive Grade 8 Mathematics textbook covering algebra, geometry, and more."},{id:"g8-eng-1",title:"Grade 8 English",author:"Dennis Musau",coverImage:"/english.jpg",pdfUrl:SAMPLE_PDF,subject:"English",grade:8,description:"Complete English textbook for Grade 8 students covering grammar, literature, and composition."},{id:"g8-kis-1",title:"Darasa la 8 Kiswahili",author:"Dennis Musau",coverImage:"/kiswahili.jpg",pdfUrl:SAMPLE_PDF,subject:"Kiswahili",grade:8,description:"Kitabu cha Kiswahili kwa wanafunzi wa darasa la nane."},{id:"g8-sci-1",title:"Grade 8 Science",author:"Dennis Musau",coverImage:"/science.jpg",pdfUrl:SAMPLE_PDF,subject:"Science",grade:8,description:"Comprehensive science textbook covering physics, chemistry, and biology."},{id:"g8-re-1",title:"Grade 8 Religious Education",author:"Dennis Musau",coverImage:"/religion.jpg",pdfUrl:SAMPLE_PDF,subject:"Religious Education",grade:8,description:"Religious education textbook for Grade 8 students."},{id:"g8-hs-1",title:"Grade 8 Home Science",author:"Dennis Musau",coverImage:"/homescience.jpg",pdfUrl:SAMPLE_PDF,subject:"Home Science",grade:8,description:"Comprehensive home science textbook for Grade 8 students."}],BookCard=({book:i,onClick:e})=>jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg overflow-hidden cursor-pointer transform hover:scale-105 transition-transform duration-200 shadow-md",onClick:e,children:[jsxRuntimeExports.jsx("div",{className:"aspect-w-3 aspect-h-4",children:jsxRuntimeExports.jsx("img",{src:i.coverImage,alt:i.title,className:"w-full h-full object-cover",onError:s=>{const o=s.target;o.onerror=null,o.src="https://raw.githubusercontent.com/samora254/Kitabu/main/book-cover-placeholder.png"}})}),jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("h3",{className:"font-bold text-sm mb-1 line-clamp-2",children:i.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-xs",children:i.author})]})]}),BookSection=({title:i,books:e,onBookClick:s})=>jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-blue-600",children:i}),jsxRuntimeExports.jsx("button",{className:"text-pink-500",children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""})})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:e.map(o=>jsxRuntimeExports.jsx(BookCard,{book:o,onClick:()=>s(o)},o.id))})]}),EBooks=()=>{const{selectedGrade:i}=useGrade(),[e,s]=reactExports.useState(null),o=books.filter(d=>d.grade===i).slice(0,3),a=books.filter(d=>d.grade===i).slice(3,6),c=books.filter(d=>d.grade===i&&(d.subject==="Mathematics"||d.subject==="Science")).slice(0,3);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-blue-900 to-blue-700 text-white p-6",children:jsxRuntimeExports.jsx("div",{className:"max-w-6xl mx-auto",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(BackButton,{className:"text-white"}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold",children:"BookSmart"})]}),jsxRuntimeExports.jsx("button",{className:"text-white",children:"Sign In"})]})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[jsxRuntimeExports.jsx(BookSection,{title:"Popular Books",books:o,onBookClick:s}),jsxRuntimeExports.jsx(BookSection,{title:"New Books",books:a,onBookClick:s}),jsxRuntimeExports.jsx(BookSection,{title:"Science, Math & Arts",books:c,onBookClick:s})]}),jsxRuntimeExports.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t",children:jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto flex justify-around py-4",children:[jsxRuntimeExports.jsxs("button",{className:"flex flex-col items-center text-blue-600",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Home"})]}),jsxRuntimeExports.jsxs("button",{className:"flex flex-col items-center text-blue-600",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"My Library"})]}),jsxRuntimeExports.jsxs("button",{className:"flex flex-col items-center text-blue-600",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Menu"})]})]})}),e&&jsxRuntimeExports.jsx(PDFViewer,{pdfUrl:e.pdfUrl,onClose:()=>s(null)})]})},ExamPaper=({subject:i,grade:e,term:s,questions:o,onBack:a})=>{const[c,d]=reactExports.useState({}),[h,g]=reactExports.useState(!1),[j,$]=reactExports.useState(!1),[_,et]=reactExports.useState(0),tt=reactExports.useRef(null),it=useNavigate(),ot=(mt,ft)=>{j||d(gt=>({...gt,[mt]:ft}))},at=()=>{let mt=0;return o.forEach((ft,gt)=>{ft.options&&c[gt]===ft.options[ft.correctAnswer]&&mt++}),mt},rt=()=>{const mt=at();et(mt),$(!0),mt/o.length>=.7&&confetti({particleCount:100,spread:70,origin:{y:.6}}),window.scrollTo({top:0,behavior:"smooth"})},st=()=>{g(!0)},lt=()=>{it("/revision-papers",{state:{generateNew:!0,subject:i,grade:e}})};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"bg-green-500 text-white p-6 relative",children:[jsxRuntimeExports.jsx("button",{onClick:a,className:"absolute top-6 left-4 text-white hover:text-gray-200 transition-colors","aria-label":"Back to Revision Papers",children:""}),jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold mb-2 capitalize",children:[i," Exam"]}),jsxRuntimeExports.jsxs("p",{className:"text-white/80",children:["Grade ",e," - ",s]})]})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[!j&&jsxRuntimeExports.jsxs("div",{className:"mb-8 p-4 bg-white rounded-lg shadow",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-2",children:"Instructions:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:"Read each question carefully before answering"}),jsxRuntimeExports.jsx("li",{children:"Answer all questions in the spaces provided"}),jsxRuntimeExports.jsx("li",{children:"Show your working where necessary"}),jsxRuntimeExports.jsx("li",{children:"You have 1 hour to complete this exam"})]})]}),j&&!h&&jsxRuntimeExports.jsxs(motion.div,{ref:tt,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 p-6 bg-white rounded-lg shadow text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Exam Complete!"}),jsxRuntimeExports.jsxs("div",{className:"text-5xl font-bold text-green-500 mb-4",children:[Math.round(_/o.length*100),"%"]}),jsxRuntimeExports.jsxs("p",{className:"text-xl mb-2",children:["You got ",_," out of ",o.length," questions correct"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-6",children:_===o.length?"Perfect score! Outstanding work! ":_>=o.length*.7?"Great job! Keep it up! ":"Good effort! Keep practicing! "}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:st,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Review Answers"}),jsxRuntimeExports.jsx("button",{onClick:lt,className:"px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"New Exam"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-6",children:o.map((mt,ft)=>jsxRuntimeExports.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start",children:[jsxRuntimeExports.jsx("span",{className:"mr-4 bg-green-100 text-green-800 px-2 py-1 rounded",children:ft+1}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-800 mb-4",children:mt.text}),mt.type==="multiple-choice"&&mt.options&&jsxRuntimeExports.jsx("div",{className:"space-y-2",children:mt.options.map((gt,dt)=>jsxRuntimeExports.jsxs("label",{className:`flex items-center space-x-3 p-2 rounded cursor-pointer transition-colors ${c[ft]===gt?"bg-blue-50 border border-blue-200":"hover:bg-gray-50"} ${j?"cursor-default":""}`,children:[jsxRuntimeExports.jsx("input",{type:"radio",name:`question-${mt.id}`,value:gt,checked:c[ft]===gt,onChange:()=>ot(ft,gt),disabled:j,className:"text-blue-600"}),jsxRuntimeExports.jsx("span",{children:gt}),h&&dt===mt.correctAnswer&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-green-600",children:""})]},dt))}),h&&mt.explanation&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-green-50 text-green-800 rounded-lg",children:[jsxRuntimeExports.jsx("strong",{children:"Explanation:"})," ",mt.explanation]})]})]})},mt.id))}),!j&&jsxRuntimeExports.jsx("div",{className:"mt-8 flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:rt,className:`px-8 py-3 rounded-lg font-medium transition-colors ${Object.keys(c).length<o.length?"bg-gray-300 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,disabled:Object.keys(c).length<o.length,children:"Submit Exam"})}),h&&jsxRuntimeExports.jsx("div",{className:"mt-8 flex justify-center",children:jsxRuntimeExports.jsx("button",{onClick:lt,className:"px-8 py-3 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 transition-colors",children:"Try Another Exam"})})]})]})},ExamCard=({subject:i,questionCount:e,onClick:s})=>jsxRuntimeExports.jsx(motion.div,{whileHover:{scale:1.02},className:"bg-white rounded-lg shadow-lg overflow-hidden cursor-pointer",onClick:s,children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-2 capitalize",children:i}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 mb-4",children:[e," questions"]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"text-green-500",children:"Start Exam"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:""})]})]})}),ExamFilters=({searchTerm:i,onSearchChange:e,selectedSubject:s,onSubjectChange:o,subjects:a})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search exams...",value:i,onChange:c=>e(c.target.value),className:"flex-1 px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-green-500"}),jsxRuntimeExports.jsx("select",{value:s,onChange:c=>o(c.target.value),className:"px-4 py-2 rounded-lg border focus:outline-none focus:ring-2 focus:ring-green-500",children:a.map(c=>jsxRuntimeExports.jsx("option",{value:c,children:c==="all"?"All Subjects":c.charAt(0).toUpperCase()+c.slice(1)},c))})]}),grade8MathematicsExam=[{id:1,text:"Solve for x: 3(x - 4) = 21",type:"multiple-choice",options:["9","11","12","15"],correctAnswer:1,explanation:"First distribute: 3x - 12 = 21, then add 12 to both sides: 3x = 33, finally divide by 3: x = 11"}],grade8EnglishExam=[{id:1,text:"What is the main purpose of a thesis statement?",type:"multiple-choice",options:["To end an essay","To state the main argument","To list all topics","To thank the reader"],correctAnswer:1,explanation:"A thesis statement presents the main argument or central idea of an essay."}],grade8KiswahiliExam=[{id:1,text:'Ni ngeli ipi sahihi ya neno "mtu"?',type:"multiple-choice",options:["KI-VI","M-WA","M-MI","JI-MA"],correctAnswer:1,explanation:'Neno "mtu" liko katika ngeli ya M-WA (mtu-watu).'}],grade8ScienceExam=[{id:1,text:"What is the main function of DNA?",type:"multiple-choice",options:["Store energy","Carry genetic information","Digest food","Filter blood"],correctAnswer:1,explanation:"DNA carries genetic information that determines traits and functions in living things."},{id:2,text:'Which organelle is known as the "powerhouse" of the cell?',type:"multiple-choice",options:["Nucleus","Mitochondria","Golgi body","Endoplasmic reticulum"],correctAnswer:1,explanation:"Mitochondria produce energy through cellular respiration."}],grade8SocialExam=[{id:1,text:"What are the three branches of government in Kenya?",type:"multiple-choice",options:["Executive, Legislative, Judiciary","President, Parliament, Police","County, National, Local","Ministers, MPs, Judges"],correctAnswer:0,explanation:"Kenya's government has three branches: Executive (implements laws), Legislative (makes laws), and Judiciary (interprets laws)."}],examSets={8:{mathematics:grade8MathematicsExam,english:grade8EnglishExam,kiswahili:grade8KiswahiliExam,science:grade8ScienceExam,social:grade8SocialExam}},RevisionPapers=()=>{const{selectedGrade:i}=useGrade(),[e,s]=reactExports.useState(""),[o,a]=reactExports.useState("all"),[c,d]=reactExports.useState(null),[h,g]=reactExports.useState(!1),j=useNavigate(),$=useLocation();reactExports.useEffect(()=>{const rt=$.state;rt!=null&&rt.generateNew&&rt.subject&&(it(rt.subject,`${rt.subject.charAt(0).toUpperCase()+rt.subject.slice(1)} Exam`),j($.pathname,{replace:!0}))},[$.state]);const _=examSets[8],et=["all",...Object.keys(_)],tt=Object.entries(_).filter(([rt])=>o!=="all"&&rt!==o?!1:e?rt.toLowerCase().includes(e.toLowerCase()):!0),it=async(rt,st)=>{g(!0);try{const lt=_[rt];if(!lt||lt.length===0){console.error("No questions found for exam:",rt);return}const ft=[...lt].sort(()=>Math.random()-.5).slice(0,20);d({subject:rt,exam:st,questions:ft})}catch(lt){console.error("Error loading exam:",lt)}finally{g(!1)}},ot=()=>{j("/home")},at=()=>{d(null)};return h?jsxRuntimeExports.jsx(LoadingSpinner,{}):c?jsxRuntimeExports.jsx(ExamPaper,{subject:c.subject,grade:i,term:"Term 1",questions:c.questions,onBack:at}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"bg-green-500 text-white p-6 relative",children:[jsxRuntimeExports.jsx("button",{onClick:ot,className:"absolute top-6 left-4 text-white hover:text-gray-200 transition-colors","aria-label":"Back to Home",children:""}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Revision Papers"}),jsxRuntimeExports.jsxs("p",{className:"text-white/80",children:["Grade ",i]})]})]}),jsxRuntimeExports.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[jsxRuntimeExports.jsx(ExamFilters,{searchTerm:e,onSearchChange:s,selectedSubject:o,onSubjectChange:a,subjects:et}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:tt.length>0?tt.map(([rt,st])=>jsxRuntimeExports.jsx(ExamCard,{subject:rt,questionCount:st.length,onClick:()=>it(rt,`${rt.charAt(0).toUpperCase()+rt.slice(1)} Exam`)},rt)):jsxRuntimeExports.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"No exams found for this filter criteria."})})]})]})},ProtectedRoute=({children:i})=>{const{user:e,loading:s}=useAuth();return s?jsxRuntimeExports.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):e?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:i}):jsxRuntimeExports.jsx(Navigate,{to:"/signin",replace:!0})},App=()=>jsxRuntimeExports.jsx(GradeProvider,{children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Landing,{})}),jsxRuntimeExports.jsx(Route,{path:"/signin",element:jsxRuntimeExports.jsx(SignIn,{})}),jsxRuntimeExports.jsx(Route,{path:"/signup",element:jsxRuntimeExports.jsx(SignUp,{})}),jsxRuntimeExports.jsx(Route,{path:"/home",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Home,{})})}),jsxRuntimeExports.jsx(Route,{path:"/profile",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Profile,{})})}),jsxRuntimeExports.jsx(Route,{path:"/subject/:subjectId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Subject,{})})}),jsxRuntimeExports.jsx(Route,{path:"/brain-tease/:subjectId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(BrainTease,{})})}),jsxRuntimeExports.jsx(Route,{path:"/quiz/:subjectId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Quiz,{})})}),jsxRuntimeExports.jsx(Route,{path:"/learning/:subjectId/:topicId",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(Learning,{})})}),jsxRuntimeExports.jsx(Route,{path:"/audio-books",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(AudioBooks,{})})}),jsxRuntimeExports.jsx(Route,{path:"/e-books",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(EBooks,{})})}),jsxRuntimeExports.jsx(Route,{path:"/revision-papers",element:jsxRuntimeExports.jsx(ProtectedRoute,{children:jsxRuntimeExports.jsx(RevisionPapers,{})})})]})})}),rootElement=document.getElementById("root");if(!rootElement)throw new Error("Failed to find the root element");const root=createRoot(rootElement);root.render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}))});export default su();
